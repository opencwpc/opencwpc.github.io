(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app-9ff03e93"],{"0276":function(t,e,r){"use strict";r("d9e2"),r("14d9"),r("13d5"),r("907a"),r("986a"),r("1d02"),r("3c5d"),r("6ce5"),r("2834"),r("4ea1"),r("669d"),r("109c"),r("b2c1"),r("0643"),r("76d6"),r("2382"),r("fffc"),r("4e3e"),r("a573"),r("9d4a"),r("9a9a"),r("88e6"),r("70cc"),r("eb03"),r("22e5"),r("c01e"),r("fa76"),r("8306");var n=r("1c35"),i=r("aecc"),s=r("5319"),o=r("8ab6"),a=r("d129"),c=r("fa13"),u=r("8df2"),l=r("9ea2"),h=r("d920"),d=r("502a"),p=r("e01f"),g=r("136e"),m=r("00e3"),b=r("fb4a");function f(t){return t&&"object"===typeof t&&"default"in t?t:{default:t}}function y(t){if(t&&"object"===typeof t&&"default"in t)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}})),e.default=t,Object.freeze(e)}var w=f(s),k=f(o),S=y(u),v=f(d),I=f(p),M=f(g);const _=i.ed25519.utils.randomPrivateKey,A=()=>{const t=i.ed25519.utils.randomPrivateKey(),e=E(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),{publicKey:e,secretKey:r}},E=i.ed25519.getPublicKey;function O(t){try{return i.ed25519.ExtendedPoint.fromHex(t),!0}catch{return!1}}const T=(t,e)=>i.ed25519.sign(t,e.slice(0,32)),j=i.ed25519.verify,B=t=>n.Buffer.isBuffer(t)?t:t instanceof Uint8Array?n.Buffer.from(t.buffer,t.byteOffset,t.byteLength):n.Buffer.from(t);class N{constructor(t){Object.assign(this,t)}encode(){return n.Buffer.from(c.serialize(L,this))}static decode(t){return c.deserialize(L,this,t)}static decodeUnchecked(t){return c.deserializeUnchecked(L,this,t)}}class x extends N{constructor(t){if(super(t),this.enum="",1!==Object.keys(t).length)throw new Error("Enum can only take single value");Object.keys(t).map(t=>{this.enum=t})}}const L=new Map;var P;let R;const z=32,U=32;function W(t){return void 0!==t._bn}let C=1;R=Symbol.toStringTag;class D extends N{constructor(t){if(super({}),this._bn=void 0,W(t))this._bn=t._bn;else{if("string"===typeof t){const e=k.default.decode(t);if(e.length!=U)throw new Error("Invalid public key input");this._bn=new w.default(e)}else this._bn=new w.default(t);if(this._bn.byteLength()>U)throw new Error("Invalid public key input")}}static unique(){const t=new D(C);return C+=1,new D(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return k.default.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(n.Buffer);if(t.length===U)return t;const e=n.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[R](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const i=n.Buffer.concat([t.toBuffer(),n.Buffer.from(e),r.toBuffer()]),s=a.sha256(i);return new D(s)}static createProgramAddressSync(t,e){let r=n.Buffer.alloc(0);t.forEach((function(t){if(t.length>z)throw new TypeError("Max seed length exceeded");r=n.Buffer.concat([r,B(t)])})),r=n.Buffer.concat([r,e.toBuffer(),n.Buffer.from("ProgramDerivedAddress")]);const i=a.sha256(r);if(O(i))throw new Error("Invalid seeds, address must fall off the curve");return new D(i)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r,i=255;while(0!=i){try{const s=t.concat(n.Buffer.from([i]));r=this.createProgramAddressSync(s,e)}catch(s){if(s instanceof TypeError)throw s;i--;continue}return[r,i]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new D(t);return O(e.toBytes())}}P=D,D.default=new P("11111111111111111111111111111111"),L.set(D,{kind:"struct",fields:[["_bn","u256"]]});class F{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){const e=B(t);if(64!==t.length)throw new Error("bad secret key size");this._publicKey=e.slice(32,64),this._secretKey=e.slice(0,32)}else this._secretKey=B(_()),this._publicKey=B(E(this._secretKey))}get publicKey(){return new D(this._publicKey)}get secretKey(){return n.Buffer.concat([this._secretKey,this._publicKey],64)}}const V=new D("BPFLoader1111111111111111111111111111111111"),K=1232,Q=127,Z=64;class H extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(H.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class q extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature `+t+" using the Solana Explorer or CLI tools."),this.signature=void 0,this.signature=t}}Object.defineProperty(q.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Y extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Y.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class G{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){const e=255;if(this.length>e+1)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((t,e)=>{r.set(t.toBase58(),e)});const n=t=>{const e=r.get(t.toBase58());if(void 0===e)throw new Error("Encountered an unknown instruction account key during compilation");return e};return t.map(t=>({programIdIndex:n(t.programId),accountKeyIndexes:t.keys.map(t=>n(t.pubkey)),data:t.data}))}}const J=(t="publicKey")=>S.blob(32,t),X=(t="signature")=>S.blob(64,t),$=(t="string")=>{const e=S.struct([S.u32("length"),S.u32("lengthPadding"),S.blob(S.offset(S.u32(),-8),"chars")],t),r=e.decode.bind(e),i=e.encode.bind(e),s=e;return s.decode=(t,e)=>{const n=r(t,e);return n["chars"].toString()},s.encode=(t,e,r)=>{const s={chars:n.Buffer.from(t,"utf8")};return i(s,e,r)},s.alloc=t=>S.u32().span+S.u32().span+n.Buffer.from(t,"utf8").length,s},tt=(t="authorized")=>S.struct([J("staker"),J("withdrawer")],t),et=(t="lockup")=>S.struct([S.ns64("unixTimestamp"),S.ns64("epoch"),J("custodian")],t),rt=(t="voteInit")=>S.struct([J("nodePubkey"),J("authorizedVoter"),J("authorizedWithdrawer"),S.u8("commission")],t),nt=(t="voteAuthorizeWithSeedArgs")=>S.struct([S.u32("voteAuthorizationType"),J("currentAuthorityDerivedKeyOwnerPubkey"),$("currentAuthorityDerivedKeySeed"),J("newAuthorized")],t);function it(t,e){const r=t=>{if(t.span>=0)return t.span;if("function"===typeof t.alloc)return t.alloc(e[t.property]);if("count"in t&&"elementLayout"in t){const n=e[t.property];if(Array.isArray(n))return n.length*r(t.elementLayout)}else if("fields"in t)return it({layout:t},e[t.property]);return 0};let n=0;return t.layout.fields.forEach(t=>{n+=r(t)}),n}function st(t){let e=0,r=0;for(;;){let n=t.shift();if(e|=(127&n)<<7*r,r+=1,0===(128&n))break}return e}function ot(t,e){let r=e;for(;;){let e=127&r;if(r>>=7,0==r){t.push(e);break}e|=128,t.push(e)}}function at(t,e){if(!t)throw new Error(e||"Assertion failed")}class ct{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,n=t=>{const e=t.toBase58();let n=r.get(e);return void 0===n&&(n={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(e,n)),n},i=n(e);i.isSigner=!0,i.isWritable=!0;for(const s of t){n(s.programId).isInvoked=!0;for(const t of s.keys){const e=n(t.pubkey);e.isSigner||(e.isSigner=t.isSigner),e.isWritable||(e.isWritable=t.isWritable)}}return new ct(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];at(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,t])=>t.isSigner&&t.isWritable),r=t.filter(([,t])=>t.isSigner&&!t.isWritable),n=t.filter(([,t])=>!t.isSigner&&t.isWritable),i=t.filter(([,t])=>!t.isSigner&&!t.isWritable),s={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{at(e.length>0,"Expected at least one writable signer key");const[t]=e[0];at(t===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const o=[...e.map(([t])=>new D(t)),...r.map(([t])=>new D(t)),...n.map(([t])=>new D(t)),...i.map(([t])=>new D(t))];return[s,o]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,t=>!t.isSigner&&!t.isInvoked&&t.isWritable),[n,i]=this.drainKeysFoundInLookupTable(t.state.addresses,t=>!t.isSigner&&!t.isInvoked&&!t.isWritable);if(0!==e.length||0!==n.length)return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:n},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,n=new Array;for(const[i,s]of this.keyMetaMap.entries())if(e(s)){const e=new D(i),s=t.findIndex(t=>t.equals(e));s>=0&&(at(s<256,"Max lookup table index exceeded"),r.push(s),n.push(e),this.keyMetaMap.delete(i))}return[r,n]}}class ut{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(t=>new D(t)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:k.default.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new G(this.staticAccountKeys)}static compile(t){const e=ct.compile(t.instructions,t.payerKey),[r,n]=e.getMessageComponents(),i=new G(n),s=i.compileInstructions(t.instructions).map(t=>({programIdIndex:t.programIdIndex,accounts:t.accountKeyIndexes,data:k.default.encode(t.data)}));return new ut({header:r,accountKeys:n,recentBlockhash:t.recentBlockhash,instructions:s})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,n=this.accountKeys.length-e,i=n-this.header.numReadonlyUnsignedAccounts;return r<i}{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];ot(e,t);const r=this.instructions.map(t=>{const{accounts:e,programIdIndex:r}=t,i=Array.from(k.default.decode(t.data));let s=[];ot(s,e.length);let o=[];return ot(o,i.length),{programIdIndex:r,keyIndicesCount:n.Buffer.from(s),keyIndices:e,dataLength:n.Buffer.from(o),data:i}});let i=[];ot(i,r.length);let s=n.Buffer.alloc(K);n.Buffer.from(i).copy(s);let o=i.length;r.forEach(t=>{const e=S.struct([S.u8("programIdIndex"),S.blob(t.keyIndicesCount.length,"keyIndicesCount"),S.seq(S.u8("keyIndex"),t.keyIndices.length,"keyIndices"),S.blob(t.dataLength.length,"dataLength"),S.seq(S.u8("userdatum"),t.data.length,"data")]),r=e.encode(t,s,o);o+=r}),s=s.slice(0,o);const a=S.struct([S.blob(1,"numRequiredSignatures"),S.blob(1,"numReadonlySignedAccounts"),S.blob(1,"numReadonlyUnsignedAccounts"),S.blob(e.length,"keyCount"),S.seq(J("key"),t,"keys"),J("recentBlockhash")]),c={numRequiredSignatures:n.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:n.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:n.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:n.Buffer.from(e),keys:this.accountKeys.map(t=>B(t.toBytes())),recentBlockhash:k.default.decode(this.recentBlockhash)};let u=n.Buffer.alloc(2048);const l=a.encode(c,u);return s.copy(u,l),u.slice(0,l+s.length)}static from(t){let e=[...t];const r=e.shift();if(r!==(r&Q))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=e.shift(),s=e.shift(),o=st(e);let a=[];for(let d=0;d<o;d++){const t=e.splice(0,U);a.push(new D(n.Buffer.from(t)))}const c=e.splice(0,U),u=st(e);let l=[];for(let d=0;d<u;d++){const t=e.shift(),r=st(e),i=e.splice(0,r),s=st(e),o=e.splice(0,s),a=k.default.encode(n.Buffer.from(o));l.push({programIdIndex:t,accounts:i,data:a})}const h={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:k.default.encode(n.Buffer.from(c)),accountKeys:a,instructions:l};return new ut(h)}}class lt{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new G(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const e=t-r,n=this.addressTableLookups.reduce((t,e)=>t+e.writableIndexes.length,0);return e<n}if(t>=this.header.numRequiredSignatures){const n=t-e,i=r-e,s=i-this.header.numReadonlyUnsignedAccounts;return n<s}{const r=e-this.header.numReadonlySignedAccounts;return t<r}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const n=t.find(t=>t.key.equals(r.accountKey));if(!n)throw new Error("Failed to find address lookup table account for table key "+r.accountKey.toBase58());for(const t of r.writableIndexes){if(!(t<n.state.addresses.length))throw new Error(`Failed to find address for index ${t} in address lookup table ${r.accountKey.toBase58()}`);e.writable.push(n.state.addresses[t])}for(const t of r.readonlyIndexes){if(!(t<n.state.addresses.length))throw new Error(`Failed to find address for index ${t} in address lookup table ${r.accountKey.toBase58()}`);e.readonly.push(n.state.addresses[t])}}return e}static compile(t){const e=ct.compile(t.instructions,t.payerKey),r=new Array,n={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const u of i){const t=e.extractTableLookup(u);if(void 0!==t){const[e,{writable:i,readonly:s}]=t;r.push(e),n.writable.push(...i),n.readonly.push(...s)}}const[s,o]=e.getMessageComponents(),a=new G(o,n),c=a.compileInstructions(t.instructions);return new lt({header:s,staticAccountKeys:o,recentBlockhash:t.recentBlockhash,compiledInstructions:c,addressTableLookups:r})}serialize(){const t=Array();ot(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();ot(r,this.compiledInstructions.length);const n=this.serializeAddressTableLookups(),i=Array();ot(i,this.addressTableLookups.length);const s=S.struct([S.u8("prefix"),S.struct([S.u8("numRequiredSignatures"),S.u8("numReadonlySignedAccounts"),S.u8("numReadonlyUnsignedAccounts")],"header"),S.blob(t.length,"staticAccountKeysLength"),S.seq(J(),this.staticAccountKeys.length,"staticAccountKeys"),J("recentBlockhash"),S.blob(r.length,"instructionsLength"),S.blob(e.length,"serializedInstructions"),S.blob(i.length,"addressTableLookupsLength"),S.blob(n.length,"serializedAddressTableLookups")]),o=new Uint8Array(K),a=128,c=s.encode({prefix:a,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(t=>t.toBytes()),recentBlockhash:k.default.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:n},o);return o.slice(0,c)}serializeInstructions(){let t=0;const e=new Uint8Array(K);for(const r of this.compiledInstructions){const n=Array();ot(n,r.accountKeyIndexes.length);const i=Array();ot(i,r.data.length);const s=S.struct([S.u8("programIdIndex"),S.blob(n.length,"encodedAccountKeyIndexesLength"),S.seq(S.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),S.blob(i.length,"encodedDataLength"),S.blob(r.data.length,"data")]);t+=s.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(n),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(K);for(const r of this.addressTableLookups){const n=Array();ot(n,r.writableIndexes.length);const i=Array();ot(i,r.readonlyIndexes.length);const s=S.struct([J("accountKey"),S.blob(n.length,"encodedWritableIndexesLength"),S.seq(S.u8(),r.writableIndexes.length,"writableIndexes"),S.blob(i.length,"encodedReadonlyIndexesLength"),S.seq(S.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=s.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(n),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=e.shift(),n=r&Q;at(r!==n,"Expected versioned message but received legacy message");const i=n;at(0===i,"Expected versioned message with version 0 but found version "+i);const s={numRequiredSignatures:e.shift(),numReadonlySignedAccounts:e.shift(),numReadonlyUnsignedAccounts:e.shift()},o=[],a=st(e);for(let p=0;p<a;p++)o.push(new D(e.splice(0,U)));const c=k.default.encode(e.splice(0,U)),u=st(e),l=[];for(let p=0;p<u;p++){const t=e.shift(),r=st(e),n=e.splice(0,r),i=st(e),s=new Uint8Array(e.splice(0,i));l.push({programIdIndex:t,accountKeyIndexes:n,data:s})}const h=st(e),d=[];for(let p=0;p<h;p++){const t=new D(e.splice(0,U)),r=st(e),n=e.splice(0,r),i=st(e),s=e.splice(0,i);d.push({accountKey:t,writableIndexes:n,readonlyIndexes:s})}return new lt({header:s,staticAccountKeys:o,recentBlockhash:c,compiledInstructions:l,addressTableLookups:d})}}const ht={deserializeMessageVersion(t){const e=t[0],r=e&Q;return r===e?"legacy":r},deserialize:t=>{const e=ht.deserializeMessageVersion(t);if("legacy"===e)return ut.from(t);if(0===e)return lt.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let dt=function(t){return t[t["BLOCKHEIGHT_EXCEEDED"]=0]="BLOCKHEIGHT_EXCEEDED",t[t["PROCESSED"]=1]="PROCESSED",t[t["TIMED_OUT"]=2]="TIMED_OUT",t[t["NONCE_INVALID"]=3]="NONCE_INVALID",t}({});const pt=n.Buffer.alloc(Z).fill(0);class gt{constructor(t){this.keys=void 0,this.programId=void 0,this.data=n.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class mt{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(0===t.length)throw new Error("No instructions");return t.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new gt(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e,r;if(this.nonceInfo?(t=this.nonceInfo.nonce,e=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");if(e.length,this.feePayer)r=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");r=this.signatures[0].publicKey}for(let g=0;g<e.length;g++)if(void 0===e[g].programId)throw new Error(`Transaction instruction index ${g} has undefined program id`);const n=[],i=[];e.forEach(t=>{t.keys.forEach(t=>{i.push({...t})});const e=t.programId.toString();n.includes(e)||n.push(e)}),n.forEach(t=>{i.push({pubkey:new D(t),isSigner:!1,isWritable:!1})});const s=[];i.forEach(t=>{const e=t.pubkey.toString(),r=s.findIndex(t=>t.pubkey.toString()===e);r>-1?(s[r].isWritable=s[r].isWritable||t.isWritable,s[r].isSigner=s[r].isSigner||t.isSigner):s.push(t)}),s.sort((function(t,e){if(t.isSigner!==e.isSigner)return t.isSigner?-1:1;if(t.isWritable!==e.isWritable)return t.isWritable?-1:1;const r={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return t.pubkey.toBase58().localeCompare(e.pubkey.toBase58(),"en",r)}));const o=s.findIndex(t=>t.pubkey.equals(r));if(o>-1){const[t]=s.splice(o,1);t.isSigner=!0,t.isWritable=!0,s.unshift(t)}else s.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const g of this.signatures){const t=s.findIndex(t=>t.pubkey.equals(g.publicKey));if(!(t>-1))throw new Error("unknown signer: "+g.publicKey.toString());s[t].isSigner||(s[t].isSigner=!0)}let a=0,c=0,u=0;const l=[],h=[];s.forEach(({pubkey:t,isSigner:e,isWritable:r})=>{e?(l.push(t.toString()),a+=1,r||(c+=1)):(h.push(t.toString()),r||(u+=1))});const d=l.concat(h),p=e.map(t=>{const{data:e,programId:r}=t;return{programIdIndex:d.indexOf(r.toString()),accounts:t.keys.map(t=>d.indexOf(t.pubkey.toString())),data:k.default.encode(e)}});return p.forEach(t=>{at(t.programIdIndex>=0),t.accounts.forEach(t=>at(t>=0))}),new ut({header:{numRequiredSignatures:a,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:u},accountKeys:d,recentBlockhash:t,instructions:p})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);if(this.signatures.length===e.length){const r=this.signatures.every((t,r)=>e[r].equals(t.publicKey));if(r)return t}return this.signatures=e.map(t=>({signature:null,publicKey:t})),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(0===t.length)throw new Error("No signers");const e=new Set;this.signatures=t.filter(t=>{const r=t.toString();return!e.has(r)&&(e.add(r),!0)}).map(t=>({signature:null,publicKey:t}))}sign(...t){if(0===t.length)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const t=i.publicKey.toString();e.has(t)||(e.add(t),r.push(i))}this.signatures=r.map(t=>({signature:null,publicKey:t.publicKey}));const n=this._compile();this._partialSign(n,...r)}partialSign(...t){if(0===t.length)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const t=i.publicKey.toString();e.has(t)||(e.add(t),r.push(i))}const n=this._compile();this._partialSign(n,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(t=>{const e=T(r,t.secretKey);this._addSignature(t.publicKey,B(e))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){at(64===e.length);const r=this.signatures.findIndex(e=>t.equals(e.publicKey));if(r<0)throw new Error("unknown signer: "+t.toString());this.signatures[r].signature=n.Buffer.from(e)}verifySignatures(t=!0){const e=this._getMessageSignednessErrors(this.serializeMessage(),t);return!e}_getMessageSignednessErrors(t,e){const r={};for(const{signature:n,publicKey:i}of this.signatures)null===n?e&&(r.missing||(r.missing=[])).push(i):j(n,t,i.toBytes())||(r.invalid||(r.invalid=[])).push(i);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),n=this.serializeMessage();if(r){const t=this._getMessageSignednessErrors(n,e);if(t){let e="Signature verification failed.";throw t.invalid&&(e+=`\nInvalid signature for public key${1===t.invalid.length?"":"(s)"} [\`${t.invalid.map(t=>t.toBase58()).join("`, `")}\`].`),t.missing&&(e+=`\nMissing signature for public key${1===t.missing.length?"":"(s)"} [\`${t.missing.map(t=>t.toBase58()).join("`, `")}\`].`),new Error(e)}}return this._serialize(n)}_serialize(t){const{signatures:e}=this,r=[];ot(r,e.length);const i=r.length+64*e.length+t.length,s=n.Buffer.alloc(i);return at(e.length<256),n.Buffer.from(r).copy(s,0),e.forEach(({signature:t},e)=>{null!==t&&(at(64===t.length,"signature has invalid length"),n.Buffer.from(t).copy(s,r.length+64*e))}),t.copy(s,r.length+64*e.length),at(s.length<=K,`Transaction too large: ${s.length} > ${K}`),s}get keys(){return at(1===this.instructions.length),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return at(1===this.instructions.length),this.instructions[0].programId}get data(){return at(1===this.instructions.length),this.instructions[0].data}static from(t){let e=[...t];const r=st(e);let i=[];for(let s=0;s<r;s++){const t=e.splice(0,Z);i.push(k.default.encode(n.Buffer.from(t)))}return mt.populate(ut.from(e),i)}static populate(t,e=[]){const r=new mt;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((e,n)=>{const i={signature:e==k.default.encode(pt)?null:k.default.decode(e),publicKey:t.accountKeys[n]};r.signatures.push(i)}),t.instructions.forEach(e=>{const n=e.accounts.map(e=>{const n=t.accountKeys[e];return{pubkey:n,isSigner:r.signatures.some(t=>t.publicKey.toString()===n.toString())||t.isAccountSigner(e),isWritable:t.isAccountWritable(e)}});r.instructions.push(new gt({keys:n,programId:t.accountKeys[e.programIdIndex],data:k.default.decode(e.data)}))}),r._message=t,r._json=r.toJSON(),r}}class bt{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){const{header:r,compiledInstructions:n,recentBlockhash:i}=t,{numRequiredSignatures:s,numReadonlySignedAccounts:o,numReadonlyUnsignedAccounts:a}=r,c=s-o;at(c>0,"Message header is invalid");const u=t.staticAccountKeys.length-s-a;at(u>=0,"Message header is invalid");const l=t.getAccountKeys(e),h=l.get(0);if(void 0===h)throw new Error("Failed to decompile message because no account keys were found");const d=[];for(const p of n){const t=[];for(const n of p.accountKeyIndexes){const e=l.get(n);if(void 0===e)throw new Error("Failed to find key for account key index "+n);const i=n<s;let o;o=i?n<c:n<l.staticAccountKeys.length?n-s<u:n-l.staticAccountKeys.length<l.accountKeysFromLookups.writable.length,t.push({pubkey:e,isSigner:n<r.numRequiredSignatures,isWritable:o})}const e=l.get(p.programIdIndex);if(void 0===e)throw new Error("Failed to find program id for program id index "+p.programIdIndex);d.push(new gt({programId:e,data:B(p.data),keys:t}))}return new bt({payerKey:h,instructions:d,recentBlockhash:i})}compileToLegacyMessage(){return ut.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return lt.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}}class ft{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,void 0!==e)at(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const e=[];for(let r=0;r<t.header.numRequiredSignatures;r++)e.push(new Uint8Array(Z));this.signatures=e}this.message=t}serialize(){const t=this.message.serialize(),e=Array();ot(e,this.signatures.length);const r=S.struct([S.blob(e.length,"encodedSignaturesLength"),S.seq(X(),this.signatures.length,"signatures"),S.blob(t.length,"serializedMessage")]),n=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},n);return n.slice(0,i)}static deserialize(t){let e=[...t];const r=[],n=st(e);for(let s=0;s<n;s++)r.push(new Uint8Array(e.splice(0,Z)));const i=ht.deserialize(new Uint8Array(e));return new ft(i,r)}sign(t){const e=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const n of t){const t=r.findIndex(t=>t.equals(n.publicKey));at(t>=0,"Cannot sign with non signer key "+n.publicKey.toBase58()),this.signatures[t]=T(e,n.secretKey)}}addSignature(t,e){at(64===e.byteLength,"Signature must be 64 bytes long");const r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures),n=r.findIndex(e=>e.equals(t));at(n>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[n]=e}}const yt=160,wt=64,kt=yt/wt,St=1e3/kt,vt=new D("SysvarC1ock11111111111111111111111111111111"),It=new D("SysvarEpochSchedu1e111111111111111111111111"),Mt=new D("Sysvar1nstructions1111111111111111111111111"),_t=new D("SysvarRecentB1ockHashes11111111111111111111"),At=new D("SysvarRent111111111111111111111111111111111"),Et=new D("SysvarRewards111111111111111111111111111111"),Ot=new D("SysvarS1otHashes111111111111111111111111111"),Tt=new D("SysvarS1otHistory11111111111111111111111111"),jt=new D("SysvarStakeHistory1111111111111111111111111");async function Bt(t,e,r,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await t.sendTransaction(e,r,i);let o;if(null!=e.recentBlockhash&&null!=e.lastValidBlockHeight)o=(await t.confirmTransaction({abortSignal:null===n||void 0===n?void 0:n.abortSignal,signature:s,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(null!=e.minNonceContextSlot&&null!=e.nonceInfo){const{nonceInstruction:r}=e.nonceInfo,i=r.keys[0].pubkey;o=(await t.confirmTransaction({abortSignal:null===n||void 0===n?void 0:n.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:i,nonceValue:e.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else null===n||void 0===n||n.abortSignal,o=(await t.confirmTransaction(s,n&&n.commitment)).value;if(o.err)throw new Error(`Transaction ${s} failed (${JSON.stringify(o)})`);return s}function Nt(t){return new Promise(e=>setTimeout(e,t))}function xt(t,e){const r=t.layout.span>=0?t.layout.span:it(t,e),i=n.Buffer.alloc(r),s=Object.assign({instruction:t.index},e);return t.layout.encode(s,i),i}function Lt(t,e){let r;try{r=t.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(r.instruction!==t.index)throw new Error(`invalid instruction; instruction index mismatch ${r.instruction} != ${t.index}`);return r}const Pt=S.nu64("lamportsPerSignature"),Rt=S.struct([S.u32("version"),S.u32("state"),J("authorizedPubkey"),J("nonce"),S.struct([Pt],"feeCalculator")]),zt=Rt.span;class Ut{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=Rt.decode(B(t),0);return new Ut({authorizedPubkey:new D(e.authorizedPubkey),nonce:new D(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const Wt=t=>{const e=t.decode.bind(t),r=t.encode.bind(t);return{decode:e,encode:r}},Ct=t=>e=>{const r=u.blob(t,e),{encode:i,decode:s}=Wt(r),o=r;return o.decode=(t,e)=>{const r=s(t,e);return l.toBigIntLE(n.Buffer.from(r))},o.encode=(e,r,n)=>{const s=l.toBufferLE(e,t);return i(s,r,n)},o},Dt=Ct(8);class Ft{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=S.u32("instruction"),r=e.decode(t.data);let n;for(const[i,s]of Object.entries(Vt))if(s.index==r){n=i;break}if(!n)throw new Error("Instruction type incorrect; not a SystemInstruction");return n}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e,space:r,programId:n}=Lt(Vt.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:e,space:r,programId:new D(n)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e}=Lt(Vt.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:e}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e,seed:r,programId:n}=Lt(Vt.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:e,seed:r,programId:new D(n)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{space:e}=Lt(Vt.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:e}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,space:n,programId:i}=Lt(Vt.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new D(e),seed:r,space:n,programId:new D(i)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{programId:e}=Lt(Vt.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new D(e)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,programId:n}=Lt(Vt.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new D(e),seed:r,programId:new D(n)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{base:e,seed:r,lamports:n,space:i,programId:s}=Lt(Vt.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new D(e),seed:r,lamports:n,space:i,programId:new D(s)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{authorized:e}=Lt(Vt.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new D(e)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Lt(Vt.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=Lt(Vt.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e}=Lt(Vt.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new D(e)}}static checkProgramId(t){if(!t.equals(Kt.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Vt=Object.freeze({Create:{index:0,layout:S.struct([S.u32("instruction"),S.ns64("lamports"),S.ns64("space"),J("programId")])},Assign:{index:1,layout:S.struct([S.u32("instruction"),J("programId")])},Transfer:{index:2,layout:S.struct([S.u32("instruction"),Dt("lamports")])},CreateWithSeed:{index:3,layout:S.struct([S.u32("instruction"),J("base"),$("seed"),S.ns64("lamports"),S.ns64("space"),J("programId")])},AdvanceNonceAccount:{index:4,layout:S.struct([S.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:S.struct([S.u32("instruction"),S.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:S.struct([S.u32("instruction"),J("authorized")])},AuthorizeNonceAccount:{index:7,layout:S.struct([S.u32("instruction"),J("authorized")])},Allocate:{index:8,layout:S.struct([S.u32("instruction"),S.ns64("space")])},AllocateWithSeed:{index:9,layout:S.struct([S.u32("instruction"),J("base"),$("seed"),S.ns64("space"),J("programId")])},AssignWithSeed:{index:10,layout:S.struct([S.u32("instruction"),J("base"),$("seed"),J("programId")])},TransferWithSeed:{index:11,layout:S.struct([S.u32("instruction"),Dt("lamports"),$("seed"),J("programId")])},UpgradeNonceAccount:{index:12,layout:S.struct([S.u32("instruction")])}});class Kt{constructor(){}static createAccount(t){const e=Vt.Create,r=xt(e,{lamports:t.lamports,space:t.space,programId:B(t.programId.toBuffer())});return new gt({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(t){let e,r;if("basePubkey"in t){const n=Vt.TransferWithSeed;e=xt(n,{lamports:BigInt(t.lamports),seed:t.seed,programId:B(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const n=Vt.Transfer;e=xt(n,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new gt({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){const n=Vt.AssignWithSeed;e=xt(n,{base:B(t.basePubkey.toBuffer()),seed:t.seed,programId:B(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const n=Vt.Assign;e=xt(n,{programId:B(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new gt({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=Vt.CreateWithSeed,r=xt(e,{base:B(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:B(t.programId.toBuffer())});let n=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey!=t.fromPubkey&&n.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new gt({keys:n,programId:this.programId,data:r})}static createNonceAccount(t){const e=new mt;"basePubkey"in t&&"seed"in t?e.add(Kt.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:zt,programId:this.programId})):e.add(Kt.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:zt,programId:this.programId}));const r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){const e=Vt.InitializeNonceAccount,r=xt(e,{authorized:B(t.authorizedPubkey.toBuffer())}),n={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:_t,isSigner:!1,isWritable:!1},{pubkey:At,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new gt(n)}static nonceAdvance(t){const e=Vt.AdvanceNonceAccount,r=xt(e),n={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:_t,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new gt(n)}static nonceWithdraw(t){const e=Vt.WithdrawNonceAccount,r=xt(e,{lamports:t.lamports});return new gt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:_t,isSigner:!1,isWritable:!1},{pubkey:At,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(t){const e=Vt.AuthorizeNonceAccount,r=xt(e,{authorized:B(t.newAuthorizedPubkey.toBuffer())});return new gt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(t){let e,r;if("basePubkey"in t){const n=Vt.AllocateWithSeed;e=xt(n,{base:B(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:B(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const n=Vt.Allocate;e=xt(n,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new gt({keys:r,programId:this.programId,data:e})}}Kt.programId=new D("11111111111111111111111111111111");const Qt=K-300;class Zt{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/Zt.chunkSize)+1+1)}static async load(t,e,r,i,s){{const n=await t.getMinimumBalanceForRentExemption(s.length),o=await t.getAccountInfo(r.publicKey,"confirmed");let a=null;if(null!==o){if(o.executable)return!1;o.data.length!==s.length&&(a=a||new mt,a.add(Kt.allocate({accountPubkey:r.publicKey,space:s.length}))),o.owner.equals(i)||(a=a||new mt,a.add(Kt.assign({accountPubkey:r.publicKey,programId:i}))),o.lamports<n&&(a=a||new mt,a.add(Kt.transfer({fromPubkey:e.publicKey,toPubkey:r.publicKey,lamports:n-o.lamports})))}else a=(new mt).add(Kt.createAccount({fromPubkey:e.publicKey,newAccountPubkey:r.publicKey,lamports:n>0?n:1,space:s.length,programId:i}));null!==a&&await Bt(t,a,[e,r],{commitment:"confirmed"})}const o=S.struct([S.u32("instruction"),S.u32("offset"),S.u32("bytesLength"),S.u32("bytesLengthPadding"),S.seq(S.u8("byte"),S.offset(S.u32(),-8),"bytes")]),a=Zt.chunkSize;let c=0,u=s,l=[];while(u.length>0){const s=u.slice(0,a),h=n.Buffer.alloc(a+16);o.encode({instruction:0,offset:c,bytes:s,bytesLength:0,bytesLengthPadding:0},h);const d=(new mt).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:h});if(l.push(Bt(t,d,[e,r],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")){const t=4;await Nt(1e3/t)}c+=a,u=u.slice(a)}await Promise.all(l);{const s=S.struct([S.u32("instruction")]),o=n.Buffer.alloc(s.span);s.encode({instruction:1},o);const a=(new mt).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:At,isSigner:!1,isWritable:!1}],programId:i,data:o}),c="processed",u=await t.sendTransaction(a,[e,r],{preflightCommitment:c}),{context:l,value:h}=await t.confirmTransaction({signature:u,lastValidBlockHeight:a.lastValidBlockHeight,blockhash:a.recentBlockhash},c);if(h.err)throw new Error(`Transaction ${u} failed (${JSON.stringify(h)})`);while(1){try{const e=await t.getSlot({commitment:c});if(e>l.slot)break}catch{}await new Promise(t=>setTimeout(t,Math.round(St/2)))}}return!0}}Zt.chunkSize=Qt;const Ht=new D("BPFLoader2111111111111111111111111111111111");class qt{static getMinNumSignatures(t){return Zt.getMinNumSignatures(t)}static load(t,e,r,n,i){return Zt.load(t,e,r,i,n)}}function Yt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t["default"]:t}var Gt=Object.prototype.toString,Jt=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};function Xt(t,e){var r,n,i,s,o,a,c;if(!0===t)return"true";if(!1===t)return"false";switch(typeof t){case"object":if(null===t)return null;if(t.toJSON&&"function"===typeof t.toJSON)return Xt(t.toJSON(),e);if(c=Gt.call(t),"[object Array]"===c){for(i="[",n=t.length-1,r=0;r<n;r++)i+=Xt(t[r],!0)+",";return n>-1&&(i+=Xt(t[r],!0)),i+"]"}if("[object Object]"===c){s=Jt(t).sort(),n=s.length,i="",r=0;while(r<n)o=s[r],a=Xt(t[o],!1),void 0!==a&&(i&&(i+=","),i+=JSON.stringify(o)+":"+a),r++;return"{"+i+"}"}return JSON.stringify(t);case"function":case"undefined":return e?null:void 0;case"string":return JSON.stringify(t);default:return isFinite(t)?t:null}}var $t=function(t){var e=Xt(t,!1);if(void 0!==e)return""+e},te=Yt($t);const ee=32;function re(t){let e=0;while(t>1)t/=2,e++;return e}function ne(t){return 0===t?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,t+1)}class ie{constructor(t,e,r,n,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=n,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=re(ne(t+ee+1))-re(ee)-1,r=this.getSlotsInEpoch(e),n=t-(r-ee);return[e,n]}{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),n=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[n,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*ee:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+re(ee)):this.slotsPerEpoch}}class se extends Error{constructor(t,e){super(t),this.logs=void 0,this.logs=e}}const oe={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class ae extends Error{constructor({code:t,message:e,data:r},n){super(null!=n?`${n}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}var ce=globalThis.fetch;class ue extends I.default{constructor(t,e,r){const n=t=>{const r=M.default(t,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return this.underlyingSocket="socket"in r?r.socket:r,r};super(n,t,e,r),this.underlyingSocket=void 0}call(...t){var e;const r=null===(e=this.underlyingSocket)||void 0===e?void 0:e.readyState;return 1===r?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}notify(...t){var e;const r=null===(e=this.underlyingSocket)||void 0===e?void 0:e.readyState;return 1===r?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}}function le(t,e){let r;try{r=t.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(r.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${r.typeIndex} != ${t.index}`);return r}const he=56;class de{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=le(pe,t),r=t.length-he;at(r>=0,"lookup table is invalid"),at(r%32===0,"lookup table is invalid");const n=r/32,{addresses:i}=S.struct([S.seq(J(),n,"addresses")]).decode(t.slice(he));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:0!==e.authority.length?new D(e.authority[0]):void 0,addresses:i.map(t=>new D(t))}}}const pe={index:1,layout:S.struct([S.u32("typeIndex"),Dt("deactivationSlot"),S.nu64("lastExtendedSlot"),S.u8("lastExtendedStartIndex"),S.u8(),S.seq(J(),S.offset(S.u8(),-1),"authority")])},ge=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function me(t){const e=t.match(ge);if(null==e)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[r,n,i,s]=e,o=t.startsWith("https:")?"wss:":"ws:",a=null==i?null:parseInt(i.slice(1),10),c=null==a?"":":"+(a+1);return`${o}//${n}${c}${s}`}const be=h.coerce(h.instance(D),h.string(),t=>new D(t)),fe=h.tuple([h.string(),h.literal("base64")]),ye=h.coerce(h.instance(n.Buffer),fe,t=>n.Buffer.from(t[0],"base64")),we=3e4;function ke(t){if(!1===/^https?:/.test(t))throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}function Se(t){let e,r;if("string"===typeof t)e=t;else if(t){const{commitment:n,...i}=t;e=n,r=i}return{commitment:e,config:r}}function ve(t){return h.union([h.type({jsonrpc:h.literal("2.0"),id:h.string(),result:t}),h.type({jsonrpc:h.literal("2.0"),id:h.string(),error:h.type({code:h.unknown(),message:h.string(),data:h.optional(h.any())})})])}const Ie=ve(h.unknown());function Me(t){return h.coerce(ve(t),Ie,e=>"error"in e?e:{...e,result:h.create(e.result,t)})}function _e(t){return Me(h.type({context:h.type({slot:h.number()}),value:t}))}function Ae(t){return h.type({context:h.type({slot:h.number()}),value:t})}function Ee(t,e){return 0===t?new lt({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new D(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:k.default.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new ut(e)}const Oe=h.type({foundation:h.number(),foundationTerm:h.number(),initial:h.number(),taper:h.number(),terminal:h.number()}),Te=Me(h.array(h.nullable(h.type({epoch:h.number(),effectiveSlot:h.number(),amount:h.number(),postBalance:h.number(),commission:h.optional(h.nullable(h.number()))})))),je=h.array(h.type({slot:h.number(),prioritizationFee:h.number()})),Be=h.type({total:h.number(),validator:h.number(),foundation:h.number(),epoch:h.number()}),Ne=h.type({epoch:h.number(),slotIndex:h.number(),slotsInEpoch:h.number(),absoluteSlot:h.number(),blockHeight:h.optional(h.number()),transactionCount:h.optional(h.number())}),xe=h.type({slotsPerEpoch:h.number(),leaderScheduleSlotOffset:h.number(),warmup:h.boolean(),firstNormalEpoch:h.number(),firstNormalSlot:h.number()}),Le=h.record(h.string(),h.array(h.number())),Pe=h.nullable(h.union([h.type({}),h.string()])),Re=h.type({err:Pe}),ze=h.literal("receivedSignature"),Ue=h.type({"solana-core":h.string(),"feature-set":h.optional(h.number())}),We=_e(h.type({err:h.nullable(h.union([h.type({}),h.string()])),logs:h.nullable(h.array(h.string())),accounts:h.optional(h.nullable(h.array(h.nullable(h.type({executable:h.boolean(),owner:h.string(),lamports:h.number(),data:h.array(h.string()),rentEpoch:h.optional(h.number())}))))),unitsConsumed:h.optional(h.number()),returnData:h.optional(h.nullable(h.type({programId:h.string(),data:h.tuple([h.string(),h.literal("base64")])})))})),Ce=_e(h.type({byIdentity:h.record(h.string(),h.array(h.number())),range:h.type({firstSlot:h.number(),lastSlot:h.number()})}));function De(t,e,r,n,i,s){const o=r||ce;let a,c;n&&(c=async(t,e)=>{const r=await new Promise((r,i)=>{try{n(t,e,(t,e)=>r([t,e]))}catch(s){i(s)}});return await o(...r)});const u=new v.default(async(r,n)=>{const s={method:"POST",body:r,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},hn)};try{let e,r=5,a=500;for(;;){if(e=c?await c(t,s):await o(t,s),429!==e.status)break;if(!0===i)break;if(r-=1,0===r)break;await Nt(a),a*=2}const u=await e.text();e.ok?n(null,u):n(new Error(`${e.status} ${e.statusText}: ${u}`))}catch(u){u instanceof Error&&n(u)}},{});return u}function Fe(t){return(e,r)=>new Promise((n,i)=>{t.request(e,r,(t,e)=>{t?i(t):n(e)})})}function Ve(t){return e=>new Promise((r,n)=>{0===e.length&&r([]);const i=e.map(e=>t.request(e.methodName,e.args));t.request(i,(t,e)=>{t?n(t):r(e)})})}const Ke=Me(Oe),Qe=Me(Be),Ze=Me(je),He=Me(Ne),qe=Me(xe),Ye=Me(Le),Ge=Me(h.number()),Je=_e(h.type({total:h.number(),circulating:h.number(),nonCirculating:h.number(),nonCirculatingAccounts:h.array(be)})),Xe=h.type({amount:h.string(),uiAmount:h.nullable(h.number()),decimals:h.number(),uiAmountString:h.optional(h.string())}),$e=_e(h.array(h.type({address:be,amount:h.string(),uiAmount:h.nullable(h.number()),decimals:h.number(),uiAmountString:h.optional(h.string())}))),tr=_e(h.array(h.type({pubkey:be,account:h.type({executable:h.boolean(),owner:be,lamports:h.number(),data:ye,rentEpoch:h.number()})}))),er=h.type({program:h.string(),parsed:h.unknown(),space:h.number()}),rr=_e(h.array(h.type({pubkey:be,account:h.type({executable:h.boolean(),owner:be,lamports:h.number(),data:er,rentEpoch:h.number()})}))),nr=_e(h.array(h.type({lamports:h.number(),address:be}))),ir=h.type({executable:h.boolean(),owner:be,lamports:h.number(),data:ye,rentEpoch:h.number()}),sr=h.type({pubkey:be,account:ir}),or=h.coerce(h.union([h.instance(n.Buffer),er]),h.union([fe,er]),t=>Array.isArray(t)?h.create(t,ye):t),ar=h.type({executable:h.boolean(),owner:be,lamports:h.number(),data:or,rentEpoch:h.number()}),cr=h.type({pubkey:be,account:ar}),ur=h.type({state:h.union([h.literal("active"),h.literal("inactive"),h.literal("activating"),h.literal("deactivating")]),active:h.number(),inactive:h.number()}),lr=Me(h.array(h.type({signature:h.string(),slot:h.number(),err:Pe,memo:h.nullable(h.string()),blockTime:h.optional(h.nullable(h.number()))}))),hr=Me(h.array(h.type({signature:h.string(),slot:h.number(),err:Pe,memo:h.nullable(h.string()),blockTime:h.optional(h.nullable(h.number()))}))),dr=h.type({subscription:h.number(),result:Ae(ir)}),pr=h.type({pubkey:be,account:ir}),gr=h.type({subscription:h.number(),result:Ae(pr)}),mr=h.type({parent:h.number(),slot:h.number(),root:h.number()}),br=h.type({subscription:h.number(),result:mr}),fr=h.union([h.type({type:h.union([h.literal("firstShredReceived"),h.literal("completed"),h.literal("optimisticConfirmation"),h.literal("root")]),slot:h.number(),timestamp:h.number()}),h.type({type:h.literal("createdBank"),parent:h.number(),slot:h.number(),timestamp:h.number()}),h.type({type:h.literal("frozen"),slot:h.number(),timestamp:h.number(),stats:h.type({numTransactionEntries:h.number(),numSuccessfulTransactions:h.number(),numFailedTransactions:h.number(),maxTransactionsPerEntry:h.number()})}),h.type({type:h.literal("dead"),slot:h.number(),timestamp:h.number(),err:h.string()})]),yr=h.type({subscription:h.number(),result:fr}),wr=h.type({subscription:h.number(),result:Ae(h.union([Re,ze]))}),kr=h.type({subscription:h.number(),result:h.number()}),Sr=h.type({pubkey:h.string(),gossip:h.nullable(h.string()),tpu:h.nullable(h.string()),rpc:h.nullable(h.string()),version:h.nullable(h.string())}),vr=h.type({votePubkey:h.string(),nodePubkey:h.string(),activatedStake:h.number(),epochVoteAccount:h.boolean(),epochCredits:h.array(h.tuple([h.number(),h.number(),h.number()])),commission:h.number(),lastVote:h.number(),rootSlot:h.nullable(h.number())}),Ir=Me(h.type({current:h.array(vr),delinquent:h.array(vr)})),Mr=h.union([h.literal("processed"),h.literal("confirmed"),h.literal("finalized")]),_r=h.type({slot:h.number(),confirmations:h.nullable(h.number()),err:Pe,confirmationStatus:h.optional(Mr)}),Ar=_e(h.array(h.nullable(_r))),Er=Me(h.number()),Or=h.type({accountKey:be,writableIndexes:h.array(h.number()),readonlyIndexes:h.array(h.number())}),Tr=h.type({signatures:h.array(h.string()),message:h.type({accountKeys:h.array(h.string()),header:h.type({numRequiredSignatures:h.number(),numReadonlySignedAccounts:h.number(),numReadonlyUnsignedAccounts:h.number()}),instructions:h.array(h.type({accounts:h.array(h.number()),data:h.string(),programIdIndex:h.number()})),recentBlockhash:h.string(),addressTableLookups:h.optional(h.array(Or))})}),jr=h.type({pubkey:be,signer:h.boolean(),writable:h.boolean(),source:h.optional(h.union([h.literal("transaction"),h.literal("lookupTable")]))}),Br=h.type({accountKeys:h.array(jr),signatures:h.array(h.string())}),Nr=h.type({parsed:h.unknown(),program:h.string(),programId:be}),xr=h.type({accounts:h.array(be),data:h.string(),programId:be}),Lr=h.union([xr,Nr]),Pr=h.union([h.type({parsed:h.unknown(),program:h.string(),programId:h.string()}),h.type({accounts:h.array(h.string()),data:h.string(),programId:h.string()})]),Rr=h.coerce(Lr,Pr,t=>"accounts"in t?h.create(t,xr):h.create(t,Nr)),zr=h.type({signatures:h.array(h.string()),message:h.type({accountKeys:h.array(jr),instructions:h.array(Rr),recentBlockhash:h.string(),addressTableLookups:h.optional(h.nullable(h.array(Or)))})}),Ur=h.type({accountIndex:h.number(),mint:h.string(),owner:h.optional(h.string()),uiTokenAmount:Xe}),Wr=h.type({writable:h.array(be),readonly:h.array(be)}),Cr=h.type({err:Pe,fee:h.number(),innerInstructions:h.optional(h.nullable(h.array(h.type({index:h.number(),instructions:h.array(h.type({accounts:h.array(h.number()),data:h.string(),programIdIndex:h.number()}))})))),preBalances:h.array(h.number()),postBalances:h.array(h.number()),logMessages:h.optional(h.nullable(h.array(h.string()))),preTokenBalances:h.optional(h.nullable(h.array(Ur))),postTokenBalances:h.optional(h.nullable(h.array(Ur))),loadedAddresses:h.optional(Wr),computeUnitsConsumed:h.optional(h.number())}),Dr=h.type({err:Pe,fee:h.number(),innerInstructions:h.optional(h.nullable(h.array(h.type({index:h.number(),instructions:h.array(Rr)})))),preBalances:h.array(h.number()),postBalances:h.array(h.number()),logMessages:h.optional(h.nullable(h.array(h.string()))),preTokenBalances:h.optional(h.nullable(h.array(Ur))),postTokenBalances:h.optional(h.nullable(h.array(Ur))),loadedAddresses:h.optional(Wr),computeUnitsConsumed:h.optional(h.number())}),Fr=h.union([h.literal(0),h.literal("legacy")]),Vr=h.type({pubkey:h.string(),lamports:h.number(),postBalance:h.nullable(h.number()),rewardType:h.nullable(h.string()),commission:h.optional(h.nullable(h.number()))}),Kr=Me(h.nullable(h.type({blockhash:h.string(),previousBlockhash:h.string(),parentSlot:h.number(),transactions:h.array(h.type({transaction:Tr,meta:h.nullable(Cr),version:h.optional(Fr)})),rewards:h.optional(h.array(Vr)),blockTime:h.nullable(h.number()),blockHeight:h.nullable(h.number())}))),Qr=Me(h.nullable(h.type({blockhash:h.string(),previousBlockhash:h.string(),parentSlot:h.number(),rewards:h.optional(h.array(Vr)),blockTime:h.nullable(h.number()),blockHeight:h.nullable(h.number())}))),Zr=Me(h.nullable(h.type({blockhash:h.string(),previousBlockhash:h.string(),parentSlot:h.number(),transactions:h.array(h.type({transaction:Br,meta:h.nullable(Cr),version:h.optional(Fr)})),rewards:h.optional(h.array(Vr)),blockTime:h.nullable(h.number()),blockHeight:h.nullable(h.number())}))),Hr=Me(h.nullable(h.type({blockhash:h.string(),previousBlockhash:h.string(),parentSlot:h.number(),transactions:h.array(h.type({transaction:zr,meta:h.nullable(Dr),version:h.optional(Fr)})),rewards:h.optional(h.array(Vr)),blockTime:h.nullable(h.number()),blockHeight:h.nullable(h.number())}))),qr=Me(h.nullable(h.type({blockhash:h.string(),previousBlockhash:h.string(),parentSlot:h.number(),transactions:h.array(h.type({transaction:Br,meta:h.nullable(Dr),version:h.optional(Fr)})),rewards:h.optional(h.array(Vr)),blockTime:h.nullable(h.number()),blockHeight:h.nullable(h.number())}))),Yr=Me(h.nullable(h.type({blockhash:h.string(),previousBlockhash:h.string(),parentSlot:h.number(),rewards:h.optional(h.array(Vr)),blockTime:h.nullable(h.number()),blockHeight:h.nullable(h.number())}))),Gr=Me(h.nullable(h.type({blockhash:h.string(),previousBlockhash:h.string(),parentSlot:h.number(),transactions:h.array(h.type({transaction:Tr,meta:h.nullable(Cr)})),rewards:h.optional(h.array(Vr)),blockTime:h.nullable(h.number())}))),Jr=Me(h.nullable(h.type({blockhash:h.string(),previousBlockhash:h.string(),parentSlot:h.number(),signatures:h.array(h.string()),blockTime:h.nullable(h.number())}))),Xr=Me(h.nullable(h.type({slot:h.number(),meta:h.nullable(Cr),blockTime:h.optional(h.nullable(h.number())),transaction:Tr,version:h.optional(Fr)}))),$r=Me(h.nullable(h.type({slot:h.number(),transaction:zr,meta:h.nullable(Dr),blockTime:h.optional(h.nullable(h.number())),version:h.optional(Fr)}))),tn=_e(h.type({blockhash:h.string(),feeCalculator:h.type({lamportsPerSignature:h.number()})})),en=_e(h.type({blockhash:h.string(),lastValidBlockHeight:h.number()})),rn=_e(h.boolean()),nn=h.type({slot:h.number(),numTransactions:h.number(),numSlots:h.number(),samplePeriodSecs:h.number()}),sn=Me(h.array(nn)),on=_e(h.nullable(h.type({feeCalculator:h.type({lamportsPerSignature:h.number()})}))),an=Me(h.string()),cn=Me(h.string()),un=h.type({err:Pe,logs:h.array(h.string()),signature:h.string()}),ln=h.type({result:Ae(un),subscription:h.number()}),hn={"solana-client":"js/0.0.0-development"};class dn{constructor(t,e){let r,n,i,s,o,a;this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const t={};return async e=>{var r;const{commitment:n,config:i}=Se(e),s=this._buildArgs([],n,void 0,i),o=te(s);return t[o]=null!==(r=t[o])&&void 0!==r?r:(async()=>{try{const e=await this._rpcRequest("getBlockHeight",s),r=h.create(e,Me(h.number()));if("error"in r)throw new ae(r.error,"failed to get block height information");return r.result}finally{delete t[o]}})(),await t[o]}})(),e&&"string"===typeof e?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,n=e.httpHeaders,i=e.fetch,s=e.fetchMiddleware,o=e.disableRetryOnRateLimit,a=e.httpAgent),this._rpcEndpoint=ke(t),this._rpcWsEndpoint=r||me(t),this._rpcClient=De(t,n,i,s,o,a),this._rpcRequest=Fe(this._rpcClient),this._rpcBatchRequest=Ve(this._rpcClient),this._rpcWebSocket=new ue(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgs([t.toBase58()],r,void 0,n),s=await this._rpcRequest("getBalance",i),o=h.create(s,_e(h.number()));if("error"in o)throw new ae(o.error,"failed to get balance for "+t.toBase58());return o.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(t=>t.value).catch(e=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+e)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=h.create(e,Me(h.nullable(h.number())));if("error"in r)throw new ae(r.error,"failed to get block time for slot "+t);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=h.create(t,Me(h.number()));if("error"in e)throw new ae(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=h.create(t,Ge);if("error"in e)throw new ae(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};e="string"===typeof t?{commitment:t}:t?{...t,commitment:t&&t.commitment||this.commitment}:{commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),n=h.create(r,Je);if("error"in n)throw new ae(n.error,"failed to get supply");return n.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenSupply",r),i=h.create(n,_e(Xe));if("error"in i)throw new ae(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenAccountBalance",r),i=h.create(n,_e(Xe));if("error"in i)throw new ae(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){const{commitment:n,config:i}=Se(r);let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const o=this._buildArgs(s,n,"base64",i),a=await this._rpcRequest("getTokenAccountsByOwner",o),c=h.create(a,tr);if("error"in c)throw new ae(c.error,"failed to get token accounts owned by account "+t.toBase58());return c.result}async getParsedTokenAccountsByOwner(t,e,r){let n=[t.toBase58()];"mint"in e?n.push({mint:e.mint.toBase58()}):n.push({programId:e.programId.toBase58()});const i=this._buildArgs(n,r,"jsonParsed"),s=await this._rpcRequest("getTokenAccountsByOwner",i),o=h.create(s,rr);if("error"in o)throw new ae(o.error,"failed to get token accounts owned by account "+t.toBase58());return o.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],n=await this._rpcRequest("getLargestAccounts",r),i=h.create(n,nr);if("error"in i)throw new ae(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenLargestAccounts",r),i=h.create(n,$e);if("error"in i)throw new ae(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgs([t.toBase58()],r,"base64",n),s=await this._rpcRequest("getAccountInfo",i),o=h.create(s,_e(h.nullable(ir)));if("error"in o)throw new ae(o.error,"failed to get info about account "+t.toBase58());return o.result}async getParsedAccountInfo(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",n),s=await this._rpcRequest("getAccountInfo",i),o=h.create(s,_e(h.nullable(ar)));if("error"in o)throw new ae(o.error,"failed to get info about account "+t.toBase58());return o.result}async getAccountInfo(t,e){try{const r=await this.getAccountInfoAndContext(t,e);return r.value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:n}=Se(e),i=t.map(t=>t.toBase58()),s=this._buildArgs([i],r,"jsonParsed",n),o=await this._rpcRequest("getMultipleAccounts",s),a=h.create(o,_e(h.array(h.nullable(ar))));if("error"in a)throw new ae(a.error,"failed to get info for accounts "+i);return a.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:n}=Se(e),i=t.map(t=>t.toBase58()),s=this._buildArgs([i],r,"base64",n),o=await this._rpcRequest("getMultipleAccounts",s),a=h.create(o,_e(h.array(h.nullable(ir))));if("error"in a)throw new ae(a.error,"failed to get info for accounts "+i);return a.result}async getMultipleAccountsInfo(t,e){const r=await this.getMultipleAccountsInfoAndContext(t,e);return r.value}async getStakeActivation(t,e,r){const{commitment:n,config:i}=Se(e),s=this._buildArgs([t.toBase58()],n,void 0,{...i,epoch:null!=r?r:null===i||void 0===i?void 0:i.epoch}),o=await this._rpcRequest("getStakeActivation",s),a=h.create(o,Me(ur));if("error"in a)throw new ae(a.error,"failed to get Stake Activation "+t.toBase58());return a.result}async getProgramAccounts(t,e){const{commitment:r,config:n}=Se(e),{encoding:i,...s}=n||{},o=this._buildArgs([t.toBase58()],r,i||"base64",s),a=await this._rpcRequest("getProgramAccounts",o),c=h.array(sr),u=!0===s.withContext?h.create(a,_e(c)):h.create(a,Me(c));if("error"in u)throw new ae(u.error,"failed to get accounts owned by program "+t.toBase58());return u.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",n),s=await this._rpcRequest("getProgramAccounts",i),o=h.create(s,Me(h.array(cr)));if("error"in o)throw new ae(o.error,"failed to get accounts owned by program "+t.toBase58());return o.result}async confirmTransaction(t,e){let r,n;if("string"==typeof t)r=t;else{var i;const e=t;if(null!==(i=e.abortSignal)&&void 0!==i&&i.aborted)return Promise.reject(e.abortSignal.reason);r=e.signature}try{n=k.default.decode(r)}catch(s){throw new Error("signature must be base58 encoded: "+r)}return at(64===n.length,"signature has invalid length"),"string"===typeof t?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{null!=t&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,n,i=!1;const s=new Promise((s,o)=>{try{r=this.onSignature(e,(t,e)=>{r=void 0;const n={context:e,value:t};s({__type:dt.PROCESSED,response:n})},t);const a=new Promise(t=>{null==r?t():n=this._onSubscriptionStateChange(r,e=>{"subscribed"===e&&t()})});(async()=>{if(await a,i)return;const r=await this.getSignatureStatus(e);if(i)return;if(null==r)return;const{context:n,value:c}=r;if(null!=c)if(null!==c&&void 0!==c&&c.err)o(c.err);else{switch(t){case"confirmed":case"single":case"singleGossip":if("processed"===c.confirmationStatus)return;break;case"finalized":case"max":case"root":if("processed"===c.confirmationStatus||"confirmed"===c.confirmationStatus)return;break;case"processed":case"recent":}i=!0,s({__type:dt.PROCESSED,response:{context:n,value:c}})}})()}catch(a){o(a)}}),o=()=>{n&&(n(),n=void 0),null!=r&&(this.removeSignatureListener(r),r=void 0)};return{abortConfirmation:o,confirmationPromise:s}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:n}}){let i=!1;const s=new Promise(e=>{const n=async()=>{try{const e=await this.getBlockHeight(t);return e}catch(e){return-1}};(async()=>{let t=await n();if(!i){while(t<=r){if(await Nt(1e3),i)return;if(t=await n(),i)return}e({__type:dt.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:o,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:t,signature:n}),c=this.getCancellationPromise(e);let u;try{const t=await Promise.race([c,a,s]);if(t.__type!==dt.PROCESSED)throw new H(n);u=t.response}finally{i=!0,o()}return u}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:n,nonceValue:i,signature:s}}){let o=!1;const a=new Promise(e=>{let s=i,a=null;const c=async()=>{try{const{context:e,value:i}=await this.getNonceAndContext(n,{commitment:t,minContextSlot:r});return a=e.slot,null===i||void 0===i?void 0:i.nonce}catch(e){return s}};(async()=>{if(s=await c(),!o)while(1){if(i!==s)return void e({__type:dt.NONCE_INVALID,slotInWhichNonceDidAdvance:a});if(await Nt(2e3),o)return;if(s=await c(),o)return}})()}),{abortConfirmation:c,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),l=this.getCancellationPromise(e);let h;try{const e=await Promise.race([l,u,a]);if(e.__type===dt.PROCESSED)h=e.response;else{var d;let n;while(1){var p;const t=await this.getSignatureStatus(s);if(null==t)break;if(!(t.context.slot<(null!==(p=e.slotInWhichNonceDidAdvance)&&void 0!==p?p:r))){n=t;break}await Nt(400)}if(null===(d=n)||void 0===d||!d.value)throw new Y(s);{const e=t||"finalized",{confirmationStatus:r}=n.value;switch(e){case"processed":case"recent":if("processed"!==r&&"confirmed"!==r&&"finalized"!==r)throw new Y(s);break;case"confirmed":case"single":case"singleGossip":if("confirmed"!==r&&"finalized"!==r)throw new Y(s);break;case"finalized":case"max":case"root":if("finalized"!==r)throw new Y(s);break;default:}h={context:n.context,value:{err:n.value.err}}}}}finally{o=!0,c()}return h}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const n=new Promise(e=>{let n=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":n=this._confirmTransactionInitialTimeout||3e4;break}r=setTimeout(()=>e({__type:dt.TIMED_OUT,timeoutMs:n}),n)}),{abortConfirmation:i,confirmationPromise:s}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let o;try{const t=await Promise.race([s,n]);if(t.__type!==dt.PROCESSED)throw new q(e,t.timeoutMs/1e3);o=t.response}finally{clearTimeout(r),i()}return o}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=h.create(t,Me(h.array(Sr)));if("error"in e)throw new ae(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),n=h.create(r,Ir);if("error"in n)throw new ae(n.error,"failed to get vote accounts");return n.result}async getSlot(t){const{commitment:e,config:r}=Se(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",n),s=h.create(i,Me(h.number()));if("error"in s)throw new ae(s.error,"failed to get slot");return s.result}async getSlotLeader(t){const{commitment:e,config:r}=Se(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",n),s=h.create(i,Me(h.string()));if("error"in s)throw new ae(s.error,"failed to get slot leader");return s.result}async getSlotLeaders(t,e){const r=[t,e],n=await this._rpcRequest("getSlotLeaders",r),i=h.create(n,Me(h.array(be)));if("error"in i)throw new ae(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:r,value:n}=await this.getSignatureStatuses([t],e);at(1===n.length);const i=n[0];return{context:r,value:i}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const n=await this._rpcRequest("getSignatureStatuses",r),i=h.create(n,Ar);if("error"in i)throw new ae(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:r}=Se(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",n),s=h.create(i,Me(h.number()));if("error"in s)throw new ae(s.error,"failed to get transaction count");return s.result}async getTotalSupply(t){const e=await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0});return e.value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),n=h.create(r,Ke);if("error"in n)throw new ae(n.error,"failed to get inflation");return n.result}async getInflationReward(t,e,r){const{commitment:n,config:i}=Se(r),s=this._buildArgs([t.map(t=>t.toBase58())],n,void 0,{...i,epoch:null!=e?e:null===i||void 0===i?void 0:i.epoch}),o=await this._rpcRequest("getInflationReward",s),a=h.create(o,Te);if("error"in a)throw new ae(a.error,"failed to get inflation reward");return a.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=h.create(t,Qe);if("error"in e)throw new ae(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=Se(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",n),s=h.create(i,He);if("error"in s)throw new ae(s.error,"failed to get epoch info");return s.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=h.create(t,qe);if("error"in e)throw new ae(e.error,"failed to get epoch schedule");const r=e.result;return new ie(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=h.create(t,Ye);if("error"in e)throw new ae(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),n=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=h.create(n,Er);return"error"in i?0:i.result}async getRecentBlockhashAndContext(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getRecentBlockhash",e),n=h.create(r,tn);if("error"in n)throw new ae(n.error,"failed to get recent blockhash");return n.result}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=h.create(e,sn);if("error"in r)throw new ae(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),n=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=h.create(n,on);if("error"in i)throw new ae(i.error,"failed to get fee calculator");const{context:s,value:o}=i.result;return{context:s,value:null!==o?o.feeCalculator:null}}async getFeeForMessage(t,e){const r=B(t.serialize()).toString("base64"),n=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",n),s=h.create(i,_e(h.nullable(h.number())));if("error"in s)throw new ae(s.error,"failed to get fee for message");if(null===s.result)throw new Error("invalid blockhash");return s.result}async getRecentPrioritizationFees(t){var e;const r=null===t||void 0===t||null===(e=t.lockedWritableAccounts)||void 0===e?void 0:e.map(t=>t.toBase58()),n=null!==r&&void 0!==r&&r.length?[r]:[],i=await this._rpcRequest("getRecentPrioritizationFees",n),s=h.create(i,Ze);if("error"in s)throw new ae(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(t){try{const e=await this.getRecentBlockhashAndContext(t);return e.value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{const e=await this.getLatestBlockhashAndContext(t);return e.value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=Se(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",n),s=h.create(i,en);if("error"in s)throw new ae(s.error,"failed to get latest blockhash");return s.result}async isBlockhashValid(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgs([t],r,void 0,n),s=await this._rpcRequest("isBlockhashValid",i),o=h.create(s,rn);if("error"in o)throw new ae(o.error,"failed to determine if the blockhash `"+t+"`is valid");return o.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=h.create(t,Me(Ue));if("error"in e)throw new ae(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=h.create(t,Me(h.string()));if("error"in e)throw new ae(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,n),s=await this._rpcRequest("getBlock",i);try{switch(null===n||void 0===n?void 0:n.transactionDetails){case"accounts":{const t=h.create(s,Zr);if("error"in t)throw t.error;return t.result}case"none":{const t=h.create(s,Qr);if("error"in t)throw t.error;return t.result}default:{const t=h.create(s,Kr);if("error"in t)throw t.error;const{result:e}=t;return e?{...e,transactions:e.transactions.map(({transaction:t,meta:e,version:r})=>({meta:e,transaction:{...t,message:Ee(r,t.message)},version:r}))}:null}}}catch(o){throw new ae(o,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n),s=await this._rpcRequest("getBlock",i);try{switch(null===n||void 0===n?void 0:n.transactionDetails){case"accounts":{const t=h.create(s,qr);if("error"in t)throw t.error;return t.result}case"none":{const t=h.create(s,Yr);if("error"in t)throw t.error;return t.result}default:{const t=h.create(s,Hr);if("error"in t)throw t.error;return t.result}}}catch(o){throw new ae(o,"failed to get block")}}async getBlockProduction(t){let e,r;if("string"===typeof t)r=t;else if(t){const{commitment:n,...i}=t;r=n,e=i}const n=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",n),s=h.create(i,Ce);if("error"in s)throw new ae(s.error,"failed to get block production information");return s.result}async getTransaction(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,n),s=await this._rpcRequest("getTransaction",i),o=h.create(s,Xr);if("error"in o)throw new ae(o.error,"failed to get transaction");const a=o.result;return a?{...a,transaction:{...a.transaction,message:Ee(a.version,a.transaction.message)}}:a}async getParsedTransaction(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n),s=await this._rpcRequest("getTransaction",i),o=h.create(s,$r);if("error"in o)throw new ae(o.error,"failed to get transaction");return o.result}async getParsedTransactions(t,e){const{commitment:r,config:n}=Se(e),i=t.map(t=>{const e=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n);return{methodName:"getTransaction",args:e}}),s=await this._rpcBatchRequest(i),o=s.map(t=>{const e=h.create(t,$r);if("error"in e)throw new ae(e.error,"failed to get transactions");return e.result});return o}async getTransactions(t,e){const{commitment:r,config:n}=Se(e),i=t.map(t=>{const e=this._buildArgsAtLeastConfirmed([t],r,void 0,n);return{methodName:"getTransaction",args:e}}),s=await this._rpcBatchRequest(i),o=s.map(t=>{const e=h.create(t,Xr);if("error"in e)throw new ae(e.error,"failed to get transactions");const r=e.result;return r?{...r,transaction:{...r.transaction,message:Ee(r.version,r.transaction.message)}}:r});return o}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),n=await this._rpcRequest("getConfirmedBlock",r),i=h.create(n,Gr);if("error"in i)throw new ae(i.error,"failed to get confirmed block");const s=i.result;if(!s)throw new Error("Confirmed block "+t+" not found");const o={...s,transactions:s.transactions.map(({transaction:t,meta:e})=>{const r=new ut(t.message);return{meta:e,transaction:{...t,message:r}}})};return{...o,transactions:o.transactions.map(({transaction:t,meta:e})=>({meta:e,transaction:mt.populate(t.message,t.signatures)}))}}async getBlocks(t,e,r){const n=this._buildArgsAtLeastConfirmed(void 0!==e?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",n),s=h.create(i,Me(h.array(h.number())));if("error"in s)throw new ae(s.error,"failed to get blocks");return s.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),n=await this._rpcRequest("getBlock",r),i=h.create(n,Jr);if("error"in i)throw new ae(i.error,"failed to get block");const s=i.result;if(!s)throw new Error("Block "+t+" not found");return s}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),n=await this._rpcRequest("getConfirmedBlock",r),i=h.create(n,Jr);if("error"in i)throw new ae(i.error,"failed to get confirmed block");const s=i.result;if(!s)throw new Error("Confirmed block "+t+" not found");return s}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),n=await this._rpcRequest("getConfirmedTransaction",r),i=h.create(n,Xr);if("error"in i)throw new ae(i.error,"failed to get transaction");const s=i.result;if(!s)return s;const o=new ut(s.transaction.message),a=s.transaction.signatures;return{...s,transaction:mt.populate(o,a)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),n=await this._rpcRequest("getConfirmedTransaction",r),i=h.create(n,$r);if("error"in i)throw new ae(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const r=t.map(t=>{const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed");return{methodName:"getConfirmedTransaction",args:r}}),n=await this._rpcBatchRequest(r),i=n.map(t=>{const e=h.create(t,$r);if("error"in e)throw new ae(e.error,"failed to get confirmed transactions");return e.result});return i}async getConfirmedSignaturesForAddress(t,e,r){let n={},i=await this.getFirstAvailableBlock();while(!("until"in n)){if(e--,e<=0||e<i)break;try{const t=await this.getConfirmedBlockSignatures(e,"finalized");t.signatures.length>0&&(n.until=t.signatures[t.signatures.length-1].toString())}catch(a){if(a instanceof Error&&a.message.includes("skipped"))continue;throw a}}let s=await this.getSlot("finalized");while(!("before"in n)){if(r++,r>s)break;try{const t=await this.getConfirmedBlockSignatures(r);t.signatures.length>0&&(n.before=t.signatures[t.signatures.length-1].toString())}catch(a){if(a instanceof Error&&a.message.includes("skipped"))continue;throw a}}const o=await this.getConfirmedSignaturesForAddress2(t,n);return o.map(t=>t.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const n=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",n),s=h.create(i,lr);if("error"in s)throw new ae(s.error,"failed to get confirmed signatures for address");return s.result}async getSignaturesForAddress(t,e,r){const n=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",n),s=h.create(i,hr);if("error"in s)throw new ae(s.error,"failed to get signatures for address");return s.result}async getAddressLookupTable(t,e){const{context:r,value:n}=await this.getAccountInfoAndContext(t,e);let i=null;return null!==n&&(i=new de({key:t,state:de.deserialize(n.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:n}=await this.getAccountInfoAndContext(t,e);let i=null;return null!==n&&(i=Ut.fromAccountData(n.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(t=>t.value).catch(e=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+e)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),n=h.create(r,an);if("error"in n)throw new ae(n.error,`airdrop to ${t.toBase58()} failed`);return n.result}async _blockhashWithExpiryBlockHeight(t){if(!t){while(this._pollingBlockhash)await Nt(100);const t=Date.now()-this._blockhashInfo.lastFetch,e=t>=we;if(null!==this._blockhashInfo.latestBlockhash&&!e)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let n=0;n<50;n++){const t=await this.getLatestBlockhash("finalized");if(r!==t.blockhash)return this._blockhashInfo={latestBlockhash:t,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},t;await Nt(St/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=Se(t),n=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",n),s=h.create(i,_e(h.number()));if("error"in s)throw new ae(s.error,"failed to get stake minimum delegation");return s.result}async simulateTransaction(t,e,r){if("message"in t){const i=t,s=i.serialize(),o=n.Buffer.from(s).toString("base64");if(Array.isArray(e)||void 0!==r)throw new Error("Invalid arguments");const a=e||{};a.encoding="base64","commitment"in a||(a.commitment=this.commitment);const c=[o,a],u=await this._rpcRequest("simulateTransaction",c),l=h.create(u,We);if("error"in l)throw new Error("failed to simulate transaction: "+l.error.message);return l.result}let i;if(t instanceof mt){let e=t;i=new mt,i.feePayer=e.feePayer,i.instructions=t.instructions,i.nonceInfo=e.nonceInfo,i.signatures=e.signatures}else i=mt.populate(t),i._message=i._json=void 0;if(void 0!==e&&!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(i.nonceInfo&&s)i.sign(...s);else{let t=this._disableBlockhashCaching;for(;;){const e=await this._blockhashWithExpiryBlockHeight(t);if(i.lastValidBlockHeight=e.lastValidBlockHeight,i.recentBlockhash=e.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const r=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(r)&&!this._blockhashInfo.transactionSignatures.includes(r)){this._blockhashInfo.simulatedSignatures.push(r);break}t=!0}}const o=i._compile(),a=o.serialize(),c=i._serialize(a),u=c.toString("base64"),l={encoding:"base64",commitment:this.commitment};if(r){const t=(Array.isArray(r)?r:o.nonProgramIds()).map(t=>t.toBase58());l["accounts"]={encoding:"base64",addresses:t}}s&&(l.sigVerify=!0);const d=[u,l],p=await this._rpcRequest("simulateTransaction",d),g=h.create(p,We);if("error"in g){let t;if("data"in g.error&&(t=g.error.data.logs,t&&Array.isArray(t))){const e="\n    ";t.join(e)}throw new se("failed to simulate transaction: "+g.error.message,t)}return g.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const r=t.serialize();return await this.sendRawTransaction(r,e)}if(void 0===e||!Array.isArray(e))throw new Error("Invalid arguments");const n=e;if(t.nonceInfo)t.sign(...n);else{let e=this._disableBlockhashCaching;for(;;){const r=await this._blockhashWithExpiryBlockHeight(e);if(t.lastValidBlockHeight=r.lastValidBlockHeight,t.recentBlockhash=r.blockhash,t.sign(...n),!t.signature)throw new Error("!signature");const i=t.signature.toString("base64");if(!this._blockhashInfo.transactionSignatures.includes(i)){this._blockhashInfo.transactionSignatures.push(i);break}e=!0}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=B(t).toString("base64"),n=await this.sendEncodedTransaction(r,e);return n}async sendEncodedTransaction(t,e){const r={encoding:"base64"},n=e&&e.skipPreflight,i=e&&e.preflightCommitment||this.commitment;e&&null!=e.maxRetries&&(r.maxRetries=e.maxRetries),e&&null!=e.minContextSlot&&(r.minContextSlot=e.minContextSlot),n&&(r.skipPreflight=n),i&&(r.preflightCommitment=i);const s=[t,r],o=await this._rpcRequest("sendTransaction",s),a=h.create(o,cn);if("error"in a){let t;throw"data"in a.error&&(t=a.error.data.logs),new se("failed to send transaction: "+a.error.message,t)}return a.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1}_wsOnClose(t){this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==t?(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,e])=>{this._setSubscription(t,{...e,state:"pending"})})):this._updateSubscriptions()}_setSubscription(t,e){var r;const n=null===(r=this._subscriptionsByHash[t])||void 0===r?void 0:r.state;if(this._subscriptionsByHash[t]=e,n!==e.state){const r=this._subscriptionStateChangeCallbacksByHash[t];r&&r.forEach(t=>{try{t(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var r;const n=this._subscriptionHashByClientSubscriptionId[t];if(null==n)return()=>{};const i=(r=this._subscriptionStateChangeCallbacksByHash)[n]||(r[n]=new Set);return i.add(e),()=>{i.delete(e),0===i.size&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(0===Object.keys(this._subscriptionsByHash).length)return void(this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(t){Error}},500)));if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected)return void this._rpcWebSocket.connect();const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async t=>{const r=this._subscriptionsByHash[t];if(void 0!==r)switch(r.state){case"pending":case"unsubscribed":if(0===r.callbacks.size)return delete this._subscriptionsByHash[t],"unsubscribed"===r.state&&delete this._subscriptionCallbacksByServerSubscriptionId[r.serverSubscriptionId],void await this._updateSubscriptions();await(async()=>{const{args:n,method:i}=r;try{this._setSubscription(t,{...r,state:"subscribing"});const e=await this._rpcWebSocket.call(i,n);this._setSubscription(t,{...r,serverSubscriptionId:e,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[e]=r.callbacks,await this._updateSubscriptions()}catch(s){if(Error,!e())return;this._setSubscription(t,{...r,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":0===r.callbacks.size&&await(async()=>{const{serverSubscriptionId:n,unsubscribeMethod:i}=r;if(this._subscriptionsAutoDisposedByRpc.has(n))this._subscriptionsAutoDisposedByRpc.delete(n);else{this._setSubscription(t,{...r,state:"unsubscribing"}),this._setSubscription(t,{...r,state:"unsubscribing"});try{await this._rpcWebSocket.call(i,[n])}catch(s){if(Error,!e())return;return this._setSubscription(t,{...r,state:"subscribed"}),void await this._updateSubscriptions()}}this._setSubscription(t,{...r,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];void 0!==r&&r.forEach(t=>{try{t(...e)}catch(r){}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=h.create(t,dr);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,n=te([t.method,e],!0),i=this._subscriptionsByHash[n];return void 0===i?this._subscriptionsByHash[n]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=n,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const e=this._subscriptionsByHash[n];at(void 0!==e,"Could not find a `Subscription` when tearing down client subscription #"+r),e.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const n=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64");return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},n)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=h.create(t,gr);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,n){const i=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64",n?{filters:n}:void 0);return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},i)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const n=this._buildArgs(["object"===typeof t?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=h.create(t,ln);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=h.create(t,br);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=h.create(t,yr);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r&&await r()}_buildArgs(t,e,r,n){const i=e||this._commitment;if(i||r||n){let e={};r&&(e.encoding=r),i&&(e.commitment=i),n&&(e=Object.assign(e,n)),t.push(e)}return t}_buildArgsAtLeastConfirmed(t,e,r,n){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,n)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=h.create(t,wr);"receivedSignature"!==e.value&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,"receivedSignature"===e.value?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const n=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(t,r)=>{if("status"===t.type){e(t.result,r);try{this.removeSignatureListener(i)}catch(n){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},n);return i}onSignatureWithOptions(t,e,r){const{commitment:n,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},s=this._buildArgs([t],n,void 0,i),o=this._makeSubscription({callback:(t,r)=>{e(t,r);try{this.removeSignatureListener(o)}catch(n){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return o}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=h.create(t,kr);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class pn{constructor(t){this._keypair=void 0,this._keypair=null!==t&&void 0!==t?t:A()}static generate(){return new pn(A())}static fromSecretKey(t,e){if(64!==t.byteLength)throw new Error("bad secret key size");const r=t.slice(32,64);if(!e||!e.skipValidation){const e=t.slice(0,32),n=E(e);for(let t=0;t<32;t++)if(r[t]!==n[t])throw new Error("provided secretKey is invalid")}return new pn({publicKey:r,secretKey:t})}static fromSeed(t){const e=E(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new pn({publicKey:e,secretKey:r})}get publicKey(){return new D(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const gn=Object.freeze({CreateLookupTable:{index:0,layout:S.struct([S.u32("instruction"),Dt("recentSlot"),S.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:S.struct([S.u32("instruction")])},ExtendLookupTable:{index:2,layout:S.struct([S.u32("instruction"),Dt(),S.seq(J(),S.offset(S.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:S.struct([S.u32("instruction")])},CloseLookupTable:{index:4,layout:S.struct([S.u32("instruction")])}});class mn{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=S.u32("instruction"),r=e.decode(t.data);let n;for(const[i,s]of Object.entries(gn))if(s.index==r){n=i;break}if(!n)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return n}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);const{recentSlot:e}=Lt(gn.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(e)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);const{addresses:e}=Lt(gn.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:e.map(t=>new D(t))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(bn.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}class bn{constructor(){}static createLookupTable(t){const[e,r]=D.findProgramAddressSync([t.authority.toBuffer(),l.toBufferLE(BigInt(t.recentSlot),8)],this.programId),n=gn.CreateLookupTable,i=xt(n,{recentSlot:BigInt(t.recentSlot),bumpSeed:r}),s=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:Kt.programId,isSigner:!1,isWritable:!1}];return[new gt({programId:this.programId,keys:s,data:i}),e]}static freezeLookupTable(t){const e=gn.FreezeLookupTable,r=xt(e),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new gt({programId:this.programId,keys:n,data:r})}static extendLookupTable(t){const e=gn.ExtendLookupTable,r=xt(e,{addresses:t.addresses.map(t=>t.toBytes())}),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&n.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:Kt.programId,isSigner:!1,isWritable:!1}),new gt({programId:this.programId,keys:n,data:r})}static deactivateLookupTable(t){const e=gn.DeactivateLookupTable,r=xt(e),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new gt({programId:this.programId,keys:n,data:r})}static closeLookupTable(t){const e=gn.CloseLookupTable,r=xt(e),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new gt({programId:this.programId,keys:n,data:r})}}bn.programId=new D("AddressLookupTab1e1111111111111111111111111");class fn{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=S.u8("instruction"),r=e.decode(t.data);let n;for(const[i,s]of Object.entries(yn))if(s.index==r){n=i;break}if(!n)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return n}static decodeRequestUnits(t){this.checkProgramId(t.programId);const{units:e,additionalFee:r}=Lt(yn.RequestUnits,t.data);return{units:e,additionalFee:r}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);const{bytes:e}=Lt(yn.RequestHeapFrame,t.data);return{bytes:e}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);const{units:e}=Lt(yn.SetComputeUnitLimit,t.data);return{units:e}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);const{microLamports:e}=Lt(yn.SetComputeUnitPrice,t.data);return{microLamports:e}}static checkProgramId(t){if(!t.equals(wn.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const yn=Object.freeze({RequestUnits:{index:0,layout:S.struct([S.u8("instruction"),S.u32("units"),S.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:S.struct([S.u8("instruction"),S.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:S.struct([S.u8("instruction"),S.u32("units")])},SetComputeUnitPrice:{index:3,layout:S.struct([S.u8("instruction"),Dt("microLamports")])}});class wn{constructor(){}static requestUnits(t){const e=yn.RequestUnits,r=xt(e,t);return new gt({keys:[],programId:this.programId,data:r})}static requestHeapFrame(t){const e=yn.RequestHeapFrame,r=xt(e,t);return new gt({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(t){const e=yn.SetComputeUnitLimit,r=xt(e,t);return new gt({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(t){const e=yn.SetComputeUnitPrice,r=xt(e,{microLamports:BigInt(t.microLamports)});return new gt({keys:[],programId:this.programId,data:r})}}wn.programId=new D("ComputeBudget111111111111111111111111111111");const kn=64,Sn=32,vn=64,In=S.struct([S.u8("numSignatures"),S.u8("padding"),S.u16("signatureOffset"),S.u16("signatureInstructionIndex"),S.u16("publicKeyOffset"),S.u16("publicKeyInstructionIndex"),S.u16("messageDataOffset"),S.u16("messageDataSize"),S.u16("messageInstructionIndex")]);class Mn{constructor(){}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:i,instructionIndex:s}=t;at(e.length===Sn,`Public Key must be ${Sn} bytes but received ${e.length} bytes`),at(i.length===vn,`Signature must be ${vn} bytes but received ${i.length} bytes`);const o=In.span,a=o+e.length,c=a+i.length,u=1,l=n.Buffer.alloc(c+r.length),h=null==s?65535:s;return In.encode({numSignatures:u,padding:0,signatureOffset:a,signatureInstructionIndex:h,publicKeyOffset:o,publicKeyInstructionIndex:h,messageDataOffset:c,messageDataSize:r.length,messageInstructionIndex:h},l),l.fill(e,o),l.fill(i,a),l.fill(r,c),new gt({keys:[],programId:Mn.programId,data:l})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:n}=t;at(e.length===kn,`Private key must be ${kn} bytes but received ${e.length} bytes`);try{const t=pn.fromSecretKey(e),i=t.publicKey.toBytes(),s=T(r,t.secretKey);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:s,instructionIndex:n})}catch(i){throw new Error("Error creating instruction; "+i)}}}Mn.programId=new D("Ed25519SigVerify111111111111111111111111111");const _n=(t,e)=>{const r=b.secp256k1.sign(t,e);return[r.toCompactRawBytes(),r.recovery]};b.secp256k1.utils.isValidPrivateKey;const An=b.secp256k1.getPublicKey,En=32,On=20,Tn=64,jn=11,Bn=S.struct([S.u8("numSignatures"),S.u16("signatureOffset"),S.u8("signatureInstructionIndex"),S.u16("ethAddressOffset"),S.u8("ethAddressInstructionIndex"),S.u16("messageDataOffset"),S.u16("messageDataSize"),S.u8("messageInstructionIndex"),S.blob(20,"ethAddress"),S.blob(64,"signature"),S.u8("recoveryId")]);class Nn{constructor(){}static publicKeyToEthAddress(t){at(t.length===Tn,`Public key must be ${Tn} bytes but received ${t.length} bytes`);try{return n.Buffer.from(m.keccak_256(B(t))).slice(-On)}catch(e){throw new Error("Error constructing Ethereum address: "+e)}}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:n,recoveryId:i,instructionIndex:s}=t;return Nn.createInstructionWithEthAddress({ethAddress:Nn.publicKeyToEthAddress(e),message:r,signature:n,recoveryId:i,instructionIndex:s})}static createInstructionWithEthAddress(t){const{ethAddress:e,message:r,signature:i,recoveryId:s,instructionIndex:o=0}=t;let a;a="string"===typeof e?e.startsWith("0x")?n.Buffer.from(e.substr(2),"hex"):n.Buffer.from(e,"hex"):e,at(a.length===On,`Address must be ${On} bytes but received ${a.length} bytes`);const c=1+jn,u=c,l=c+a.length,h=l+i.length+1,d=1,p=n.Buffer.alloc(Bn.span+r.length);return Bn.encode({numSignatures:d,signatureOffset:l,signatureInstructionIndex:o,ethAddressOffset:u,ethAddressInstructionIndex:o,messageDataOffset:h,messageDataSize:r.length,messageInstructionIndex:o,signature:B(i),ethAddress:B(a),recoveryId:s},p),p.fill(B(r),Bn.span),new gt({keys:[],programId:Nn.programId,data:p})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:i}=t;at(e.length===En,`Private key must be ${En} bytes but received ${e.length} bytes`);try{const t=B(e),s=An(t,!1).slice(1),o=n.Buffer.from(m.keccak_256(B(r))),[a,c]=_n(o,t);return this.createInstructionWithPublicKey({publicKey:s,message:r,signature:a,recoveryId:c,instructionIndex:i})}catch(s){throw new Error("Error creating instruction; "+s)}}}var xn;Nn.programId=new D("KeccakSecp256k11111111111111111111111111111");const Ln=new D("StakeConfig11111111111111111111111111111111");class Pn{constructor(t,e){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=e}}class Rn{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}xn=Rn,Rn.default=new xn(0,0,D.default);class zn{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=S.u32("instruction"),r=e.decode(t.data);let n;for(const[i,s]of Object.entries(Un))if(s.index==r){n=i;break}if(!n)throw new Error("Instruction type incorrect; not a StakeInstruction");return n}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e,lockup:r}=Lt(Un.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new Pn(new D(e.staker),new D(e.withdrawer)),lockup:new Rn(r.unixTimestamp,r.epoch,new D(r.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),Lt(Un.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,stakeAuthorizationType:r}=Lt(Un.Authorize,t.data),n={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new D(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(n.custodianPubkey=t.keys[3].pubkey),n}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{newAuthorized:e,stakeAuthorizationType:r,authoritySeed:n,authorityOwner:i}=Lt(Un.AuthorizeWithSeed,t.data),s={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:n,authorityOwner:new D(i),newAuthorizedPubkey:new D(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(s.custodianPubkey=t.keys[3].pubkey),s}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=Lt(Un.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:e}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Lt(Un.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=Lt(Un.Withdraw,t.data),r={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e};return t.keys.length>5&&(r.custodianPubkey=t.keys[5].pubkey),r}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Lt(Un.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(Cn.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Un=Object.freeze({Initialize:{index:0,layout:S.struct([S.u32("instruction"),tt(),et()])},Authorize:{index:1,layout:S.struct([S.u32("instruction"),J("newAuthorized"),S.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:S.struct([S.u32("instruction")])},Split:{index:3,layout:S.struct([S.u32("instruction"),S.ns64("lamports")])},Withdraw:{index:4,layout:S.struct([S.u32("instruction"),S.ns64("lamports")])},Deactivate:{index:5,layout:S.struct([S.u32("instruction")])},Merge:{index:7,layout:S.struct([S.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:S.struct([S.u32("instruction"),J("newAuthorized"),S.u32("stakeAuthorizationType"),$("authoritySeed"),J("authorityOwner")])}}),Wn=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class Cn{constructor(){}static initialize(t){const{stakePubkey:e,authorized:r,lockup:n}=t,i=n||Rn.default,s=Un.Initialize,o=xt(s,{authorized:{staker:B(r.staker.toBuffer()),withdrawer:B(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:B(i.custodian.toBuffer())}}),a={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:At,isSigner:!1,isWritable:!1}],programId:this.programId,data:o};return new gt(a)}static createAccountWithSeed(t){const e=new mt;e.add(Kt.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static createAccount(t){const e=new mt;e.add(Kt.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static delegate(t){const{stakePubkey:e,authorizedPubkey:r,votePubkey:n}=t,i=Un.Delegate,s=xt(i);return(new mt).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:vt,isSigner:!1,isWritable:!1},{pubkey:jt,isSigner:!1,isWritable:!1},{pubkey:Ln,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static authorize(t){const{stakePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:n,stakeAuthorizationType:i,custodianPubkey:s}=t,o=Un.Authorize,a=xt(o,{newAuthorized:B(n.toBuffer()),stakeAuthorizationType:i.index}),c=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:vt,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&c.push({pubkey:s,isSigner:!0,isWritable:!1}),(new mt).add({keys:c,programId:this.programId,data:a})}static authorizeWithSeed(t){const{stakePubkey:e,authorityBase:r,authoritySeed:n,authorityOwner:i,newAuthorizedPubkey:s,stakeAuthorizationType:o,custodianPubkey:a}=t,c=Un.AuthorizeWithSeed,u=xt(c,{newAuthorized:B(s.toBuffer()),stakeAuthorizationType:o.index,authoritySeed:n,authorityOwner:B(i.toBuffer())}),l=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:vt,isSigner:!1,isWritable:!1}];return a&&l.push({pubkey:a,isSigner:!0,isWritable:!1}),(new mt).add({keys:l,programId:this.programId,data:u})}static splitInstruction(t){const{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:n,lamports:i}=t,s=Un.Split,o=xt(s,{lamports:i});return new gt({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static split(t,e){const r=new mt;return r.add(Kt.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:e,space:this.space,programId:this.programId})),r.add(this.splitInstruction(t))}static splitWithSeed(t,e){const{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,basePubkey:s,seed:o,lamports:a}=t,c=new mt;return c.add(Kt.allocate({accountPubkey:i,basePubkey:s,seed:o,space:this.space,programId:this.programId})),e&&e>0&&c.add(Kt.transfer({fromPubkey:t.authorizedPubkey,toPubkey:i,lamports:e})),c.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:a}))}static merge(t){const{stakePubkey:e,sourceStakePubKey:r,authorizedPubkey:n}=t,i=Un.Merge,s=xt(i);return(new mt).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:vt,isSigner:!1,isWritable:!1},{pubkey:jt,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static withdraw(t){const{stakePubkey:e,authorizedPubkey:r,toPubkey:n,lamports:i,custodianPubkey:s}=t,o=Un.Withdraw,a=xt(o,{lamports:i}),c=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:vt,isSigner:!1,isWritable:!1},{pubkey:jt,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&c.push({pubkey:s,isSigner:!0,isWritable:!1}),(new mt).add({keys:c,programId:this.programId,data:a})}static deactivate(t){const{stakePubkey:e,authorizedPubkey:r}=t,n=Un.Deactivate,i=xt(n);return(new mt).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:vt,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}Cn.programId=new D("Stake11111111111111111111111111111111111111"),Cn.space=200;class Dn{constructor(t,e,r,n){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=e,this.authorizedWithdrawer=r,this.commission=n}}class Fn{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=S.u32("instruction"),r=e.decode(t.data);let n;for(const[i,s]of Object.entries(Vn))if(s.index==r){n=i;break}if(!n)throw new Error("Instruction type incorrect; not a VoteInstruction");return n}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);const{voteInit:e}=Lt(Vn.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new Dn(new D(e.nodePubkey),new D(e.authorizedVoter),new D(e.authorizedWithdrawer),e.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,voteAuthorizationType:r}=Lt(Vn.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new D(e),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:e,currentAuthorityDerivedKeySeed:r,newAuthorized:n,voteAuthorizationType:i}}=Lt(Vn.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new D(e),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new D(n),voteAuthorizationType:{index:i},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=Lt(Vn.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:e,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(Qn.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Vn=Object.freeze({InitializeAccount:{index:0,layout:S.struct([S.u32("instruction"),rt()])},Authorize:{index:1,layout:S.struct([S.u32("instruction"),J("newAuthorized"),S.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:S.struct([S.u32("instruction"),S.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:S.struct([S.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:S.struct([S.u32("instruction"),nt()])}}),Kn=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class Qn{constructor(){}static initializeAccount(t){const{votePubkey:e,nodePubkey:r,voteInit:n}=t,i=Vn.InitializeAccount,s=xt(i,{voteInit:{nodePubkey:B(n.nodePubkey.toBuffer()),authorizedVoter:B(n.authorizedVoter.toBuffer()),authorizedWithdrawer:B(n.authorizedWithdrawer.toBuffer()),commission:n.commission}}),o={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:At,isSigner:!1,isWritable:!1},{pubkey:vt,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s};return new gt(o)}static createAccount(t){const e=new mt;return e.add(Kt.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){const{votePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:n,voteAuthorizationType:i}=t,s=Vn.Authorize,o=xt(s,{newAuthorized:B(n.toBuffer()),voteAuthorizationType:i.index}),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:vt,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new mt).add({keys:a,programId:this.programId,data:o})}static authorizeWithSeed(t){const{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:i,voteAuthorizationType:s,votePubkey:o}=t,a=Vn.AuthorizeWithSeed,c=xt(a,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:B(r.toBuffer()),currentAuthorityDerivedKeySeed:n,newAuthorized:B(i.toBuffer()),voteAuthorizationType:s.index}}),u=[{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:vt,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return(new mt).add({keys:u,programId:this.programId,data:c})}static withdraw(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,lamports:n,toPubkey:i}=t,s=Vn.Withdraw,o=xt(s,{lamports:n}),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return(new mt).add({keys:a,programId:this.programId,data:o})}static safeWithdraw(t,e,r){if(t.lamports>e-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return Qn.withdraw(t)}static updateValidatorIdentity(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,nodePubkey:n}=t,i=Vn.UpdateValidatorIdentity,s=xt(i),o=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new mt).add({keys:o,programId:this.programId,data:s})}}Qn.programId=new D("Vote111111111111111111111111111111111111111"),Qn.space=3762;const Zn=new D("Va1idator1nfo111111111111111111111111111111"),Hn=h.type({name:h.string(),website:h.optional(h.string()),details:h.optional(h.string()),keybaseUsername:h.optional(h.string())});class qn{constructor(t,e){this.key=void 0,this.info=void 0,this.key=t,this.info=e}static fromConfigData(t){let e=[...t];const r=st(e);if(2!==r)return null;const i=[];for(let n=0;n<2;n++){const t=new D(e.splice(0,U)),r=1===e.splice(0,1)[0];i.push({publicKey:t,isSigner:r})}if(i[0].publicKey.equals(Zn)&&i[1].isSigner){const t=$().decode(n.Buffer.from(e)),r=JSON.parse(t);return h.assert(r,Hn),new qn(i[1].publicKey,r)}return null}}const Yn=new D("Vote111111111111111111111111111111111111111"),Gn=S.struct([J("nodePubkey"),J("authorizedWithdrawer"),S.u8("commission"),S.nu64(),S.seq(S.struct([S.nu64("slot"),S.u32("confirmationCount")]),S.offset(S.u32(),-8),"votes"),S.u8("rootSlotValid"),S.nu64("rootSlot"),S.nu64(),S.seq(S.struct([S.nu64("epoch"),J("authorizedVoter")]),S.offset(S.u32(),-8),"authorizedVoters"),S.struct([S.seq(S.struct([J("authorizedPubkey"),S.nu64("epochOfLastAuthorizedSwitch"),S.nu64("targetEpoch")]),32,"buf"),S.nu64("idx"),S.u8("isEmpty")],"priorVoters"),S.nu64(),S.seq(S.struct([S.nu64("epoch"),S.nu64("credits"),S.nu64("prevCredits")]),S.offset(S.u32(),-8),"epochCredits"),S.struct([S.nu64("slot"),S.nu64("timestamp")],"lastTimestamp")]);class Jn{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){const e=4,r=Gn.decode(B(t),e);let n=r.rootSlot;return r.rootSlotValid||(n=null),new Jn({nodePubkey:new D(r.nodePubkey),authorizedWithdrawer:new D(r.authorizedWithdrawer),commission:r.commission,votes:r.votes,rootSlot:n,authorizedVoters:r.authorizedVoters.map(Xn),priorVoters:ti(r.priorVoters),epochCredits:r.epochCredits,lastTimestamp:r.lastTimestamp})}}function Xn({authorizedVoter:t,epoch:e}){return{epoch:e,authorizedVoter:new D(t)}}function $n({authorizedPubkey:t,epochOfLastAuthorizedSwitch:e,targetEpoch:r}){return{authorizedPubkey:new D(t),epochOfLastAuthorizedSwitch:e,targetEpoch:r}}function ti({buf:t,idx:e,isEmpty:r}){return r?[]:[...t.slice(e+1).map($n),...t.slice(0,e).map($n)]}const ei={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function ri(t,e){const r=!1===e?"http":"https";if(!t)return ei[r]["devnet"];const n=ei[r][t];if(!n)throw new Error(`Unknown ${r} cluster: ${t}`);return n}async function ni(t,e,r,n){let i,s;r&&Object.prototype.hasOwnProperty.call(r,"lastValidBlockHeight")||r&&Object.prototype.hasOwnProperty.call(r,"nonceValue")?(i=r,s=n):s=r;const o=s&&{skipPreflight:s.skipPreflight,preflightCommitment:s.preflightCommitment||s.commitment,minContextSlot:s.minContextSlot},a=await t.sendRawTransaction(e,o),c=s&&s.commitment,u=i?t.confirmTransaction(i,c):t.confirmTransaction(a,c),l=(await u).value;if(l.err)throw new Error(`Raw transaction ${a} failed (${JSON.stringify(l)})`);return a}const ii=1e9;e.Account=F,e.AddressLookupTableAccount=de,e.AddressLookupTableInstruction=mn,e.AddressLookupTableProgram=bn,e.Authorized=Pn,e.BLOCKHASH_CACHE_TIMEOUT_MS=we,e.BPF_LOADER_DEPRECATED_PROGRAM_ID=V,e.BPF_LOADER_PROGRAM_ID=Ht,e.BpfLoader=qt,e.COMPUTE_BUDGET_INSTRUCTION_LAYOUTS=yn,e.ComputeBudgetInstruction=fn,e.ComputeBudgetProgram=wn,e.Connection=dn,e.Ed25519Program=Mn,e.Enum=x,e.EpochSchedule=ie,e.FeeCalculatorLayout=Pt,e.Keypair=pn,e.LAMPORTS_PER_SOL=ii,e.LOOKUP_TABLE_INSTRUCTION_LAYOUTS=gn,e.Loader=Zt,e.Lockup=Rn,e.MAX_SEED_LENGTH=z,e.Message=ut,e.MessageAccountKeys=G,e.MessageV0=lt,e.NONCE_ACCOUNT_LENGTH=zt,e.NonceAccount=Ut,e.PACKET_DATA_SIZE=K,e.PUBLIC_KEY_LENGTH=U,e.PublicKey=D,e.SIGNATURE_LENGTH_IN_BYTES=Z,e.SOLANA_SCHEMA=L,e.STAKE_CONFIG_ID=Ln,e.STAKE_INSTRUCTION_LAYOUTS=Un,e.SYSTEM_INSTRUCTION_LAYOUTS=Vt,e.SYSVAR_CLOCK_PUBKEY=vt,e.SYSVAR_EPOCH_SCHEDULE_PUBKEY=It,e.SYSVAR_INSTRUCTIONS_PUBKEY=Mt,e.SYSVAR_RECENT_BLOCKHASHES_PUBKEY=_t,e.SYSVAR_RENT_PUBKEY=At,e.SYSVAR_REWARDS_PUBKEY=Et,e.SYSVAR_SLOT_HASHES_PUBKEY=Ot,e.SYSVAR_SLOT_HISTORY_PUBKEY=Tt,e.SYSVAR_STAKE_HISTORY_PUBKEY=jt,e.Secp256k1Program=Nn,e.SendTransactionError=se,e.SolanaJSONRPCError=ae,e.SolanaJSONRPCErrorCode=oe,e.StakeAuthorizationLayout=Wn,e.StakeInstruction=zn,e.StakeProgram=Cn,e.Struct=N,e.SystemInstruction=Ft,e.SystemProgram=Kt,e.Transaction=mt,e.TransactionExpiredBlockheightExceededError=H,e.TransactionExpiredNonceInvalidError=Y,e.TransactionExpiredTimeoutError=q,e.TransactionInstruction=gt,e.TransactionMessage=bt,e.TransactionStatus=dt,e.VALIDATOR_INFO_KEY=Zn,e.VERSION_PREFIX_MASK=Q,e.VOTE_PROGRAM_ID=Yn,e.ValidatorInfo=qn,e.VersionedMessage=ht,e.VersionedTransaction=ft,e.VoteAccount=Jn,e.VoteAuthorizationLayout=Kn,e.VoteInit=Dn,e.VoteInstruction=Fn,e.VoteProgram=Qn,e.clusterApiUrl=ri,e.sendAndConfirmRawTransaction=ni,e.sendAndConfirmTransaction=Bt},"0f06":function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return h})),r.d(e,"b",(function(){return d}));r("a573");var n,i=r("8df2"),s=r("633a"),o=r("d6e3"),a=r("753b"),c=r("d99e"),u=(r("7f6a"),r("f7f2"));(function(t){t[t["Uninitialized"]=0]="Uninitialized",t[t["Initialized"]=1]="Initialized",t[t["Frozen"]=2]="Frozen"})(n||(n={}));const l=Object(i["struct"])([Object(s["b"])("mint"),Object(s["b"])("owner"),Object(s["c"])("amount"),Object(i["u32"])("delegateOption"),Object(s["b"])("delegate"),Object(i["u8"])("state"),Object(i["u32"])("isNativeOption"),Object(s["c"])("isNative"),Object(s["c"])("delegatedAmount"),Object(i["u32"])("closeAuthorityOption"),Object(s["b"])("closeAuthority")]),h=l.span;async function d(t,e,r,n=o["c"]){const i=await t.getAccountInfo(e,r);return p(e,i,n)}function p(e,r,i=o["c"]){if(!r)throw new a["a"];if(!r.owner.equals(i))throw new a["c"];if(r.data.length<h)throw new a["d"];const s=l.decode(r.data.slice(0,h));let d=t.alloc(0);if(r.data.length>h){if(r.data.length===u["a"])throw new a["d"];if(r.data[h]!=c["b"].Account)throw new a["b"];d=r.data.slice(h+c["a"])}return{address:e,mint:s.mint,owner:s.owner,amount:s.amount,delegate:s.delegateOption?s.delegate:null,delegatedAmount:s.delegatedAmount,isInitialized:s.state!==n.Uninitialized,isFrozen:s.state===n.Frozen,isNative:!!s.isNativeOption,rentExemptReserve:s.isNativeOption?s.isNative:null,closeAuthority:s.closeAuthorityOption?s.closeAuthority:null,tlvData:d}}}).call(this,r("1c35").Buffer)},"0fa3":function(t,e,r){"use strict";r("14d9");var n=this&&this.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function o(t){try{c(n.next(t))}catch(e){s(e)}}function a(t){try{c(n["throw"](t))}catch(e){s(e)}}function c(t){t.done?r(t.value):i(t.value).then(o,a)}c((n=n.apply(t,e||[])).next())}))},i=this&&this.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r};Object.defineProperty(e,"__esModule",{value:!0}),e.BaseSignInMessageSignerWalletAdapter=e.BaseMessageSignerWalletAdapter=e.BaseSignerWalletAdapter=void 0;const s=r("834f"),o=r("8217"),a=r("e1c8");class c extends s.BaseWalletAdapter{sendTransaction(t,e,r={}){return n(this,void 0,void 0,(function*(){let n=!0;try{if((0,a.isVersionedTransaction)(t)){if(!this.supportedTransactionVersions)throw new o.WalletSendTransactionError("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(t.version))throw new o.WalletSendTransactionError(`Sending transaction version ${t.version} isn't supported by this wallet`);try{t=yield this.signTransaction(t);const n=t.serialize();return yield e.sendRawTransaction(n,r)}catch(s){if(s instanceof o.WalletSignTransactionError)throw n=!1,s;throw new o.WalletSendTransactionError(null===s||void 0===s?void 0:s.message,s)}}else try{const{signers:n}=r,s=i(r,["signers"]);t=yield this.prepareTransaction(t,e,s),(null===n||void 0===n?void 0:n.length)&&t.partialSign(...n),t=yield this.signTransaction(t);const o=t.serialize();return yield e.sendRawTransaction(o,s)}catch(s){if(s instanceof o.WalletSignTransactionError)throw n=!1,s;throw new o.WalletSendTransactionError(null===s||void 0===s?void 0:s.message,s)}}catch(s){throw n&&this.emit("error",s),s}}))}signAllTransactions(t){return n(this,void 0,void 0,(function*(){for(const r of t)if((0,a.isVersionedTransaction)(r)){if(!this.supportedTransactionVersions)throw new o.WalletSignTransactionError("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(r.version))throw new o.WalletSignTransactionError(`Signing transaction version ${r.version} isn't supported by this wallet`)}const e=[];for(const r of t)e.push(yield this.signTransaction(r));return e}))}}e.BaseSignerWalletAdapter=c;class u extends c{}e.BaseMessageSignerWalletAdapter=u;class l extends u{}e.BaseSignInMessageSignerWalletAdapter=l},"17fd":function(t,e,r){"use strict";(function(t){r.d(e,"b",(function(){return o})),r.d(e,"a",(function(){return c}));var n=r("8df2"),i=(r("7f6a"),r("64b9"),r("633a"));r("753b"),r("7b05");const s=Object(n["struct"])([Object(i["b"])("authority"),Object(i["b"])("programId")]),o=s.span;const a=Object(n["struct"])([Object(i["a"])("transferring")]),c=a.span;const u=Object(n["struct"])([Object(n["u8"])("discriminator"),Object(n["blob"])(32,"addressConfig"),Object(i["a"])("isSigner"),Object(i["a"])("isWritable")]),l=Object(n["struct"])([Object(n["u32"])("count"),Object(n["seq"])(u,Object(n["greedy"])(u.span),"extraAccounts")]);Object(n["struct"])([Object(i["c"])("instructionDiscriminator"),Object(n["u32"])("length"),l.replicate("extraAccountsList")])}).call(this,r("1c35").Buffer)},"1b1b":function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));const n="solana:signTransaction"},"1bd0":function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return l}));var n=r("8df2"),i=r("633a"),s=r("64b9"),o=r("d6e3"),a=(r("753b"),r("abed")),c=r("fbe3");const u=Object(n["struct"])([Object(n["u8"])("instruction"),Object(i["c"])("amount")]);function l(e,r,n,i,l=[],h=o["c"]){const d=Object(a["a"])([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0}],n,l),p=t.alloc(u.span);return u.encode({instruction:c["a"].Transfer,amount:BigInt(i)},p),new s["j"]({keys:d,programId:h,data:p})}}).call(this,r("1c35").Buffer)},"290c":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("ed96");function i(t,e){return void 0===e&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}function s(t,e){return void 0===e&&(e=0),(t[e+0]<<8|t[e+1])>>>0}function o(t,e){return void 0===e&&(e=0),(t[e+1]<<8|t[e])<<16>>16}function a(t,e){return void 0===e&&(e=0),(t[e+1]<<8|t[e])>>>0}function c(t,e,r){return void 0===e&&(e=new Uint8Array(2)),void 0===r&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}function u(t,e,r){return void 0===e&&(e=new Uint8Array(2)),void 0===r&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}function l(t,e){return void 0===e&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function h(t,e){return void 0===e&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}function d(t,e){return void 0===e&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}function p(t,e){return void 0===e&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}function g(t,e,r){return void 0===e&&(e=new Uint8Array(4)),void 0===r&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}function m(t,e,r){return void 0===e&&(e=new Uint8Array(4)),void 0===r&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}function b(t,e){void 0===e&&(e=0);var r=l(t,e),n=l(t,e+4);return 4294967296*r+n-4294967296*(n>>31)}function f(t,e){void 0===e&&(e=0);var r=h(t,e),n=h(t,e+4);return 4294967296*r+n}function y(t,e){void 0===e&&(e=0);var r=d(t,e),n=d(t,e+4);return 4294967296*n+r-4294967296*(r>>31)}function w(t,e){void 0===e&&(e=0);var r=p(t,e),n=p(t,e+4);return 4294967296*n+r}function k(t,e,r){return void 0===e&&(e=new Uint8Array(8)),void 0===r&&(r=0),g(t/4294967296>>>0,e,r),g(t>>>0,e,r+4),e}function S(t,e,r){return void 0===e&&(e=new Uint8Array(8)),void 0===r&&(r=0),m(t>>>0,e,r),m(t/4294967296>>>0,e,r+4),e}function v(t,e,r){if(void 0===r&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}function I(t,e,r){if(void 0===r&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}function M(t,e,r,i){if(void 0===r&&(r=new Uint8Array(t/8)),void 0===i&&(i=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!n.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var s=1,o=t/8+i-1;o>=i;o--)r[o]=e/s&255,s*=256;return r}function _(t,e,r,i){if(void 0===r&&(r=new Uint8Array(t/8)),void 0===i&&(i=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!n.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var s=1,o=i;o<i+t/8;o++)r[o]=e/s&255,s*=256;return r}function A(t,e){void 0===e&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}function E(t,e){void 0===e&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}function O(t,e){void 0===e&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}function T(t,e){void 0===e&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}function j(t,e,r){void 0===e&&(e=new Uint8Array(4)),void 0===r&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}function B(t,e,r){void 0===e&&(e=new Uint8Array(4)),void 0===r&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}function N(t,e,r){void 0===e&&(e=new Uint8Array(8)),void 0===r&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}function x(t,e,r){void 0===e&&(e=new Uint8Array(8)),void 0===r&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}e.readInt16BE=i,e.readUint16BE=s,e.readInt16LE=o,e.readUint16LE=a,e.writeUint16BE=c,e.writeInt16BE=c,e.writeUint16LE=u,e.writeInt16LE=u,e.readInt32BE=l,e.readUint32BE=h,e.readInt32LE=d,e.readUint32LE=p,e.writeUint32BE=g,e.writeInt32BE=g,e.writeUint32LE=m,e.writeInt32LE=m,e.readInt64BE=b,e.readUint64BE=f,e.readInt64LE=y,e.readUint64LE=w,e.writeUint64BE=k,e.writeInt64BE=k,e.writeUint64LE=S,e.writeInt64LE=S,e.readUintBE=v,e.readUintLE=I,e.writeUintBE=M,e.writeUintLE=_,e.readFloat32BE=A,e.readFloat32LE=E,e.readFloat64BE=O,e.readFloat64LE=T,e.writeFloat32BE=j,e.writeFloat32LE=B,e.writeFloat64BE=N,e.writeFloat64LE=x},2923:function(t,e,r){"use strict";r("d9e2"),r("14d9"),r("13d5"),r("907a"),r("986a"),r("1d02"),r("3c5d"),r("6ce5"),r("2834"),r("4ea1"),r("669d"),r("109c"),r("b2c1"),r("0643"),r("76d6"),r("2382"),r("fffc"),r("4e3e"),r("a573"),r("9d4a"),r("9a9a"),r("88e6"),r("70cc"),r("eb03"),r("22e5"),r("c01e"),r("fa76"),r("8306");var n=r("1c35"),i=r("aecc"),s=r("8785"),o=r("405f"),a=r("d129"),c=r("fa13"),u=r("8df2"),l=r("9ea2"),h=r("d920"),d=r("502a"),p=r("e01f"),g=r("136e"),m=r("00e3"),b=r("fb4a");function f(t){return t&&"object"===typeof t&&"default"in t?t:{default:t}}function y(t){if(t&&"object"===typeof t&&"default"in t)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}})),e.default=t,Object.freeze(e)}var w=f(s),k=f(o),S=y(u),v=f(d),I=f(p),M=f(g);const _=i.ed25519.utils.randomPrivateKey,A=()=>{const t=i.ed25519.utils.randomPrivateKey(),e=E(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),{publicKey:e,secretKey:r}},E=i.ed25519.getPublicKey;function O(t){try{return i.ed25519.ExtendedPoint.fromHex(t),!0}catch{return!1}}const T=(t,e)=>i.ed25519.sign(t,e.slice(0,32)),j=i.ed25519.verify,B=t=>n.Buffer.isBuffer(t)?t:t instanceof Uint8Array?n.Buffer.from(t.buffer,t.byteOffset,t.byteLength):n.Buffer.from(t);class N{constructor(t){Object.assign(this,t)}encode(){return n.Buffer.from(c.serialize(L,this))}static decode(t){return c.deserialize(L,this,t)}static decodeUnchecked(t){return c.deserializeUnchecked(L,this,t)}}class x extends N{constructor(t){if(super(t),this.enum="",1!==Object.keys(t).length)throw new Error("Enum can only take single value");Object.keys(t).map(t=>{this.enum=t})}}const L=new Map;var P;let R;const z=32,U=32;function W(t){return void 0!==t._bn}let C=1;R=Symbol.toStringTag;class D extends N{constructor(t){if(super({}),this._bn=void 0,W(t))this._bn=t._bn;else{if("string"===typeof t){const e=k.default.decode(t);if(e.length!=U)throw new Error("Invalid public key input");this._bn=new w.default(e)}else this._bn=new w.default(t);if(this._bn.byteLength()>U)throw new Error("Invalid public key input")}}static unique(){const t=new D(C);return C+=1,new D(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return k.default.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(n.Buffer);if(t.length===U)return t;const e=n.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[R](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const i=n.Buffer.concat([t.toBuffer(),n.Buffer.from(e),r.toBuffer()]),s=a.sha256(i);return new D(s)}static createProgramAddressSync(t,e){let r=n.Buffer.alloc(0);t.forEach((function(t){if(t.length>z)throw new TypeError("Max seed length exceeded");r=n.Buffer.concat([r,B(t)])})),r=n.Buffer.concat([r,e.toBuffer(),n.Buffer.from("ProgramDerivedAddress")]);const i=a.sha256(r);if(O(i))throw new Error("Invalid seeds, address must fall off the curve");return new D(i)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r,i=255;while(0!=i){try{const s=t.concat(n.Buffer.from([i]));r=this.createProgramAddressSync(s,e)}catch(s){if(s instanceof TypeError)throw s;i--;continue}return[r,i]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new D(t);return O(e.toBytes())}}P=D,D.default=new P("11111111111111111111111111111111"),L.set(D,{kind:"struct",fields:[["_bn","u256"]]});class F{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){const e=B(t);if(64!==t.length)throw new Error("bad secret key size");this._publicKey=e.slice(32,64),this._secretKey=e.slice(0,32)}else this._secretKey=B(_()),this._publicKey=B(E(this._secretKey))}get publicKey(){return new D(this._publicKey)}get secretKey(){return n.Buffer.concat([this._secretKey,this._publicKey],64)}}const V=new D("BPFLoader1111111111111111111111111111111111"),K=1232,Q=127,Z=64;class H extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(H.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class q extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature `+t+" using the Solana Explorer or CLI tools."),this.signature=void 0,this.signature=t}}Object.defineProperty(q.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Y extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Y.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class G{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){const e=255;if(this.length>e+1)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((t,e)=>{r.set(t.toBase58(),e)});const n=t=>{const e=r.get(t.toBase58());if(void 0===e)throw new Error("Encountered an unknown instruction account key during compilation");return e};return t.map(t=>({programIdIndex:n(t.programId),accountKeyIndexes:t.keys.map(t=>n(t.pubkey)),data:t.data}))}}const J=(t="publicKey")=>S.blob(32,t),X=(t="signature")=>S.blob(64,t),$=(t="string")=>{const e=S.struct([S.u32("length"),S.u32("lengthPadding"),S.blob(S.offset(S.u32(),-8),"chars")],t),r=e.decode.bind(e),i=e.encode.bind(e),s=e;return s.decode=(t,e)=>{const n=r(t,e);return n["chars"].toString()},s.encode=(t,e,r)=>{const s={chars:n.Buffer.from(t,"utf8")};return i(s,e,r)},s.alloc=t=>S.u32().span+S.u32().span+n.Buffer.from(t,"utf8").length,s},tt=(t="authorized")=>S.struct([J("staker"),J("withdrawer")],t),et=(t="lockup")=>S.struct([S.ns64("unixTimestamp"),S.ns64("epoch"),J("custodian")],t),rt=(t="voteInit")=>S.struct([J("nodePubkey"),J("authorizedVoter"),J("authorizedWithdrawer"),S.u8("commission")],t),nt=(t="voteAuthorizeWithSeedArgs")=>S.struct([S.u32("voteAuthorizationType"),J("currentAuthorityDerivedKeyOwnerPubkey"),$("currentAuthorityDerivedKeySeed"),J("newAuthorized")],t);function it(t,e){const r=t=>{if(t.span>=0)return t.span;if("function"===typeof t.alloc)return t.alloc(e[t.property]);if("count"in t&&"elementLayout"in t){const n=e[t.property];if(Array.isArray(n))return n.length*r(t.elementLayout)}else if("fields"in t)return it({layout:t},e[t.property]);return 0};let n=0;return t.layout.fields.forEach(t=>{n+=r(t)}),n}function st(t){let e=0,r=0;for(;;){let n=t.shift();if(e|=(127&n)<<7*r,r+=1,0===(128&n))break}return e}function ot(t,e){let r=e;for(;;){let e=127&r;if(r>>=7,0==r){t.push(e);break}e|=128,t.push(e)}}function at(t,e){if(!t)throw new Error(e||"Assertion failed")}class ct{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,n=t=>{const e=t.toBase58();let n=r.get(e);return void 0===n&&(n={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(e,n)),n},i=n(e);i.isSigner=!0,i.isWritable=!0;for(const s of t){n(s.programId).isInvoked=!0;for(const t of s.keys){const e=n(t.pubkey);e.isSigner||(e.isSigner=t.isSigner),e.isWritable||(e.isWritable=t.isWritable)}}return new ct(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];at(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,t])=>t.isSigner&&t.isWritable),r=t.filter(([,t])=>t.isSigner&&!t.isWritable),n=t.filter(([,t])=>!t.isSigner&&t.isWritable),i=t.filter(([,t])=>!t.isSigner&&!t.isWritable),s={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{at(e.length>0,"Expected at least one writable signer key");const[t]=e[0];at(t===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const o=[...e.map(([t])=>new D(t)),...r.map(([t])=>new D(t)),...n.map(([t])=>new D(t)),...i.map(([t])=>new D(t))];return[s,o]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,t=>!t.isSigner&&!t.isInvoked&&t.isWritable),[n,i]=this.drainKeysFoundInLookupTable(t.state.addresses,t=>!t.isSigner&&!t.isInvoked&&!t.isWritable);if(0!==e.length||0!==n.length)return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:n},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,n=new Array;for(const[i,s]of this.keyMetaMap.entries())if(e(s)){const e=new D(i),s=t.findIndex(t=>t.equals(e));s>=0&&(at(s<256,"Max lookup table index exceeded"),r.push(s),n.push(e),this.keyMetaMap.delete(i))}return[r,n]}}class ut{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(t=>new D(t)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:k.default.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new G(this.staticAccountKeys)}static compile(t){const e=ct.compile(t.instructions,t.payerKey),[r,n]=e.getMessageComponents(),i=new G(n),s=i.compileInstructions(t.instructions).map(t=>({programIdIndex:t.programIdIndex,accounts:t.accountKeyIndexes,data:k.default.encode(t.data)}));return new ut({header:r,accountKeys:n,recentBlockhash:t.recentBlockhash,instructions:s})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,n=this.accountKeys.length-e,i=n-this.header.numReadonlyUnsignedAccounts;return r<i}{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];ot(e,t);const r=this.instructions.map(t=>{const{accounts:e,programIdIndex:r}=t,i=Array.from(k.default.decode(t.data));let s=[];ot(s,e.length);let o=[];return ot(o,i.length),{programIdIndex:r,keyIndicesCount:n.Buffer.from(s),keyIndices:e,dataLength:n.Buffer.from(o),data:i}});let i=[];ot(i,r.length);let s=n.Buffer.alloc(K);n.Buffer.from(i).copy(s);let o=i.length;r.forEach(t=>{const e=S.struct([S.u8("programIdIndex"),S.blob(t.keyIndicesCount.length,"keyIndicesCount"),S.seq(S.u8("keyIndex"),t.keyIndices.length,"keyIndices"),S.blob(t.dataLength.length,"dataLength"),S.seq(S.u8("userdatum"),t.data.length,"data")]),r=e.encode(t,s,o);o+=r}),s=s.slice(0,o);const a=S.struct([S.blob(1,"numRequiredSignatures"),S.blob(1,"numReadonlySignedAccounts"),S.blob(1,"numReadonlyUnsignedAccounts"),S.blob(e.length,"keyCount"),S.seq(J("key"),t,"keys"),J("recentBlockhash")]),c={numRequiredSignatures:n.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:n.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:n.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:n.Buffer.from(e),keys:this.accountKeys.map(t=>B(t.toBytes())),recentBlockhash:k.default.decode(this.recentBlockhash)};let u=n.Buffer.alloc(2048);const l=a.encode(c,u);return s.copy(u,l),u.slice(0,l+s.length)}static from(t){let e=[...t];const r=e.shift();if(r!==(r&Q))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=e.shift(),s=e.shift(),o=st(e);let a=[];for(let d=0;d<o;d++){const t=e.slice(0,U);e=e.slice(U),a.push(new D(n.Buffer.from(t)))}const c=e.slice(0,U);e=e.slice(U);const u=st(e);let l=[];for(let d=0;d<u;d++){const t=e.shift(),r=st(e),i=e.slice(0,r);e=e.slice(r);const s=st(e),o=e.slice(0,s),a=k.default.encode(n.Buffer.from(o));e=e.slice(s),l.push({programIdIndex:t,accounts:i,data:a})}const h={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:k.default.encode(n.Buffer.from(c)),accountKeys:a,instructions:l};return new ut(h)}}class lt{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new G(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const e=t-r,n=this.addressTableLookups.reduce((t,e)=>t+e.writableIndexes.length,0);return e<n}if(t>=this.header.numRequiredSignatures){const n=t-e,i=r-e,s=i-this.header.numReadonlyUnsignedAccounts;return n<s}{const r=e-this.header.numReadonlySignedAccounts;return t<r}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const n=t.find(t=>t.key.equals(r.accountKey));if(!n)throw new Error("Failed to find address lookup table account for table key "+r.accountKey.toBase58());for(const t of r.writableIndexes){if(!(t<n.state.addresses.length))throw new Error(`Failed to find address for index ${t} in address lookup table ${r.accountKey.toBase58()}`);e.writable.push(n.state.addresses[t])}for(const t of r.readonlyIndexes){if(!(t<n.state.addresses.length))throw new Error(`Failed to find address for index ${t} in address lookup table ${r.accountKey.toBase58()}`);e.readonly.push(n.state.addresses[t])}}return e}static compile(t){const e=ct.compile(t.instructions,t.payerKey),r=new Array,n={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const u of i){const t=e.extractTableLookup(u);if(void 0!==t){const[e,{writable:i,readonly:s}]=t;r.push(e),n.writable.push(...i),n.readonly.push(...s)}}const[s,o]=e.getMessageComponents(),a=new G(o,n),c=a.compileInstructions(t.instructions);return new lt({header:s,staticAccountKeys:o,recentBlockhash:t.recentBlockhash,compiledInstructions:c,addressTableLookups:r})}serialize(){const t=Array();ot(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();ot(r,this.compiledInstructions.length);const n=this.serializeAddressTableLookups(),i=Array();ot(i,this.addressTableLookups.length);const s=S.struct([S.u8("prefix"),S.struct([S.u8("numRequiredSignatures"),S.u8("numReadonlySignedAccounts"),S.u8("numReadonlyUnsignedAccounts")],"header"),S.blob(t.length,"staticAccountKeysLength"),S.seq(J(),this.staticAccountKeys.length,"staticAccountKeys"),J("recentBlockhash"),S.blob(r.length,"instructionsLength"),S.blob(e.length,"serializedInstructions"),S.blob(i.length,"addressTableLookupsLength"),S.blob(n.length,"serializedAddressTableLookups")]),o=new Uint8Array(K),a=128,c=s.encode({prefix:a,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(t=>t.toBytes()),recentBlockhash:k.default.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:n},o);return o.slice(0,c)}serializeInstructions(){let t=0;const e=new Uint8Array(K);for(const r of this.compiledInstructions){const n=Array();ot(n,r.accountKeyIndexes.length);const i=Array();ot(i,r.data.length);const s=S.struct([S.u8("programIdIndex"),S.blob(n.length,"encodedAccountKeyIndexesLength"),S.seq(S.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),S.blob(i.length,"encodedDataLength"),S.blob(r.data.length,"data")]);t+=s.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(n),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(K);for(const r of this.addressTableLookups){const n=Array();ot(n,r.writableIndexes.length);const i=Array();ot(i,r.readonlyIndexes.length);const s=S.struct([J("accountKey"),S.blob(n.length,"encodedWritableIndexesLength"),S.seq(S.u8(),r.writableIndexes.length,"writableIndexes"),S.blob(i.length,"encodedReadonlyIndexesLength"),S.seq(S.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=s.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(n),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=e.shift(),n=r&Q;at(r!==n,"Expected versioned message but received legacy message");const i=n;at(0===i,"Expected versioned message with version 0 but found version "+i);const s={numRequiredSignatures:e.shift(),numReadonlySignedAccounts:e.shift(),numReadonlyUnsignedAccounts:e.shift()},o=[],a=st(e);for(let p=0;p<a;p++)o.push(new D(e.splice(0,U)));const c=k.default.encode(e.splice(0,U)),u=st(e),l=[];for(let p=0;p<u;p++){const t=e.shift(),r=st(e),n=e.splice(0,r),i=st(e),s=new Uint8Array(e.splice(0,i));l.push({programIdIndex:t,accountKeyIndexes:n,data:s})}const h=st(e),d=[];for(let p=0;p<h;p++){const t=new D(e.splice(0,U)),r=st(e),n=e.splice(0,r),i=st(e),s=e.splice(0,i);d.push({accountKey:t,writableIndexes:n,readonlyIndexes:s})}return new lt({header:s,staticAccountKeys:o,recentBlockhash:c,compiledInstructions:l,addressTableLookups:d})}}const ht={deserializeMessageVersion(t){const e=t[0],r=e&Q;return r===e?"legacy":r},deserialize:t=>{const e=ht.deserializeMessageVersion(t);if("legacy"===e)return ut.from(t);if(0===e)return lt.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let dt=function(t){return t[t["BLOCKHEIGHT_EXCEEDED"]=0]="BLOCKHEIGHT_EXCEEDED",t[t["PROCESSED"]=1]="PROCESSED",t[t["TIMED_OUT"]=2]="TIMED_OUT",t[t["NONCE_INVALID"]=3]="NONCE_INVALID",t}({});const pt=n.Buffer.alloc(Z).fill(0);class gt{constructor(t){this.keys=void 0,this.programId=void 0,this.data=n.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class mt{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(0===t.length)throw new Error("No instructions");return t.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new gt(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e,r;if(this.nonceInfo?(t=this.nonceInfo.nonce,e=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");if(e.length,this.feePayer)r=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");r=this.signatures[0].publicKey}for(let g=0;g<e.length;g++)if(void 0===e[g].programId)throw new Error(`Transaction instruction index ${g} has undefined program id`);const n=[],i=[];e.forEach(t=>{t.keys.forEach(t=>{i.push({...t})});const e=t.programId.toString();n.includes(e)||n.push(e)}),n.forEach(t=>{i.push({pubkey:new D(t),isSigner:!1,isWritable:!1})});const s=[];i.forEach(t=>{const e=t.pubkey.toString(),r=s.findIndex(t=>t.pubkey.toString()===e);r>-1?(s[r].isWritable=s[r].isWritable||t.isWritable,s[r].isSigner=s[r].isSigner||t.isSigner):s.push(t)}),s.sort((function(t,e){if(t.isSigner!==e.isSigner)return t.isSigner?-1:1;if(t.isWritable!==e.isWritable)return t.isWritable?-1:1;const r={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return t.pubkey.toBase58().localeCompare(e.pubkey.toBase58(),"en",r)}));const o=s.findIndex(t=>t.pubkey.equals(r));if(o>-1){const[t]=s.splice(o,1);t.isSigner=!0,t.isWritable=!0,s.unshift(t)}else s.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const g of this.signatures){const t=s.findIndex(t=>t.pubkey.equals(g.publicKey));if(!(t>-1))throw new Error("unknown signer: "+g.publicKey.toString());s[t].isSigner||(s[t].isSigner=!0)}let a=0,c=0,u=0;const l=[],h=[];s.forEach(({pubkey:t,isSigner:e,isWritable:r})=>{e?(l.push(t.toString()),a+=1,r||(c+=1)):(h.push(t.toString()),r||(u+=1))});const d=l.concat(h),p=e.map(t=>{const{data:e,programId:r}=t;return{programIdIndex:d.indexOf(r.toString()),accounts:t.keys.map(t=>d.indexOf(t.pubkey.toString())),data:k.default.encode(e)}});return p.forEach(t=>{at(t.programIdIndex>=0),t.accounts.forEach(t=>at(t>=0))}),new ut({header:{numRequiredSignatures:a,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:u},accountKeys:d,recentBlockhash:t,instructions:p})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);if(this.signatures.length===e.length){const r=this.signatures.every((t,r)=>e[r].equals(t.publicKey));if(r)return t}return this.signatures=e.map(t=>({signature:null,publicKey:t})),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(0===t.length)throw new Error("No signers");const e=new Set;this.signatures=t.filter(t=>{const r=t.toString();return!e.has(r)&&(e.add(r),!0)}).map(t=>({signature:null,publicKey:t}))}sign(...t){if(0===t.length)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const t=i.publicKey.toString();e.has(t)||(e.add(t),r.push(i))}this.signatures=r.map(t=>({signature:null,publicKey:t.publicKey}));const n=this._compile();this._partialSign(n,...r)}partialSign(...t){if(0===t.length)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const t=i.publicKey.toString();e.has(t)||(e.add(t),r.push(i))}const n=this._compile();this._partialSign(n,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(t=>{const e=T(r,t.secretKey);this._addSignature(t.publicKey,B(e))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){at(64===e.length);const r=this.signatures.findIndex(e=>t.equals(e.publicKey));if(r<0)throw new Error("unknown signer: "+t.toString());this.signatures[r].signature=n.Buffer.from(e)}verifySignatures(t=!0){const e=this._getMessageSignednessErrors(this.serializeMessage(),t);return!e}_getMessageSignednessErrors(t,e){const r={};for(const{signature:n,publicKey:i}of this.signatures)null===n?e&&(r.missing||(r.missing=[])).push(i):j(n,t,i.toBytes())||(r.invalid||(r.invalid=[])).push(i);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),n=this.serializeMessage();if(r){const t=this._getMessageSignednessErrors(n,e);if(t){let e="Signature verification failed.";throw t.invalid&&(e+=`\nInvalid signature for public key${1===t.invalid.length?"":"(s)"} [\`${t.invalid.map(t=>t.toBase58()).join("`, `")}\`].`),t.missing&&(e+=`\nMissing signature for public key${1===t.missing.length?"":"(s)"} [\`${t.missing.map(t=>t.toBase58()).join("`, `")}\`].`),new Error(e)}}return this._serialize(n)}_serialize(t){const{signatures:e}=this,r=[];ot(r,e.length);const i=r.length+64*e.length+t.length,s=n.Buffer.alloc(i);return at(e.length<256),n.Buffer.from(r).copy(s,0),e.forEach(({signature:t},e)=>{null!==t&&(at(64===t.length,"signature has invalid length"),n.Buffer.from(t).copy(s,r.length+64*e))}),t.copy(s,r.length+64*e.length),at(s.length<=K,`Transaction too large: ${s.length} > ${K}`),s}get keys(){return at(1===this.instructions.length),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return at(1===this.instructions.length),this.instructions[0].programId}get data(){return at(1===this.instructions.length),this.instructions[0].data}static from(t){let e=[...t];const r=st(e);let i=[];for(let s=0;s<r;s++){const t=e.slice(0,Z);e=e.slice(Z),i.push(k.default.encode(n.Buffer.from(t)))}return mt.populate(ut.from(e),i)}static populate(t,e=[]){const r=new mt;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((e,n)=>{const i={signature:e==k.default.encode(pt)?null:k.default.decode(e),publicKey:t.accountKeys[n]};r.signatures.push(i)}),t.instructions.forEach(e=>{const n=e.accounts.map(e=>{const n=t.accountKeys[e];return{pubkey:n,isSigner:r.signatures.some(t=>t.publicKey.toString()===n.toString())||t.isAccountSigner(e),isWritable:t.isAccountWritable(e)}});r.instructions.push(new gt({keys:n,programId:t.accountKeys[e.programIdIndex],data:k.default.decode(e.data)}))}),r._message=t,r._json=r.toJSON(),r}}class bt{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){const{header:r,compiledInstructions:n,recentBlockhash:i}=t,{numRequiredSignatures:s,numReadonlySignedAccounts:o,numReadonlyUnsignedAccounts:a}=r,c=s-o;at(c>0,"Message header is invalid");const u=t.staticAccountKeys.length-s-a;at(u>=0,"Message header is invalid");const l=t.getAccountKeys(e),h=l.get(0);if(void 0===h)throw new Error("Failed to decompile message because no account keys were found");const d=[];for(const p of n){const t=[];for(const n of p.accountKeyIndexes){const e=l.get(n);if(void 0===e)throw new Error("Failed to find key for account key index "+n);const i=n<s;let o;o=i?n<c:n<l.staticAccountKeys.length?n-s<u:n-l.staticAccountKeys.length<l.accountKeysFromLookups.writable.length,t.push({pubkey:e,isSigner:n<r.numRequiredSignatures,isWritable:o})}const e=l.get(p.programIdIndex);if(void 0===e)throw new Error("Failed to find program id for program id index "+p.programIdIndex);d.push(new gt({programId:e,data:B(p.data),keys:t}))}return new bt({payerKey:h,instructions:d,recentBlockhash:i})}compileToLegacyMessage(){return ut.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return lt.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}}class ft{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,void 0!==e)at(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const e=[];for(let r=0;r<t.header.numRequiredSignatures;r++)e.push(new Uint8Array(Z));this.signatures=e}this.message=t}serialize(){const t=this.message.serialize(),e=Array();ot(e,this.signatures.length);const r=S.struct([S.blob(e.length,"encodedSignaturesLength"),S.seq(X(),this.signatures.length,"signatures"),S.blob(t.length,"serializedMessage")]),n=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},n);return n.slice(0,i)}static deserialize(t){let e=[...t];const r=[],n=st(e);for(let s=0;s<n;s++)r.push(new Uint8Array(e.splice(0,Z)));const i=ht.deserialize(new Uint8Array(e));return new ft(i,r)}sign(t){const e=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const n of t){const t=r.findIndex(t=>t.equals(n.publicKey));at(t>=0,"Cannot sign with non signer key "+n.publicKey.toBase58()),this.signatures[t]=T(e,n.secretKey)}}addSignature(t,e){at(64===e.byteLength,"Signature must be 64 bytes long");const r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures),n=r.findIndex(e=>e.equals(t));at(n>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[n]=e}}const yt=160,wt=64,kt=yt/wt,St=1e3/kt,vt=new D("SysvarC1ock11111111111111111111111111111111"),It=new D("SysvarEpochSchedu1e111111111111111111111111"),Mt=new D("Sysvar1nstructions1111111111111111111111111"),_t=new D("SysvarRecentB1ockHashes11111111111111111111"),At=new D("SysvarRent111111111111111111111111111111111"),Et=new D("SysvarRewards111111111111111111111111111111"),Ot=new D("SysvarS1otHashes111111111111111111111111111"),Tt=new D("SysvarS1otHistory11111111111111111111111111"),jt=new D("SysvarStakeHistory1111111111111111111111111");async function Bt(t,e,r,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await t.sendTransaction(e,r,i);let o;if(null!=e.recentBlockhash&&null!=e.lastValidBlockHeight)o=(await t.confirmTransaction({abortSignal:null===n||void 0===n?void 0:n.abortSignal,signature:s,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(null!=e.minNonceContextSlot&&null!=e.nonceInfo){const{nonceInstruction:r}=e.nonceInfo,i=r.keys[0].pubkey;o=(await t.confirmTransaction({abortSignal:null===n||void 0===n?void 0:n.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:i,nonceValue:e.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else null===n||void 0===n||n.abortSignal,o=(await t.confirmTransaction(s,n&&n.commitment)).value;if(o.err)throw new Error(`Transaction ${s} failed (${JSON.stringify(o)})`);return s}function Nt(t){return new Promise(e=>setTimeout(e,t))}function xt(t,e){const r=t.layout.span>=0?t.layout.span:it(t,e),i=n.Buffer.alloc(r),s=Object.assign({instruction:t.index},e);return t.layout.encode(s,i),i}function Lt(t,e){let r;try{r=t.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(r.instruction!==t.index)throw new Error(`invalid instruction; instruction index mismatch ${r.instruction} != ${t.index}`);return r}const Pt=S.nu64("lamportsPerSignature"),Rt=S.struct([S.u32("version"),S.u32("state"),J("authorizedPubkey"),J("nonce"),S.struct([Pt],"feeCalculator")]),zt=Rt.span;class Ut{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=Rt.decode(B(t),0);return new Ut({authorizedPubkey:new D(e.authorizedPubkey),nonce:new D(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const Wt=t=>{const e=t.decode.bind(t),r=t.encode.bind(t);return{decode:e,encode:r}},Ct=t=>e=>{const r=u.blob(t,e),{encode:i,decode:s}=Wt(r),o=r;return o.decode=(t,e)=>{const r=s(t,e);return l.toBigIntLE(n.Buffer.from(r))},o.encode=(e,r,n)=>{const s=l.toBufferLE(e,t);return i(s,r,n)},o},Dt=Ct(8);class Ft{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=S.u32("instruction"),r=e.decode(t.data);let n;for(const[i,s]of Object.entries(Vt))if(s.index==r){n=i;break}if(!n)throw new Error("Instruction type incorrect; not a SystemInstruction");return n}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e,space:r,programId:n}=Lt(Vt.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:e,space:r,programId:new D(n)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e}=Lt(Vt.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:e}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e,seed:r,programId:n}=Lt(Vt.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:e,seed:r,programId:new D(n)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{space:e}=Lt(Vt.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:e}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,space:n,programId:i}=Lt(Vt.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new D(e),seed:r,space:n,programId:new D(i)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{programId:e}=Lt(Vt.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new D(e)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,programId:n}=Lt(Vt.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new D(e),seed:r,programId:new D(n)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{base:e,seed:r,lamports:n,space:i,programId:s}=Lt(Vt.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new D(e),seed:r,lamports:n,space:i,programId:new D(s)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{authorized:e}=Lt(Vt.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new D(e)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Lt(Vt.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=Lt(Vt.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e}=Lt(Vt.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new D(e)}}static checkProgramId(t){if(!t.equals(Kt.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Vt=Object.freeze({Create:{index:0,layout:S.struct([S.u32("instruction"),S.ns64("lamports"),S.ns64("space"),J("programId")])},Assign:{index:1,layout:S.struct([S.u32("instruction"),J("programId")])},Transfer:{index:2,layout:S.struct([S.u32("instruction"),Dt("lamports")])},CreateWithSeed:{index:3,layout:S.struct([S.u32("instruction"),J("base"),$("seed"),S.ns64("lamports"),S.ns64("space"),J("programId")])},AdvanceNonceAccount:{index:4,layout:S.struct([S.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:S.struct([S.u32("instruction"),S.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:S.struct([S.u32("instruction"),J("authorized")])},AuthorizeNonceAccount:{index:7,layout:S.struct([S.u32("instruction"),J("authorized")])},Allocate:{index:8,layout:S.struct([S.u32("instruction"),S.ns64("space")])},AllocateWithSeed:{index:9,layout:S.struct([S.u32("instruction"),J("base"),$("seed"),S.ns64("space"),J("programId")])},AssignWithSeed:{index:10,layout:S.struct([S.u32("instruction"),J("base"),$("seed"),J("programId")])},TransferWithSeed:{index:11,layout:S.struct([S.u32("instruction"),Dt("lamports"),$("seed"),J("programId")])},UpgradeNonceAccount:{index:12,layout:S.struct([S.u32("instruction")])}});class Kt{constructor(){}static createAccount(t){const e=Vt.Create,r=xt(e,{lamports:t.lamports,space:t.space,programId:B(t.programId.toBuffer())});return new gt({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(t){let e,r;if("basePubkey"in t){const n=Vt.TransferWithSeed;e=xt(n,{lamports:BigInt(t.lamports),seed:t.seed,programId:B(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const n=Vt.Transfer;e=xt(n,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new gt({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){const n=Vt.AssignWithSeed;e=xt(n,{base:B(t.basePubkey.toBuffer()),seed:t.seed,programId:B(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const n=Vt.Assign;e=xt(n,{programId:B(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new gt({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=Vt.CreateWithSeed,r=xt(e,{base:B(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:B(t.programId.toBuffer())});let n=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey!=t.fromPubkey&&n.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new gt({keys:n,programId:this.programId,data:r})}static createNonceAccount(t){const e=new mt;"basePubkey"in t&&"seed"in t?e.add(Kt.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:zt,programId:this.programId})):e.add(Kt.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:zt,programId:this.programId}));const r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){const e=Vt.InitializeNonceAccount,r=xt(e,{authorized:B(t.authorizedPubkey.toBuffer())}),n={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:_t,isSigner:!1,isWritable:!1},{pubkey:At,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new gt(n)}static nonceAdvance(t){const e=Vt.AdvanceNonceAccount,r=xt(e),n={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:_t,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new gt(n)}static nonceWithdraw(t){const e=Vt.WithdrawNonceAccount,r=xt(e,{lamports:t.lamports});return new gt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:_t,isSigner:!1,isWritable:!1},{pubkey:At,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(t){const e=Vt.AuthorizeNonceAccount,r=xt(e,{authorized:B(t.newAuthorizedPubkey.toBuffer())});return new gt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(t){let e,r;if("basePubkey"in t){const n=Vt.AllocateWithSeed;e=xt(n,{base:B(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:B(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const n=Vt.Allocate;e=xt(n,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new gt({keys:r,programId:this.programId,data:e})}}Kt.programId=new D("11111111111111111111111111111111");const Qt=K-300;class Zt{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/Zt.chunkSize)+1+1)}static async load(t,e,r,i,s){{const n=await t.getMinimumBalanceForRentExemption(s.length),o=await t.getAccountInfo(r.publicKey,"confirmed");let a=null;if(null!==o){if(o.executable)return!1;o.data.length!==s.length&&(a=a||new mt,a.add(Kt.allocate({accountPubkey:r.publicKey,space:s.length}))),o.owner.equals(i)||(a=a||new mt,a.add(Kt.assign({accountPubkey:r.publicKey,programId:i}))),o.lamports<n&&(a=a||new mt,a.add(Kt.transfer({fromPubkey:e.publicKey,toPubkey:r.publicKey,lamports:n-o.lamports})))}else a=(new mt).add(Kt.createAccount({fromPubkey:e.publicKey,newAccountPubkey:r.publicKey,lamports:n>0?n:1,space:s.length,programId:i}));null!==a&&await Bt(t,a,[e,r],{commitment:"confirmed"})}const o=S.struct([S.u32("instruction"),S.u32("offset"),S.u32("bytesLength"),S.u32("bytesLengthPadding"),S.seq(S.u8("byte"),S.offset(S.u32(),-8),"bytes")]),a=Zt.chunkSize;let c=0,u=s,l=[];while(u.length>0){const s=u.slice(0,a),h=n.Buffer.alloc(a+16);o.encode({instruction:0,offset:c,bytes:s,bytesLength:0,bytesLengthPadding:0},h);const d=(new mt).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:h});if(l.push(Bt(t,d,[e,r],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")){const t=4;await Nt(1e3/t)}c+=a,u=u.slice(a)}await Promise.all(l);{const s=S.struct([S.u32("instruction")]),o=n.Buffer.alloc(s.span);s.encode({instruction:1},o);const a=(new mt).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:At,isSigner:!1,isWritable:!1}],programId:i,data:o}),c="processed",u=await t.sendTransaction(a,[e,r],{preflightCommitment:c}),{context:l,value:h}=await t.confirmTransaction({signature:u,lastValidBlockHeight:a.lastValidBlockHeight,blockhash:a.recentBlockhash},c);if(h.err)throw new Error(`Transaction ${u} failed (${JSON.stringify(h)})`);while(1){try{const e=await t.getSlot({commitment:c});if(e>l.slot)break}catch{}await new Promise(t=>setTimeout(t,Math.round(St/2)))}}return!0}}Zt.chunkSize=Qt;const Ht=new D("BPFLoader2111111111111111111111111111111111");class qt{static getMinNumSignatures(t){return Zt.getMinNumSignatures(t)}static load(t,e,r,n,i){return Zt.load(t,e,r,i,n)}}function Yt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t["default"]:t}var Gt=Object.prototype.toString,Jt=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};function Xt(t,e){var r,n,i,s,o,a,c;if(!0===t)return"true";if(!1===t)return"false";switch(typeof t){case"object":if(null===t)return null;if(t.toJSON&&"function"===typeof t.toJSON)return Xt(t.toJSON(),e);if(c=Gt.call(t),"[object Array]"===c){for(i="[",n=t.length-1,r=0;r<n;r++)i+=Xt(t[r],!0)+",";return n>-1&&(i+=Xt(t[r],!0)),i+"]"}if("[object Object]"===c){s=Jt(t).sort(),n=s.length,i="",r=0;while(r<n)o=s[r],a=Xt(t[o],!1),void 0!==a&&(i&&(i+=","),i+=JSON.stringify(o)+":"+a),r++;return"{"+i+"}"}return JSON.stringify(t);case"function":case"undefined":return e?null:void 0;case"string":return JSON.stringify(t);default:return isFinite(t)?t:null}}var $t=function(t){var e=Xt(t,!1);if(void 0!==e)return""+e},te=Yt($t);const ee=32;function re(t){let e=0;while(t>1)t/=2,e++;return e}function ne(t){return 0===t?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,t+1)}class ie{constructor(t,e,r,n,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=n,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=re(ne(t+ee+1))-re(ee)-1,r=this.getSlotsInEpoch(e),n=t-(r-ee);return[e,n]}{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),n=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[n,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*ee:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+re(ee)):this.slotsPerEpoch}}class se extends Error{constructor(t,e){super(t),this.logs=void 0,this.logs=e}}const oe={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class ae extends Error{constructor({code:t,message:e,data:r},n){super(null!=n?`${n}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}var ce=globalThis.fetch;class ue extends I.default{constructor(t,e,r){const n=t=>{const r=M.default(t,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return this.underlyingSocket="socket"in r?r.socket:r,r};super(n,t,e,r),this.underlyingSocket=void 0}call(...t){var e;const r=null===(e=this.underlyingSocket)||void 0===e?void 0:e.readyState;return 1===r?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}notify(...t){var e;const r=null===(e=this.underlyingSocket)||void 0===e?void 0:e.readyState;return 1===r?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}}function le(t,e){let r;try{r=t.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(r.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${r.typeIndex} != ${t.index}`);return r}const he=56;class de{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=le(pe,t),r=t.length-he;at(r>=0,"lookup table is invalid"),at(r%32===0,"lookup table is invalid");const n=r/32,{addresses:i}=S.struct([S.seq(J(),n,"addresses")]).decode(t.slice(he));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:0!==e.authority.length?new D(e.authority[0]):void 0,addresses:i.map(t=>new D(t))}}}const pe={index:1,layout:S.struct([S.u32("typeIndex"),Dt("deactivationSlot"),S.nu64("lastExtendedSlot"),S.u8("lastExtendedStartIndex"),S.u8(),S.seq(J(),S.offset(S.u8(),-1),"authority")])},ge=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function me(t){const e=t.match(ge);if(null==e)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[r,n,i,s]=e,o=t.startsWith("https:")?"wss:":"ws:",a=null==i?null:parseInt(i.slice(1),10),c=null==a?"":":"+(a+1);return`${o}//${n}${c}${s}`}const be=h.coerce(h.instance(D),h.string(),t=>new D(t)),fe=h.tuple([h.string(),h.literal("base64")]),ye=h.coerce(h.instance(n.Buffer),fe,t=>n.Buffer.from(t[0],"base64")),we=3e4;function ke(t){if(!1===/^https?:/.test(t))throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}function Se(t){let e,r;if("string"===typeof t)e=t;else if(t){const{commitment:n,...i}=t;e=n,r=i}return{commitment:e,config:r}}function ve(t){return h.union([h.type({jsonrpc:h.literal("2.0"),id:h.string(),result:t}),h.type({jsonrpc:h.literal("2.0"),id:h.string(),error:h.type({code:h.unknown(),message:h.string(),data:h.optional(h.any())})})])}const Ie=ve(h.unknown());function Me(t){return h.coerce(ve(t),Ie,e=>"error"in e?e:{...e,result:h.create(e.result,t)})}function _e(t){return Me(h.type({context:h.type({slot:h.number()}),value:t}))}function Ae(t){return h.type({context:h.type({slot:h.number()}),value:t})}function Ee(t,e){return 0===t?new lt({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new D(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:k.default.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new ut(e)}const Oe=h.type({foundation:h.number(),foundationTerm:h.number(),initial:h.number(),taper:h.number(),terminal:h.number()}),Te=Me(h.array(h.nullable(h.type({epoch:h.number(),effectiveSlot:h.number(),amount:h.number(),postBalance:h.number(),commission:h.optional(h.nullable(h.number()))})))),je=h.array(h.type({slot:h.number(),prioritizationFee:h.number()})),Be=h.type({total:h.number(),validator:h.number(),foundation:h.number(),epoch:h.number()}),Ne=h.type({epoch:h.number(),slotIndex:h.number(),slotsInEpoch:h.number(),absoluteSlot:h.number(),blockHeight:h.optional(h.number()),transactionCount:h.optional(h.number())}),xe=h.type({slotsPerEpoch:h.number(),leaderScheduleSlotOffset:h.number(),warmup:h.boolean(),firstNormalEpoch:h.number(),firstNormalSlot:h.number()}),Le=h.record(h.string(),h.array(h.number())),Pe=h.nullable(h.union([h.type({}),h.string()])),Re=h.type({err:Pe}),ze=h.literal("receivedSignature"),Ue=h.type({"solana-core":h.string(),"feature-set":h.optional(h.number())}),We=_e(h.type({err:h.nullable(h.union([h.type({}),h.string()])),logs:h.nullable(h.array(h.string())),accounts:h.optional(h.nullable(h.array(h.nullable(h.type({executable:h.boolean(),owner:h.string(),lamports:h.number(),data:h.array(h.string()),rentEpoch:h.optional(h.number())}))))),unitsConsumed:h.optional(h.number()),returnData:h.optional(h.nullable(h.type({programId:h.string(),data:h.tuple([h.string(),h.literal("base64")])})))})),Ce=_e(h.type({byIdentity:h.record(h.string(),h.array(h.number())),range:h.type({firstSlot:h.number(),lastSlot:h.number()})}));function De(t,e,r,n,i,s){const o=r||ce;let a,c;n&&(c=async(t,e)=>{const r=await new Promise((r,i)=>{try{n(t,e,(t,e)=>r([t,e]))}catch(s){i(s)}});return await o(...r)});const u=new v.default(async(r,n)=>{const s={method:"POST",body:r,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},hn)};try{let e,r=5,a=500;for(;;){if(e=c?await c(t,s):await o(t,s),429!==e.status)break;if(!0===i)break;if(r-=1,0===r)break;await Nt(a),a*=2}const u=await e.text();e.ok?n(null,u):n(new Error(`${e.status} ${e.statusText}: ${u}`))}catch(u){u instanceof Error&&n(u)}},{});return u}function Fe(t){return(e,r)=>new Promise((n,i)=>{t.request(e,r,(t,e)=>{t?i(t):n(e)})})}function Ve(t){return e=>new Promise((r,n)=>{0===e.length&&r([]);const i=e.map(e=>t.request(e.methodName,e.args));t.request(i,(t,e)=>{t?n(t):r(e)})})}const Ke=Me(Oe),Qe=Me(Be),Ze=Me(je),He=Me(Ne),qe=Me(xe),Ye=Me(Le),Ge=Me(h.number()),Je=_e(h.type({total:h.number(),circulating:h.number(),nonCirculating:h.number(),nonCirculatingAccounts:h.array(be)})),Xe=h.type({amount:h.string(),uiAmount:h.nullable(h.number()),decimals:h.number(),uiAmountString:h.optional(h.string())}),$e=_e(h.array(h.type({address:be,amount:h.string(),uiAmount:h.nullable(h.number()),decimals:h.number(),uiAmountString:h.optional(h.string())}))),tr=_e(h.array(h.type({pubkey:be,account:h.type({executable:h.boolean(),owner:be,lamports:h.number(),data:ye,rentEpoch:h.number()})}))),er=h.type({program:h.string(),parsed:h.unknown(),space:h.number()}),rr=_e(h.array(h.type({pubkey:be,account:h.type({executable:h.boolean(),owner:be,lamports:h.number(),data:er,rentEpoch:h.number()})}))),nr=_e(h.array(h.type({lamports:h.number(),address:be}))),ir=h.type({executable:h.boolean(),owner:be,lamports:h.number(),data:ye,rentEpoch:h.number()}),sr=h.type({pubkey:be,account:ir}),or=h.coerce(h.union([h.instance(n.Buffer),er]),h.union([fe,er]),t=>Array.isArray(t)?h.create(t,ye):t),ar=h.type({executable:h.boolean(),owner:be,lamports:h.number(),data:or,rentEpoch:h.number()}),cr=h.type({pubkey:be,account:ar}),ur=h.type({state:h.union([h.literal("active"),h.literal("inactive"),h.literal("activating"),h.literal("deactivating")]),active:h.number(),inactive:h.number()}),lr=Me(h.array(h.type({signature:h.string(),slot:h.number(),err:Pe,memo:h.nullable(h.string()),blockTime:h.optional(h.nullable(h.number()))}))),hr=Me(h.array(h.type({signature:h.string(),slot:h.number(),err:Pe,memo:h.nullable(h.string()),blockTime:h.optional(h.nullable(h.number()))}))),dr=h.type({subscription:h.number(),result:Ae(ir)}),pr=h.type({pubkey:be,account:ir}),gr=h.type({subscription:h.number(),result:Ae(pr)}),mr=h.type({parent:h.number(),slot:h.number(),root:h.number()}),br=h.type({subscription:h.number(),result:mr}),fr=h.union([h.type({type:h.union([h.literal("firstShredReceived"),h.literal("completed"),h.literal("optimisticConfirmation"),h.literal("root")]),slot:h.number(),timestamp:h.number()}),h.type({type:h.literal("createdBank"),parent:h.number(),slot:h.number(),timestamp:h.number()}),h.type({type:h.literal("frozen"),slot:h.number(),timestamp:h.number(),stats:h.type({numTransactionEntries:h.number(),numSuccessfulTransactions:h.number(),numFailedTransactions:h.number(),maxTransactionsPerEntry:h.number()})}),h.type({type:h.literal("dead"),slot:h.number(),timestamp:h.number(),err:h.string()})]),yr=h.type({subscription:h.number(),result:fr}),wr=h.type({subscription:h.number(),result:Ae(h.union([Re,ze]))}),kr=h.type({subscription:h.number(),result:h.number()}),Sr=h.type({pubkey:h.string(),gossip:h.nullable(h.string()),tpu:h.nullable(h.string()),rpc:h.nullable(h.string()),version:h.nullable(h.string())}),vr=h.type({votePubkey:h.string(),nodePubkey:h.string(),activatedStake:h.number(),epochVoteAccount:h.boolean(),epochCredits:h.array(h.tuple([h.number(),h.number(),h.number()])),commission:h.number(),lastVote:h.number(),rootSlot:h.nullable(h.number())}),Ir=Me(h.type({current:h.array(vr),delinquent:h.array(vr)})),Mr=h.union([h.literal("processed"),h.literal("confirmed"),h.literal("finalized")]),_r=h.type({slot:h.number(),confirmations:h.nullable(h.number()),err:Pe,confirmationStatus:h.optional(Mr)}),Ar=_e(h.array(h.nullable(_r))),Er=Me(h.number()),Or=h.type({accountKey:be,writableIndexes:h.array(h.number()),readonlyIndexes:h.array(h.number())}),Tr=h.type({signatures:h.array(h.string()),message:h.type({accountKeys:h.array(h.string()),header:h.type({numRequiredSignatures:h.number(),numReadonlySignedAccounts:h.number(),numReadonlyUnsignedAccounts:h.number()}),instructions:h.array(h.type({accounts:h.array(h.number()),data:h.string(),programIdIndex:h.number()})),recentBlockhash:h.string(),addressTableLookups:h.optional(h.array(Or))})}),jr=h.type({pubkey:be,signer:h.boolean(),writable:h.boolean(),source:h.optional(h.union([h.literal("transaction"),h.literal("lookupTable")]))}),Br=h.type({accountKeys:h.array(jr),signatures:h.array(h.string())}),Nr=h.type({parsed:h.unknown(),program:h.string(),programId:be}),xr=h.type({accounts:h.array(be),data:h.string(),programId:be}),Lr=h.union([xr,Nr]),Pr=h.union([h.type({parsed:h.unknown(),program:h.string(),programId:h.string()}),h.type({accounts:h.array(h.string()),data:h.string(),programId:h.string()})]),Rr=h.coerce(Lr,Pr,t=>"accounts"in t?h.create(t,xr):h.create(t,Nr)),zr=h.type({signatures:h.array(h.string()),message:h.type({accountKeys:h.array(jr),instructions:h.array(Rr),recentBlockhash:h.string(),addressTableLookups:h.optional(h.nullable(h.array(Or)))})}),Ur=h.type({accountIndex:h.number(),mint:h.string(),owner:h.optional(h.string()),uiTokenAmount:Xe}),Wr=h.type({writable:h.array(be),readonly:h.array(be)}),Cr=h.type({err:Pe,fee:h.number(),innerInstructions:h.optional(h.nullable(h.array(h.type({index:h.number(),instructions:h.array(h.type({accounts:h.array(h.number()),data:h.string(),programIdIndex:h.number()}))})))),preBalances:h.array(h.number()),postBalances:h.array(h.number()),logMessages:h.optional(h.nullable(h.array(h.string()))),preTokenBalances:h.optional(h.nullable(h.array(Ur))),postTokenBalances:h.optional(h.nullable(h.array(Ur))),loadedAddresses:h.optional(Wr),computeUnitsConsumed:h.optional(h.number())}),Dr=h.type({err:Pe,fee:h.number(),innerInstructions:h.optional(h.nullable(h.array(h.type({index:h.number(),instructions:h.array(Rr)})))),preBalances:h.array(h.number()),postBalances:h.array(h.number()),logMessages:h.optional(h.nullable(h.array(h.string()))),preTokenBalances:h.optional(h.nullable(h.array(Ur))),postTokenBalances:h.optional(h.nullable(h.array(Ur))),loadedAddresses:h.optional(Wr),computeUnitsConsumed:h.optional(h.number())}),Fr=h.union([h.literal(0),h.literal("legacy")]),Vr=h.type({pubkey:h.string(),lamports:h.number(),postBalance:h.nullable(h.number()),rewardType:h.nullable(h.string()),commission:h.optional(h.nullable(h.number()))}),Kr=Me(h.nullable(h.type({blockhash:h.string(),previousBlockhash:h.string(),parentSlot:h.number(),transactions:h.array(h.type({transaction:Tr,meta:h.nullable(Cr),version:h.optional(Fr)})),rewards:h.optional(h.array(Vr)),blockTime:h.nullable(h.number()),blockHeight:h.nullable(h.number())}))),Qr=Me(h.nullable(h.type({blockhash:h.string(),previousBlockhash:h.string(),parentSlot:h.number(),rewards:h.optional(h.array(Vr)),blockTime:h.nullable(h.number()),blockHeight:h.nullable(h.number())}))),Zr=Me(h.nullable(h.type({blockhash:h.string(),previousBlockhash:h.string(),parentSlot:h.number(),transactions:h.array(h.type({transaction:Br,meta:h.nullable(Cr),version:h.optional(Fr)})),rewards:h.optional(h.array(Vr)),blockTime:h.nullable(h.number()),blockHeight:h.nullable(h.number())}))),Hr=Me(h.nullable(h.type({blockhash:h.string(),previousBlockhash:h.string(),parentSlot:h.number(),transactions:h.array(h.type({transaction:zr,meta:h.nullable(Dr),version:h.optional(Fr)})),rewards:h.optional(h.array(Vr)),blockTime:h.nullable(h.number()),blockHeight:h.nullable(h.number())}))),qr=Me(h.nullable(h.type({blockhash:h.string(),previousBlockhash:h.string(),parentSlot:h.number(),transactions:h.array(h.type({transaction:Br,meta:h.nullable(Dr),version:h.optional(Fr)})),rewards:h.optional(h.array(Vr)),blockTime:h.nullable(h.number()),blockHeight:h.nullable(h.number())}))),Yr=Me(h.nullable(h.type({blockhash:h.string(),previousBlockhash:h.string(),parentSlot:h.number(),rewards:h.optional(h.array(Vr)),blockTime:h.nullable(h.number()),blockHeight:h.nullable(h.number())}))),Gr=Me(h.nullable(h.type({blockhash:h.string(),previousBlockhash:h.string(),parentSlot:h.number(),transactions:h.array(h.type({transaction:Tr,meta:h.nullable(Cr)})),rewards:h.optional(h.array(Vr)),blockTime:h.nullable(h.number())}))),Jr=Me(h.nullable(h.type({blockhash:h.string(),previousBlockhash:h.string(),parentSlot:h.number(),signatures:h.array(h.string()),blockTime:h.nullable(h.number())}))),Xr=Me(h.nullable(h.type({slot:h.number(),meta:h.nullable(Cr),blockTime:h.optional(h.nullable(h.number())),transaction:Tr,version:h.optional(Fr)}))),$r=Me(h.nullable(h.type({slot:h.number(),transaction:zr,meta:h.nullable(Dr),blockTime:h.optional(h.nullable(h.number())),version:h.optional(Fr)}))),tn=_e(h.type({blockhash:h.string(),feeCalculator:h.type({lamportsPerSignature:h.number()})})),en=_e(h.type({blockhash:h.string(),lastValidBlockHeight:h.number()})),rn=_e(h.boolean()),nn=h.type({slot:h.number(),numTransactions:h.number(),numSlots:h.number(),samplePeriodSecs:h.number()}),sn=Me(h.array(nn)),on=_e(h.nullable(h.type({feeCalculator:h.type({lamportsPerSignature:h.number()})}))),an=Me(h.string()),cn=Me(h.string()),un=h.type({err:Pe,logs:h.array(h.string()),signature:h.string()}),ln=h.type({result:Ae(un),subscription:h.number()}),hn={"solana-client":"js/0.0.0-development"};class dn{constructor(t,e){let r,n,i,s,o,a;this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const t={};return async e=>{var r;const{commitment:n,config:i}=Se(e),s=this._buildArgs([],n,void 0,i),o=te(s);return t[o]=null!==(r=t[o])&&void 0!==r?r:(async()=>{try{const e=await this._rpcRequest("getBlockHeight",s),r=h.create(e,Me(h.number()));if("error"in r)throw new ae(r.error,"failed to get block height information");return r.result}finally{delete t[o]}})(),await t[o]}})(),e&&"string"===typeof e?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,n=e.httpHeaders,i=e.fetch,s=e.fetchMiddleware,o=e.disableRetryOnRateLimit,a=e.httpAgent),this._rpcEndpoint=ke(t),this._rpcWsEndpoint=r||me(t),this._rpcClient=De(t,n,i,s,o,a),this._rpcRequest=Fe(this._rpcClient),this._rpcBatchRequest=Ve(this._rpcClient),this._rpcWebSocket=new ue(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgs([t.toBase58()],r,void 0,n),s=await this._rpcRequest("getBalance",i),o=h.create(s,_e(h.number()));if("error"in o)throw new ae(o.error,"failed to get balance for "+t.toBase58());return o.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(t=>t.value).catch(e=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+e)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=h.create(e,Me(h.nullable(h.number())));if("error"in r)throw new ae(r.error,"failed to get block time for slot "+t);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=h.create(t,Me(h.number()));if("error"in e)throw new ae(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=h.create(t,Ge);if("error"in e)throw new ae(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};e="string"===typeof t?{commitment:t}:t?{...t,commitment:t&&t.commitment||this.commitment}:{commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),n=h.create(r,Je);if("error"in n)throw new ae(n.error,"failed to get supply");return n.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenSupply",r),i=h.create(n,_e(Xe));if("error"in i)throw new ae(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenAccountBalance",r),i=h.create(n,_e(Xe));if("error"in i)throw new ae(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){const{commitment:n,config:i}=Se(r);let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const o=this._buildArgs(s,n,"base64",i),a=await this._rpcRequest("getTokenAccountsByOwner",o),c=h.create(a,tr);if("error"in c)throw new ae(c.error,"failed to get token accounts owned by account "+t.toBase58());return c.result}async getParsedTokenAccountsByOwner(t,e,r){let n=[t.toBase58()];"mint"in e?n.push({mint:e.mint.toBase58()}):n.push({programId:e.programId.toBase58()});const i=this._buildArgs(n,r,"jsonParsed"),s=await this._rpcRequest("getTokenAccountsByOwner",i),o=h.create(s,rr);if("error"in o)throw new ae(o.error,"failed to get token accounts owned by account "+t.toBase58());return o.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],n=await this._rpcRequest("getLargestAccounts",r),i=h.create(n,nr);if("error"in i)throw new ae(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenLargestAccounts",r),i=h.create(n,$e);if("error"in i)throw new ae(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgs([t.toBase58()],r,"base64",n),s=await this._rpcRequest("getAccountInfo",i),o=h.create(s,_e(h.nullable(ir)));if("error"in o)throw new ae(o.error,"failed to get info about account "+t.toBase58());return o.result}async getParsedAccountInfo(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",n),s=await this._rpcRequest("getAccountInfo",i),o=h.create(s,_e(h.nullable(ar)));if("error"in o)throw new ae(o.error,"failed to get info about account "+t.toBase58());return o.result}async getAccountInfo(t,e){try{const r=await this.getAccountInfoAndContext(t,e);return r.value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:n}=Se(e),i=t.map(t=>t.toBase58()),s=this._buildArgs([i],r,"jsonParsed",n),o=await this._rpcRequest("getMultipleAccounts",s),a=h.create(o,_e(h.array(h.nullable(ar))));if("error"in a)throw new ae(a.error,"failed to get info for accounts "+i);return a.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:n}=Se(e),i=t.map(t=>t.toBase58()),s=this._buildArgs([i],r,"base64",n),o=await this._rpcRequest("getMultipleAccounts",s),a=h.create(o,_e(h.array(h.nullable(ir))));if("error"in a)throw new ae(a.error,"failed to get info for accounts "+i);return a.result}async getMultipleAccountsInfo(t,e){const r=await this.getMultipleAccountsInfoAndContext(t,e);return r.value}async getStakeActivation(t,e,r){const{commitment:n,config:i}=Se(e),s=this._buildArgs([t.toBase58()],n,void 0,{...i,epoch:null!=r?r:null===i||void 0===i?void 0:i.epoch}),o=await this._rpcRequest("getStakeActivation",s),a=h.create(o,Me(ur));if("error"in a)throw new ae(a.error,"failed to get Stake Activation "+t.toBase58());return a.result}async getProgramAccounts(t,e){const{commitment:r,config:n}=Se(e),{encoding:i,...s}=n||{},o=this._buildArgs([t.toBase58()],r,i||"base64",s),a=await this._rpcRequest("getProgramAccounts",o),c=h.array(sr),u=!0===s.withContext?h.create(a,_e(c)):h.create(a,Me(c));if("error"in u)throw new ae(u.error,"failed to get accounts owned by program "+t.toBase58());return u.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",n),s=await this._rpcRequest("getProgramAccounts",i),o=h.create(s,Me(h.array(cr)));if("error"in o)throw new ae(o.error,"failed to get accounts owned by program "+t.toBase58());return o.result}async confirmTransaction(t,e){let r,n;if("string"==typeof t)r=t;else{var i;const e=t;if(null!==(i=e.abortSignal)&&void 0!==i&&i.aborted)return Promise.reject(e.abortSignal.reason);r=e.signature}try{n=k.default.decode(r)}catch(s){throw new Error("signature must be base58 encoded: "+r)}return at(64===n.length,"signature has invalid length"),"string"===typeof t?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{null!=t&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,n,i=!1;const s=new Promise((s,o)=>{try{r=this.onSignature(e,(t,e)=>{r=void 0;const n={context:e,value:t};s({__type:dt.PROCESSED,response:n})},t);const a=new Promise(t=>{null==r?t():n=this._onSubscriptionStateChange(r,e=>{"subscribed"===e&&t()})});(async()=>{if(await a,i)return;const r=await this.getSignatureStatus(e);if(i)return;if(null==r)return;const{context:n,value:c}=r;if(null!=c)if(null!==c&&void 0!==c&&c.err)o(c.err);else{switch(t){case"confirmed":case"single":case"singleGossip":if("processed"===c.confirmationStatus)return;break;case"finalized":case"max":case"root":if("processed"===c.confirmationStatus||"confirmed"===c.confirmationStatus)return;break;case"processed":case"recent":}i=!0,s({__type:dt.PROCESSED,response:{context:n,value:c}})}})()}catch(a){o(a)}}),o=()=>{n&&(n(),n=void 0),null!=r&&(this.removeSignatureListener(r),r=void 0)};return{abortConfirmation:o,confirmationPromise:s}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:n}}){let i=!1;const s=new Promise(e=>{const n=async()=>{try{const e=await this.getBlockHeight(t);return e}catch(e){return-1}};(async()=>{let t=await n();if(!i){while(t<=r){if(await Nt(1e3),i)return;if(t=await n(),i)return}e({__type:dt.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:o,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:t,signature:n}),c=this.getCancellationPromise(e);let u;try{const t=await Promise.race([c,a,s]);if(t.__type!==dt.PROCESSED)throw new H(n);u=t.response}finally{i=!0,o()}return u}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:n,nonceValue:i,signature:s}}){let o=!1;const a=new Promise(e=>{let s=i,a=null;const c=async()=>{try{const{context:e,value:i}=await this.getNonceAndContext(n,{commitment:t,minContextSlot:r});return a=e.slot,null===i||void 0===i?void 0:i.nonce}catch(e){return s}};(async()=>{if(s=await c(),!o)while(1){if(i!==s)return void e({__type:dt.NONCE_INVALID,slotInWhichNonceDidAdvance:a});if(await Nt(2e3),o)return;if(s=await c(),o)return}})()}),{abortConfirmation:c,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),l=this.getCancellationPromise(e);let h;try{const e=await Promise.race([l,u,a]);if(e.__type===dt.PROCESSED)h=e.response;else{var d;let n;while(1){var p;const t=await this.getSignatureStatus(s);if(null==t)break;if(!(t.context.slot<(null!==(p=e.slotInWhichNonceDidAdvance)&&void 0!==p?p:r))){n=t;break}await Nt(400)}if(null===(d=n)||void 0===d||!d.value)throw new Y(s);{const e=t||"finalized",{confirmationStatus:r}=n.value;switch(e){case"processed":case"recent":if("processed"!==r&&"confirmed"!==r&&"finalized"!==r)throw new Y(s);break;case"confirmed":case"single":case"singleGossip":if("confirmed"!==r&&"finalized"!==r)throw new Y(s);break;case"finalized":case"max":case"root":if("finalized"!==r)throw new Y(s);break;default:}h={context:n.context,value:{err:n.value.err}}}}}finally{o=!0,c()}return h}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const n=new Promise(e=>{let n=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":n=this._confirmTransactionInitialTimeout||3e4;break}r=setTimeout(()=>e({__type:dt.TIMED_OUT,timeoutMs:n}),n)}),{abortConfirmation:i,confirmationPromise:s}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let o;try{const t=await Promise.race([s,n]);if(t.__type!==dt.PROCESSED)throw new q(e,t.timeoutMs/1e3);o=t.response}finally{clearTimeout(r),i()}return o}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=h.create(t,Me(h.array(Sr)));if("error"in e)throw new ae(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),n=h.create(r,Ir);if("error"in n)throw new ae(n.error,"failed to get vote accounts");return n.result}async getSlot(t){const{commitment:e,config:r}=Se(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",n),s=h.create(i,Me(h.number()));if("error"in s)throw new ae(s.error,"failed to get slot");return s.result}async getSlotLeader(t){const{commitment:e,config:r}=Se(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",n),s=h.create(i,Me(h.string()));if("error"in s)throw new ae(s.error,"failed to get slot leader");return s.result}async getSlotLeaders(t,e){const r=[t,e],n=await this._rpcRequest("getSlotLeaders",r),i=h.create(n,Me(h.array(be)));if("error"in i)throw new ae(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:r,value:n}=await this.getSignatureStatuses([t],e);at(1===n.length);const i=n[0];return{context:r,value:i}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const n=await this._rpcRequest("getSignatureStatuses",r),i=h.create(n,Ar);if("error"in i)throw new ae(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:r}=Se(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",n),s=h.create(i,Me(h.number()));if("error"in s)throw new ae(s.error,"failed to get transaction count");return s.result}async getTotalSupply(t){const e=await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0});return e.value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),n=h.create(r,Ke);if("error"in n)throw new ae(n.error,"failed to get inflation");return n.result}async getInflationReward(t,e,r){const{commitment:n,config:i}=Se(r),s=this._buildArgs([t.map(t=>t.toBase58())],n,void 0,{...i,epoch:null!=e?e:null===i||void 0===i?void 0:i.epoch}),o=await this._rpcRequest("getInflationReward",s),a=h.create(o,Te);if("error"in a)throw new ae(a.error,"failed to get inflation reward");return a.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=h.create(t,Qe);if("error"in e)throw new ae(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=Se(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",n),s=h.create(i,He);if("error"in s)throw new ae(s.error,"failed to get epoch info");return s.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=h.create(t,qe);if("error"in e)throw new ae(e.error,"failed to get epoch schedule");const r=e.result;return new ie(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=h.create(t,Ye);if("error"in e)throw new ae(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),n=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=h.create(n,Er);return"error"in i?0:i.result}async getRecentBlockhashAndContext(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getRecentBlockhash",e),n=h.create(r,tn);if("error"in n)throw new ae(n.error,"failed to get recent blockhash");return n.result}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=h.create(e,sn);if("error"in r)throw new ae(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),n=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=h.create(n,on);if("error"in i)throw new ae(i.error,"failed to get fee calculator");const{context:s,value:o}=i.result;return{context:s,value:null!==o?o.feeCalculator:null}}async getFeeForMessage(t,e){const r=B(t.serialize()).toString("base64"),n=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",n),s=h.create(i,_e(h.nullable(h.number())));if("error"in s)throw new ae(s.error,"failed to get fee for message");if(null===s.result)throw new Error("invalid blockhash");return s.result}async getRecentPrioritizationFees(t){var e;const r=null===t||void 0===t||null===(e=t.lockedWritableAccounts)||void 0===e?void 0:e.map(t=>t.toBase58()),n=null!==r&&void 0!==r&&r.length?[r]:[],i=await this._rpcRequest("getRecentPrioritizationFees",n),s=h.create(i,Ze);if("error"in s)throw new ae(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(t){try{const e=await this.getRecentBlockhashAndContext(t);return e.value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{const e=await this.getLatestBlockhashAndContext(t);return e.value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=Se(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",n),s=h.create(i,en);if("error"in s)throw new ae(s.error,"failed to get latest blockhash");return s.result}async isBlockhashValid(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgs([t],r,void 0,n),s=await this._rpcRequest("isBlockhashValid",i),o=h.create(s,rn);if("error"in o)throw new ae(o.error,"failed to determine if the blockhash `"+t+"`is valid");return o.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=h.create(t,Me(Ue));if("error"in e)throw new ae(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=h.create(t,Me(h.string()));if("error"in e)throw new ae(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,n),s=await this._rpcRequest("getBlock",i);try{switch(null===n||void 0===n?void 0:n.transactionDetails){case"accounts":{const t=h.create(s,Zr);if("error"in t)throw t.error;return t.result}case"none":{const t=h.create(s,Qr);if("error"in t)throw t.error;return t.result}default:{const t=h.create(s,Kr);if("error"in t)throw t.error;const{result:e}=t;return e?{...e,transactions:e.transactions.map(({transaction:t,meta:e,version:r})=>({meta:e,transaction:{...t,message:Ee(r,t.message)},version:r}))}:null}}}catch(o){throw new ae(o,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n),s=await this._rpcRequest("getBlock",i);try{switch(null===n||void 0===n?void 0:n.transactionDetails){case"accounts":{const t=h.create(s,qr);if("error"in t)throw t.error;return t.result}case"none":{const t=h.create(s,Yr);if("error"in t)throw t.error;return t.result}default:{const t=h.create(s,Hr);if("error"in t)throw t.error;return t.result}}}catch(o){throw new ae(o,"failed to get block")}}async getBlockProduction(t){let e,r;if("string"===typeof t)r=t;else if(t){const{commitment:n,...i}=t;r=n,e=i}const n=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",n),s=h.create(i,Ce);if("error"in s)throw new ae(s.error,"failed to get block production information");return s.result}async getTransaction(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,n),s=await this._rpcRequest("getTransaction",i),o=h.create(s,Xr);if("error"in o)throw new ae(o.error,"failed to get transaction");const a=o.result;return a?{...a,transaction:{...a.transaction,message:Ee(a.version,a.transaction.message)}}:a}async getParsedTransaction(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n),s=await this._rpcRequest("getTransaction",i),o=h.create(s,$r);if("error"in o)throw new ae(o.error,"failed to get transaction");return o.result}async getParsedTransactions(t,e){const{commitment:r,config:n}=Se(e),i=t.map(t=>{const e=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n);return{methodName:"getTransaction",args:e}}),s=await this._rpcBatchRequest(i),o=s.map(t=>{const e=h.create(t,$r);if("error"in e)throw new ae(e.error,"failed to get transactions");return e.result});return o}async getTransactions(t,e){const{commitment:r,config:n}=Se(e),i=t.map(t=>{const e=this._buildArgsAtLeastConfirmed([t],r,void 0,n);return{methodName:"getTransaction",args:e}}),s=await this._rpcBatchRequest(i),o=s.map(t=>{const e=h.create(t,Xr);if("error"in e)throw new ae(e.error,"failed to get transactions");const r=e.result;return r?{...r,transaction:{...r.transaction,message:Ee(r.version,r.transaction.message)}}:r});return o}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),n=await this._rpcRequest("getConfirmedBlock",r),i=h.create(n,Gr);if("error"in i)throw new ae(i.error,"failed to get confirmed block");const s=i.result;if(!s)throw new Error("Confirmed block "+t+" not found");const o={...s,transactions:s.transactions.map(({transaction:t,meta:e})=>{const r=new ut(t.message);return{meta:e,transaction:{...t,message:r}}})};return{...o,transactions:o.transactions.map(({transaction:t,meta:e})=>({meta:e,transaction:mt.populate(t.message,t.signatures)}))}}async getBlocks(t,e,r){const n=this._buildArgsAtLeastConfirmed(void 0!==e?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",n),s=h.create(i,Me(h.array(h.number())));if("error"in s)throw new ae(s.error,"failed to get blocks");return s.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),n=await this._rpcRequest("getBlock",r),i=h.create(n,Jr);if("error"in i)throw new ae(i.error,"failed to get block");const s=i.result;if(!s)throw new Error("Block "+t+" not found");return s}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),n=await this._rpcRequest("getConfirmedBlock",r),i=h.create(n,Jr);if("error"in i)throw new ae(i.error,"failed to get confirmed block");const s=i.result;if(!s)throw new Error("Confirmed block "+t+" not found");return s}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),n=await this._rpcRequest("getConfirmedTransaction",r),i=h.create(n,Xr);if("error"in i)throw new ae(i.error,"failed to get transaction");const s=i.result;if(!s)return s;const o=new ut(s.transaction.message),a=s.transaction.signatures;return{...s,transaction:mt.populate(o,a)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),n=await this._rpcRequest("getConfirmedTransaction",r),i=h.create(n,$r);if("error"in i)throw new ae(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const r=t.map(t=>{const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed");return{methodName:"getConfirmedTransaction",args:r}}),n=await this._rpcBatchRequest(r),i=n.map(t=>{const e=h.create(t,$r);if("error"in e)throw new ae(e.error,"failed to get confirmed transactions");return e.result});return i}async getConfirmedSignaturesForAddress(t,e,r){let n={},i=await this.getFirstAvailableBlock();while(!("until"in n)){if(e--,e<=0||e<i)break;try{const t=await this.getConfirmedBlockSignatures(e,"finalized");t.signatures.length>0&&(n.until=t.signatures[t.signatures.length-1].toString())}catch(a){if(a instanceof Error&&a.message.includes("skipped"))continue;throw a}}let s=await this.getSlot("finalized");while(!("before"in n)){if(r++,r>s)break;try{const t=await this.getConfirmedBlockSignatures(r);t.signatures.length>0&&(n.before=t.signatures[t.signatures.length-1].toString())}catch(a){if(a instanceof Error&&a.message.includes("skipped"))continue;throw a}}const o=await this.getConfirmedSignaturesForAddress2(t,n);return o.map(t=>t.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const n=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",n),s=h.create(i,lr);if("error"in s)throw new ae(s.error,"failed to get confirmed signatures for address");return s.result}async getSignaturesForAddress(t,e,r){const n=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",n),s=h.create(i,hr);if("error"in s)throw new ae(s.error,"failed to get signatures for address");return s.result}async getAddressLookupTable(t,e){const{context:r,value:n}=await this.getAccountInfoAndContext(t,e);let i=null;return null!==n&&(i=new de({key:t,state:de.deserialize(n.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:n}=await this.getAccountInfoAndContext(t,e);let i=null;return null!==n&&(i=Ut.fromAccountData(n.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(t=>t.value).catch(e=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+e)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),n=h.create(r,an);if("error"in n)throw new ae(n.error,`airdrop to ${t.toBase58()} failed`);return n.result}async _blockhashWithExpiryBlockHeight(t){if(!t){while(this._pollingBlockhash)await Nt(100);const t=Date.now()-this._blockhashInfo.lastFetch,e=t>=we;if(null!==this._blockhashInfo.latestBlockhash&&!e)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let n=0;n<50;n++){const t=await this.getLatestBlockhash("finalized");if(r!==t.blockhash)return this._blockhashInfo={latestBlockhash:t,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},t;await Nt(St/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=Se(t),n=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",n),s=h.create(i,_e(h.number()));if("error"in s)throw new ae(s.error,"failed to get stake minimum delegation");return s.result}async simulateTransaction(t,e,r){if("message"in t){const i=t,s=i.serialize(),o=n.Buffer.from(s).toString("base64");if(Array.isArray(e)||void 0!==r)throw new Error("Invalid arguments");const a=e||{};a.encoding="base64","commitment"in a||(a.commitment=this.commitment);const c=[o,a],u=await this._rpcRequest("simulateTransaction",c),l=h.create(u,We);if("error"in l)throw new Error("failed to simulate transaction: "+l.error.message);return l.result}let i;if(t instanceof mt){let e=t;i=new mt,i.feePayer=e.feePayer,i.instructions=t.instructions,i.nonceInfo=e.nonceInfo,i.signatures=e.signatures}else i=mt.populate(t),i._message=i._json=void 0;if(void 0!==e&&!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(i.nonceInfo&&s)i.sign(...s);else{let t=this._disableBlockhashCaching;for(;;){const e=await this._blockhashWithExpiryBlockHeight(t);if(i.lastValidBlockHeight=e.lastValidBlockHeight,i.recentBlockhash=e.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const r=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(r)&&!this._blockhashInfo.transactionSignatures.includes(r)){this._blockhashInfo.simulatedSignatures.push(r);break}t=!0}}const o=i._compile(),a=o.serialize(),c=i._serialize(a),u=c.toString("base64"),l={encoding:"base64",commitment:this.commitment};if(r){const t=(Array.isArray(r)?r:o.nonProgramIds()).map(t=>t.toBase58());l["accounts"]={encoding:"base64",addresses:t}}s&&(l.sigVerify=!0);const d=[u,l],p=await this._rpcRequest("simulateTransaction",d),g=h.create(p,We);if("error"in g){let t;if("data"in g.error&&(t=g.error.data.logs,t&&Array.isArray(t))){const e="\n    ";t.join(e)}throw new se("failed to simulate transaction: "+g.error.message,t)}return g.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const r=t.serialize();return await this.sendRawTransaction(r,e)}if(void 0===e||!Array.isArray(e))throw new Error("Invalid arguments");const n=e;if(t.nonceInfo)t.sign(...n);else{let e=this._disableBlockhashCaching;for(;;){const r=await this._blockhashWithExpiryBlockHeight(e);if(t.lastValidBlockHeight=r.lastValidBlockHeight,t.recentBlockhash=r.blockhash,t.sign(...n),!t.signature)throw new Error("!signature");const i=t.signature.toString("base64");if(!this._blockhashInfo.transactionSignatures.includes(i)){this._blockhashInfo.transactionSignatures.push(i);break}e=!0}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=B(t).toString("base64"),n=await this.sendEncodedTransaction(r,e);return n}async sendEncodedTransaction(t,e){const r={encoding:"base64"},n=e&&e.skipPreflight,i=e&&e.preflightCommitment||this.commitment;e&&null!=e.maxRetries&&(r.maxRetries=e.maxRetries),e&&null!=e.minContextSlot&&(r.minContextSlot=e.minContextSlot),n&&(r.skipPreflight=n),i&&(r.preflightCommitment=i);const s=[t,r],o=await this._rpcRequest("sendTransaction",s),a=h.create(o,cn);if("error"in a){let t;throw"data"in a.error&&(t=a.error.data.logs),new se("failed to send transaction: "+a.error.message,t)}return a.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1}_wsOnClose(t){this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==t?(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,e])=>{this._setSubscription(t,{...e,state:"pending"})})):this._updateSubscriptions()}_setSubscription(t,e){var r;const n=null===(r=this._subscriptionsByHash[t])||void 0===r?void 0:r.state;if(this._subscriptionsByHash[t]=e,n!==e.state){const r=this._subscriptionStateChangeCallbacksByHash[t];r&&r.forEach(t=>{try{t(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var r;const n=this._subscriptionHashByClientSubscriptionId[t];if(null==n)return()=>{};const i=(r=this._subscriptionStateChangeCallbacksByHash)[n]||(r[n]=new Set);return i.add(e),()=>{i.delete(e),0===i.size&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(0===Object.keys(this._subscriptionsByHash).length)return void(this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(t){Error}},500)));if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected)return void this._rpcWebSocket.connect();const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async t=>{const r=this._subscriptionsByHash[t];if(void 0!==r)switch(r.state){case"pending":case"unsubscribed":if(0===r.callbacks.size)return delete this._subscriptionsByHash[t],"unsubscribed"===r.state&&delete this._subscriptionCallbacksByServerSubscriptionId[r.serverSubscriptionId],void await this._updateSubscriptions();await(async()=>{const{args:n,method:i}=r;try{this._setSubscription(t,{...r,state:"subscribing"});const e=await this._rpcWebSocket.call(i,n);this._setSubscription(t,{...r,serverSubscriptionId:e,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[e]=r.callbacks,await this._updateSubscriptions()}catch(s){if(Error,!e())return;this._setSubscription(t,{...r,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":0===r.callbacks.size&&await(async()=>{const{serverSubscriptionId:n,unsubscribeMethod:i}=r;if(this._subscriptionsAutoDisposedByRpc.has(n))this._subscriptionsAutoDisposedByRpc.delete(n);else{this._setSubscription(t,{...r,state:"unsubscribing"}),this._setSubscription(t,{...r,state:"unsubscribing"});try{await this._rpcWebSocket.call(i,[n])}catch(s){if(Error,!e())return;return this._setSubscription(t,{...r,state:"subscribed"}),void await this._updateSubscriptions()}}this._setSubscription(t,{...r,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];void 0!==r&&r.forEach(t=>{try{t(...e)}catch(r){}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=h.create(t,dr);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,n=te([t.method,e],!0),i=this._subscriptionsByHash[n];return void 0===i?this._subscriptionsByHash[n]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=n,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const e=this._subscriptionsByHash[n];at(void 0!==e,"Could not find a `Subscription` when tearing down client subscription #"+r),e.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const n=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64");return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},n)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=h.create(t,gr);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,n){const i=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64",n?{filters:n}:void 0);return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},i)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const n=this._buildArgs(["object"===typeof t?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=h.create(t,ln);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=h.create(t,br);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=h.create(t,yr);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r&&await r()}_buildArgs(t,e,r,n){const i=e||this._commitment;if(i||r||n){let e={};r&&(e.encoding=r),i&&(e.commitment=i),n&&(e=Object.assign(e,n)),t.push(e)}return t}_buildArgsAtLeastConfirmed(t,e,r,n){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,n)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=h.create(t,wr);"receivedSignature"!==e.value&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,"receivedSignature"===e.value?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const n=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(t,r)=>{if("status"===t.type){e(t.result,r);try{this.removeSignatureListener(i)}catch(n){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},n);return i}onSignatureWithOptions(t,e,r){const{commitment:n,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},s=this._buildArgs([t],n,void 0,i),o=this._makeSubscription({callback:(t,r)=>{e(t,r);try{this.removeSignatureListener(o)}catch(n){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return o}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=h.create(t,kr);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class pn{constructor(t){this._keypair=void 0,this._keypair=null!==t&&void 0!==t?t:A()}static generate(){return new pn(A())}static fromSecretKey(t,e){if(64!==t.byteLength)throw new Error("bad secret key size");const r=t.slice(32,64);if(!e||!e.skipValidation){const e=t.slice(0,32),n=E(e);for(let t=0;t<32;t++)if(r[t]!==n[t])throw new Error("provided secretKey is invalid")}return new pn({publicKey:r,secretKey:t})}static fromSeed(t){const e=E(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new pn({publicKey:e,secretKey:r})}get publicKey(){return new D(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const gn=Object.freeze({CreateLookupTable:{index:0,layout:S.struct([S.u32("instruction"),Dt("recentSlot"),S.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:S.struct([S.u32("instruction")])},ExtendLookupTable:{index:2,layout:S.struct([S.u32("instruction"),Dt(),S.seq(J(),S.offset(S.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:S.struct([S.u32("instruction")])},CloseLookupTable:{index:4,layout:S.struct([S.u32("instruction")])}});class mn{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=S.u32("instruction"),r=e.decode(t.data);let n;for(const[i,s]of Object.entries(gn))if(s.index==r){n=i;break}if(!n)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return n}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);const{recentSlot:e}=Lt(gn.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(e)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);const{addresses:e}=Lt(gn.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:e.map(t=>new D(t))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(bn.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}class bn{constructor(){}static createLookupTable(t){const[e,r]=D.findProgramAddressSync([t.authority.toBuffer(),l.toBufferLE(BigInt(t.recentSlot),8)],this.programId),n=gn.CreateLookupTable,i=xt(n,{recentSlot:BigInt(t.recentSlot),bumpSeed:r}),s=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:Kt.programId,isSigner:!1,isWritable:!1}];return[new gt({programId:this.programId,keys:s,data:i}),e]}static freezeLookupTable(t){const e=gn.FreezeLookupTable,r=xt(e),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new gt({programId:this.programId,keys:n,data:r})}static extendLookupTable(t){const e=gn.ExtendLookupTable,r=xt(e,{addresses:t.addresses.map(t=>t.toBytes())}),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&n.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:Kt.programId,isSigner:!1,isWritable:!1}),new gt({programId:this.programId,keys:n,data:r})}static deactivateLookupTable(t){const e=gn.DeactivateLookupTable,r=xt(e),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new gt({programId:this.programId,keys:n,data:r})}static closeLookupTable(t){const e=gn.CloseLookupTable,r=xt(e),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new gt({programId:this.programId,keys:n,data:r})}}bn.programId=new D("AddressLookupTab1e1111111111111111111111111");class fn{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=S.u8("instruction"),r=e.decode(t.data);let n;for(const[i,s]of Object.entries(yn))if(s.index==r){n=i;break}if(!n)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return n}static decodeRequestUnits(t){this.checkProgramId(t.programId);const{units:e,additionalFee:r}=Lt(yn.RequestUnits,t.data);return{units:e,additionalFee:r}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);const{bytes:e}=Lt(yn.RequestHeapFrame,t.data);return{bytes:e}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);const{units:e}=Lt(yn.SetComputeUnitLimit,t.data);return{units:e}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);const{microLamports:e}=Lt(yn.SetComputeUnitPrice,t.data);return{microLamports:e}}static checkProgramId(t){if(!t.equals(wn.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const yn=Object.freeze({RequestUnits:{index:0,layout:S.struct([S.u8("instruction"),S.u32("units"),S.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:S.struct([S.u8("instruction"),S.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:S.struct([S.u8("instruction"),S.u32("units")])},SetComputeUnitPrice:{index:3,layout:S.struct([S.u8("instruction"),Dt("microLamports")])}});class wn{constructor(){}static requestUnits(t){const e=yn.RequestUnits,r=xt(e,t);return new gt({keys:[],programId:this.programId,data:r})}static requestHeapFrame(t){const e=yn.RequestHeapFrame,r=xt(e,t);return new gt({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(t){const e=yn.SetComputeUnitLimit,r=xt(e,t);return new gt({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(t){const e=yn.SetComputeUnitPrice,r=xt(e,{microLamports:BigInt(t.microLamports)});return new gt({keys:[],programId:this.programId,data:r})}}wn.programId=new D("ComputeBudget111111111111111111111111111111");const kn=64,Sn=32,vn=64,In=S.struct([S.u8("numSignatures"),S.u8("padding"),S.u16("signatureOffset"),S.u16("signatureInstructionIndex"),S.u16("publicKeyOffset"),S.u16("publicKeyInstructionIndex"),S.u16("messageDataOffset"),S.u16("messageDataSize"),S.u16("messageInstructionIndex")]);class Mn{constructor(){}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:i,instructionIndex:s}=t;at(e.length===Sn,`Public Key must be ${Sn} bytes but received ${e.length} bytes`),at(i.length===vn,`Signature must be ${vn} bytes but received ${i.length} bytes`);const o=In.span,a=o+e.length,c=a+i.length,u=1,l=n.Buffer.alloc(c+r.length),h=null==s?65535:s;return In.encode({numSignatures:u,padding:0,signatureOffset:a,signatureInstructionIndex:h,publicKeyOffset:o,publicKeyInstructionIndex:h,messageDataOffset:c,messageDataSize:r.length,messageInstructionIndex:h},l),l.fill(e,o),l.fill(i,a),l.fill(r,c),new gt({keys:[],programId:Mn.programId,data:l})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:n}=t;at(e.length===kn,`Private key must be ${kn} bytes but received ${e.length} bytes`);try{const t=pn.fromSecretKey(e),i=t.publicKey.toBytes(),s=T(r,t.secretKey);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:s,instructionIndex:n})}catch(i){throw new Error("Error creating instruction; "+i)}}}Mn.programId=new D("Ed25519SigVerify111111111111111111111111111");const _n=(t,e)=>{const r=b.secp256k1.sign(t,e);return[r.toCompactRawBytes(),r.recovery]};b.secp256k1.utils.isValidPrivateKey;const An=b.secp256k1.getPublicKey,En=32,On=20,Tn=64,jn=11,Bn=S.struct([S.u8("numSignatures"),S.u16("signatureOffset"),S.u8("signatureInstructionIndex"),S.u16("ethAddressOffset"),S.u8("ethAddressInstructionIndex"),S.u16("messageDataOffset"),S.u16("messageDataSize"),S.u8("messageInstructionIndex"),S.blob(20,"ethAddress"),S.blob(64,"signature"),S.u8("recoveryId")]);class Nn{constructor(){}static publicKeyToEthAddress(t){at(t.length===Tn,`Public key must be ${Tn} bytes but received ${t.length} bytes`);try{return n.Buffer.from(m.keccak_256(B(t))).slice(-On)}catch(e){throw new Error("Error constructing Ethereum address: "+e)}}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:n,recoveryId:i,instructionIndex:s}=t;return Nn.createInstructionWithEthAddress({ethAddress:Nn.publicKeyToEthAddress(e),message:r,signature:n,recoveryId:i,instructionIndex:s})}static createInstructionWithEthAddress(t){const{ethAddress:e,message:r,signature:i,recoveryId:s,instructionIndex:o=0}=t;let a;a="string"===typeof e?e.startsWith("0x")?n.Buffer.from(e.substr(2),"hex"):n.Buffer.from(e,"hex"):e,at(a.length===On,`Address must be ${On} bytes but received ${a.length} bytes`);const c=1+jn,u=c,l=c+a.length,h=l+i.length+1,d=1,p=n.Buffer.alloc(Bn.span+r.length);return Bn.encode({numSignatures:d,signatureOffset:l,signatureInstructionIndex:o,ethAddressOffset:u,ethAddressInstructionIndex:o,messageDataOffset:h,messageDataSize:r.length,messageInstructionIndex:o,signature:B(i),ethAddress:B(a),recoveryId:s},p),p.fill(B(r),Bn.span),new gt({keys:[],programId:Nn.programId,data:p})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:i}=t;at(e.length===En,`Private key must be ${En} bytes but received ${e.length} bytes`);try{const t=B(e),s=An(t,!1).slice(1),o=n.Buffer.from(m.keccak_256(B(r))),[a,c]=_n(o,t);return this.createInstructionWithPublicKey({publicKey:s,message:r,signature:a,recoveryId:c,instructionIndex:i})}catch(s){throw new Error("Error creating instruction; "+s)}}}var xn;Nn.programId=new D("KeccakSecp256k11111111111111111111111111111");const Ln=new D("StakeConfig11111111111111111111111111111111");class Pn{constructor(t,e){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=e}}class Rn{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}xn=Rn,Rn.default=new xn(0,0,D.default);class zn{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=S.u32("instruction"),r=e.decode(t.data);let n;for(const[i,s]of Object.entries(Un))if(s.index==r){n=i;break}if(!n)throw new Error("Instruction type incorrect; not a StakeInstruction");return n}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e,lockup:r}=Lt(Un.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new Pn(new D(e.staker),new D(e.withdrawer)),lockup:new Rn(r.unixTimestamp,r.epoch,new D(r.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),Lt(Un.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,stakeAuthorizationType:r}=Lt(Un.Authorize,t.data),n={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new D(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(n.custodianPubkey=t.keys[3].pubkey),n}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{newAuthorized:e,stakeAuthorizationType:r,authoritySeed:n,authorityOwner:i}=Lt(Un.AuthorizeWithSeed,t.data),s={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:n,authorityOwner:new D(i),newAuthorizedPubkey:new D(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(s.custodianPubkey=t.keys[3].pubkey),s}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=Lt(Un.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:e}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Lt(Un.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=Lt(Un.Withdraw,t.data),r={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e};return t.keys.length>5&&(r.custodianPubkey=t.keys[5].pubkey),r}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Lt(Un.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(Cn.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Un=Object.freeze({Initialize:{index:0,layout:S.struct([S.u32("instruction"),tt(),et()])},Authorize:{index:1,layout:S.struct([S.u32("instruction"),J("newAuthorized"),S.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:S.struct([S.u32("instruction")])},Split:{index:3,layout:S.struct([S.u32("instruction"),S.ns64("lamports")])},Withdraw:{index:4,layout:S.struct([S.u32("instruction"),S.ns64("lamports")])},Deactivate:{index:5,layout:S.struct([S.u32("instruction")])},Merge:{index:7,layout:S.struct([S.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:S.struct([S.u32("instruction"),J("newAuthorized"),S.u32("stakeAuthorizationType"),$("authoritySeed"),J("authorityOwner")])}}),Wn=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class Cn{constructor(){}static initialize(t){const{stakePubkey:e,authorized:r,lockup:n}=t,i=n||Rn.default,s=Un.Initialize,o=xt(s,{authorized:{staker:B(r.staker.toBuffer()),withdrawer:B(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:B(i.custodian.toBuffer())}}),a={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:At,isSigner:!1,isWritable:!1}],programId:this.programId,data:o};return new gt(a)}static createAccountWithSeed(t){const e=new mt;e.add(Kt.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static createAccount(t){const e=new mt;e.add(Kt.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static delegate(t){const{stakePubkey:e,authorizedPubkey:r,votePubkey:n}=t,i=Un.Delegate,s=xt(i);return(new mt).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:vt,isSigner:!1,isWritable:!1},{pubkey:jt,isSigner:!1,isWritable:!1},{pubkey:Ln,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static authorize(t){const{stakePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:n,stakeAuthorizationType:i,custodianPubkey:s}=t,o=Un.Authorize,a=xt(o,{newAuthorized:B(n.toBuffer()),stakeAuthorizationType:i.index}),c=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:vt,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&c.push({pubkey:s,isSigner:!0,isWritable:!1}),(new mt).add({keys:c,programId:this.programId,data:a})}static authorizeWithSeed(t){const{stakePubkey:e,authorityBase:r,authoritySeed:n,authorityOwner:i,newAuthorizedPubkey:s,stakeAuthorizationType:o,custodianPubkey:a}=t,c=Un.AuthorizeWithSeed,u=xt(c,{newAuthorized:B(s.toBuffer()),stakeAuthorizationType:o.index,authoritySeed:n,authorityOwner:B(i.toBuffer())}),l=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:vt,isSigner:!1,isWritable:!1}];return a&&l.push({pubkey:a,isSigner:!0,isWritable:!1}),(new mt).add({keys:l,programId:this.programId,data:u})}static splitInstruction(t){const{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:n,lamports:i}=t,s=Un.Split,o=xt(s,{lamports:i});return new gt({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static split(t,e){const r=new mt;return r.add(Kt.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:e,space:this.space,programId:this.programId})),r.add(this.splitInstruction(t))}static splitWithSeed(t,e){const{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,basePubkey:s,seed:o,lamports:a}=t,c=new mt;return c.add(Kt.allocate({accountPubkey:i,basePubkey:s,seed:o,space:this.space,programId:this.programId})),e&&e>0&&c.add(Kt.transfer({fromPubkey:t.authorizedPubkey,toPubkey:i,lamports:e})),c.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:a}))}static merge(t){const{stakePubkey:e,sourceStakePubKey:r,authorizedPubkey:n}=t,i=Un.Merge,s=xt(i);return(new mt).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:vt,isSigner:!1,isWritable:!1},{pubkey:jt,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static withdraw(t){const{stakePubkey:e,authorizedPubkey:r,toPubkey:n,lamports:i,custodianPubkey:s}=t,o=Un.Withdraw,a=xt(o,{lamports:i}),c=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:vt,isSigner:!1,isWritable:!1},{pubkey:jt,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&c.push({pubkey:s,isSigner:!0,isWritable:!1}),(new mt).add({keys:c,programId:this.programId,data:a})}static deactivate(t){const{stakePubkey:e,authorizedPubkey:r}=t,n=Un.Deactivate,i=xt(n);return(new mt).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:vt,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}Cn.programId=new D("Stake11111111111111111111111111111111111111"),Cn.space=200;class Dn{constructor(t,e,r,n){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=e,this.authorizedWithdrawer=r,this.commission=n}}class Fn{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=S.u32("instruction"),r=e.decode(t.data);let n;for(const[i,s]of Object.entries(Vn))if(s.index==r){n=i;break}if(!n)throw new Error("Instruction type incorrect; not a VoteInstruction");return n}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);const{voteInit:e}=Lt(Vn.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new Dn(new D(e.nodePubkey),new D(e.authorizedVoter),new D(e.authorizedWithdrawer),e.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,voteAuthorizationType:r}=Lt(Vn.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new D(e),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:e,currentAuthorityDerivedKeySeed:r,newAuthorized:n,voteAuthorizationType:i}}=Lt(Vn.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new D(e),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new D(n),voteAuthorizationType:{index:i},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=Lt(Vn.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:e,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(Qn.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Vn=Object.freeze({InitializeAccount:{index:0,layout:S.struct([S.u32("instruction"),rt()])},Authorize:{index:1,layout:S.struct([S.u32("instruction"),J("newAuthorized"),S.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:S.struct([S.u32("instruction"),S.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:S.struct([S.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:S.struct([S.u32("instruction"),nt()])}}),Kn=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class Qn{constructor(){}static initializeAccount(t){const{votePubkey:e,nodePubkey:r,voteInit:n}=t,i=Vn.InitializeAccount,s=xt(i,{voteInit:{nodePubkey:B(n.nodePubkey.toBuffer()),authorizedVoter:B(n.authorizedVoter.toBuffer()),authorizedWithdrawer:B(n.authorizedWithdrawer.toBuffer()),commission:n.commission}}),o={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:At,isSigner:!1,isWritable:!1},{pubkey:vt,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s};return new gt(o)}static createAccount(t){const e=new mt;return e.add(Kt.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){const{votePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:n,voteAuthorizationType:i}=t,s=Vn.Authorize,o=xt(s,{newAuthorized:B(n.toBuffer()),voteAuthorizationType:i.index}),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:vt,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new mt).add({keys:a,programId:this.programId,data:o})}static authorizeWithSeed(t){const{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:i,voteAuthorizationType:s,votePubkey:o}=t,a=Vn.AuthorizeWithSeed,c=xt(a,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:B(r.toBuffer()),currentAuthorityDerivedKeySeed:n,newAuthorized:B(i.toBuffer()),voteAuthorizationType:s.index}}),u=[{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:vt,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return(new mt).add({keys:u,programId:this.programId,data:c})}static withdraw(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,lamports:n,toPubkey:i}=t,s=Vn.Withdraw,o=xt(s,{lamports:n}),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return(new mt).add({keys:a,programId:this.programId,data:o})}static safeWithdraw(t,e,r){if(t.lamports>e-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return Qn.withdraw(t)}static updateValidatorIdentity(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,nodePubkey:n}=t,i=Vn.UpdateValidatorIdentity,s=xt(i),o=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new mt).add({keys:o,programId:this.programId,data:s})}}Qn.programId=new D("Vote111111111111111111111111111111111111111"),Qn.space=3762;const Zn=new D("Va1idator1nfo111111111111111111111111111111"),Hn=h.type({name:h.string(),website:h.optional(h.string()),details:h.optional(h.string()),keybaseUsername:h.optional(h.string())});class qn{constructor(t,e){this.key=void 0,this.info=void 0,this.key=t,this.info=e}static fromConfigData(t){let e=[...t];const r=st(e);if(2!==r)return null;const i=[];for(let n=0;n<2;n++){const t=new D(e.slice(0,U));e=e.slice(U);const r=1===e.slice(0,1)[0];e=e.slice(1),i.push({publicKey:t,isSigner:r})}if(i[0].publicKey.equals(Zn)&&i[1].isSigner){const t=$().decode(n.Buffer.from(e)),r=JSON.parse(t);return h.assert(r,Hn),new qn(i[1].publicKey,r)}return null}}const Yn=new D("Vote111111111111111111111111111111111111111"),Gn=S.struct([J("nodePubkey"),J("authorizedWithdrawer"),S.u8("commission"),S.nu64(),S.seq(S.struct([S.nu64("slot"),S.u32("confirmationCount")]),S.offset(S.u32(),-8),"votes"),S.u8("rootSlotValid"),S.nu64("rootSlot"),S.nu64(),S.seq(S.struct([S.nu64("epoch"),J("authorizedVoter")]),S.offset(S.u32(),-8),"authorizedVoters"),S.struct([S.seq(S.struct([J("authorizedPubkey"),S.nu64("epochOfLastAuthorizedSwitch"),S.nu64("targetEpoch")]),32,"buf"),S.nu64("idx"),S.u8("isEmpty")],"priorVoters"),S.nu64(),S.seq(S.struct([S.nu64("epoch"),S.nu64("credits"),S.nu64("prevCredits")]),S.offset(S.u32(),-8),"epochCredits"),S.struct([S.nu64("slot"),S.nu64("timestamp")],"lastTimestamp")]);class Jn{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){const e=4,r=Gn.decode(B(t),e);let n=r.rootSlot;return r.rootSlotValid||(n=null),new Jn({nodePubkey:new D(r.nodePubkey),authorizedWithdrawer:new D(r.authorizedWithdrawer),commission:r.commission,votes:r.votes,rootSlot:n,authorizedVoters:r.authorizedVoters.map(Xn),priorVoters:ti(r.priorVoters),epochCredits:r.epochCredits,lastTimestamp:r.lastTimestamp})}}function Xn({authorizedVoter:t,epoch:e}){return{epoch:e,authorizedVoter:new D(t)}}function $n({authorizedPubkey:t,epochOfLastAuthorizedSwitch:e,targetEpoch:r}){return{authorizedPubkey:new D(t),epochOfLastAuthorizedSwitch:e,targetEpoch:r}}function ti({buf:t,idx:e,isEmpty:r}){return r?[]:[...t.slice(e+1).map($n),...t.slice(0,e).map($n)]}const ei={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function ri(t,e){const r=!1===e?"http":"https";if(!t)return ei[r]["devnet"];const n=ei[r][t];if(!n)throw new Error(`Unknown ${r} cluster: ${t}`);return n}async function ni(t,e,r,n){let i,s;r&&Object.prototype.hasOwnProperty.call(r,"lastValidBlockHeight")||r&&Object.prototype.hasOwnProperty.call(r,"nonceValue")?(i=r,s=n):s=r;const o=s&&{skipPreflight:s.skipPreflight,preflightCommitment:s.preflightCommitment||s.commitment,minContextSlot:s.minContextSlot},a=await t.sendRawTransaction(e,o),c=s&&s.commitment,u=i?t.confirmTransaction(i,c):t.confirmTransaction(a,c),l=(await u).value;if(l.err)throw new Error(`Raw transaction ${a} failed (${JSON.stringify(l)})`);return a}const ii=1e9;e.Account=F,e.AddressLookupTableAccount=de,e.AddressLookupTableInstruction=mn,e.AddressLookupTableProgram=bn,e.Authorized=Pn,e.BLOCKHASH_CACHE_TIMEOUT_MS=we,e.BPF_LOADER_DEPRECATED_PROGRAM_ID=V,e.BPF_LOADER_PROGRAM_ID=Ht,e.BpfLoader=qt,e.COMPUTE_BUDGET_INSTRUCTION_LAYOUTS=yn,e.ComputeBudgetInstruction=fn,e.ComputeBudgetProgram=wn,e.Connection=dn,e.Ed25519Program=Mn,e.Enum=x,e.EpochSchedule=ie,e.FeeCalculatorLayout=Pt,e.Keypair=pn,e.LAMPORTS_PER_SOL=ii,e.LOOKUP_TABLE_INSTRUCTION_LAYOUTS=gn,e.Loader=Zt,e.Lockup=Rn,e.MAX_SEED_LENGTH=z,e.Message=ut,e.MessageAccountKeys=G,e.MessageV0=lt,e.NONCE_ACCOUNT_LENGTH=zt,e.NonceAccount=Ut,e.PACKET_DATA_SIZE=K,e.PUBLIC_KEY_LENGTH=U,e.PublicKey=D,e.SIGNATURE_LENGTH_IN_BYTES=Z,e.SOLANA_SCHEMA=L,e.STAKE_CONFIG_ID=Ln,e.STAKE_INSTRUCTION_LAYOUTS=Un,e.SYSTEM_INSTRUCTION_LAYOUTS=Vt,e.SYSVAR_CLOCK_PUBKEY=vt,e.SYSVAR_EPOCH_SCHEDULE_PUBKEY=It,e.SYSVAR_INSTRUCTIONS_PUBKEY=Mt,e.SYSVAR_RECENT_BLOCKHASHES_PUBKEY=_t,e.SYSVAR_RENT_PUBKEY=At,e.SYSVAR_REWARDS_PUBKEY=Et,e.SYSVAR_SLOT_HASHES_PUBKEY=Ot,e.SYSVAR_SLOT_HISTORY_PUBKEY=Tt,e.SYSVAR_STAKE_HISTORY_PUBKEY=jt,e.Secp256k1Program=Nn,e.SendTransactionError=se,e.SolanaJSONRPCError=ae,e.SolanaJSONRPCErrorCode=oe,e.StakeAuthorizationLayout=Wn,e.StakeInstruction=zn,e.StakeProgram=Cn,e.Struct=N,e.SystemInstruction=Ft,e.SystemProgram=Kt,e.Transaction=mt,e.TransactionExpiredBlockheightExceededError=H,e.TransactionExpiredNonceInvalidError=Y,e.TransactionExpiredTimeoutError=q,e.TransactionInstruction=gt,e.TransactionMessage=bt,e.TransactionStatus=dt,e.VALIDATOR_INFO_KEY=Zn,e.VERSION_PREFIX_MASK=Q,e.VOTE_PROGRAM_ID=Yn,e.ValidatorInfo=qn,e.VersionedMessage=ht,e.VersionedTransaction=ft,e.VoteAccount=Jn,e.VoteAuthorizationLayout=Kn,e.VoteInit=Dn,e.VoteInstruction=Fn,e.VoteProgram=Qn,e.clusterApiUrl=ri,e.sendAndConfirmRawTransaction=ni,e.sendAndConfirmTransaction=Bt},"2a8a":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.convertSecretKeyToX25519=e.convertPublicKeyToX25519=e.verify=e.sign=e.extractPublicKeyFromSecretKey=e.generateKeyPair=e.generateKeyPairFromSeed=e.SEED_LENGTH=e.SECRET_KEY_LENGTH=e.PUBLIC_KEY_LENGTH=e.SIGNATURE_LENGTH=void 0;const n=r("e5f1"),i=r("c162"),s=r("ff6a");function o(t){const e=new Float64Array(16);if(t)for(let r=0;r<t.length;r++)e[r]=t[r];return e}e.SIGNATURE_LENGTH=64,e.PUBLIC_KEY_LENGTH=32,e.SECRET_KEY_LENGTH=64,e.SEED_LENGTH=32;const a=new Uint8Array(32);a[0]=9;const c=o(),u=o([1]),l=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),h=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),p=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),g=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function m(t,e){for(let r=0;r<16;r++)t[r]=0|e[r]}function b(t){let e=1;for(let r=0;r<16;r++){let n=t[r]+e+65535;e=Math.floor(n/65536),t[r]=n-65536*e}t[0]+=e-1+37*(e-1)}function f(t,e,r){const n=~(r-1);for(let i=0;i<16;i++){const r=n&(t[i]^e[i]);t[i]^=r,e[i]^=r}}function y(t,e){const r=o(),n=o();for(let i=0;i<16;i++)n[i]=e[i];b(n),b(n),b(n);for(let i=0;i<2;i++){r[0]=n[0]-65517;for(let e=1;e<15;e++)r[e]=n[e]-65535-(r[e-1]>>16&1),r[e-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);const t=r[15]>>16&1;r[14]&=65535,f(n,r,1-t)}for(let i=0;i<16;i++)t[2*i]=255&n[i],t[2*i+1]=n[i]>>8}function w(t,e){let r=0;for(let n=0;n<32;n++)r|=t[n]^e[n];return(1&r-1>>>8)-1}function k(t,e){const r=new Uint8Array(32),n=new Uint8Array(32);return y(r,t),y(n,e),w(r,n)}function S(t){const e=new Uint8Array(32);return y(e,t),1&e[0]}function v(t,e){for(let r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function I(t,e,r){for(let n=0;n<16;n++)t[n]=e[n]+r[n]}function M(t,e,r){for(let n=0;n<16;n++)t[n]=e[n]-r[n]}function _(t,e,r){let n,i,s=0,o=0,a=0,c=0,u=0,l=0,h=0,d=0,p=0,g=0,m=0,b=0,f=0,y=0,w=0,k=0,S=0,v=0,I=0,M=0,_=0,A=0,E=0,O=0,T=0,j=0,B=0,N=0,x=0,L=0,P=0,R=r[0],z=r[1],U=r[2],W=r[3],C=r[4],D=r[5],F=r[6],V=r[7],K=r[8],Q=r[9],Z=r[10],H=r[11],q=r[12],Y=r[13],G=r[14],J=r[15];n=e[0],s+=n*R,o+=n*z,a+=n*U,c+=n*W,u+=n*C,l+=n*D,h+=n*F,d+=n*V,p+=n*K,g+=n*Q,m+=n*Z,b+=n*H,f+=n*q,y+=n*Y,w+=n*G,k+=n*J,n=e[1],o+=n*R,a+=n*z,c+=n*U,u+=n*W,l+=n*C,h+=n*D,d+=n*F,p+=n*V,g+=n*K,m+=n*Q,b+=n*Z,f+=n*H,y+=n*q,w+=n*Y,k+=n*G,S+=n*J,n=e[2],a+=n*R,c+=n*z,u+=n*U,l+=n*W,h+=n*C,d+=n*D,p+=n*F,g+=n*V,m+=n*K,b+=n*Q,f+=n*Z,y+=n*H,w+=n*q,k+=n*Y,S+=n*G,v+=n*J,n=e[3],c+=n*R,u+=n*z,l+=n*U,h+=n*W,d+=n*C,p+=n*D,g+=n*F,m+=n*V,b+=n*K,f+=n*Q,y+=n*Z,w+=n*H,k+=n*q,S+=n*Y,v+=n*G,I+=n*J,n=e[4],u+=n*R,l+=n*z,h+=n*U,d+=n*W,p+=n*C,g+=n*D,m+=n*F,b+=n*V,f+=n*K,y+=n*Q,w+=n*Z,k+=n*H,S+=n*q,v+=n*Y,I+=n*G,M+=n*J,n=e[5],l+=n*R,h+=n*z,d+=n*U,p+=n*W,g+=n*C,m+=n*D,b+=n*F,f+=n*V,y+=n*K,w+=n*Q,k+=n*Z,S+=n*H,v+=n*q,I+=n*Y,M+=n*G,_+=n*J,n=e[6],h+=n*R,d+=n*z,p+=n*U,g+=n*W,m+=n*C,b+=n*D,f+=n*F,y+=n*V,w+=n*K,k+=n*Q,S+=n*Z,v+=n*H,I+=n*q,M+=n*Y,_+=n*G,A+=n*J,n=e[7],d+=n*R,p+=n*z,g+=n*U,m+=n*W,b+=n*C,f+=n*D,y+=n*F,w+=n*V,k+=n*K,S+=n*Q,v+=n*Z,I+=n*H,M+=n*q,_+=n*Y,A+=n*G,E+=n*J,n=e[8],p+=n*R,g+=n*z,m+=n*U,b+=n*W,f+=n*C,y+=n*D,w+=n*F,k+=n*V,S+=n*K,v+=n*Q,I+=n*Z,M+=n*H,_+=n*q,A+=n*Y,E+=n*G,O+=n*J,n=e[9],g+=n*R,m+=n*z,b+=n*U,f+=n*W,y+=n*C,w+=n*D,k+=n*F,S+=n*V,v+=n*K,I+=n*Q,M+=n*Z,_+=n*H,A+=n*q,E+=n*Y,O+=n*G,T+=n*J,n=e[10],m+=n*R,b+=n*z,f+=n*U,y+=n*W,w+=n*C,k+=n*D,S+=n*F,v+=n*V,I+=n*K,M+=n*Q,_+=n*Z,A+=n*H,E+=n*q,O+=n*Y,T+=n*G,j+=n*J,n=e[11],b+=n*R,f+=n*z,y+=n*U,w+=n*W,k+=n*C,S+=n*D,v+=n*F,I+=n*V,M+=n*K,_+=n*Q,A+=n*Z,E+=n*H,O+=n*q,T+=n*Y,j+=n*G,B+=n*J,n=e[12],f+=n*R,y+=n*z,w+=n*U,k+=n*W,S+=n*C,v+=n*D,I+=n*F,M+=n*V,_+=n*K,A+=n*Q,E+=n*Z,O+=n*H,T+=n*q,j+=n*Y,B+=n*G,N+=n*J,n=e[13],y+=n*R,w+=n*z,k+=n*U,S+=n*W,v+=n*C,I+=n*D,M+=n*F,_+=n*V,A+=n*K,E+=n*Q,O+=n*Z,T+=n*H,j+=n*q,B+=n*Y,N+=n*G,x+=n*J,n=e[14],w+=n*R,k+=n*z,S+=n*U,v+=n*W,I+=n*C,M+=n*D,_+=n*F,A+=n*V,E+=n*K,O+=n*Q,T+=n*Z,j+=n*H,B+=n*q,N+=n*Y,x+=n*G,L+=n*J,n=e[15],k+=n*R,S+=n*z,v+=n*U,I+=n*W,M+=n*C,_+=n*D,A+=n*F,E+=n*V,O+=n*K,T+=n*Q,j+=n*Z,B+=n*H,N+=n*q,x+=n*Y,L+=n*G,P+=n*J,s+=38*S,o+=38*v,a+=38*I,c+=38*M,u+=38*_,l+=38*A,h+=38*E,d+=38*O,p+=38*T,g+=38*j,m+=38*B,b+=38*N,f+=38*x,y+=38*L,w+=38*P,i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-65536*i,n=o+i+65535,i=Math.floor(n/65536),o=n-65536*i,n=a+i+65535,i=Math.floor(n/65536),a=n-65536*i,n=c+i+65535,i=Math.floor(n/65536),c=n-65536*i,n=u+i+65535,i=Math.floor(n/65536),u=n-65536*i,n=l+i+65535,i=Math.floor(n/65536),l=n-65536*i,n=h+i+65535,i=Math.floor(n/65536),h=n-65536*i,n=d+i+65535,i=Math.floor(n/65536),d=n-65536*i,n=p+i+65535,i=Math.floor(n/65536),p=n-65536*i,n=g+i+65535,i=Math.floor(n/65536),g=n-65536*i,n=m+i+65535,i=Math.floor(n/65536),m=n-65536*i,n=b+i+65535,i=Math.floor(n/65536),b=n-65536*i,n=f+i+65535,i=Math.floor(n/65536),f=n-65536*i,n=y+i+65535,i=Math.floor(n/65536),y=n-65536*i,n=w+i+65535,i=Math.floor(n/65536),w=n-65536*i,n=k+i+65535,i=Math.floor(n/65536),k=n-65536*i,s+=i-1+37*(i-1),i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-65536*i,n=o+i+65535,i=Math.floor(n/65536),o=n-65536*i,n=a+i+65535,i=Math.floor(n/65536),a=n-65536*i,n=c+i+65535,i=Math.floor(n/65536),c=n-65536*i,n=u+i+65535,i=Math.floor(n/65536),u=n-65536*i,n=l+i+65535,i=Math.floor(n/65536),l=n-65536*i,n=h+i+65535,i=Math.floor(n/65536),h=n-65536*i,n=d+i+65535,i=Math.floor(n/65536),d=n-65536*i,n=p+i+65535,i=Math.floor(n/65536),p=n-65536*i,n=g+i+65535,i=Math.floor(n/65536),g=n-65536*i,n=m+i+65535,i=Math.floor(n/65536),m=n-65536*i,n=b+i+65535,i=Math.floor(n/65536),b=n-65536*i,n=f+i+65535,i=Math.floor(n/65536),f=n-65536*i,n=y+i+65535,i=Math.floor(n/65536),y=n-65536*i,n=w+i+65535,i=Math.floor(n/65536),w=n-65536*i,n=k+i+65535,i=Math.floor(n/65536),k=n-65536*i,s+=i-1+37*(i-1),t[0]=s,t[1]=o,t[2]=a,t[3]=c,t[4]=u,t[5]=l,t[6]=h,t[7]=d,t[8]=p,t[9]=g,t[10]=m,t[11]=b,t[12]=f,t[13]=y,t[14]=w,t[15]=k}function A(t,e){_(t,e,e)}function E(t,e){const r=o();let n;for(n=0;n<16;n++)r[n]=e[n];for(n=253;n>=0;n--)A(r,r),2!==n&&4!==n&&_(r,r,e);for(n=0;n<16;n++)t[n]=r[n]}function O(t,e){const r=o();let n;for(n=0;n<16;n++)r[n]=e[n];for(n=250;n>=0;n--)A(r,r),1!==n&&_(r,r,e);for(n=0;n<16;n++)t[n]=r[n]}function T(t,e){const r=o(),n=o(),i=o(),s=o(),a=o(),c=o(),u=o(),l=o(),d=o();M(r,t[1],t[0]),M(d,e[1],e[0]),_(r,r,d),I(n,t[0],t[1]),I(d,e[0],e[1]),_(n,n,d),_(i,t[3],e[3]),_(i,i,h),_(s,t[2],e[2]),I(s,s,s),M(a,n,r),M(c,s,i),I(u,s,i),I(l,n,r),_(t[0],a,c),_(t[1],l,u),_(t[2],u,c),_(t[3],a,l)}function j(t,e,r){for(let n=0;n<4;n++)f(t[n],e[n],r)}function B(t,e){const r=o(),n=o(),i=o();E(i,e[2]),_(r,e[0],i),_(n,e[1],i),y(t,n),t[31]^=S(r)<<7}function N(t,e,r){m(t[0],c),m(t[1],u),m(t[2],u),m(t[3],c);for(let n=255;n>=0;--n){const i=r[n/8|0]>>(7&n)&1;j(t,e,i),T(e,t),T(t,t),j(t,e,i)}}function x(t,e){const r=[o(),o(),o(),o()];m(r[0],d),m(r[1],p),m(r[2],u),_(r[3],d,p),N(t,r,e)}function L(t){if(t.length!==e.SEED_LENGTH)throw new Error(`ed25519: seed must be ${e.SEED_LENGTH} bytes`);const r=(0,i.hash)(t);r[0]&=248,r[31]&=127,r[31]|=64;const n=new Uint8Array(32),s=[o(),o(),o(),o()];x(s,r),B(n,s);const a=new Uint8Array(64);return a.set(t),a.set(n,32),{publicKey:n,secretKey:a}}function P(t){const e=(0,n.randomBytes)(32,t),r=L(e);return(0,s.wipe)(e),r}function R(t){if(t.length!==e.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${e.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(t.subarray(32))}e.generateKeyPairFromSeed=L,e.generateKeyPair=P,e.extractPublicKeyFromSecretKey=R;const z=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function U(t,e){let r,n,i,s;for(n=63;n>=32;--n){for(r=0,i=n-32,s=n-12;i<s;++i)e[i]+=r-16*e[n]*z[i-(n-32)],r=Math.floor((e[i]+128)/256),e[i]-=256*r;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;i++)e[i]+=r-(e[31]>>4)*z[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;i++)e[i]-=r*z[i];for(n=0;n<32;n++)e[n+1]+=e[n]>>8,t[n]=255&e[n]}function W(t){const e=new Float64Array(64);for(let r=0;r<64;r++)e[r]=t[r];for(let r=0;r<64;r++)t[r]=0;U(t,e)}function C(t,e){const r=new Float64Array(64),n=[o(),o(),o(),o()],s=(0,i.hash)(t.subarray(0,32));s[0]&=248,s[31]&=127,s[31]|=64;const a=new Uint8Array(64);a.set(s.subarray(32),32);const c=new i.SHA512;c.update(a.subarray(32)),c.update(e);const u=c.digest();c.clean(),W(u),x(n,u),B(a,n),c.reset(),c.update(a.subarray(0,32)),c.update(t.subarray(32)),c.update(e);const l=c.digest();W(l);for(let i=0;i<32;i++)r[i]=u[i];for(let i=0;i<32;i++)for(let t=0;t<32;t++)r[i+t]+=l[i]*s[t];return U(a.subarray(32),r),a}function D(t,e){const r=o(),n=o(),i=o(),s=o(),a=o(),h=o(),d=o();return m(t[2],u),v(t[1],e),A(i,t[1]),_(s,i,l),M(i,i,t[2]),I(s,t[2],s),A(a,s),A(h,a),_(d,h,a),_(r,d,i),_(r,r,s),O(r,r),_(r,r,i),_(r,r,s),_(r,r,s),_(t[0],r,s),A(n,t[0]),_(n,n,s),k(n,i)&&_(t[0],t[0],g),A(n,t[0]),_(n,n,s),k(n,i)?-1:(S(t[0])===e[31]>>7&&M(t[0],c,t[0]),_(t[3],t[0],t[1]),0)}function F(t,r,n){const s=new Uint8Array(32),a=[o(),o(),o(),o()],c=[o(),o(),o(),o()];if(n.length!==e.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${e.SIGNATURE_LENGTH} bytes`);if(D(c,t))return!1;const u=new i.SHA512;u.update(n.subarray(0,32)),u.update(t),u.update(r);const l=u.digest();return W(l),N(a,c,l),x(c,n.subarray(32)),T(a,c),B(s,a),!w(n,s)}function V(t){let e=[o(),o(),o(),o()];if(D(e,t))throw new Error("Ed25519: invalid public key");let r=o(),n=o(),i=e[1];I(r,u,i),M(n,u,i),E(n,n),_(r,r,n);let s=new Uint8Array(32);return y(s,r),s}function K(t){const e=(0,i.hash)(t.subarray(0,32));e[0]&=248,e[31]&=127,e[31]|=64;const r=new Uint8Array(e.subarray(0,32));return(0,s.wipe)(e),r}e.sign=C,e.verify=F,e.convertPublicKeyToX25519=V,e.convertSecretKeyToX25519=K},3583:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("290c"),i=r("ff6a"),s=20;function o(t,e,r){for(var i=1634760805,o=857760878,a=2036477234,c=1797285236,u=r[3]<<24|r[2]<<16|r[1]<<8|r[0],l=r[7]<<24|r[6]<<16|r[5]<<8|r[4],h=r[11]<<24|r[10]<<16|r[9]<<8|r[8],d=r[15]<<24|r[14]<<16|r[13]<<8|r[12],p=r[19]<<24|r[18]<<16|r[17]<<8|r[16],g=r[23]<<24|r[22]<<16|r[21]<<8|r[20],m=r[27]<<24|r[26]<<16|r[25]<<8|r[24],b=r[31]<<24|r[30]<<16|r[29]<<8|r[28],f=e[3]<<24|e[2]<<16|e[1]<<8|e[0],y=e[7]<<24|e[6]<<16|e[5]<<8|e[4],w=e[11]<<24|e[10]<<16|e[9]<<8|e[8],k=e[15]<<24|e[14]<<16|e[13]<<8|e[12],S=i,v=o,I=a,M=c,_=u,A=l,E=h,O=d,T=p,j=g,B=m,N=b,x=f,L=y,P=w,R=k,z=0;z<s;z+=2)S=S+_|0,x^=S,x=x>>>16|x<<16,T=T+x|0,_^=T,_=_>>>20|_<<12,v=v+A|0,L^=v,L=L>>>16|L<<16,j=j+L|0,A^=j,A=A>>>20|A<<12,I=I+E|0,P^=I,P=P>>>16|P<<16,B=B+P|0,E^=B,E=E>>>20|E<<12,M=M+O|0,R^=M,R=R>>>16|R<<16,N=N+R|0,O^=N,O=O>>>20|O<<12,I=I+E|0,P^=I,P=P>>>24|P<<8,B=B+P|0,E^=B,E=E>>>25|E<<7,M=M+O|0,R^=M,R=R>>>24|R<<8,N=N+R|0,O^=N,O=O>>>25|O<<7,v=v+A|0,L^=v,L=L>>>24|L<<8,j=j+L|0,A^=j,A=A>>>25|A<<7,S=S+_|0,x^=S,x=x>>>24|x<<8,T=T+x|0,_^=T,_=_>>>25|_<<7,S=S+A|0,R^=S,R=R>>>16|R<<16,B=B+R|0,A^=B,A=A>>>20|A<<12,v=v+E|0,x^=v,x=x>>>16|x<<16,N=N+x|0,E^=N,E=E>>>20|E<<12,I=I+O|0,L^=I,L=L>>>16|L<<16,T=T+L|0,O^=T,O=O>>>20|O<<12,M=M+_|0,P^=M,P=P>>>16|P<<16,j=j+P|0,_^=j,_=_>>>20|_<<12,I=I+O|0,L^=I,L=L>>>24|L<<8,T=T+L|0,O^=T,O=O>>>25|O<<7,M=M+_|0,P^=M,P=P>>>24|P<<8,j=j+P|0,_^=j,_=_>>>25|_<<7,v=v+E|0,x^=v,x=x>>>24|x<<8,N=N+x|0,E^=N,E=E>>>25|E<<7,S=S+A|0,R^=S,R=R>>>24|R<<8,B=B+R|0,A^=B,A=A>>>25|A<<7;n.writeUint32LE(S+i|0,t,0),n.writeUint32LE(v+o|0,t,4),n.writeUint32LE(I+a|0,t,8),n.writeUint32LE(M+c|0,t,12),n.writeUint32LE(_+u|0,t,16),n.writeUint32LE(A+l|0,t,20),n.writeUint32LE(E+h|0,t,24),n.writeUint32LE(O+d|0,t,28),n.writeUint32LE(T+p|0,t,32),n.writeUint32LE(j+g|0,t,36),n.writeUint32LE(B+m|0,t,40),n.writeUint32LE(N+b|0,t,44),n.writeUint32LE(x+f|0,t,48),n.writeUint32LE(L+y|0,t,52),n.writeUint32LE(P+w|0,t,56),n.writeUint32LE(R+k|0,t,60)}function a(t,e,r,n,s){if(void 0===s&&(s=0),32!==t.length)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var a,c;if(0===s){if(8!==e.length&&12!==e.length)throw new Error("ChaCha nonce must be 8 or 12 bytes");a=new Uint8Array(16),c=a.length-e.length,a.set(e,c)}else{if(16!==e.length)throw new Error("ChaCha nonce with counter must be 16 bytes");a=e,c=s}for(var l=new Uint8Array(64),h=0;h<r.length;h+=64){o(l,a,t);for(var d=h;d<h+64&&d<r.length;d++)n[d]=r[d]^l[d-h];u(a,0,c)}return i.wipe(l),0===s&&i.wipe(a),n}function c(t,e,r,n){return void 0===n&&(n=0),i.wipe(r),a(t,e,r,r,n)}function u(t,e,r){var n=1;while(r--)n=n+(255&t[e])|0,t[e]=255&n,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}e.streamXOR=a,e.stream=c},"3e8b":function(t,e,r){"use strict";
/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */
function n(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function i(t,...e){if(!n(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function s(t,e){return!!Array.isArray(e)&&(0===e.length||(t?e.every(t=>"string"===typeof t):e.every(t=>Number.isSafeInteger(t))))}function o(t){if("function"!==typeof t)throw new Error("function expected");return!0}function a(t,e){if("string"!==typeof e)throw new Error(t+": string expected");return!0}function c(t){if(!Number.isSafeInteger(t))throw new Error("invalid integer: "+t)}function u(t){if(!Array.isArray(t))throw new Error("array expected")}function l(t,e){if(!s(!0,e))throw new Error(t+": array of strings expected")}function h(t,e){if(!s(!1,e))throw new Error(t+": array of numbers expected")}function d(...t){const e=t=>t,r=(t,e)=>r=>t(e(r)),n=t.map(t=>t.encode).reduceRight(r,e),i=t.map(t=>t.decode).reduce(r,e);return{encode:n,decode:i}}function p(t){const e="string"===typeof t?t.split(""):t,r=e.length;l("alphabet",e);const n=new Map(e.map((t,e)=>[t,e]));return{encode:n=>(u(n),n.map(n=>{if(!Number.isSafeInteger(n)||n<0||n>=r)throw new Error(`alphabet.encode: digit index outside alphabet "${n}". Allowed: ${t}`);return e[n]})),decode:e=>(u(e),e.map(e=>{a("alphabet.decode",e);const r=n.get(e);if(void 0===r)throw new Error(`Unknown letter: "${e}". Allowed: ${t}`);return r}))}}function g(t=""){return a("join",t),{encode:e=>(l("join.decode",e),e.join(t)),decode:e=>(a("join.decode",e),e.split(t))}}function m(t,e="="){return c(t),a("padding",e),{encode(r){l("padding.encode",r);while(r.length*t%8)r.push(e);return r},decode(r){l("padding.decode",r);let n=r.length;if(n*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;n>0&&r[n-1]===e;n--){const e=n-1,r=e*t;if(r%8===0)throw new Error("padding: invalid, string has too much padding")}return r.slice(0,n)}}}function b(t){return o(t),{encode:t=>t,decode:e=>t(e)}}function f(t,e,r){if(e<2)throw new Error(`convertRadix: invalid from=${e}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: invalid to=${r}, base cannot be less than 2`);if(u(t),!t.length)return[];let n=0;const i=[],s=Array.from(t,t=>{if(c(t),t<0||t>=e)throw new Error("invalid integer: "+t);return t}),o=s.length;while(1){let t=0,a=!0;for(let i=n;i<o;i++){const o=s[i],c=e*t,u=c+o;if(!Number.isSafeInteger(u)||c/e!==t||u-o!==c)throw new Error("convertRadix: carry overflow");const l=u/r;t=u%r;const h=Math.floor(l);if(s[i]=h,!Number.isSafeInteger(h)||h*r+t!==u)throw new Error("convertRadix: carry overflow");a&&(h?a=!1:n=i)}if(i.push(t),a)break}for(let a=0;a<t.length-1&&0===t[a];a++)i.push(0);return i.reverse()}r.d(e,"a",(function(){return O}));const y=(t,e)=>0===e?t:y(e,t%e),w=(t,e)=>t+(e-y(t,e)),k=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function S(t,e,r,n){if(u(t),e<=0||e>32)throw new Error("convertRadix2: wrong from="+e);if(r<=0||r>32)throw new Error("convertRadix2: wrong to="+r);if(w(e,r)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${r} carryBits=${w(e,r)}`);let i=0,s=0;const o=k[e],a=k[r]-1,l=[];for(const u of t){if(c(u),u>=o)throw new Error(`convertRadix2: invalid data word=${u} from=${e}`);if(i=i<<e|u,s+e>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${e}`);for(s+=e;s>=r;s-=r)l.push((i>>s-r&a)>>>0);const t=k[s];if(void 0===t)throw new Error("invalid carry");i&=t-1}if(i=i<<r-s&a,!n&&s>=e)throw new Error("Excess padding");if(!n&&i>0)throw new Error("Non-zero padding: "+i);return n&&s>0&&l.push(i>>>0),l}function v(t){c(t);const e=256;return{encode:r=>{if(!n(r))throw new Error("radix.encode input should be Uint8Array");return f(Array.from(r),e,t)},decode:r=>(h("radix.decode",r),Uint8Array.from(f(r,t,e)))}}function I(t,e=!1){if(c(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(w(8,t)>32||w(t,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!n(r))throw new Error("radix2.encode input should be Uint8Array");return S(Array.from(r),8,t,!e)},decode:r=>(h("radix2.decode",r),Uint8Array.from(S(r,t,8,e)))}}function M(t){return o(t),function(...e){try{return t.apply(null,e)}catch(r){}}}d(I(4),p("0123456789ABCDEF"),g("")),d(I(5),p("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),m(5),g("")),d(I(5),p("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),g("")),d(I(5),p("0123456789ABCDEFGHIJKLMNOPQRSTUV"),m(5),g("")),d(I(5),p("0123456789ABCDEFGHIJKLMNOPQRSTUV"),g("")),d(I(5),p("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),g(""),b(t=>t.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const _=(()=>"function"===typeof Uint8Array.from([]).toBase64&&"function"===typeof Uint8Array.fromBase64)(),A=(t,e)=>{a("base64",t);const r=e?/^[A-Za-z0-9=_-]+$/:/^[A-Za-z0-9=+/]+$/,n=e?"base64url":"base64";if(t.length>0&&!r.test(t))throw new Error("invalid base64");return Uint8Array.fromBase64(t,{alphabet:n,lastChunkHandling:"strict"})},E=(_||d(I(6),p("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),m(6),g("")),d(I(6),p("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),g("")),_||d(I(6),p("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),m(6),g("")),d(I(6),p("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),g("")),t=>d(v(58),p(t),g(""))),O=E("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),T=(E("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),E("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),d(p("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),g(""))),j=[996825010,642813549,513874426,1027748829,705979059];function B(t){const e=t>>25;let r=(33554431&t)<<5;for(let n=0;n<j.length;n++)1===(e>>n&1)&&(r^=j[n]);return r}function N(t,e,r=1){const n=t.length;let i=1;for(let s=0;s<n;s++){const e=t.charCodeAt(s);if(e<33||e>126)throw new Error(`Invalid prefix (${t})`);i=B(i)^e>>5}i=B(i);for(let s=0;s<n;s++)i=B(i)^31&t.charCodeAt(s);for(let s of e)i=B(i)^s;for(let s=0;s<6;s++)i=B(i);return i^=r,T.encode(S([i%k[30]],30,5,!1))}function x(t){const e="bech32"===t?1:734539939,r=I(5),i=r.decode,s=r.encode,o=M(i);function c(t,r,i=90){a("bech32.encode prefix",t),n(r)&&(r=Array.from(r)),h("bech32.encode",r);const s=t.length;if(0===s)throw new TypeError("Invalid prefix length "+s);const o=s+7+r.length;if(!1!==i&&o>i)throw new TypeError(`Length ${o} exceeds limit ${i}`);const c=t.toLowerCase(),u=N(c,r,e);return`${c}1${T.encode(r)}${u}`}function u(t,r=90){a("bech32.decode input",t);const n=t.length;if(n<8||!1!==r&&n>r)throw new TypeError(`invalid string length: ${n} (${t}). Expected (8..${r})`);const i=t.toLowerCase();if(t!==i&&t!==t.toUpperCase())throw new Error("String must be lowercase or uppercase");const s=i.lastIndexOf("1");if(0===s||-1===s)throw new Error('Letter "1" must be present between prefix and data only');const o=i.slice(0,s),c=i.slice(s+1);if(c.length<6)throw new Error("Data must be at least 6 characters long");const u=T.decode(c).slice(0,-6),l=N(o,u,e);if(!c.endsWith(l))throw new Error(`Invalid checksum in ${t}: expected "${l}"`);return{prefix:o,words:u}}const l=M(u);function d(t){const{prefix:e,words:r}=u(t,!1);return{prefix:e,words:r,bytes:i(r)}}function p(t,e){return c(t,s(e))}return{encode:c,decode:u,encodeFromBytes:p,decodeToBytes:d,decodeUnsafe:l,fromWords:i,fromWordsUnsafe:o,toWords:s}}x("bech32"),x("bech32m");const L=(()=>"function"===typeof Uint8Array.from([]).toHex&&"function"===typeof Uint8Array.fromHex)(),P={encode(t){return i(t),t.toHex()},decode(t){return a("hex",t),Uint8Array.fromHex(t)}};L||d(I(4),p("0123456789abcdef"),g(""),b(t=>{if("string"!==typeof t||t.length%2!==0)throw new TypeError(`hex.decode: expected string, got ${typeof t} with length ${t.length}`);return t.toLowerCase()}))},"405f":function(t,e,r){var n=r("42a7"),i="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";t.exports=n(i)},"477e":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("7dcf"),i=r("47c4"),s=r("ff6a"),o=function(){function t(t,e){this._finished=!1,this._inner=new t,this._outer=new t,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var r=new Uint8Array(this.blockSize);e.length>this.blockSize?this._inner.update(e).finish(r).clean():r.set(e);for(var i=0;i<r.length;i++)r[i]^=54;this._inner.update(r);for(i=0;i<r.length;i++)r[i]^=106;this._outer.update(r),n.isSerializableHash(this._inner)&&n.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),s.wipe(r)}return t.prototype.reset=function(){if(!n.isSerializableHash(this._inner)||!n.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){n.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),n.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(t){return this._inner.update(t),this},t.prototype.finish=function(t){return this._finished?(this._outer.finish(t),this):(this._inner.finish(t),this._outer.update(t.subarray(0,this.digestLength)).finish(t),this._finished=!0,this)},t.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},t.prototype.saveState=function(){if(!n.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(t){if(!n.isSerializableHash(this._inner)||!n.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(t),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(t){if(!n.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(t)},t}();function a(t,e,r){var n=new o(t,e);n.update(r);var i=n.digest();return n.clean(),i}e.HMAC=o,e.hmac=a,e.equal=i.equal},"47c4":function(t,e,r){"use strict";function n(t,e,r){return~(t-1)&e|t-1&r}function i(t,e){return(0|t)-(0|e)-1>>>31&1}function s(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}function o(t,e){return 0!==t.length&&0!==e.length&&0!==s(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.select=n,e.lessOrEqual=i,e.compare=s,e.equal=o},"4ea9":function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),i(r("834f"),e),i(r("8217"),e),i(r("0fa3"),e),i(r("caeb"),e),i(r("e1c8"),e),i(r("6d7f"),e)},"52c3":function(t,e,r){"use strict";r.d(e,"f",(function(){return n})),r.d(e,"i",(function(){return i})),r.d(e,"g",(function(){return s})),r.d(e,"b",(function(){return o})),r.d(e,"c",(function(){return a})),r.d(e,"d",(function(){return c})),r.d(e,"e",(function(){return u})),r.d(e,"a",(function(){return l})),r.d(e,"j",(function(){return h})),r.d(e,"h",(function(){return d})),r.d(e,"k",(function(){return p})),r.d(e,"m",(function(){return g})),r.d(e,"l",(function(){return m}));r("d9e2");class n extends Error{constructor(t,e){super(t),this.error=e}}class i extends n{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class s extends n{constructor(){super(...arguments),this.name="WalletLoadError"}}class o extends n{constructor(){super(...arguments),this.name="WalletConfigError"}}class a extends n{constructor(){super(...arguments),this.name="WalletConnectionError"}}class c extends n{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class u extends n{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class l extends n{constructor(){super(...arguments),this.name="WalletAccountError"}}class h extends n{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class d extends n{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class p extends n{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class g extends n{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class m extends n{constructor(){super(...arguments),this.name="WalletSignMessageError"}}},5319:function(t,e,r){(function(t){r("d9e2"),r("0643"),r("cbc8"),function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function s(t,e,r){if(s.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var o;"object"===typeof t?t.exports=s:e.BN=s,s.BN=s,s.wordSize=26;try{o="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(2).Buffer}catch(j){}function a(t,e){var r=t.charCodeAt(e);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+t)}function c(t,e,r){var n=a(t,r);return r-1>=e&&(n|=a(t,r-1)<<4),n}function u(t,e,r,i){for(var s=0,o=0,a=Math.min(t.length,r),c=e;c<a;c++){var u=t.charCodeAt(c)-48;s*=i,o=u>=49?u-49+10:u>=17?u-17+10:u,n(u>=0&&o<i,"Invalid character"),s+=o}return s}function l(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(s.isBN=function(t){return t instanceof s||null!==t&&"object"===typeof t&&t.constructor.wordSize===s.wordSize&&Array.isArray(t.words)},s.max=function(t,e){return t.cmp(e)>0?t:e},s.min=function(t,e){return t.cmp(e)<0?t:e},s.prototype._init=function(t,e,r){if("number"===typeof t)return this._initNumber(t,e,r);if("object"===typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36),t=t.toString().replace(/\s+/g,"");var i=0;"-"===t[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},s.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},s.prototype._initArray=function(t,e,r){if(n("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,o,a=0;if("be"===r)for(i=t.length-1,s=0;i>=0;i-=3)o=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,a+=24,a>=26&&(a-=26,s++);else if("le"===r)for(i=0,s=0;i<t.length;i+=3)o=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,a+=24,a>=26&&(a-=26,s++);return this._strip()},s.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,s=0,o=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=c(t,e,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;else{var a=t.length-e;for(n=a%2===0?e+1:e;n<t.length;n+=2)i=c(t,e,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8}this._strip()},s.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var s=t.length-r,o=s%n,a=Math.min(s,s-o)+r,c=0,l=r;l<a;l+=n)c=u(t,l,l+n,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==o){var h=1;for(c=u(t,l,t.length,e),l=0;l<o;l++)h*=e;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},s.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},s.prototype._move=function(t){l(t,this)},s.prototype.clone=function(){var t=new s(null);return this.copy(t),t},s.prototype._expand=function(t){while(this.length<t)this.words[this.length++]=0;return this},s.prototype._strip=function(){while(this.length>1&&0===this.words[this.length-1])this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!==typeof Symbol&&"function"===typeof Symbol.for)try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(j){s.prototype.inspect=h}else s.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],g=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(t,e){var r;if(t=t||10,e=0|e||1,16===t||"hex"===t){r="";for(var i=0,s=0,o=0;o<this.length;o++){var a=this.words[o],c=(16777215&(a<<i|s)).toString(16);s=a>>>24-i&16777215,i+=2,i>=26&&(i-=26,o--),r=0!==s||o!==this.length-1?d[6-c.length]+c+r:c+r}0!==s&&(r=s.toString(16)+r);while(r.length%e!==0)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var u=p[t],l=g[t];r="";var h=this.clone();h.negative=0;while(!h.isZero()){var m=h.modrn(l).toString(t);h=h.idivn(l),r=h.isZero()?m+r:d[u-m.length]+m+r}this.isZero()&&(r="0"+r);while(r.length%e!==0)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(t,e){return this.toArrayLike(o,t,e)}),s.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)};var m=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)};function b(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=t.words[n]>>>i&1}return e}function f(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],s=0|e.words[0],o=i*s,a=67108863&o,c=o/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var l=c>>>26,h=67108863&c,d=Math.min(u,e.length-1),p=Math.max(0,u-t.length+1);p<=d;p++){var g=u-p|0;i=0|t.words[g],s=0|e.words[p],o=i*s+h,l+=o/67108864|0,h=67108863&o}r.words[u]=0|h,c=0|l}return 0!==c?r.words[u]=0|c:r.length--,r._strip()}s.prototype.toArrayLike=function(t,e,r){this._strip();var i=this.byteLength(),s=r||Math.max(1,i);n(i<=s,"byte array longer than desired length"),n(s>0,"Requested array length <= 0");var o=m(t,s),a="le"===e?"LE":"BE";return this["_toArrayLike"+a](o,i),o},s.prototype._toArrayLikeLE=function(t,e){for(var r=0,n=0,i=0,s=0;i<this.length;i++){var o=this.words[i]<<s|n;t[r++]=255&o,r<t.length&&(t[r++]=o>>8&255),r<t.length&&(t[r++]=o>>16&255),6===s?(r<t.length&&(t[r++]=o>>24&255),n=0,s=0):(n=o>>>24,s+=2)}if(r<t.length){t[r++]=n;while(r<t.length)t[r++]=0}},s.prototype._toArrayLikeBE=function(t,e){for(var r=t.length-1,n=0,i=0,s=0;i<this.length;i++){var o=this.words[i]<<s|n;t[r--]=255&o,r>=0&&(t[r--]=o>>8&255),r>=0&&(t[r--]=o>>16&255),6===s?(r>=0&&(t[r--]=o>>24&255),n=0,s=0):(n=o>>>24,s+=2)}if(r>=0){t[r--]=n;while(r>=0)t[r--]=0}},Math.clz32?s.prototype._countBits=function(t){return 32-Math.clz32(t)}:s.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},s.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0===(8191&e)&&(r+=13,e>>>=13),0===(127&e)&&(r+=7,e>>>=7),0===(15&e)&&(r+=4,e>>>=4),0===(3&e)&&(r+=2,e>>>=2),0===(1&e)&&r++,r},s.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},s.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(t){while(this.length<t.length)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},s.prototype.ior=function(t){return n(0===(this.negative|t.negative)),this.iuor(t)},s.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},s.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},s.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this._strip()},s.prototype.iand=function(t){return n(0===(this.negative|t.negative)),this.iuand(t)},s.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},s.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},s.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this._strip()},s.prototype.ixor=function(t){return n(0===(this.negative|t.negative)),this.iuxor(t)},s.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},s.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},s.prototype.inotn=function(t){n("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},s.prototype.notn=function(t){return this.clone().inotn(t)},s.prototype.setn=function(t,e){n("number"===typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this._strip()},s.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,s=0;s<n.length;s++)e=(0|r.words[s])+(0|n.words[s])+i,this.words[s]=67108863&e,i=e>>>26;for(;0!==i&&s<r.length;s++)e=(0|r.words[s])+i,this.words[s]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},s.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},s.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var s=0,o=0;o<n.length;o++)e=(0|r.words[o])-(0|n.words[o])+s,s=e>>26,this.words[o]=67108863&e;for(;0!==s&&o<r.length;o++)e=(0|r.words[o])+s,s=e>>26,this.words[o]=67108863&e;if(0===s&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(t){return this.clone().isub(t)};var y=function(t,e,r){var n,i,s,o=t.words,a=e.words,c=r.words,u=0,l=0|o[0],h=8191&l,d=l>>>13,p=0|o[1],g=8191&p,m=p>>>13,b=0|o[2],f=8191&b,y=b>>>13,w=0|o[3],k=8191&w,S=w>>>13,v=0|o[4],I=8191&v,M=v>>>13,_=0|o[5],A=8191&_,E=_>>>13,O=0|o[6],T=8191&O,j=O>>>13,B=0|o[7],N=8191&B,x=B>>>13,L=0|o[8],P=8191&L,R=L>>>13,z=0|o[9],U=8191&z,W=z>>>13,C=0|a[0],D=8191&C,F=C>>>13,V=0|a[1],K=8191&V,Q=V>>>13,Z=0|a[2],H=8191&Z,q=Z>>>13,Y=0|a[3],G=8191&Y,J=Y>>>13,X=0|a[4],$=8191&X,tt=X>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],st=8191&it,ot=it>>>13,at=0|a[7],ct=8191&at,ut=at>>>13,lt=0|a[8],ht=8191&lt,dt=lt>>>13,pt=0|a[9],gt=8191&pt,mt=pt>>>13;r.negative=t.negative^e.negative,r.length=19,n=Math.imul(h,D),i=Math.imul(h,F),i=i+Math.imul(d,D)|0,s=Math.imul(d,F);var bt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(g,D),i=Math.imul(g,F),i=i+Math.imul(m,D)|0,s=Math.imul(m,F),n=n+Math.imul(h,K)|0,i=i+Math.imul(h,Q)|0,i=i+Math.imul(d,K)|0,s=s+Math.imul(d,Q)|0;var ft=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(ft>>>26)|0,ft&=67108863,n=Math.imul(f,D),i=Math.imul(f,F),i=i+Math.imul(y,D)|0,s=Math.imul(y,F),n=n+Math.imul(g,K)|0,i=i+Math.imul(g,Q)|0,i=i+Math.imul(m,K)|0,s=s+Math.imul(m,Q)|0,n=n+Math.imul(h,H)|0,i=i+Math.imul(h,q)|0,i=i+Math.imul(d,H)|0,s=s+Math.imul(d,q)|0;var yt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(k,D),i=Math.imul(k,F),i=i+Math.imul(S,D)|0,s=Math.imul(S,F),n=n+Math.imul(f,K)|0,i=i+Math.imul(f,Q)|0,i=i+Math.imul(y,K)|0,s=s+Math.imul(y,Q)|0,n=n+Math.imul(g,H)|0,i=i+Math.imul(g,q)|0,i=i+Math.imul(m,H)|0,s=s+Math.imul(m,q)|0,n=n+Math.imul(h,G)|0,i=i+Math.imul(h,J)|0,i=i+Math.imul(d,G)|0,s=s+Math.imul(d,J)|0;var wt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,D),i=Math.imul(I,F),i=i+Math.imul(M,D)|0,s=Math.imul(M,F),n=n+Math.imul(k,K)|0,i=i+Math.imul(k,Q)|0,i=i+Math.imul(S,K)|0,s=s+Math.imul(S,Q)|0,n=n+Math.imul(f,H)|0,i=i+Math.imul(f,q)|0,i=i+Math.imul(y,H)|0,s=s+Math.imul(y,q)|0,n=n+Math.imul(g,G)|0,i=i+Math.imul(g,J)|0,i=i+Math.imul(m,G)|0,s=s+Math.imul(m,J)|0,n=n+Math.imul(h,$)|0,i=i+Math.imul(h,tt)|0,i=i+Math.imul(d,$)|0,s=s+Math.imul(d,tt)|0;var kt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(A,D),i=Math.imul(A,F),i=i+Math.imul(E,D)|0,s=Math.imul(E,F),n=n+Math.imul(I,K)|0,i=i+Math.imul(I,Q)|0,i=i+Math.imul(M,K)|0,s=s+Math.imul(M,Q)|0,n=n+Math.imul(k,H)|0,i=i+Math.imul(k,q)|0,i=i+Math.imul(S,H)|0,s=s+Math.imul(S,q)|0,n=n+Math.imul(f,G)|0,i=i+Math.imul(f,J)|0,i=i+Math.imul(y,G)|0,s=s+Math.imul(y,J)|0,n=n+Math.imul(g,$)|0,i=i+Math.imul(g,tt)|0,i=i+Math.imul(m,$)|0,s=s+Math.imul(m,tt)|0,n=n+Math.imul(h,rt)|0,i=i+Math.imul(h,nt)|0,i=i+Math.imul(d,rt)|0,s=s+Math.imul(d,nt)|0;var St=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(T,D),i=Math.imul(T,F),i=i+Math.imul(j,D)|0,s=Math.imul(j,F),n=n+Math.imul(A,K)|0,i=i+Math.imul(A,Q)|0,i=i+Math.imul(E,K)|0,s=s+Math.imul(E,Q)|0,n=n+Math.imul(I,H)|0,i=i+Math.imul(I,q)|0,i=i+Math.imul(M,H)|0,s=s+Math.imul(M,q)|0,n=n+Math.imul(k,G)|0,i=i+Math.imul(k,J)|0,i=i+Math.imul(S,G)|0,s=s+Math.imul(S,J)|0,n=n+Math.imul(f,$)|0,i=i+Math.imul(f,tt)|0,i=i+Math.imul(y,$)|0,s=s+Math.imul(y,tt)|0,n=n+Math.imul(g,rt)|0,i=i+Math.imul(g,nt)|0,i=i+Math.imul(m,rt)|0,s=s+Math.imul(m,nt)|0,n=n+Math.imul(h,st)|0,i=i+Math.imul(h,ot)|0,i=i+Math.imul(d,st)|0,s=s+Math.imul(d,ot)|0;var vt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(N,D),i=Math.imul(N,F),i=i+Math.imul(x,D)|0,s=Math.imul(x,F),n=n+Math.imul(T,K)|0,i=i+Math.imul(T,Q)|0,i=i+Math.imul(j,K)|0,s=s+Math.imul(j,Q)|0,n=n+Math.imul(A,H)|0,i=i+Math.imul(A,q)|0,i=i+Math.imul(E,H)|0,s=s+Math.imul(E,q)|0,n=n+Math.imul(I,G)|0,i=i+Math.imul(I,J)|0,i=i+Math.imul(M,G)|0,s=s+Math.imul(M,J)|0,n=n+Math.imul(k,$)|0,i=i+Math.imul(k,tt)|0,i=i+Math.imul(S,$)|0,s=s+Math.imul(S,tt)|0,n=n+Math.imul(f,rt)|0,i=i+Math.imul(f,nt)|0,i=i+Math.imul(y,rt)|0,s=s+Math.imul(y,nt)|0,n=n+Math.imul(g,st)|0,i=i+Math.imul(g,ot)|0,i=i+Math.imul(m,st)|0,s=s+Math.imul(m,ot)|0,n=n+Math.imul(h,ct)|0,i=i+Math.imul(h,ut)|0,i=i+Math.imul(d,ct)|0,s=s+Math.imul(d,ut)|0;var It=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(P,D),i=Math.imul(P,F),i=i+Math.imul(R,D)|0,s=Math.imul(R,F),n=n+Math.imul(N,K)|0,i=i+Math.imul(N,Q)|0,i=i+Math.imul(x,K)|0,s=s+Math.imul(x,Q)|0,n=n+Math.imul(T,H)|0,i=i+Math.imul(T,q)|0,i=i+Math.imul(j,H)|0,s=s+Math.imul(j,q)|0,n=n+Math.imul(A,G)|0,i=i+Math.imul(A,J)|0,i=i+Math.imul(E,G)|0,s=s+Math.imul(E,J)|0,n=n+Math.imul(I,$)|0,i=i+Math.imul(I,tt)|0,i=i+Math.imul(M,$)|0,s=s+Math.imul(M,tt)|0,n=n+Math.imul(k,rt)|0,i=i+Math.imul(k,nt)|0,i=i+Math.imul(S,rt)|0,s=s+Math.imul(S,nt)|0,n=n+Math.imul(f,st)|0,i=i+Math.imul(f,ot)|0,i=i+Math.imul(y,st)|0,s=s+Math.imul(y,ot)|0,n=n+Math.imul(g,ct)|0,i=i+Math.imul(g,ut)|0,i=i+Math.imul(m,ct)|0,s=s+Math.imul(m,ut)|0,n=n+Math.imul(h,ht)|0,i=i+Math.imul(h,dt)|0,i=i+Math.imul(d,ht)|0,s=s+Math.imul(d,dt)|0;var Mt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(U,D),i=Math.imul(U,F),i=i+Math.imul(W,D)|0,s=Math.imul(W,F),n=n+Math.imul(P,K)|0,i=i+Math.imul(P,Q)|0,i=i+Math.imul(R,K)|0,s=s+Math.imul(R,Q)|0,n=n+Math.imul(N,H)|0,i=i+Math.imul(N,q)|0,i=i+Math.imul(x,H)|0,s=s+Math.imul(x,q)|0,n=n+Math.imul(T,G)|0,i=i+Math.imul(T,J)|0,i=i+Math.imul(j,G)|0,s=s+Math.imul(j,J)|0,n=n+Math.imul(A,$)|0,i=i+Math.imul(A,tt)|0,i=i+Math.imul(E,$)|0,s=s+Math.imul(E,tt)|0,n=n+Math.imul(I,rt)|0,i=i+Math.imul(I,nt)|0,i=i+Math.imul(M,rt)|0,s=s+Math.imul(M,nt)|0,n=n+Math.imul(k,st)|0,i=i+Math.imul(k,ot)|0,i=i+Math.imul(S,st)|0,s=s+Math.imul(S,ot)|0,n=n+Math.imul(f,ct)|0,i=i+Math.imul(f,ut)|0,i=i+Math.imul(y,ct)|0,s=s+Math.imul(y,ut)|0,n=n+Math.imul(g,ht)|0,i=i+Math.imul(g,dt)|0,i=i+Math.imul(m,ht)|0,s=s+Math.imul(m,dt)|0,n=n+Math.imul(h,gt)|0,i=i+Math.imul(h,mt)|0,i=i+Math.imul(d,gt)|0,s=s+Math.imul(d,mt)|0;var _t=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(U,K),i=Math.imul(U,Q),i=i+Math.imul(W,K)|0,s=Math.imul(W,Q),n=n+Math.imul(P,H)|0,i=i+Math.imul(P,q)|0,i=i+Math.imul(R,H)|0,s=s+Math.imul(R,q)|0,n=n+Math.imul(N,G)|0,i=i+Math.imul(N,J)|0,i=i+Math.imul(x,G)|0,s=s+Math.imul(x,J)|0,n=n+Math.imul(T,$)|0,i=i+Math.imul(T,tt)|0,i=i+Math.imul(j,$)|0,s=s+Math.imul(j,tt)|0,n=n+Math.imul(A,rt)|0,i=i+Math.imul(A,nt)|0,i=i+Math.imul(E,rt)|0,s=s+Math.imul(E,nt)|0,n=n+Math.imul(I,st)|0,i=i+Math.imul(I,ot)|0,i=i+Math.imul(M,st)|0,s=s+Math.imul(M,ot)|0,n=n+Math.imul(k,ct)|0,i=i+Math.imul(k,ut)|0,i=i+Math.imul(S,ct)|0,s=s+Math.imul(S,ut)|0,n=n+Math.imul(f,ht)|0,i=i+Math.imul(f,dt)|0,i=i+Math.imul(y,ht)|0,s=s+Math.imul(y,dt)|0,n=n+Math.imul(g,gt)|0,i=i+Math.imul(g,mt)|0,i=i+Math.imul(m,gt)|0,s=s+Math.imul(m,mt)|0;var At=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(U,H),i=Math.imul(U,q),i=i+Math.imul(W,H)|0,s=Math.imul(W,q),n=n+Math.imul(P,G)|0,i=i+Math.imul(P,J)|0,i=i+Math.imul(R,G)|0,s=s+Math.imul(R,J)|0,n=n+Math.imul(N,$)|0,i=i+Math.imul(N,tt)|0,i=i+Math.imul(x,$)|0,s=s+Math.imul(x,tt)|0,n=n+Math.imul(T,rt)|0,i=i+Math.imul(T,nt)|0,i=i+Math.imul(j,rt)|0,s=s+Math.imul(j,nt)|0,n=n+Math.imul(A,st)|0,i=i+Math.imul(A,ot)|0,i=i+Math.imul(E,st)|0,s=s+Math.imul(E,ot)|0,n=n+Math.imul(I,ct)|0,i=i+Math.imul(I,ut)|0,i=i+Math.imul(M,ct)|0,s=s+Math.imul(M,ut)|0,n=n+Math.imul(k,ht)|0,i=i+Math.imul(k,dt)|0,i=i+Math.imul(S,ht)|0,s=s+Math.imul(S,dt)|0,n=n+Math.imul(f,gt)|0,i=i+Math.imul(f,mt)|0,i=i+Math.imul(y,gt)|0,s=s+Math.imul(y,mt)|0;var Et=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(U,G),i=Math.imul(U,J),i=i+Math.imul(W,G)|0,s=Math.imul(W,J),n=n+Math.imul(P,$)|0,i=i+Math.imul(P,tt)|0,i=i+Math.imul(R,$)|0,s=s+Math.imul(R,tt)|0,n=n+Math.imul(N,rt)|0,i=i+Math.imul(N,nt)|0,i=i+Math.imul(x,rt)|0,s=s+Math.imul(x,nt)|0,n=n+Math.imul(T,st)|0,i=i+Math.imul(T,ot)|0,i=i+Math.imul(j,st)|0,s=s+Math.imul(j,ot)|0,n=n+Math.imul(A,ct)|0,i=i+Math.imul(A,ut)|0,i=i+Math.imul(E,ct)|0,s=s+Math.imul(E,ut)|0,n=n+Math.imul(I,ht)|0,i=i+Math.imul(I,dt)|0,i=i+Math.imul(M,ht)|0,s=s+Math.imul(M,dt)|0,n=n+Math.imul(k,gt)|0,i=i+Math.imul(k,mt)|0,i=i+Math.imul(S,gt)|0,s=s+Math.imul(S,mt)|0;var Ot=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(U,$),i=Math.imul(U,tt),i=i+Math.imul(W,$)|0,s=Math.imul(W,tt),n=n+Math.imul(P,rt)|0,i=i+Math.imul(P,nt)|0,i=i+Math.imul(R,rt)|0,s=s+Math.imul(R,nt)|0,n=n+Math.imul(N,st)|0,i=i+Math.imul(N,ot)|0,i=i+Math.imul(x,st)|0,s=s+Math.imul(x,ot)|0,n=n+Math.imul(T,ct)|0,i=i+Math.imul(T,ut)|0,i=i+Math.imul(j,ct)|0,s=s+Math.imul(j,ut)|0,n=n+Math.imul(A,ht)|0,i=i+Math.imul(A,dt)|0,i=i+Math.imul(E,ht)|0,s=s+Math.imul(E,dt)|0,n=n+Math.imul(I,gt)|0,i=i+Math.imul(I,mt)|0,i=i+Math.imul(M,gt)|0,s=s+Math.imul(M,mt)|0;var Tt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(U,rt),i=Math.imul(U,nt),i=i+Math.imul(W,rt)|0,s=Math.imul(W,nt),n=n+Math.imul(P,st)|0,i=i+Math.imul(P,ot)|0,i=i+Math.imul(R,st)|0,s=s+Math.imul(R,ot)|0,n=n+Math.imul(N,ct)|0,i=i+Math.imul(N,ut)|0,i=i+Math.imul(x,ct)|0,s=s+Math.imul(x,ut)|0,n=n+Math.imul(T,ht)|0,i=i+Math.imul(T,dt)|0,i=i+Math.imul(j,ht)|0,s=s+Math.imul(j,dt)|0,n=n+Math.imul(A,gt)|0,i=i+Math.imul(A,mt)|0,i=i+Math.imul(E,gt)|0,s=s+Math.imul(E,mt)|0;var jt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(jt>>>26)|0,jt&=67108863,n=Math.imul(U,st),i=Math.imul(U,ot),i=i+Math.imul(W,st)|0,s=Math.imul(W,ot),n=n+Math.imul(P,ct)|0,i=i+Math.imul(P,ut)|0,i=i+Math.imul(R,ct)|0,s=s+Math.imul(R,ut)|0,n=n+Math.imul(N,ht)|0,i=i+Math.imul(N,dt)|0,i=i+Math.imul(x,ht)|0,s=s+Math.imul(x,dt)|0,n=n+Math.imul(T,gt)|0,i=i+Math.imul(T,mt)|0,i=i+Math.imul(j,gt)|0,s=s+Math.imul(j,mt)|0;var Bt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(U,ct),i=Math.imul(U,ut),i=i+Math.imul(W,ct)|0,s=Math.imul(W,ut),n=n+Math.imul(P,ht)|0,i=i+Math.imul(P,dt)|0,i=i+Math.imul(R,ht)|0,s=s+Math.imul(R,dt)|0,n=n+Math.imul(N,gt)|0,i=i+Math.imul(N,mt)|0,i=i+Math.imul(x,gt)|0,s=s+Math.imul(x,mt)|0;var Nt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,n=Math.imul(U,ht),i=Math.imul(U,dt),i=i+Math.imul(W,ht)|0,s=Math.imul(W,dt),n=n+Math.imul(P,gt)|0,i=i+Math.imul(P,mt)|0,i=i+Math.imul(R,gt)|0,s=s+Math.imul(R,mt)|0;var xt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(U,gt),i=Math.imul(U,mt),i=i+Math.imul(W,gt)|0,s=Math.imul(W,mt);var Lt=(u+n|0)+((8191&i)<<13)|0;return u=(s+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,c[0]=bt,c[1]=ft,c[2]=yt,c[3]=wt,c[4]=kt,c[5]=St,c[6]=vt,c[7]=It,c[8]=Mt,c[9]=_t,c[10]=At,c[11]=Et,c[12]=Ot,c[13]=Tt,c[14]=jt,c[15]=Bt,c[16]=Nt,c[17]=xt,c[18]=Lt,0!==u&&(c[19]=u,r.length++),r};function w(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,s=0;s<r.length-1;s++){var o=i;i=0;for(var a=67108863&n,c=Math.min(s,e.length-1),u=Math.max(0,s-t.length+1);u<=c;u++){var l=s-u,h=0|t.words[l],d=0|e.words[u],p=h*d,g=67108863&p;o=o+(p/67108864|0)|0,g=g+a|0,a=67108863&g,o=o+(g>>>26)|0,i+=o>>>26,o&=67108863}r.words[s]=a,n=o,o=i}return 0!==n?r.words[s]=n:r.length--,r._strip()}function k(t,e,r){return w(t,e,r)}function S(t,e){this.x=t,this.y=e}Math.imul||(y=f),s.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return r=10===this.length&&10===t.length?y(this,t,e):n<63?f(this,t,e):n<1024?w(this,t,e):k(this,t,e),r},S.prototype.makeRBT=function(t){for(var e=new Array(t),r=s.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},S.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},S.prototype.permute=function(t,e,r,n,i,s){for(var o=0;o<s;o++)n[o]=e[t[o]],i[o]=r[t[o]]},S.prototype.transform=function(t,e,r,n,i,s){this.permute(s,t,e,r,n,i);for(var o=1;o<i;o<<=1)for(var a=o<<1,c=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var h=c,d=u,p=0;p<o;p++){var g=r[l+p],m=n[l+p],b=r[l+p+o],f=n[l+p+o],y=h*b-d*f;f=h*f+d*b,b=y,r[l+p]=g+b,n[l+p]=m+f,r[l+p+o]=g-b,n[l+p+o]=m-f,p!==a&&(y=c*h-u*d,d=c*d+u*h,h=y)}},S.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},S.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},S.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},S.prototype.convert13b=function(t,e,r,i){for(var s=0,o=0;o<e;o++)s+=0|t[o],r[2*o]=8191&s,s>>>=13,r[2*o+1]=8191&s,s>>>=13;for(o=2*e;o<i;++o)r[o]=0;n(0===s),n(0===(-8192&s))},S.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},S.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),s=this.stub(n),o=new Array(n),a=new Array(n),c=new Array(n),u=new Array(n),l=new Array(n),h=new Array(n),d=r.words;d.length=n,this.convert13b(t.words,t.length,o,n),this.convert13b(e.words,e.length,u,n),this.transform(o,s,a,c,n,i),this.transform(u,s,l,h,n,i);for(var p=0;p<n;p++){var g=a[p]*l[p]-c[p]*h[p];c[p]=a[p]*h[p]+c[p]*l[p],a[p]=g}return this.conjugate(a,c,n),this.transform(a,c,d,s,n,i),this.conjugate(d,s,n),this.normalize13b(d,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r._strip()},s.prototype.mul=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},s.prototype.mulf=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),k(this,t,e)},s.prototype.imul=function(t){return this.clone().mulTo(t,this)},s.prototype.imuln=function(t){var e=t<0;e&&(t=-t),n("number"===typeof t),n(t<67108864);for(var r=0,i=0;i<this.length;i++){var s=(0|this.words[i])*t,o=(67108863&s)+(67108863&r);r>>=26,r+=s/67108864|0,r+=o>>>26,this.words[i]=67108863&o}return 0!==r&&(this.words[i]=r,this.length++),e?this.ineg():this},s.prototype.muln=function(t){return this.clone().imuln(t)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(t){var e=b(t);if(0===e.length)return new s(1);for(var r=this,n=0;n<e.length;n++,r=r.sqr())if(0!==e[n])break;if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},s.prototype.iushln=function(t){n("number"===typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,s=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(e=0;e<this.length;e++){var a=this.words[e]&s,c=(0|this.words[e])-a<<r;this.words[e]=c|o,o=a>>>26-r}o&&(this.words[e]=o,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this._strip()},s.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},s.prototype.iushrn=function(t,e,r){var i;n("number"===typeof t&&t>=0),i=e?(e-e%26)/26:0;var s=t%26,o=Math.min((t-s)/26,this.length),a=67108863^67108863>>>s<<s,c=r;if(i-=o,i=Math.max(0,i),c){for(var u=0;u<o;u++)c.words[u]=this.words[u];c.length=o}if(0===o);else if(this.length>o)for(this.length-=o,u=0;u<this.length;u++)this.words[u]=this.words[u+o];else this.words[0]=0,this.length=1;var l=0;for(u=this.length-1;u>=0&&(0!==l||u>=i);u--){var h=0|this.words[u];this.words[u]=l<<26-s|h>>>s,l=h&a}return c&&0!==l&&(c.words[c.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},s.prototype.shln=function(t){return this.clone().ishln(t)},s.prototype.ushln=function(t){return this.clone().iushln(t)},s.prototype.shrn=function(t){return this.clone().ishrn(t)},s.prototype.ushrn=function(t){return this.clone().iushrn(t)},s.prototype.testn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return!1;var s=this.words[r];return!!(s&i)},s.prototype.imaskn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this._strip()},s.prototype.maskn=function(t){return this.clone().imaskn(t)},s.prototype.iaddn=function(t){return n("number"===typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},s.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},s.prototype.isubn=function(t){if(n("number"===typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},s.prototype.addn=function(t){return this.clone().iaddn(t)},s.prototype.subn=function(t){return this.clone().isubn(t)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(t,e,r){var i,s,o=t.length+r;this._expand(o);var a=0;for(i=0;i<t.length;i++){s=(0|this.words[i+r])+a;var c=(0|t.words[i])*e;s-=67108863&c,a=(s>>26)-(c/67108864|0),this.words[i+r]=67108863&s}for(;i<this.length-r;i++)s=(0|this.words[i+r])+a,a=s>>26,this.words[i+r]=67108863&s;if(0===a)return this._strip();for(n(-1===a),a=0,i=0;i<this.length;i++)s=-(0|this.words[i])+a,a=s>>26,this.words[i]=67108863&s;return this.negative=1,this._strip()},s.prototype._wordDiv=function(t,e){var r=this.length-t.length,n=this.clone(),i=t,o=0|i.words[i.length-1],a=this._countBits(o);r=26-a,0!==r&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var c,u=n.length-i.length;if("mod"!==e){c=new s(null),c.length=u+1,c.words=new Array(c.length);for(var l=0;l<c.length;l++)c.words[l]=0}var h=n.clone()._ishlnsubmul(i,1,u);0===h.negative&&(n=h,c&&(c.words[u]=1));for(var d=u-1;d>=0;d--){var p=67108864*(0|n.words[i.length+d])+(0|n.words[i.length+d-1]);p=Math.min(p/o|0,67108863),n._ishlnsubmul(i,p,d);while(0!==n.negative)p--,n.negative=0,n._ishlnsubmul(i,1,d),n.isZero()||(n.negative^=1);c&&(c.words[d]=p)}return c&&c._strip(),n._strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:c||null,mod:n}},s.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(o=a.mod.neg(),r&&0!==o.negative&&o.iadd(t)),{div:i,mod:o}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(o=a.mod.neg(),r&&0!==o.negative&&o.isub(t)),{div:a.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new s(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new s(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new s(this.modrn(t.words[0]))}:this._wordDiv(t,e);var i,o,a},s.prototype.div=function(t){return this.divmod(t,"div",!1).div},s.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},s.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},s.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),s=r.cmp(n);return s<0||1===i&&0===s?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},s.prototype.modrn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=(1<<26)%t,i=0,s=this.length-1;s>=0;s--)i=(r*i+(0|this.words[s]))%t;return e?-i:i},s.prototype.modn=function(t){return this.modrn(t)},s.prototype.idivn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var s=(0|this.words[i])+67108864*r;this.words[i]=s/t|0,r=s%t}return this._strip(),e?this.ineg():this},s.prototype.divn=function(t){return this.clone().idivn(t)},s.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();var i=new s(1),o=new s(0),a=new s(0),c=new s(1),u=0;while(e.isEven()&&r.isEven())e.iushrn(1),r.iushrn(1),++u;var l=r.clone(),h=e.clone();while(!e.isZero()){for(var d=0,p=1;0===(e.words[0]&p)&&d<26;++d,p<<=1);if(d>0){e.iushrn(d);while(d-- >0)(i.isOdd()||o.isOdd())&&(i.iadd(l),o.isub(h)),i.iushrn(1),o.iushrn(1)}for(var g=0,m=1;0===(r.words[0]&m)&&g<26;++g,m<<=1);if(g>0){r.iushrn(g);while(g-- >0)(a.isOdd()||c.isOdd())&&(a.iadd(l),c.isub(h)),a.iushrn(1),c.iushrn(1)}e.cmp(r)>=0?(e.isub(r),i.isub(a),o.isub(c)):(r.isub(e),a.isub(i),c.isub(o))}return{a:a,b:c,gcd:r.iushln(u)}},s.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();var i,o=new s(1),a=new s(0),c=r.clone();while(e.cmpn(1)>0&&r.cmpn(1)>0){for(var u=0,l=1;0===(e.words[0]&l)&&u<26;++u,l<<=1);if(u>0){e.iushrn(u);while(u-- >0)o.isOdd()&&o.iadd(c),o.iushrn(1)}for(var h=0,d=1;0===(r.words[0]&d)&&h<26;++h,d<<=1);if(h>0){r.iushrn(h);while(h-- >0)a.isOdd()&&a.iadd(c),a.iushrn(1)}e.cmp(r)>=0?(e.isub(r),o.isub(a)):(r.isub(e),a.isub(o))}return i=0===e.cmpn(1)?o:a,i.cmpn(0)<0&&i.iadd(t),i},s.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);do{while(e.isEven())e.iushrn(1);while(r.isEven())r.iushrn(1);var i=e.cmp(r);if(i<0){var s=e;e=r,r=s}else if(0===i||0===r.cmpn(1))break;e.isub(r)}while(1);return r.iushln(n)},s.prototype.invm=function(t){return this.egcd(t).a.umod(t)},s.prototype.isEven=function(){return 0===(1&this.words[0])},s.prototype.isOdd=function(){return 1===(1&this.words[0])},s.prototype.andln=function(t){return this.words[0]&t},s.prototype.bincn=function(t){n("number"===typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var s=i,o=r;0!==s&&o<this.length;o++){var a=0|this.words[o];a+=s,s=a>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},s.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},s.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},s.prototype.gtn=function(t){return 1===this.cmpn(t)},s.prototype.gt=function(t){return 1===this.cmp(t)},s.prototype.gten=function(t){return this.cmpn(t)>=0},s.prototype.gte=function(t){return this.cmp(t)>=0},s.prototype.ltn=function(t){return-1===this.cmpn(t)},s.prototype.lt=function(t){return-1===this.cmp(t)},s.prototype.lten=function(t){return this.cmpn(t)<=0},s.prototype.lte=function(t){return this.cmp(t)<=0},s.prototype.eqn=function(t){return 0===this.cmpn(t)},s.prototype.eq=function(t){return 0===this.cmp(t)},s.red=function(t){return new O(t)},s.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(t){return this.red=t,this},s.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},s.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},s.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},s.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},s.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},s.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},s.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},s.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var v={k256:null,p224:null,p192:null,p25519:null};function I(t,e){this.name=t,this.p=new s(e,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function M(){I.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){I.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function A(){I.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function E(){I.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function O(t){if("string"===typeof t){var e=s._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function T(t){O.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}I.prototype._tmp=function(){var t=new s(null);return t.words=new Array(Math.ceil(this.n/13)),t},I.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),e=r.bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},I.prototype.split=function(t,e){t.iushrn(this.n,0,e)},I.prototype.imulK=function(t){return t.imul(this.k)},i(M,I),M.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(e.words[e.length++]=s&r,i=10;i<t.length;i++){var o=0|t.words[i];t.words[i-10]=(o&r)<<4|s>>>22,s=o}s>>>=22,t.words[i-10]=s,0===s&&t.length>10?t.length-=10:t.length-=9},M.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(_,I),i(A,I),i(E,I),E.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},s._prime=function(t){if(v[t])return v[t];var e;if("k256"===t)e=new M;else if("p224"===t)e=new _;else if("p192"===t)e=new A;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new E}return v[t]=e,e},O.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},O.prototype._verify2=function(t,e){n(0===(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},O.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(l(t,t.umod(this.m)._forceRed(this)),t)},O.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},O.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},O.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},O.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},O.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},O.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},O.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},O.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},O.prototype.isqr=function(t){return this.imul(t,t.clone())},O.prototype.sqr=function(t){return this.mul(t,t)},O.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2===1),3===e){var r=this.m.add(new s(1)).iushrn(2);return this.pow(t,r)}var i=this.m.subn(1),o=0;while(!i.isZero()&&0===i.andln(1))o++,i.iushrn(1);n(!i.isZero());var a=new s(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),l=this.m.bitLength();l=new s(2*l*l).toRed(this);while(0!==this.pow(l,u).cmp(c))l.redIAdd(c);var h=this.pow(l,i),d=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),g=o;while(0!==p.cmp(a)){for(var m=p,b=0;0!==m.cmp(a);b++)m=m.redSqr();n(b<g);var f=this.pow(h,new s(1).iushln(g-b-1));d=d.redMul(f),h=f.redSqr(),p=p.redMul(h),g=b}return d},O.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},O.prototype.pow=function(t,e){if(e.isZero())return new s(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=4,n=new Array(1<<r);n[0]=new s(1).toRed(this),n[1]=t;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],t);var o=n[0],a=0,c=0,u=e.bitLength()%26;for(0===u&&(u=26),i=e.length-1;i>=0;i--){for(var l=e.words[i],h=u-1;h>=0;h--){var d=l>>h&1;o!==n[0]&&(o=this.sqr(o)),0!==d||0!==a?(a<<=1,a|=d,c++,(c===r||0===i&&0===h)&&(o=this.mul(o,n[a]),c=0,a=0)):c=0}u=26}return o},O.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},O.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},s.mont=function(t){return new T(t)},i(T,O),T.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},T.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},T.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},T.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new s(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},T.prototype.invm=function(t){var e=this.imod(t._invmp(this.m).mul(this.r2));return e._forceRed(this)}}(t,this)}).call(this,r("62e4")(t))},5621:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("47c4"),i=r("ff6a");e.DIGEST_LENGTH=16;var s=function(){function t(t){this.digestLength=e.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var r=t[0]|t[1]<<8;this._r[0]=8191&r;var n=t[2]|t[3]<<8;this._r[1]=8191&(r>>>13|n<<3);var i=t[4]|t[5]<<8;this._r[2]=7939&(n>>>10|i<<6);var s=t[6]|t[7]<<8;this._r[3]=8191&(i>>>7|s<<9);var o=t[8]|t[9]<<8;this._r[4]=255&(s>>>4|o<<12),this._r[5]=o>>>1&8190;var a=t[10]|t[11]<<8;this._r[6]=8191&(o>>>14|a<<2);var c=t[12]|t[13]<<8;this._r[7]=8065&(a>>>11|c<<5);var u=t[14]|t[15]<<8;this._r[8]=8191&(c>>>8|u<<8),this._r[9]=u>>>5&127,this._pad[0]=t[16]|t[17]<<8,this._pad[1]=t[18]|t[19]<<8,this._pad[2]=t[20]|t[21]<<8,this._pad[3]=t[22]|t[23]<<8,this._pad[4]=t[24]|t[25]<<8,this._pad[5]=t[26]|t[27]<<8,this._pad[6]=t[28]|t[29]<<8,this._pad[7]=t[30]|t[31]<<8}return t.prototype._blocks=function(t,e,r){var n=this._fin?0:2048,i=this._h[0],s=this._h[1],o=this._h[2],a=this._h[3],c=this._h[4],u=this._h[5],l=this._h[6],h=this._h[7],d=this._h[8],p=this._h[9],g=this._r[0],m=this._r[1],b=this._r[2],f=this._r[3],y=this._r[4],w=this._r[5],k=this._r[6],S=this._r[7],v=this._r[8],I=this._r[9];while(r>=16){var M=t[e+0]|t[e+1]<<8;i+=8191&M;var _=t[e+2]|t[e+3]<<8;s+=8191&(M>>>13|_<<3);var A=t[e+4]|t[e+5]<<8;o+=8191&(_>>>10|A<<6);var E=t[e+6]|t[e+7]<<8;a+=8191&(A>>>7|E<<9);var O=t[e+8]|t[e+9]<<8;c+=8191&(E>>>4|O<<12),u+=O>>>1&8191;var T=t[e+10]|t[e+11]<<8;l+=8191&(O>>>14|T<<2);var j=t[e+12]|t[e+13]<<8;h+=8191&(T>>>11|j<<5);var B=t[e+14]|t[e+15]<<8;d+=8191&(j>>>8|B<<8),p+=B>>>5|n;var N=0,x=N;x+=i*g,x+=s*(5*I),x+=o*(5*v),x+=a*(5*S),x+=c*(5*k),N=x>>>13,x&=8191,x+=u*(5*w),x+=l*(5*y),x+=h*(5*f),x+=d*(5*b),x+=p*(5*m),N+=x>>>13,x&=8191;var L=N;L+=i*m,L+=s*g,L+=o*(5*I),L+=a*(5*v),L+=c*(5*S),N=L>>>13,L&=8191,L+=u*(5*k),L+=l*(5*w),L+=h*(5*y),L+=d*(5*f),L+=p*(5*b),N+=L>>>13,L&=8191;var P=N;P+=i*b,P+=s*m,P+=o*g,P+=a*(5*I),P+=c*(5*v),N=P>>>13,P&=8191,P+=u*(5*S),P+=l*(5*k),P+=h*(5*w),P+=d*(5*y),P+=p*(5*f),N+=P>>>13,P&=8191;var R=N;R+=i*f,R+=s*b,R+=o*m,R+=a*g,R+=c*(5*I),N=R>>>13,R&=8191,R+=u*(5*v),R+=l*(5*S),R+=h*(5*k),R+=d*(5*w),R+=p*(5*y),N+=R>>>13,R&=8191;var z=N;z+=i*y,z+=s*f,z+=o*b,z+=a*m,z+=c*g,N=z>>>13,z&=8191,z+=u*(5*I),z+=l*(5*v),z+=h*(5*S),z+=d*(5*k),z+=p*(5*w),N+=z>>>13,z&=8191;var U=N;U+=i*w,U+=s*y,U+=o*f,U+=a*b,U+=c*m,N=U>>>13,U&=8191,U+=u*g,U+=l*(5*I),U+=h*(5*v),U+=d*(5*S),U+=p*(5*k),N+=U>>>13,U&=8191;var W=N;W+=i*k,W+=s*w,W+=o*y,W+=a*f,W+=c*b,N=W>>>13,W&=8191,W+=u*m,W+=l*g,W+=h*(5*I),W+=d*(5*v),W+=p*(5*S),N+=W>>>13,W&=8191;var C=N;C+=i*S,C+=s*k,C+=o*w,C+=a*y,C+=c*f,N=C>>>13,C&=8191,C+=u*b,C+=l*m,C+=h*g,C+=d*(5*I),C+=p*(5*v),N+=C>>>13,C&=8191;var D=N;D+=i*v,D+=s*S,D+=o*k,D+=a*w,D+=c*y,N=D>>>13,D&=8191,D+=u*f,D+=l*b,D+=h*m,D+=d*g,D+=p*(5*I),N+=D>>>13,D&=8191;var F=N;F+=i*I,F+=s*v,F+=o*S,F+=a*k,F+=c*w,N=F>>>13,F&=8191,F+=u*y,F+=l*f,F+=h*b,F+=d*m,F+=p*g,N+=F>>>13,F&=8191,N=(N<<2)+N|0,N=N+x|0,x=8191&N,N>>>=13,L+=N,i=x,s=L,o=P,a=R,c=z,u=U,l=W,h=C,d=D,p=F,e+=16,r-=16}this._h[0]=i,this._h[1]=s,this._h[2]=o,this._h[3]=a,this._h[4]=c,this._h[5]=u,this._h[6]=l,this._h[7]=h,this._h[8]=d,this._h[9]=p},t.prototype.finish=function(t,e){void 0===e&&(e=0);var r,n,i,s,o=new Uint16Array(10);if(this._leftover){for(s=this._leftover,this._buffer[s++]=1;s<16;s++)this._buffer[s]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(r=this._h[1]>>>13,this._h[1]&=8191,s=2;s<10;s++)this._h[s]+=r,r=this._h[s]>>>13,this._h[s]&=8191;for(this._h[0]+=5*r,r=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=r,r=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=r,o[0]=this._h[0]+5,r=o[0]>>>13,o[0]&=8191,s=1;s<10;s++)o[s]=this._h[s]+r,r=o[s]>>>13,o[s]&=8191;for(o[9]-=8192,n=(1^r)-1,s=0;s<10;s++)o[s]&=n;for(n=~n,s=0;s<10;s++)this._h[s]=this._h[s]&n|o[s];for(this._h[0]=65535&(this._h[0]|this._h[1]<<13),this._h[1]=65535&(this._h[1]>>>3|this._h[2]<<10),this._h[2]=65535&(this._h[2]>>>6|this._h[3]<<7),this._h[3]=65535&(this._h[3]>>>9|this._h[4]<<4),this._h[4]=65535&(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14),this._h[5]=65535&(this._h[6]>>>2|this._h[7]<<11),this._h[6]=65535&(this._h[7]>>>5|this._h[8]<<8),this._h[7]=65535&(this._h[8]>>>8|this._h[9]<<5),i=this._h[0]+this._pad[0],this._h[0]=65535&i,s=1;s<8;s++)i=(this._h[s]+this._pad[s]|0)+(i>>>16)|0,this._h[s]=65535&i;return t[e+0]=this._h[0]>>>0,t[e+1]=this._h[0]>>>8,t[e+2]=this._h[1]>>>0,t[e+3]=this._h[1]>>>8,t[e+4]=this._h[2]>>>0,t[e+5]=this._h[2]>>>8,t[e+6]=this._h[3]>>>0,t[e+7]=this._h[3]>>>8,t[e+8]=this._h[4]>>>0,t[e+9]=this._h[4]>>>8,t[e+10]=this._h[5]>>>0,t[e+11]=this._h[5]>>>8,t[e+12]=this._h[6]>>>0,t[e+13]=this._h[6]>>>8,t[e+14]=this._h[7]>>>0,t[e+15]=this._h[7]>>>8,this._finished=!0,this},t.prototype.update=function(t){var e,r=0,n=t.length;if(this._leftover){e=16-this._leftover,e>n&&(e=n);for(var i=0;i<e;i++)this._buffer[this._leftover+i]=t[r+i];if(n-=e,r+=e,this._leftover+=e,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(n>=16&&(e=n-n%16,this._blocks(t,r,e),r+=e,n-=e),n){for(i=0;i<n;i++)this._buffer[this._leftover+i]=t[r+i];this._leftover+=n}return this},t.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var t=new Uint8Array(16);return this.finish(t),t},t.prototype.clean=function(){return i.wipe(this._buffer),i.wipe(this._r),i.wipe(this._h),i.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},t}();function o(t,e){var r=new s(t);r.update(e);var n=r.digest();return r.clean(),n}function a(t,r){return t.length===e.DIGEST_LENGTH&&r.length===e.DIGEST_LENGTH&&n.equal(t,r)}e.Poly1305=s,e.oneTimeAuth=o,e.equal=a},"5cc4":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SystemRandomSource=void 0;const n=r("843f"),i=r("e512");class s{constructor(){return this.isAvailable=!1,this.name="",this._source=new n.BrowserRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Browser")):(this._source=new i.NodeRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Node")):void 0)}randomBytes(t){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(t)}}e.SystemRandomSource=s},"633a":function(t,e,r){"use strict";r.d(e,"c",(function(){return i["b"]})),r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return l}));var n=r("bbae"),i=r("a81a"),s=r("901e"),o=r.n(s);new o.a("1e+18");var a=r("8df2");const c=t=>{const e=Object(a["u8"])(t),{encode:r,decode:i}=Object(n["a"])(e),s=e;return s.decode=(t,e)=>{const r=i(t,e);return!!r},s.encode=(t,e,n)=>{const i=Number(t);return r(i,e,n)},s};var u=r("2923");const l=t=>{const e=Object(a["blob"])(32,t),{encode:r,decode:i}=Object(n["a"])(e),s=e;return s.decode=(t,e)=>{const r=i(t,e);return new u["PublicKey"](r)},s.encode=(t,e,n)=>{const i=t.toBuffer();return r(i,e,n)},s}},"64b9":function(t,e,r){"use strict";r.d(e,"a",(function(){return Yt})),r.d(e,"b",(function(){return $r})),r.d(e,"c",(function(){return qr})),r.d(e,"d",(function(){return Yr})),r.d(e,"e",(function(){return R})),r.d(e,"f",(function(){return mt})),r.d(e,"g",(function(){return ft})),r.d(e,"h",(function(){return jt})),r.d(e,"i",(function(){return ct})),r.d(e,"j",(function(){return at})),r.d(e,"k",(function(){return ut})),r.d(e,"l",(function(){return lt}));r("d9e2"),r("14d9"),r("13d5"),r("907a"),r("986a"),r("1d02"),r("3c5d"),r("6ce5"),r("2834"),r("4ea1"),r("669d"),r("109c"),r("b2c1"),r("0643"),r("76d6"),r("2382"),r("fffc"),r("4e3e"),r("a573"),r("9d4a"),r("9a9a"),r("88e6"),r("70cc"),r("eb03"),r("22e5"),r("c01e"),r("fa76"),r("8306");var n=r("1c35"),i=r("aecc"),s=r("5319"),o=r.n(s),a=r("8ab6"),c=r.n(a),u=r("d129"),l=r("fa13"),h=r("8df2"),d=r("9ea2"),p=r("d920"),g=r("502a"),m=r.n(g),b=r("e01f"),f=r.n(b),y=r("136e"),w=r.n(y),k=r("00e3"),S=r("fb4a");i["ed25519"].utils.randomPrivateKey;const v=()=>{const t=i["ed25519"].utils.randomPrivateKey(),e=I(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),{publicKey:e,secretKey:r}},I=i["ed25519"].getPublicKey;function M(t){try{return i["ed25519"].ExtendedPoint.fromHex(t),!0}catch{return!1}}const _=(t,e)=>i["ed25519"].sign(t,e.slice(0,32)),A=i["ed25519"].verify,E=t=>n["Buffer"].isBuffer(t)?t:t instanceof Uint8Array?n["Buffer"].from(t.buffer,t.byteOffset,t.byteLength):n["Buffer"].from(t);class O{constructor(t){Object.assign(this,t)}encode(){return n["Buffer"].from(Object(l["serialize"])(T,this))}static decode(t){return Object(l["deserialize"])(T,this,t)}static decodeUnchecked(t){return Object(l["deserializeUnchecked"])(T,this,t)}}const T=new Map;var j;let B;const N=32,x=32;function L(t){return void 0!==t._bn}let P=1;B=Symbol.toStringTag;class R extends O{constructor(t){if(super({}),this._bn=void 0,L(t))this._bn=t._bn;else{if("string"===typeof t){const e=c.a.decode(t);if(e.length!=x)throw new Error("Invalid public key input");this._bn=new o.a(e)}else this._bn=new o.a(t);if(this._bn.byteLength()>x)throw new Error("Invalid public key input")}}static unique(){const t=new R(P);return P+=1,new R(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return c.a.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(n["Buffer"]);if(t.length===x)return t;const e=n["Buffer"].alloc(32);return t.copy(e,32-t.length),e}get[B](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const i=n["Buffer"].concat([t.toBuffer(),n["Buffer"].from(e),r.toBuffer()]),s=Object(u["sha256"])(i);return new R(s)}static createProgramAddressSync(t,e){let r=n["Buffer"].alloc(0);t.forEach((function(t){if(t.length>N)throw new TypeError("Max seed length exceeded");r=n["Buffer"].concat([r,E(t)])})),r=n["Buffer"].concat([r,e.toBuffer(),n["Buffer"].from("ProgramDerivedAddress")]);const i=Object(u["sha256"])(r);if(M(i))throw new Error("Invalid seeds, address must fall off the curve");return new R(i)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r,i=255;while(0!=i){try{const s=t.concat(n["Buffer"].from([i]));r=this.createProgramAddressSync(s,e)}catch(s){if(s instanceof TypeError)throw s;i--;continue}return[r,i]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new R(t);return M(e.toBytes())}}j=R,R.default=new j("11111111111111111111111111111111"),T.set(R,{kind:"struct",fields:[["_bn","u256"]]});new R("BPFLoader1111111111111111111111111111111111");const z=1232,U=127,W=64;class C extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(C.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class D extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature `+t+" using the Solana Explorer or CLI tools."),this.signature=void 0,this.signature=t}}Object.defineProperty(D.prototype,"name",{value:"TransactionExpiredTimeoutError"});class F extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(F.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class V{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){const e=255;if(this.length>e+1)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((t,e)=>{r.set(t.toBase58(),e)});const n=t=>{const e=r.get(t.toBase58());if(void 0===e)throw new Error("Encountered an unknown instruction account key during compilation");return e};return t.map(t=>({programIdIndex:n(t.programId),accountKeyIndexes:t.keys.map(t=>n(t.pubkey)),data:t.data}))}}const K=(t="publicKey")=>h["blob"](32,t),Q=(t="signature")=>h["blob"](64,t),Z=(t="string")=>{const e=h["struct"]([h["u32"]("length"),h["u32"]("lengthPadding"),h["blob"](h["offset"](h["u32"](),-8),"chars")],t),r=e.decode.bind(e),i=e.encode.bind(e),s=e;return s.decode=(t,e)=>{const n=r(t,e);return n["chars"].toString()},s.encode=(t,e,r)=>{const s={chars:n["Buffer"].from(t,"utf8")};return i(s,e,r)},s.alloc=t=>h["u32"]().span+h["u32"]().span+n["Buffer"].from(t,"utf8").length,s},H=(t="authorized")=>h["struct"]([K("staker"),K("withdrawer")],t),q=(t="lockup")=>h["struct"]([h["ns64"]("unixTimestamp"),h["ns64"]("epoch"),K("custodian")],t),Y=(t="voteInit")=>h["struct"]([K("nodePubkey"),K("authorizedVoter"),K("authorizedWithdrawer"),h["u8"]("commission")],t),G=(t="voteAuthorizeWithSeedArgs")=>h["struct"]([h["u32"]("voteAuthorizationType"),K("currentAuthorityDerivedKeyOwnerPubkey"),Z("currentAuthorityDerivedKeySeed"),K("newAuthorized")],t);function J(t,e){const r=t=>{if(t.span>=0)return t.span;if("function"===typeof t.alloc)return t.alloc(e[t.property]);if("count"in t&&"elementLayout"in t){const n=e[t.property];if(Array.isArray(n))return n.length*r(t.elementLayout)}else if("fields"in t)return J({layout:t},e[t.property]);return 0};let n=0;return t.layout.fields.forEach(t=>{n+=r(t)}),n}function X(t){let e=0,r=0;for(;;){let n=t.shift();if(e|=(127&n)<<7*r,r+=1,0===(128&n))break}return e}function $(t,e){let r=e;for(;;){let e=127&r;if(r>>=7,0==r){t.push(e);break}e|=128,t.push(e)}}function tt(t,e){if(!t)throw new Error(e||"Assertion failed")}class et{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,n=t=>{const e=t.toBase58();let n=r.get(e);return void 0===n&&(n={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(e,n)),n},i=n(e);i.isSigner=!0,i.isWritable=!0;for(const s of t){n(s.programId).isInvoked=!0;for(const t of s.keys){const e=n(t.pubkey);e.isSigner||(e.isSigner=t.isSigner),e.isWritable||(e.isWritable=t.isWritable)}}return new et(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];tt(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,t])=>t.isSigner&&t.isWritable),r=t.filter(([,t])=>t.isSigner&&!t.isWritable),n=t.filter(([,t])=>!t.isSigner&&t.isWritable),i=t.filter(([,t])=>!t.isSigner&&!t.isWritable),s={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{tt(e.length>0,"Expected at least one writable signer key");const[t]=e[0];tt(t===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const o=[...e.map(([t])=>new R(t)),...r.map(([t])=>new R(t)),...n.map(([t])=>new R(t)),...i.map(([t])=>new R(t))];return[s,o]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,t=>!t.isSigner&&!t.isInvoked&&t.isWritable),[n,i]=this.drainKeysFoundInLookupTable(t.state.addresses,t=>!t.isSigner&&!t.isInvoked&&!t.isWritable);if(0!==e.length||0!==n.length)return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:n},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,n=new Array;for(const[i,s]of this.keyMetaMap.entries())if(e(s)){const e=new R(i),s=t.findIndex(t=>t.equals(e));s>=0&&(tt(s<256,"Max lookup table index exceeded"),r.push(s),n.push(e),this.keyMetaMap.delete(i))}return[r,n]}}class rt{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(t=>new R(t)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:c.a.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new V(this.staticAccountKeys)}static compile(t){const e=et.compile(t.instructions,t.payerKey),[r,n]=e.getMessageComponents(),i=new V(n),s=i.compileInstructions(t.instructions).map(t=>({programIdIndex:t.programIdIndex,accounts:t.accountKeyIndexes,data:c.a.encode(t.data)}));return new rt({header:r,accountKeys:n,recentBlockhash:t.recentBlockhash,instructions:s})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,n=this.accountKeys.length-e,i=n-this.header.numReadonlyUnsignedAccounts;return r<i}{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];$(e,t);const r=this.instructions.map(t=>{const{accounts:e,programIdIndex:r}=t,i=Array.from(c.a.decode(t.data));let s=[];$(s,e.length);let o=[];return $(o,i.length),{programIdIndex:r,keyIndicesCount:n["Buffer"].from(s),keyIndices:e,dataLength:n["Buffer"].from(o),data:i}});let i=[];$(i,r.length);let s=n["Buffer"].alloc(z);n["Buffer"].from(i).copy(s);let o=i.length;r.forEach(t=>{const e=h["struct"]([h["u8"]("programIdIndex"),h["blob"](t.keyIndicesCount.length,"keyIndicesCount"),h["seq"](h["u8"]("keyIndex"),t.keyIndices.length,"keyIndices"),h["blob"](t.dataLength.length,"dataLength"),h["seq"](h["u8"]("userdatum"),t.data.length,"data")]),r=e.encode(t,s,o);o+=r}),s=s.slice(0,o);const a=h["struct"]([h["blob"](1,"numRequiredSignatures"),h["blob"](1,"numReadonlySignedAccounts"),h["blob"](1,"numReadonlyUnsignedAccounts"),h["blob"](e.length,"keyCount"),h["seq"](K("key"),t,"keys"),K("recentBlockhash")]),u={numRequiredSignatures:n["Buffer"].from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:n["Buffer"].from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:n["Buffer"].from([this.header.numReadonlyUnsignedAccounts]),keyCount:n["Buffer"].from(e),keys:this.accountKeys.map(t=>E(t.toBytes())),recentBlockhash:c.a.decode(this.recentBlockhash)};let l=n["Buffer"].alloc(2048);const d=a.encode(u,l);return s.copy(l,d),l.slice(0,d+s.length)}static from(t){let e=[...t];const r=e.shift();if(r!==(r&U))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=e.shift(),s=e.shift(),o=X(e);let a=[];for(let c=0;c<o;c++){const t=e.splice(0,x);a.push(new R(n["Buffer"].from(t)))}const u=e.splice(0,x),l=X(e);let h=[];for(let p=0;p<l;p++){const t=e.shift(),r=X(e),i=e.splice(0,r),s=X(e),o=e.splice(0,s),a=c.a.encode(n["Buffer"].from(o));h.push({programIdIndex:t,accounts:i,data:a})}const d={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:c.a.encode(n["Buffer"].from(u)),accountKeys:a,instructions:h};return new rt(d)}}class nt{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new V(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const e=t-r,n=this.addressTableLookups.reduce((t,e)=>t+e.writableIndexes.length,0);return e<n}if(t>=this.header.numRequiredSignatures){const n=t-e,i=r-e,s=i-this.header.numReadonlyUnsignedAccounts;return n<s}{const r=e-this.header.numReadonlySignedAccounts;return t<r}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const n=t.find(t=>t.key.equals(r.accountKey));if(!n)throw new Error("Failed to find address lookup table account for table key "+r.accountKey.toBase58());for(const t of r.writableIndexes){if(!(t<n.state.addresses.length))throw new Error(`Failed to find address for index ${t} in address lookup table ${r.accountKey.toBase58()}`);e.writable.push(n.state.addresses[t])}for(const t of r.readonlyIndexes){if(!(t<n.state.addresses.length))throw new Error(`Failed to find address for index ${t} in address lookup table ${r.accountKey.toBase58()}`);e.readonly.push(n.state.addresses[t])}}return e}static compile(t){const e=et.compile(t.instructions,t.payerKey),r=new Array,n={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const u of i){const t=e.extractTableLookup(u);if(void 0!==t){const[e,{writable:i,readonly:s}]=t;r.push(e),n.writable.push(...i),n.readonly.push(...s)}}const[s,o]=e.getMessageComponents(),a=new V(o,n),c=a.compileInstructions(t.instructions);return new nt({header:s,staticAccountKeys:o,recentBlockhash:t.recentBlockhash,compiledInstructions:c,addressTableLookups:r})}serialize(){const t=Array();$(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();$(r,this.compiledInstructions.length);const n=this.serializeAddressTableLookups(),i=Array();$(i,this.addressTableLookups.length);const s=h["struct"]([h["u8"]("prefix"),h["struct"]([h["u8"]("numRequiredSignatures"),h["u8"]("numReadonlySignedAccounts"),h["u8"]("numReadonlyUnsignedAccounts")],"header"),h["blob"](t.length,"staticAccountKeysLength"),h["seq"](K(),this.staticAccountKeys.length,"staticAccountKeys"),K("recentBlockhash"),h["blob"](r.length,"instructionsLength"),h["blob"](e.length,"serializedInstructions"),h["blob"](i.length,"addressTableLookupsLength"),h["blob"](n.length,"serializedAddressTableLookups")]),o=new Uint8Array(z),a=128,u=s.encode({prefix:a,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(t=>t.toBytes()),recentBlockhash:c.a.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:n},o);return o.slice(0,u)}serializeInstructions(){let t=0;const e=new Uint8Array(z);for(const r of this.compiledInstructions){const n=Array();$(n,r.accountKeyIndexes.length);const i=Array();$(i,r.data.length);const s=h["struct"]([h["u8"]("programIdIndex"),h["blob"](n.length,"encodedAccountKeyIndexesLength"),h["seq"](h["u8"](),r.accountKeyIndexes.length,"accountKeyIndexes"),h["blob"](i.length,"encodedDataLength"),h["blob"](r.data.length,"data")]);t+=s.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(n),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(z);for(const r of this.addressTableLookups){const n=Array();$(n,r.writableIndexes.length);const i=Array();$(i,r.readonlyIndexes.length);const s=h["struct"]([K("accountKey"),h["blob"](n.length,"encodedWritableIndexesLength"),h["seq"](h["u8"](),r.writableIndexes.length,"writableIndexes"),h["blob"](i.length,"encodedReadonlyIndexesLength"),h["seq"](h["u8"](),r.readonlyIndexes.length,"readonlyIndexes")]);t+=s.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(n),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=e.shift(),n=r&U;tt(r!==n,"Expected versioned message but received legacy message");const i=n;tt(0===i,"Expected versioned message with version 0 but found version "+i);const s={numRequiredSignatures:e.shift(),numReadonlySignedAccounts:e.shift(),numReadonlyUnsignedAccounts:e.shift()},o=[],a=X(e);for(let c=0;c<a;c++)o.push(new R(e.splice(0,x)));const u=c.a.encode(e.splice(0,x)),l=X(e),h=[];for(let c=0;c<l;c++){const t=e.shift(),r=X(e),n=e.splice(0,r),i=X(e),s=new Uint8Array(e.splice(0,i));h.push({programIdIndex:t,accountKeyIndexes:n,data:s})}const d=X(e),p=[];for(let c=0;c<d;c++){const t=new R(e.splice(0,x)),r=X(e),n=e.splice(0,r),i=X(e),s=e.splice(0,i);p.push({accountKey:t,writableIndexes:n,readonlyIndexes:s})}return new nt({header:s,staticAccountKeys:o,recentBlockhash:u,compiledInstructions:h,addressTableLookups:p})}}const it={deserializeMessageVersion(t){const e=t[0],r=e&U;return r===e?"legacy":r},deserialize:t=>{const e=it.deserializeMessageVersion(t);if("legacy"===e)return rt.from(t);if(0===e)return nt.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let st=function(t){return t[t["BLOCKHEIGHT_EXCEEDED"]=0]="BLOCKHEIGHT_EXCEEDED",t[t["PROCESSED"]=1]="PROCESSED",t[t["TIMED_OUT"]=2]="TIMED_OUT",t[t["NONCE_INVALID"]=3]="NONCE_INVALID",t}({});const ot=n["Buffer"].alloc(W).fill(0);class at{constructor(t){this.keys=void 0,this.programId=void 0,this.data=n["Buffer"].alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class ct{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(0===t.length)throw new Error("No instructions");return t.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new at(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e,r;if(this.nonceInfo?(t=this.nonceInfo.nonce,e=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");if(e.length,this.feePayer)r=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");r=this.signatures[0].publicKey}for(let c=0;c<e.length;c++)if(void 0===e[c].programId)throw new Error(`Transaction instruction index ${c} has undefined program id`);const n=[],i=[];e.forEach(t=>{t.keys.forEach(t=>{i.push({...t})});const e=t.programId.toString();n.includes(e)||n.push(e)}),n.forEach(t=>{i.push({pubkey:new R(t),isSigner:!1,isWritable:!1})});const s=[];i.forEach(t=>{const e=t.pubkey.toString(),r=s.findIndex(t=>t.pubkey.toString()===e);r>-1?(s[r].isWritable=s[r].isWritable||t.isWritable,s[r].isSigner=s[r].isSigner||t.isSigner):s.push(t)}),s.sort((function(t,e){if(t.isSigner!==e.isSigner)return t.isSigner?-1:1;if(t.isWritable!==e.isWritable)return t.isWritable?-1:1;const r={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return t.pubkey.toBase58().localeCompare(e.pubkey.toBase58(),"en",r)}));const o=s.findIndex(t=>t.pubkey.equals(r));if(o>-1){const[t]=s.splice(o,1);t.isSigner=!0,t.isWritable=!0,s.unshift(t)}else s.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const c of this.signatures){const t=s.findIndex(t=>t.pubkey.equals(c.publicKey));if(!(t>-1))throw new Error("unknown signer: "+c.publicKey.toString());s[t].isSigner||(s[t].isSigner=!0)}let a=0,u=0,l=0;const h=[],d=[];s.forEach(({pubkey:t,isSigner:e,isWritable:r})=>{e?(h.push(t.toString()),a+=1,r||(u+=1)):(d.push(t.toString()),r||(l+=1))});const p=h.concat(d),g=e.map(t=>{const{data:e,programId:r}=t;return{programIdIndex:p.indexOf(r.toString()),accounts:t.keys.map(t=>p.indexOf(t.pubkey.toString())),data:c.a.encode(e)}});return g.forEach(t=>{tt(t.programIdIndex>=0),t.accounts.forEach(t=>tt(t>=0))}),new rt({header:{numRequiredSignatures:a,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:l},accountKeys:p,recentBlockhash:t,instructions:g})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);if(this.signatures.length===e.length){const r=this.signatures.every((t,r)=>e[r].equals(t.publicKey));if(r)return t}return this.signatures=e.map(t=>({signature:null,publicKey:t})),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(0===t.length)throw new Error("No signers");const e=new Set;this.signatures=t.filter(t=>{const r=t.toString();return!e.has(r)&&(e.add(r),!0)}).map(t=>({signature:null,publicKey:t}))}sign(...t){if(0===t.length)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const t=i.publicKey.toString();e.has(t)||(e.add(t),r.push(i))}this.signatures=r.map(t=>({signature:null,publicKey:t.publicKey}));const n=this._compile();this._partialSign(n,...r)}partialSign(...t){if(0===t.length)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const t=i.publicKey.toString();e.has(t)||(e.add(t),r.push(i))}const n=this._compile();this._partialSign(n,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(t=>{const e=_(r,t.secretKey);this._addSignature(t.publicKey,E(e))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){tt(64===e.length);const r=this.signatures.findIndex(e=>t.equals(e.publicKey));if(r<0)throw new Error("unknown signer: "+t.toString());this.signatures[r].signature=n["Buffer"].from(e)}verifySignatures(t=!0){const e=this._getMessageSignednessErrors(this.serializeMessage(),t);return!e}_getMessageSignednessErrors(t,e){const r={};for(const{signature:n,publicKey:i}of this.signatures)null===n?e&&(r.missing||(r.missing=[])).push(i):A(n,t,i.toBytes())||(r.invalid||(r.invalid=[])).push(i);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),n=this.serializeMessage();if(r){const t=this._getMessageSignednessErrors(n,e);if(t){let e="Signature verification failed.";throw t.invalid&&(e+=`\nInvalid signature for public key${1===t.invalid.length?"":"(s)"} [\`${t.invalid.map(t=>t.toBase58()).join("`, `")}\`].`),t.missing&&(e+=`\nMissing signature for public key${1===t.missing.length?"":"(s)"} [\`${t.missing.map(t=>t.toBase58()).join("`, `")}\`].`),new Error(e)}}return this._serialize(n)}_serialize(t){const{signatures:e}=this,r=[];$(r,e.length);const i=r.length+64*e.length+t.length,s=n["Buffer"].alloc(i);return tt(e.length<256),n["Buffer"].from(r).copy(s,0),e.forEach(({signature:t},e)=>{null!==t&&(tt(64===t.length,"signature has invalid length"),n["Buffer"].from(t).copy(s,r.length+64*e))}),t.copy(s,r.length+64*e.length),tt(s.length<=z,`Transaction too large: ${s.length} > ${z}`),s}get keys(){return tt(1===this.instructions.length),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return tt(1===this.instructions.length),this.instructions[0].programId}get data(){return tt(1===this.instructions.length),this.instructions[0].data}static from(t){let e=[...t];const r=X(e);let i=[];for(let s=0;s<r;s++){const t=e.splice(0,W);i.push(c.a.encode(n["Buffer"].from(t)))}return ct.populate(rt.from(e),i)}static populate(t,e=[]){const r=new ct;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((e,n)=>{const i={signature:e==c.a.encode(ot)?null:c.a.decode(e),publicKey:t.accountKeys[n]};r.signatures.push(i)}),t.instructions.forEach(e=>{const n=e.accounts.map(e=>{const n=t.accountKeys[e];return{pubkey:n,isSigner:r.signatures.some(t=>t.publicKey.toString()===n.toString())||t.isAccountSigner(e),isWritable:t.isAccountWritable(e)}});r.instructions.push(new at({keys:n,programId:t.accountKeys[e.programIdIndex],data:c.a.decode(e.data)}))}),r._message=t,r._json=r.toJSON(),r}}class ut{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){const{header:r,compiledInstructions:n,recentBlockhash:i}=t,{numRequiredSignatures:s,numReadonlySignedAccounts:o,numReadonlyUnsignedAccounts:a}=r,c=s-o;tt(c>0,"Message header is invalid");const u=t.staticAccountKeys.length-s-a;tt(u>=0,"Message header is invalid");const l=t.getAccountKeys(e),h=l.get(0);if(void 0===h)throw new Error("Failed to decompile message because no account keys were found");const d=[];for(const p of n){const t=[];for(const n of p.accountKeyIndexes){const e=l.get(n);if(void 0===e)throw new Error("Failed to find key for account key index "+n);const i=n<s;let o;o=i?n<c:n<l.staticAccountKeys.length?n-s<u:n-l.staticAccountKeys.length<l.accountKeysFromLookups.writable.length,t.push({pubkey:e,isSigner:n<r.numRequiredSignatures,isWritable:o})}const e=l.get(p.programIdIndex);if(void 0===e)throw new Error("Failed to find program id for program id index "+p.programIdIndex);d.push(new at({programId:e,data:E(p.data),keys:t}))}return new ut({payerKey:h,instructions:d,recentBlockhash:i})}compileToLegacyMessage(){return rt.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return nt.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}}class lt{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,void 0!==e)tt(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const e=[];for(let r=0;r<t.header.numRequiredSignatures;r++)e.push(new Uint8Array(W));this.signatures=e}this.message=t}serialize(){const t=this.message.serialize(),e=Array();$(e,this.signatures.length);const r=h["struct"]([h["blob"](e.length,"encodedSignaturesLength"),h["seq"](Q(),this.signatures.length,"signatures"),h["blob"](t.length,"serializedMessage")]),n=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},n);return n.slice(0,i)}static deserialize(t){let e=[...t];const r=[],n=X(e);for(let s=0;s<n;s++)r.push(new Uint8Array(e.splice(0,W)));const i=it.deserialize(new Uint8Array(e));return new lt(i,r)}sign(t){const e=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const n of t){const t=r.findIndex(t=>t.equals(n.publicKey));tt(t>=0,"Cannot sign with non signer key "+n.publicKey.toBase58()),this.signatures[t]=_(e,n.secretKey)}}addSignature(t,e){tt(64===e.byteLength,"Signature must be 64 bytes long");const r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures),n=r.findIndex(e=>e.equals(t));tt(n>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[n]=e}}const ht=160,dt=64,pt=ht/dt,gt=1e3/pt,mt=new R("SysvarC1ock11111111111111111111111111111111"),bt=(new R("SysvarEpochSchedu1e111111111111111111111111"),new R("Sysvar1nstructions1111111111111111111111111"),new R("SysvarRecentB1ockHashes11111111111111111111")),ft=new R("SysvarRent111111111111111111111111111111111"),yt=(new R("SysvarRewards111111111111111111111111111111"),new R("SysvarS1otHashes111111111111111111111111111"),new R("SysvarS1otHistory11111111111111111111111111"),new R("SysvarStakeHistory1111111111111111111111111"));async function wt(t,e,r,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await t.sendTransaction(e,r,i);let o;if(null!=e.recentBlockhash&&null!=e.lastValidBlockHeight)o=(await t.confirmTransaction({abortSignal:null===n||void 0===n?void 0:n.abortSignal,signature:s,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(null!=e.minNonceContextSlot&&null!=e.nonceInfo){const{nonceInstruction:r}=e.nonceInfo,i=r.keys[0].pubkey;o=(await t.confirmTransaction({abortSignal:null===n||void 0===n?void 0:n.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:i,nonceValue:e.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else null===n||void 0===n||n.abortSignal,o=(await t.confirmTransaction(s,n&&n.commitment)).value;if(o.err)throw new Error(`Transaction ${s} failed (${JSON.stringify(o)})`);return s}function kt(t){return new Promise(e=>setTimeout(e,t))}function St(t,e){const r=t.layout.span>=0?t.layout.span:J(t,e),i=n["Buffer"].alloc(r),s=Object.assign({instruction:t.index},e);return t.layout.encode(s,i),i}const vt=h["nu64"]("lamportsPerSignature"),It=h["struct"]([h["u32"]("version"),h["u32"]("state"),K("authorizedPubkey"),K("nonce"),h["struct"]([vt],"feeCalculator")]),Mt=It.span;class _t{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=It.decode(E(t),0);return new _t({authorizedPubkey:new R(e.authorizedPubkey),nonce:new R(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const At=t=>{const e=t.decode.bind(t),r=t.encode.bind(t);return{decode:e,encode:r}},Et=t=>e=>{const r=Object(h["blob"])(t,e),{encode:i,decode:s}=At(r),o=r;return o.decode=(t,e)=>{const r=s(t,e);return Object(d["toBigIntLE"])(n["Buffer"].from(r))},o.encode=(e,r,n)=>{const s=Object(d["toBufferLE"])(e,t);return i(s,r,n)},o},Ot=Et(8);const Tt=Object.freeze({Create:{index:0,layout:h["struct"]([h["u32"]("instruction"),h["ns64"]("lamports"),h["ns64"]("space"),K("programId")])},Assign:{index:1,layout:h["struct"]([h["u32"]("instruction"),K("programId")])},Transfer:{index:2,layout:h["struct"]([h["u32"]("instruction"),Ot("lamports")])},CreateWithSeed:{index:3,layout:h["struct"]([h["u32"]("instruction"),K("base"),Z("seed"),h["ns64"]("lamports"),h["ns64"]("space"),K("programId")])},AdvanceNonceAccount:{index:4,layout:h["struct"]([h["u32"]("instruction")])},WithdrawNonceAccount:{index:5,layout:h["struct"]([h["u32"]("instruction"),h["ns64"]("lamports")])},InitializeNonceAccount:{index:6,layout:h["struct"]([h["u32"]("instruction"),K("authorized")])},AuthorizeNonceAccount:{index:7,layout:h["struct"]([h["u32"]("instruction"),K("authorized")])},Allocate:{index:8,layout:h["struct"]([h["u32"]("instruction"),h["ns64"]("space")])},AllocateWithSeed:{index:9,layout:h["struct"]([h["u32"]("instruction"),K("base"),Z("seed"),h["ns64"]("space"),K("programId")])},AssignWithSeed:{index:10,layout:h["struct"]([h["u32"]("instruction"),K("base"),Z("seed"),K("programId")])},TransferWithSeed:{index:11,layout:h["struct"]([h["u32"]("instruction"),Ot("lamports"),Z("seed"),K("programId")])},UpgradeNonceAccount:{index:12,layout:h["struct"]([h["u32"]("instruction")])}});class jt{constructor(){}static createAccount(t){const e=Tt.Create,r=St(e,{lamports:t.lamports,space:t.space,programId:E(t.programId.toBuffer())});return new at({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(t){let e,r;if("basePubkey"in t){const n=Tt.TransferWithSeed;e=St(n,{lamports:BigInt(t.lamports),seed:t.seed,programId:E(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const n=Tt.Transfer;e=St(n,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new at({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){const n=Tt.AssignWithSeed;e=St(n,{base:E(t.basePubkey.toBuffer()),seed:t.seed,programId:E(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const n=Tt.Assign;e=St(n,{programId:E(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new at({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=Tt.CreateWithSeed,r=St(e,{base:E(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:E(t.programId.toBuffer())});let n=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey!=t.fromPubkey&&n.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new at({keys:n,programId:this.programId,data:r})}static createNonceAccount(t){const e=new ct;"basePubkey"in t&&"seed"in t?e.add(jt.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:Mt,programId:this.programId})):e.add(jt.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:Mt,programId:this.programId}));const r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){const e=Tt.InitializeNonceAccount,r=St(e,{authorized:E(t.authorizedPubkey.toBuffer())}),n={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:bt,isSigner:!1,isWritable:!1},{pubkey:ft,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new at(n)}static nonceAdvance(t){const e=Tt.AdvanceNonceAccount,r=St(e),n={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:bt,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new at(n)}static nonceWithdraw(t){const e=Tt.WithdrawNonceAccount,r=St(e,{lamports:t.lamports});return new at({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:bt,isSigner:!1,isWritable:!1},{pubkey:ft,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(t){const e=Tt.AuthorizeNonceAccount,r=St(e,{authorized:E(t.newAuthorizedPubkey.toBuffer())});return new at({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(t){let e,r;if("basePubkey"in t){const n=Tt.AllocateWithSeed;e=St(n,{base:E(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:E(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const n=Tt.Allocate;e=St(n,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new at({keys:r,programId:this.programId,data:e})}}jt.programId=new R("11111111111111111111111111111111");const Bt=z-300;class Nt{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/Nt.chunkSize)+1+1)}static async load(t,e,r,i,s){{const n=await t.getMinimumBalanceForRentExemption(s.length),o=await t.getAccountInfo(r.publicKey,"confirmed");let a=null;if(null!==o){if(o.executable)return!1;o.data.length!==s.length&&(a=a||new ct,a.add(jt.allocate({accountPubkey:r.publicKey,space:s.length}))),o.owner.equals(i)||(a=a||new ct,a.add(jt.assign({accountPubkey:r.publicKey,programId:i}))),o.lamports<n&&(a=a||new ct,a.add(jt.transfer({fromPubkey:e.publicKey,toPubkey:r.publicKey,lamports:n-o.lamports})))}else a=(new ct).add(jt.createAccount({fromPubkey:e.publicKey,newAccountPubkey:r.publicKey,lamports:n>0?n:1,space:s.length,programId:i}));null!==a&&await wt(t,a,[e,r],{commitment:"confirmed"})}const o=h["struct"]([h["u32"]("instruction"),h["u32"]("offset"),h["u32"]("bytesLength"),h["u32"]("bytesLengthPadding"),h["seq"](h["u8"]("byte"),h["offset"](h["u32"](),-8),"bytes")]),a=Nt.chunkSize;let c=0,u=s,l=[];while(u.length>0){const s=u.slice(0,a),h=n["Buffer"].alloc(a+16);o.encode({instruction:0,offset:c,bytes:s,bytesLength:0,bytesLengthPadding:0},h);const d=(new ct).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:h});if(l.push(wt(t,d,[e,r],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")){const t=4;await kt(1e3/t)}c+=a,u=u.slice(a)}await Promise.all(l);{const s=h["struct"]([h["u32"]("instruction")]),o=n["Buffer"].alloc(s.span);s.encode({instruction:1},o);const a=(new ct).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:ft,isSigner:!1,isWritable:!1}],programId:i,data:o}),c="processed",u=await t.sendTransaction(a,[e,r],{preflightCommitment:c}),{context:l,value:d}=await t.confirmTransaction({signature:u,lastValidBlockHeight:a.lastValidBlockHeight,blockhash:a.recentBlockhash},c);if(d.err)throw new Error(`Transaction ${u} failed (${JSON.stringify(d)})`);while(1){try{const e=await t.getSlot({commitment:c});if(e>l.slot)break}catch{}await new Promise(t=>setTimeout(t,Math.round(gt/2)))}}return!0}}Nt.chunkSize=Bt;new R("BPFLoader2111111111111111111111111111111111");function xt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t["default"]:t}var Lt=Object.prototype.toString,Pt=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};function Rt(t,e){var r,n,i,s,o,a,c;if(!0===t)return"true";if(!1===t)return"false";switch(typeof t){case"object":if(null===t)return null;if(t.toJSON&&"function"===typeof t.toJSON)return Rt(t.toJSON(),e);if(c=Lt.call(t),"[object Array]"===c){for(i="[",n=t.length-1,r=0;r<n;r++)i+=Rt(t[r],!0)+",";return n>-1&&(i+=Rt(t[r],!0)),i+"]"}if("[object Object]"===c){s=Pt(t).sort(),n=s.length,i="",r=0;while(r<n)o=s[r],a=Rt(t[o],!1),void 0!==a&&(i&&(i+=","),i+=JSON.stringify(o)+":"+a),r++;return"{"+i+"}"}return JSON.stringify(t);case"function":case"undefined":return e?null:void 0;case"string":return JSON.stringify(t);default:return isFinite(t)?t:null}}var zt=function(t){var e=Rt(t,!1);if(void 0!==e)return""+e},Ut=xt(zt);const Wt=32;function Ct(t){let e=0;while(t>1)t/=2,e++;return e}function Dt(t){return 0===t?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,t+1)}class Ft{constructor(t,e,r,n,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=n,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=Ct(Dt(t+Wt+1))-Ct(Wt)-1,r=this.getSlotsInEpoch(e),n=t-(r-Wt);return[e,n]}{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),n=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[n,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*Wt:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Ct(Wt)):this.slotsPerEpoch}}class Vt extends Error{constructor(t,e){super(t),this.logs=void 0,this.logs=e}}class Kt extends Error{constructor({code:t,message:e,data:r},n){super(null!=n?`${n}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}var Qt=globalThis.fetch;class Zt extends f.a{constructor(t,e,r){const n=t=>{const r=w()(t,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return this.underlyingSocket="socket"in r?r.socket:r,r};super(n,t,e,r),this.underlyingSocket=void 0}call(...t){var e;const r=null===(e=this.underlyingSocket)||void 0===e?void 0:e.readyState;return 1===r?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}notify(...t){var e;const r=null===(e=this.underlyingSocket)||void 0===e?void 0:e.readyState;return 1===r?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}}function Ht(t,e){let r;try{r=t.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(r.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${r.typeIndex} != ${t.index}`);return r}const qt=56;class Yt{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=Ht(Gt,t),r=t.length-qt;tt(r>=0,"lookup table is invalid"),tt(r%32===0,"lookup table is invalid");const n=r/32,{addresses:i}=h["struct"]([h["seq"](K(),n,"addresses")]).decode(t.slice(qt));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:0!==e.authority.length?new R(e.authority[0]):void 0,addresses:i.map(t=>new R(t))}}}const Gt={index:1,layout:h["struct"]([h["u32"]("typeIndex"),Ot("deactivationSlot"),h["nu64"]("lastExtendedSlot"),h["u8"]("lastExtendedStartIndex"),h["u8"](),h["seq"](K(),h["offset"](h["u8"](),-1),"authority")])},Jt=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Xt(t){const e=t.match(Jt);if(null==e)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[r,n,i,s]=e,o=t.startsWith("https:")?"wss:":"ws:",a=null==i?null:parseInt(i.slice(1),10),c=null==a?"":":"+(a+1);return`${o}//${n}${c}${s}`}const $t=Object(p["coerce"])(Object(p["instance"])(R),Object(p["string"])(),t=>new R(t)),te=Object(p["tuple"])([Object(p["string"])(),Object(p["literal"])("base64")]),ee=Object(p["coerce"])(Object(p["instance"])(n["Buffer"]),te,t=>n["Buffer"].from(t[0],"base64")),re=3e4;function ne(t){if(!1===/^https?:/.test(t))throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}function ie(t){let e,r;if("string"===typeof t)e=t;else if(t){const{commitment:n,...i}=t;e=n,r=i}return{commitment:e,config:r}}function se(t){return Object(p["union"])([Object(p["type"])({jsonrpc:Object(p["literal"])("2.0"),id:Object(p["string"])(),result:t}),Object(p["type"])({jsonrpc:Object(p["literal"])("2.0"),id:Object(p["string"])(),error:Object(p["type"])({code:Object(p["unknown"])(),message:Object(p["string"])(),data:Object(p["optional"])(Object(p["any"])())})})])}const oe=se(Object(p["unknown"])());function ae(t){return Object(p["coerce"])(se(t),oe,e=>"error"in e?e:{...e,result:Object(p["create"])(e.result,t)})}function ce(t){return ae(Object(p["type"])({context:Object(p["type"])({slot:Object(p["number"])()}),value:t}))}function ue(t){return Object(p["type"])({context:Object(p["type"])({slot:Object(p["number"])()}),value:t})}function le(t,e){return 0===t?new nt({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new R(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:c.a.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new rt(e)}const he=Object(p["type"])({foundation:Object(p["number"])(),foundationTerm:Object(p["number"])(),initial:Object(p["number"])(),taper:Object(p["number"])(),terminal:Object(p["number"])()}),de=ae(Object(p["array"])(Object(p["nullable"])(Object(p["type"])({epoch:Object(p["number"])(),effectiveSlot:Object(p["number"])(),amount:Object(p["number"])(),postBalance:Object(p["number"])(),commission:Object(p["optional"])(Object(p["nullable"])(Object(p["number"])()))})))),pe=Object(p["array"])(Object(p["type"])({slot:Object(p["number"])(),prioritizationFee:Object(p["number"])()})),ge=Object(p["type"])({total:Object(p["number"])(),validator:Object(p["number"])(),foundation:Object(p["number"])(),epoch:Object(p["number"])()}),me=Object(p["type"])({epoch:Object(p["number"])(),slotIndex:Object(p["number"])(),slotsInEpoch:Object(p["number"])(),absoluteSlot:Object(p["number"])(),blockHeight:Object(p["optional"])(Object(p["number"])()),transactionCount:Object(p["optional"])(Object(p["number"])())}),be=Object(p["type"])({slotsPerEpoch:Object(p["number"])(),leaderScheduleSlotOffset:Object(p["number"])(),warmup:Object(p["boolean"])(),firstNormalEpoch:Object(p["number"])(),firstNormalSlot:Object(p["number"])()}),fe=Object(p["record"])(Object(p["string"])(),Object(p["array"])(Object(p["number"])())),ye=Object(p["nullable"])(Object(p["union"])([Object(p["type"])({}),Object(p["string"])()])),we=Object(p["type"])({err:ye}),ke=Object(p["literal"])("receivedSignature"),Se=Object(p["type"])({"solana-core":Object(p["string"])(),"feature-set":Object(p["optional"])(Object(p["number"])())}),ve=ce(Object(p["type"])({err:Object(p["nullable"])(Object(p["union"])([Object(p["type"])({}),Object(p["string"])()])),logs:Object(p["nullable"])(Object(p["array"])(Object(p["string"])())),accounts:Object(p["optional"])(Object(p["nullable"])(Object(p["array"])(Object(p["nullable"])(Object(p["type"])({executable:Object(p["boolean"])(),owner:Object(p["string"])(),lamports:Object(p["number"])(),data:Object(p["array"])(Object(p["string"])()),rentEpoch:Object(p["optional"])(Object(p["number"])())}))))),unitsConsumed:Object(p["optional"])(Object(p["number"])()),returnData:Object(p["optional"])(Object(p["nullable"])(Object(p["type"])({programId:Object(p["string"])(),data:Object(p["tuple"])([Object(p["string"])(),Object(p["literal"])("base64")])})))})),Ie=ce(Object(p["type"])({byIdentity:Object(p["record"])(Object(p["string"])(),Object(p["array"])(Object(p["number"])())),range:Object(p["type"])({firstSlot:Object(p["number"])(),lastSlot:Object(p["number"])()})}));function Me(t,e,r,n,i,s){const o=r||Qt;let a,c;n&&(c=async(t,e)=>{const r=await new Promise((r,i)=>{try{n(t,e,(t,e)=>r([t,e]))}catch(s){i(s)}});return await o(...r)});const u=new m.a(async(r,n)=>{const s={method:"POST",body:r,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},Hr)};try{let e,r=5,a=500;for(;;){if(e=c?await c(t,s):await o(t,s),429!==e.status)break;if(!0===i)break;if(r-=1,0===r)break;await kt(a),a*=2}const u=await e.text();e.ok?n(null,u):n(new Error(`${e.status} ${e.statusText}: ${u}`))}catch(u){u instanceof Error&&n(u)}},{});return u}function _e(t){return(e,r)=>new Promise((n,i)=>{t.request(e,r,(t,e)=>{t?i(t):n(e)})})}function Ae(t){return e=>new Promise((r,n)=>{0===e.length&&r([]);const i=e.map(e=>t.request(e.methodName,e.args));t.request(i,(t,e)=>{t?n(t):r(e)})})}const Ee=ae(he),Oe=ae(ge),Te=ae(pe),je=ae(me),Be=ae(be),Ne=ae(fe),xe=ae(Object(p["number"])()),Le=ce(Object(p["type"])({total:Object(p["number"])(),circulating:Object(p["number"])(),nonCirculating:Object(p["number"])(),nonCirculatingAccounts:Object(p["array"])($t)})),Pe=Object(p["type"])({amount:Object(p["string"])(),uiAmount:Object(p["nullable"])(Object(p["number"])()),decimals:Object(p["number"])(),uiAmountString:Object(p["optional"])(Object(p["string"])())}),Re=ce(Object(p["array"])(Object(p["type"])({address:$t,amount:Object(p["string"])(),uiAmount:Object(p["nullable"])(Object(p["number"])()),decimals:Object(p["number"])(),uiAmountString:Object(p["optional"])(Object(p["string"])())}))),ze=ce(Object(p["array"])(Object(p["type"])({pubkey:$t,account:Object(p["type"])({executable:Object(p["boolean"])(),owner:$t,lamports:Object(p["number"])(),data:ee,rentEpoch:Object(p["number"])()})}))),Ue=Object(p["type"])({program:Object(p["string"])(),parsed:Object(p["unknown"])(),space:Object(p["number"])()}),We=ce(Object(p["array"])(Object(p["type"])({pubkey:$t,account:Object(p["type"])({executable:Object(p["boolean"])(),owner:$t,lamports:Object(p["number"])(),data:Ue,rentEpoch:Object(p["number"])()})}))),Ce=ce(Object(p["array"])(Object(p["type"])({lamports:Object(p["number"])(),address:$t}))),De=Object(p["type"])({executable:Object(p["boolean"])(),owner:$t,lamports:Object(p["number"])(),data:ee,rentEpoch:Object(p["number"])()}),Fe=Object(p["type"])({pubkey:$t,account:De}),Ve=Object(p["coerce"])(Object(p["union"])([Object(p["instance"])(n["Buffer"]),Ue]),Object(p["union"])([te,Ue]),t=>Array.isArray(t)?Object(p["create"])(t,ee):t),Ke=Object(p["type"])({executable:Object(p["boolean"])(),owner:$t,lamports:Object(p["number"])(),data:Ve,rentEpoch:Object(p["number"])()}),Qe=Object(p["type"])({pubkey:$t,account:Ke}),Ze=Object(p["type"])({state:Object(p["union"])([Object(p["literal"])("active"),Object(p["literal"])("inactive"),Object(p["literal"])("activating"),Object(p["literal"])("deactivating")]),active:Object(p["number"])(),inactive:Object(p["number"])()}),He=ae(Object(p["array"])(Object(p["type"])({signature:Object(p["string"])(),slot:Object(p["number"])(),err:ye,memo:Object(p["nullable"])(Object(p["string"])()),blockTime:Object(p["optional"])(Object(p["nullable"])(Object(p["number"])()))}))),qe=ae(Object(p["array"])(Object(p["type"])({signature:Object(p["string"])(),slot:Object(p["number"])(),err:ye,memo:Object(p["nullable"])(Object(p["string"])()),blockTime:Object(p["optional"])(Object(p["nullable"])(Object(p["number"])()))}))),Ye=Object(p["type"])({subscription:Object(p["number"])(),result:ue(De)}),Ge=Object(p["type"])({pubkey:$t,account:De}),Je=Object(p["type"])({subscription:Object(p["number"])(),result:ue(Ge)}),Xe=Object(p["type"])({parent:Object(p["number"])(),slot:Object(p["number"])(),root:Object(p["number"])()}),$e=Object(p["type"])({subscription:Object(p["number"])(),result:Xe}),tr=Object(p["union"])([Object(p["type"])({type:Object(p["union"])([Object(p["literal"])("firstShredReceived"),Object(p["literal"])("completed"),Object(p["literal"])("optimisticConfirmation"),Object(p["literal"])("root")]),slot:Object(p["number"])(),timestamp:Object(p["number"])()}),Object(p["type"])({type:Object(p["literal"])("createdBank"),parent:Object(p["number"])(),slot:Object(p["number"])(),timestamp:Object(p["number"])()}),Object(p["type"])({type:Object(p["literal"])("frozen"),slot:Object(p["number"])(),timestamp:Object(p["number"])(),stats:Object(p["type"])({numTransactionEntries:Object(p["number"])(),numSuccessfulTransactions:Object(p["number"])(),numFailedTransactions:Object(p["number"])(),maxTransactionsPerEntry:Object(p["number"])()})}),Object(p["type"])({type:Object(p["literal"])("dead"),slot:Object(p["number"])(),timestamp:Object(p["number"])(),err:Object(p["string"])()})]),er=Object(p["type"])({subscription:Object(p["number"])(),result:tr}),rr=Object(p["type"])({subscription:Object(p["number"])(),result:ue(Object(p["union"])([we,ke]))}),nr=Object(p["type"])({subscription:Object(p["number"])(),result:Object(p["number"])()}),ir=Object(p["type"])({pubkey:Object(p["string"])(),gossip:Object(p["nullable"])(Object(p["string"])()),tpu:Object(p["nullable"])(Object(p["string"])()),rpc:Object(p["nullable"])(Object(p["string"])()),version:Object(p["nullable"])(Object(p["string"])())}),sr=Object(p["type"])({votePubkey:Object(p["string"])(),nodePubkey:Object(p["string"])(),activatedStake:Object(p["number"])(),epochVoteAccount:Object(p["boolean"])(),epochCredits:Object(p["array"])(Object(p["tuple"])([Object(p["number"])(),Object(p["number"])(),Object(p["number"])()])),commission:Object(p["number"])(),lastVote:Object(p["number"])(),rootSlot:Object(p["nullable"])(Object(p["number"])())}),or=ae(Object(p["type"])({current:Object(p["array"])(sr),delinquent:Object(p["array"])(sr)})),ar=Object(p["union"])([Object(p["literal"])("processed"),Object(p["literal"])("confirmed"),Object(p["literal"])("finalized")]),cr=Object(p["type"])({slot:Object(p["number"])(),confirmations:Object(p["nullable"])(Object(p["number"])()),err:ye,confirmationStatus:Object(p["optional"])(ar)}),ur=ce(Object(p["array"])(Object(p["nullable"])(cr))),lr=ae(Object(p["number"])()),hr=Object(p["type"])({accountKey:$t,writableIndexes:Object(p["array"])(Object(p["number"])()),readonlyIndexes:Object(p["array"])(Object(p["number"])())}),dr=Object(p["type"])({signatures:Object(p["array"])(Object(p["string"])()),message:Object(p["type"])({accountKeys:Object(p["array"])(Object(p["string"])()),header:Object(p["type"])({numRequiredSignatures:Object(p["number"])(),numReadonlySignedAccounts:Object(p["number"])(),numReadonlyUnsignedAccounts:Object(p["number"])()}),instructions:Object(p["array"])(Object(p["type"])({accounts:Object(p["array"])(Object(p["number"])()),data:Object(p["string"])(),programIdIndex:Object(p["number"])()})),recentBlockhash:Object(p["string"])(),addressTableLookups:Object(p["optional"])(Object(p["array"])(hr))})}),pr=Object(p["type"])({pubkey:$t,signer:Object(p["boolean"])(),writable:Object(p["boolean"])(),source:Object(p["optional"])(Object(p["union"])([Object(p["literal"])("transaction"),Object(p["literal"])("lookupTable")]))}),gr=Object(p["type"])({accountKeys:Object(p["array"])(pr),signatures:Object(p["array"])(Object(p["string"])())}),mr=Object(p["type"])({parsed:Object(p["unknown"])(),program:Object(p["string"])(),programId:$t}),br=Object(p["type"])({accounts:Object(p["array"])($t),data:Object(p["string"])(),programId:$t}),fr=Object(p["union"])([br,mr]),yr=Object(p["union"])([Object(p["type"])({parsed:Object(p["unknown"])(),program:Object(p["string"])(),programId:Object(p["string"])()}),Object(p["type"])({accounts:Object(p["array"])(Object(p["string"])()),data:Object(p["string"])(),programId:Object(p["string"])()})]),wr=Object(p["coerce"])(fr,yr,t=>"accounts"in t?Object(p["create"])(t,br):Object(p["create"])(t,mr)),kr=Object(p["type"])({signatures:Object(p["array"])(Object(p["string"])()),message:Object(p["type"])({accountKeys:Object(p["array"])(pr),instructions:Object(p["array"])(wr),recentBlockhash:Object(p["string"])(),addressTableLookups:Object(p["optional"])(Object(p["nullable"])(Object(p["array"])(hr)))})}),Sr=Object(p["type"])({accountIndex:Object(p["number"])(),mint:Object(p["string"])(),owner:Object(p["optional"])(Object(p["string"])()),uiTokenAmount:Pe}),vr=Object(p["type"])({writable:Object(p["array"])($t),readonly:Object(p["array"])($t)}),Ir=Object(p["type"])({err:ye,fee:Object(p["number"])(),innerInstructions:Object(p["optional"])(Object(p["nullable"])(Object(p["array"])(Object(p["type"])({index:Object(p["number"])(),instructions:Object(p["array"])(Object(p["type"])({accounts:Object(p["array"])(Object(p["number"])()),data:Object(p["string"])(),programIdIndex:Object(p["number"])()}))})))),preBalances:Object(p["array"])(Object(p["number"])()),postBalances:Object(p["array"])(Object(p["number"])()),logMessages:Object(p["optional"])(Object(p["nullable"])(Object(p["array"])(Object(p["string"])()))),preTokenBalances:Object(p["optional"])(Object(p["nullable"])(Object(p["array"])(Sr))),postTokenBalances:Object(p["optional"])(Object(p["nullable"])(Object(p["array"])(Sr))),loadedAddresses:Object(p["optional"])(vr),computeUnitsConsumed:Object(p["optional"])(Object(p["number"])())}),Mr=Object(p["type"])({err:ye,fee:Object(p["number"])(),innerInstructions:Object(p["optional"])(Object(p["nullable"])(Object(p["array"])(Object(p["type"])({index:Object(p["number"])(),instructions:Object(p["array"])(wr)})))),preBalances:Object(p["array"])(Object(p["number"])()),postBalances:Object(p["array"])(Object(p["number"])()),logMessages:Object(p["optional"])(Object(p["nullable"])(Object(p["array"])(Object(p["string"])()))),preTokenBalances:Object(p["optional"])(Object(p["nullable"])(Object(p["array"])(Sr))),postTokenBalances:Object(p["optional"])(Object(p["nullable"])(Object(p["array"])(Sr))),loadedAddresses:Object(p["optional"])(vr),computeUnitsConsumed:Object(p["optional"])(Object(p["number"])())}),_r=Object(p["union"])([Object(p["literal"])(0),Object(p["literal"])("legacy")]),Ar=Object(p["type"])({pubkey:Object(p["string"])(),lamports:Object(p["number"])(),postBalance:Object(p["nullable"])(Object(p["number"])()),rewardType:Object(p["nullable"])(Object(p["string"])()),commission:Object(p["optional"])(Object(p["nullable"])(Object(p["number"])()))}),Er=ae(Object(p["nullable"])(Object(p["type"])({blockhash:Object(p["string"])(),previousBlockhash:Object(p["string"])(),parentSlot:Object(p["number"])(),transactions:Object(p["array"])(Object(p["type"])({transaction:dr,meta:Object(p["nullable"])(Ir),version:Object(p["optional"])(_r)})),rewards:Object(p["optional"])(Object(p["array"])(Ar)),blockTime:Object(p["nullable"])(Object(p["number"])()),blockHeight:Object(p["nullable"])(Object(p["number"])())}))),Or=ae(Object(p["nullable"])(Object(p["type"])({blockhash:Object(p["string"])(),previousBlockhash:Object(p["string"])(),parentSlot:Object(p["number"])(),rewards:Object(p["optional"])(Object(p["array"])(Ar)),blockTime:Object(p["nullable"])(Object(p["number"])()),blockHeight:Object(p["nullable"])(Object(p["number"])())}))),Tr=ae(Object(p["nullable"])(Object(p["type"])({blockhash:Object(p["string"])(),previousBlockhash:Object(p["string"])(),parentSlot:Object(p["number"])(),transactions:Object(p["array"])(Object(p["type"])({transaction:gr,meta:Object(p["nullable"])(Ir),version:Object(p["optional"])(_r)})),rewards:Object(p["optional"])(Object(p["array"])(Ar)),blockTime:Object(p["nullable"])(Object(p["number"])()),blockHeight:Object(p["nullable"])(Object(p["number"])())}))),jr=ae(Object(p["nullable"])(Object(p["type"])({blockhash:Object(p["string"])(),previousBlockhash:Object(p["string"])(),parentSlot:Object(p["number"])(),transactions:Object(p["array"])(Object(p["type"])({transaction:kr,meta:Object(p["nullable"])(Mr),version:Object(p["optional"])(_r)})),rewards:Object(p["optional"])(Object(p["array"])(Ar)),blockTime:Object(p["nullable"])(Object(p["number"])()),blockHeight:Object(p["nullable"])(Object(p["number"])())}))),Br=ae(Object(p["nullable"])(Object(p["type"])({blockhash:Object(p["string"])(),previousBlockhash:Object(p["string"])(),parentSlot:Object(p["number"])(),transactions:Object(p["array"])(Object(p["type"])({transaction:gr,meta:Object(p["nullable"])(Mr),version:Object(p["optional"])(_r)})),rewards:Object(p["optional"])(Object(p["array"])(Ar)),blockTime:Object(p["nullable"])(Object(p["number"])()),blockHeight:Object(p["nullable"])(Object(p["number"])())}))),Nr=ae(Object(p["nullable"])(Object(p["type"])({blockhash:Object(p["string"])(),previousBlockhash:Object(p["string"])(),parentSlot:Object(p["number"])(),rewards:Object(p["optional"])(Object(p["array"])(Ar)),blockTime:Object(p["nullable"])(Object(p["number"])()),blockHeight:Object(p["nullable"])(Object(p["number"])())}))),xr=ae(Object(p["nullable"])(Object(p["type"])({blockhash:Object(p["string"])(),previousBlockhash:Object(p["string"])(),parentSlot:Object(p["number"])(),transactions:Object(p["array"])(Object(p["type"])({transaction:dr,meta:Object(p["nullable"])(Ir)})),rewards:Object(p["optional"])(Object(p["array"])(Ar)),blockTime:Object(p["nullable"])(Object(p["number"])())}))),Lr=ae(Object(p["nullable"])(Object(p["type"])({blockhash:Object(p["string"])(),previousBlockhash:Object(p["string"])(),parentSlot:Object(p["number"])(),signatures:Object(p["array"])(Object(p["string"])()),blockTime:Object(p["nullable"])(Object(p["number"])())}))),Pr=ae(Object(p["nullable"])(Object(p["type"])({slot:Object(p["number"])(),meta:Object(p["nullable"])(Ir),blockTime:Object(p["optional"])(Object(p["nullable"])(Object(p["number"])())),transaction:dr,version:Object(p["optional"])(_r)}))),Rr=ae(Object(p["nullable"])(Object(p["type"])({slot:Object(p["number"])(),transaction:kr,meta:Object(p["nullable"])(Mr),blockTime:Object(p["optional"])(Object(p["nullable"])(Object(p["number"])())),version:Object(p["optional"])(_r)}))),zr=ce(Object(p["type"])({blockhash:Object(p["string"])(),feeCalculator:Object(p["type"])({lamportsPerSignature:Object(p["number"])()})})),Ur=ce(Object(p["type"])({blockhash:Object(p["string"])(),lastValidBlockHeight:Object(p["number"])()})),Wr=ce(Object(p["boolean"])()),Cr=Object(p["type"])({slot:Object(p["number"])(),numTransactions:Object(p["number"])(),numSlots:Object(p["number"])(),samplePeriodSecs:Object(p["number"])()}),Dr=ae(Object(p["array"])(Cr)),Fr=ce(Object(p["nullable"])(Object(p["type"])({feeCalculator:Object(p["type"])({lamportsPerSignature:Object(p["number"])()})}))),Vr=ae(Object(p["string"])()),Kr=ae(Object(p["string"])()),Qr=Object(p["type"])({err:ye,logs:Object(p["array"])(Object(p["string"])()),signature:Object(p["string"])()}),Zr=Object(p["type"])({result:ue(Qr),subscription:Object(p["number"])()}),Hr={"solana-client":"js/0.0.0-development"};class qr{constructor(t,e){let r,n,i,s,o,a;this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const t={};return async e=>{var r;const{commitment:n,config:i}=ie(e),s=this._buildArgs([],n,void 0,i),o=Ut(s);return t[o]=null!==(r=t[o])&&void 0!==r?r:(async()=>{try{const e=await this._rpcRequest("getBlockHeight",s),r=Object(p["create"])(e,ae(Object(p["number"])()));if("error"in r)throw new Kt(r.error,"failed to get block height information");return r.result}finally{delete t[o]}})(),await t[o]}})(),e&&"string"===typeof e?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,n=e.httpHeaders,i=e.fetch,s=e.fetchMiddleware,o=e.disableRetryOnRateLimit,a=e.httpAgent),this._rpcEndpoint=ne(t),this._rpcWsEndpoint=r||Xt(t),this._rpcClient=Me(t,n,i,s,o,a),this._rpcRequest=_e(this._rpcClient),this._rpcBatchRequest=Ae(this._rpcClient),this._rpcWebSocket=new Zt(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:n}=ie(e),i=this._buildArgs([t.toBase58()],r,void 0,n),s=await this._rpcRequest("getBalance",i),o=Object(p["create"])(s,ce(Object(p["number"])()));if("error"in o)throw new Kt(o.error,"failed to get balance for "+t.toBase58());return o.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(t=>t.value).catch(e=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+e)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=Object(p["create"])(e,ae(Object(p["nullable"])(Object(p["number"])())));if("error"in r)throw new Kt(r.error,"failed to get block time for slot "+t);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=Object(p["create"])(t,ae(Object(p["number"])()));if("error"in e)throw new Kt(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=Object(p["create"])(t,xe);if("error"in e)throw new Kt(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};e="string"===typeof t?{commitment:t}:t?{...t,commitment:t&&t.commitment||this.commitment}:{commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),n=Object(p["create"])(r,Le);if("error"in n)throw new Kt(n.error,"failed to get supply");return n.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenSupply",r),i=Object(p["create"])(n,ce(Pe));if("error"in i)throw new Kt(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenAccountBalance",r),i=Object(p["create"])(n,ce(Pe));if("error"in i)throw new Kt(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){const{commitment:n,config:i}=ie(r);let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const o=this._buildArgs(s,n,"base64",i),a=await this._rpcRequest("getTokenAccountsByOwner",o),c=Object(p["create"])(a,ze);if("error"in c)throw new Kt(c.error,"failed to get token accounts owned by account "+t.toBase58());return c.result}async getParsedTokenAccountsByOwner(t,e,r){let n=[t.toBase58()];"mint"in e?n.push({mint:e.mint.toBase58()}):n.push({programId:e.programId.toBase58()});const i=this._buildArgs(n,r,"jsonParsed"),s=await this._rpcRequest("getTokenAccountsByOwner",i),o=Object(p["create"])(s,We);if("error"in o)throw new Kt(o.error,"failed to get token accounts owned by account "+t.toBase58());return o.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],n=await this._rpcRequest("getLargestAccounts",r),i=Object(p["create"])(n,Ce);if("error"in i)throw new Kt(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenLargestAccounts",r),i=Object(p["create"])(n,Re);if("error"in i)throw new Kt(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:n}=ie(e),i=this._buildArgs([t.toBase58()],r,"base64",n),s=await this._rpcRequest("getAccountInfo",i),o=Object(p["create"])(s,ce(Object(p["nullable"])(De)));if("error"in o)throw new Kt(o.error,"failed to get info about account "+t.toBase58());return o.result}async getParsedAccountInfo(t,e){const{commitment:r,config:n}=ie(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",n),s=await this._rpcRequest("getAccountInfo",i),o=Object(p["create"])(s,ce(Object(p["nullable"])(Ke)));if("error"in o)throw new Kt(o.error,"failed to get info about account "+t.toBase58());return o.result}async getAccountInfo(t,e){try{const r=await this.getAccountInfoAndContext(t,e);return r.value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:n}=ie(e),i=t.map(t=>t.toBase58()),s=this._buildArgs([i],r,"jsonParsed",n),o=await this._rpcRequest("getMultipleAccounts",s),a=Object(p["create"])(o,ce(Object(p["array"])(Object(p["nullable"])(Ke))));if("error"in a)throw new Kt(a.error,"failed to get info for accounts "+i);return a.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:n}=ie(e),i=t.map(t=>t.toBase58()),s=this._buildArgs([i],r,"base64",n),o=await this._rpcRequest("getMultipleAccounts",s),a=Object(p["create"])(o,ce(Object(p["array"])(Object(p["nullable"])(De))));if("error"in a)throw new Kt(a.error,"failed to get info for accounts "+i);return a.result}async getMultipleAccountsInfo(t,e){const r=await this.getMultipleAccountsInfoAndContext(t,e);return r.value}async getStakeActivation(t,e,r){const{commitment:n,config:i}=ie(e),s=this._buildArgs([t.toBase58()],n,void 0,{...i,epoch:null!=r?r:null===i||void 0===i?void 0:i.epoch}),o=await this._rpcRequest("getStakeActivation",s),a=Object(p["create"])(o,ae(Ze));if("error"in a)throw new Kt(a.error,"failed to get Stake Activation "+t.toBase58());return a.result}async getProgramAccounts(t,e){const{commitment:r,config:n}=ie(e),{encoding:i,...s}=n||{},o=this._buildArgs([t.toBase58()],r,i||"base64",s),a=await this._rpcRequest("getProgramAccounts",o),c=Object(p["array"])(Fe),u=!0===s.withContext?Object(p["create"])(a,ce(c)):Object(p["create"])(a,ae(c));if("error"in u)throw new Kt(u.error,"failed to get accounts owned by program "+t.toBase58());return u.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:n}=ie(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",n),s=await this._rpcRequest("getProgramAccounts",i),o=Object(p["create"])(s,ae(Object(p["array"])(Qe)));if("error"in o)throw new Kt(o.error,"failed to get accounts owned by program "+t.toBase58());return o.result}async confirmTransaction(t,e){let r,n;if("string"==typeof t)r=t;else{var i;const e=t;if(null!==(i=e.abortSignal)&&void 0!==i&&i.aborted)return Promise.reject(e.abortSignal.reason);r=e.signature}try{n=c.a.decode(r)}catch(s){throw new Error("signature must be base58 encoded: "+r)}return tt(64===n.length,"signature has invalid length"),"string"===typeof t?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{null!=t&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,n,i=!1;const s=new Promise((s,o)=>{try{r=this.onSignature(e,(t,e)=>{r=void 0;const n={context:e,value:t};s({__type:st.PROCESSED,response:n})},t);const a=new Promise(t=>{null==r?t():n=this._onSubscriptionStateChange(r,e=>{"subscribed"===e&&t()})});(async()=>{if(await a,i)return;const r=await this.getSignatureStatus(e);if(i)return;if(null==r)return;const{context:n,value:c}=r;if(null!=c)if(null!==c&&void 0!==c&&c.err)o(c.err);else{switch(t){case"confirmed":case"single":case"singleGossip":if("processed"===c.confirmationStatus)return;break;case"finalized":case"max":case"root":if("processed"===c.confirmationStatus||"confirmed"===c.confirmationStatus)return;break;case"processed":case"recent":}i=!0,s({__type:st.PROCESSED,response:{context:n,value:c}})}})()}catch(a){o(a)}}),o=()=>{n&&(n(),n=void 0),null!=r&&(this.removeSignatureListener(r),r=void 0)};return{abortConfirmation:o,confirmationPromise:s}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:n}}){let i=!1;const s=new Promise(e=>{const n=async()=>{try{const e=await this.getBlockHeight(t);return e}catch(e){return-1}};(async()=>{let t=await n();if(!i){while(t<=r){if(await kt(1e3),i)return;if(t=await n(),i)return}e({__type:st.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:o,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:t,signature:n}),c=this.getCancellationPromise(e);let u;try{const t=await Promise.race([c,a,s]);if(t.__type!==st.PROCESSED)throw new C(n);u=t.response}finally{i=!0,o()}return u}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:n,nonceValue:i,signature:s}}){let o=!1;const a=new Promise(e=>{let s=i,a=null;const c=async()=>{try{const{context:e,value:i}=await this.getNonceAndContext(n,{commitment:t,minContextSlot:r});return a=e.slot,null===i||void 0===i?void 0:i.nonce}catch(e){return s}};(async()=>{if(s=await c(),!o)while(1){if(i!==s)return void e({__type:st.NONCE_INVALID,slotInWhichNonceDidAdvance:a});if(await kt(2e3),o)return;if(s=await c(),o)return}})()}),{abortConfirmation:c,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),l=this.getCancellationPromise(e);let h;try{const e=await Promise.race([l,u,a]);if(e.__type===st.PROCESSED)h=e.response;else{var d;let n;while(1){var p;const t=await this.getSignatureStatus(s);if(null==t)break;if(!(t.context.slot<(null!==(p=e.slotInWhichNonceDidAdvance)&&void 0!==p?p:r))){n=t;break}await kt(400)}if(null===(d=n)||void 0===d||!d.value)throw new F(s);{const e=t||"finalized",{confirmationStatus:r}=n.value;switch(e){case"processed":case"recent":if("processed"!==r&&"confirmed"!==r&&"finalized"!==r)throw new F(s);break;case"confirmed":case"single":case"singleGossip":if("confirmed"!==r&&"finalized"!==r)throw new F(s);break;case"finalized":case"max":case"root":if("finalized"!==r)throw new F(s);break;default:}h={context:n.context,value:{err:n.value.err}}}}}finally{o=!0,c()}return h}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const n=new Promise(e=>{let n=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":n=this._confirmTransactionInitialTimeout||3e4;break}r=setTimeout(()=>e({__type:st.TIMED_OUT,timeoutMs:n}),n)}),{abortConfirmation:i,confirmationPromise:s}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let o;try{const t=await Promise.race([s,n]);if(t.__type!==st.PROCESSED)throw new D(e,t.timeoutMs/1e3);o=t.response}finally{clearTimeout(r),i()}return o}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=Object(p["create"])(t,ae(Object(p["array"])(ir)));if("error"in e)throw new Kt(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),n=Object(p["create"])(r,or);if("error"in n)throw new Kt(n.error,"failed to get vote accounts");return n.result}async getSlot(t){const{commitment:e,config:r}=ie(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",n),s=Object(p["create"])(i,ae(Object(p["number"])()));if("error"in s)throw new Kt(s.error,"failed to get slot");return s.result}async getSlotLeader(t){const{commitment:e,config:r}=ie(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",n),s=Object(p["create"])(i,ae(Object(p["string"])()));if("error"in s)throw new Kt(s.error,"failed to get slot leader");return s.result}async getSlotLeaders(t,e){const r=[t,e],n=await this._rpcRequest("getSlotLeaders",r),i=Object(p["create"])(n,ae(Object(p["array"])($t)));if("error"in i)throw new Kt(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:r,value:n}=await this.getSignatureStatuses([t],e);tt(1===n.length);const i=n[0];return{context:r,value:i}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const n=await this._rpcRequest("getSignatureStatuses",r),i=Object(p["create"])(n,ur);if("error"in i)throw new Kt(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:r}=ie(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",n),s=Object(p["create"])(i,ae(Object(p["number"])()));if("error"in s)throw new Kt(s.error,"failed to get transaction count");return s.result}async getTotalSupply(t){const e=await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0});return e.value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),n=Object(p["create"])(r,Ee);if("error"in n)throw new Kt(n.error,"failed to get inflation");return n.result}async getInflationReward(t,e,r){const{commitment:n,config:i}=ie(r),s=this._buildArgs([t.map(t=>t.toBase58())],n,void 0,{...i,epoch:null!=e?e:null===i||void 0===i?void 0:i.epoch}),o=await this._rpcRequest("getInflationReward",s),a=Object(p["create"])(o,de);if("error"in a)throw new Kt(a.error,"failed to get inflation reward");return a.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=Object(p["create"])(t,Oe);if("error"in e)throw new Kt(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=ie(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",n),s=Object(p["create"])(i,je);if("error"in s)throw new Kt(s.error,"failed to get epoch info");return s.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=Object(p["create"])(t,Be);if("error"in e)throw new Kt(e.error,"failed to get epoch schedule");const r=e.result;return new Ft(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=Object(p["create"])(t,Ne);if("error"in e)throw new Kt(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),n=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=Object(p["create"])(n,lr);return"error"in i?0:i.result}async getRecentBlockhashAndContext(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getRecentBlockhash",e),n=Object(p["create"])(r,zr);if("error"in n)throw new Kt(n.error,"failed to get recent blockhash");return n.result}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=Object(p["create"])(e,Dr);if("error"in r)throw new Kt(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),n=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=Object(p["create"])(n,Fr);if("error"in i)throw new Kt(i.error,"failed to get fee calculator");const{context:s,value:o}=i.result;return{context:s,value:null!==o?o.feeCalculator:null}}async getFeeForMessage(t,e){const r=E(t.serialize()).toString("base64"),n=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",n),s=Object(p["create"])(i,ce(Object(p["nullable"])(Object(p["number"])())));if("error"in s)throw new Kt(s.error,"failed to get fee for message");if(null===s.result)throw new Error("invalid blockhash");return s.result}async getRecentPrioritizationFees(t){var e;const r=null===t||void 0===t||null===(e=t.lockedWritableAccounts)||void 0===e?void 0:e.map(t=>t.toBase58()),n=null!==r&&void 0!==r&&r.length?[r]:[],i=await this._rpcRequest("getRecentPrioritizationFees",n),s=Object(p["create"])(i,Te);if("error"in s)throw new Kt(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(t){try{const e=await this.getRecentBlockhashAndContext(t);return e.value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{const e=await this.getLatestBlockhashAndContext(t);return e.value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=ie(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",n),s=Object(p["create"])(i,Ur);if("error"in s)throw new Kt(s.error,"failed to get latest blockhash");return s.result}async isBlockhashValid(t,e){const{commitment:r,config:n}=ie(e),i=this._buildArgs([t],r,void 0,n),s=await this._rpcRequest("isBlockhashValid",i),o=Object(p["create"])(s,Wr);if("error"in o)throw new Kt(o.error,"failed to determine if the blockhash `"+t+"`is valid");return o.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=Object(p["create"])(t,ae(Se));if("error"in e)throw new Kt(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=Object(p["create"])(t,ae(Object(p["string"])()));if("error"in e)throw new Kt(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:n}=ie(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,n),s=await this._rpcRequest("getBlock",i);try{switch(null===n||void 0===n?void 0:n.transactionDetails){case"accounts":{const t=Object(p["create"])(s,Tr);if("error"in t)throw t.error;return t.result}case"none":{const t=Object(p["create"])(s,Or);if("error"in t)throw t.error;return t.result}default:{const t=Object(p["create"])(s,Er);if("error"in t)throw t.error;const{result:e}=t;return e?{...e,transactions:e.transactions.map(({transaction:t,meta:e,version:r})=>({meta:e,transaction:{...t,message:le(r,t.message)},version:r}))}:null}}}catch(o){throw new Kt(o,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:n}=ie(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n),s=await this._rpcRequest("getBlock",i);try{switch(null===n||void 0===n?void 0:n.transactionDetails){case"accounts":{const t=Object(p["create"])(s,Br);if("error"in t)throw t.error;return t.result}case"none":{const t=Object(p["create"])(s,Nr);if("error"in t)throw t.error;return t.result}default:{const t=Object(p["create"])(s,jr);if("error"in t)throw t.error;return t.result}}}catch(o){throw new Kt(o,"failed to get block")}}async getBlockProduction(t){let e,r;if("string"===typeof t)r=t;else if(t){const{commitment:n,...i}=t;r=n,e=i}const n=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",n),s=Object(p["create"])(i,Ie);if("error"in s)throw new Kt(s.error,"failed to get block production information");return s.result}async getTransaction(t,e){const{commitment:r,config:n}=ie(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,n),s=await this._rpcRequest("getTransaction",i),o=Object(p["create"])(s,Pr);if("error"in o)throw new Kt(o.error,"failed to get transaction");const a=o.result;return a?{...a,transaction:{...a.transaction,message:le(a.version,a.transaction.message)}}:a}async getParsedTransaction(t,e){const{commitment:r,config:n}=ie(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n),s=await this._rpcRequest("getTransaction",i),o=Object(p["create"])(s,Rr);if("error"in o)throw new Kt(o.error,"failed to get transaction");return o.result}async getParsedTransactions(t,e){const{commitment:r,config:n}=ie(e),i=t.map(t=>{const e=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n);return{methodName:"getTransaction",args:e}}),s=await this._rpcBatchRequest(i),o=s.map(t=>{const e=Object(p["create"])(t,Rr);if("error"in e)throw new Kt(e.error,"failed to get transactions");return e.result});return o}async getTransactions(t,e){const{commitment:r,config:n}=ie(e),i=t.map(t=>{const e=this._buildArgsAtLeastConfirmed([t],r,void 0,n);return{methodName:"getTransaction",args:e}}),s=await this._rpcBatchRequest(i),o=s.map(t=>{const e=Object(p["create"])(t,Pr);if("error"in e)throw new Kt(e.error,"failed to get transactions");const r=e.result;return r?{...r,transaction:{...r.transaction,message:le(r.version,r.transaction.message)}}:r});return o}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),n=await this._rpcRequest("getConfirmedBlock",r),i=Object(p["create"])(n,xr);if("error"in i)throw new Kt(i.error,"failed to get confirmed block");const s=i.result;if(!s)throw new Error("Confirmed block "+t+" not found");const o={...s,transactions:s.transactions.map(({transaction:t,meta:e})=>{const r=new rt(t.message);return{meta:e,transaction:{...t,message:r}}})};return{...o,transactions:o.transactions.map(({transaction:t,meta:e})=>({meta:e,transaction:ct.populate(t.message,t.signatures)}))}}async getBlocks(t,e,r){const n=this._buildArgsAtLeastConfirmed(void 0!==e?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",n),s=Object(p["create"])(i,ae(Object(p["array"])(Object(p["number"])())));if("error"in s)throw new Kt(s.error,"failed to get blocks");return s.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),n=await this._rpcRequest("getBlock",r),i=Object(p["create"])(n,Lr);if("error"in i)throw new Kt(i.error,"failed to get block");const s=i.result;if(!s)throw new Error("Block "+t+" not found");return s}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),n=await this._rpcRequest("getConfirmedBlock",r),i=Object(p["create"])(n,Lr);if("error"in i)throw new Kt(i.error,"failed to get confirmed block");const s=i.result;if(!s)throw new Error("Confirmed block "+t+" not found");return s}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),n=await this._rpcRequest("getConfirmedTransaction",r),i=Object(p["create"])(n,Pr);if("error"in i)throw new Kt(i.error,"failed to get transaction");const s=i.result;if(!s)return s;const o=new rt(s.transaction.message),a=s.transaction.signatures;return{...s,transaction:ct.populate(o,a)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),n=await this._rpcRequest("getConfirmedTransaction",r),i=Object(p["create"])(n,Rr);if("error"in i)throw new Kt(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const r=t.map(t=>{const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed");return{methodName:"getConfirmedTransaction",args:r}}),n=await this._rpcBatchRequest(r),i=n.map(t=>{const e=Object(p["create"])(t,Rr);if("error"in e)throw new Kt(e.error,"failed to get confirmed transactions");return e.result});return i}async getConfirmedSignaturesForAddress(t,e,r){let n={},i=await this.getFirstAvailableBlock();while(!("until"in n)){if(e--,e<=0||e<i)break;try{const t=await this.getConfirmedBlockSignatures(e,"finalized");t.signatures.length>0&&(n.until=t.signatures[t.signatures.length-1].toString())}catch(a){if(a instanceof Error&&a.message.includes("skipped"))continue;throw a}}let s=await this.getSlot("finalized");while(!("before"in n)){if(r++,r>s)break;try{const t=await this.getConfirmedBlockSignatures(r);t.signatures.length>0&&(n.before=t.signatures[t.signatures.length-1].toString())}catch(a){if(a instanceof Error&&a.message.includes("skipped"))continue;throw a}}const o=await this.getConfirmedSignaturesForAddress2(t,n);return o.map(t=>t.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const n=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",n),s=Object(p["create"])(i,He);if("error"in s)throw new Kt(s.error,"failed to get confirmed signatures for address");return s.result}async getSignaturesForAddress(t,e,r){const n=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",n),s=Object(p["create"])(i,qe);if("error"in s)throw new Kt(s.error,"failed to get signatures for address");return s.result}async getAddressLookupTable(t,e){const{context:r,value:n}=await this.getAccountInfoAndContext(t,e);let i=null;return null!==n&&(i=new Yt({key:t,state:Yt.deserialize(n.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:n}=await this.getAccountInfoAndContext(t,e);let i=null;return null!==n&&(i=_t.fromAccountData(n.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(t=>t.value).catch(e=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+e)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),n=Object(p["create"])(r,Vr);if("error"in n)throw new Kt(n.error,`airdrop to ${t.toBase58()} failed`);return n.result}async _blockhashWithExpiryBlockHeight(t){if(!t){while(this._pollingBlockhash)await kt(100);const t=Date.now()-this._blockhashInfo.lastFetch,e=t>=re;if(null!==this._blockhashInfo.latestBlockhash&&!e)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let n=0;n<50;n++){const t=await this.getLatestBlockhash("finalized");if(r!==t.blockhash)return this._blockhashInfo={latestBlockhash:t,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},t;await kt(gt/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=ie(t),n=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",n),s=Object(p["create"])(i,ce(Object(p["number"])()));if("error"in s)throw new Kt(s.error,"failed to get stake minimum delegation");return s.result}async simulateTransaction(t,e,r){if("message"in t){const i=t,s=i.serialize(),o=n["Buffer"].from(s).toString("base64");if(Array.isArray(e)||void 0!==r)throw new Error("Invalid arguments");const a=e||{};a.encoding="base64","commitment"in a||(a.commitment=this.commitment);const c=[o,a],u=await this._rpcRequest("simulateTransaction",c),l=Object(p["create"])(u,ve);if("error"in l)throw new Error("failed to simulate transaction: "+l.error.message);return l.result}let i;if(t instanceof ct){let e=t;i=new ct,i.feePayer=e.feePayer,i.instructions=t.instructions,i.nonceInfo=e.nonceInfo,i.signatures=e.signatures}else i=ct.populate(t),i._message=i._json=void 0;if(void 0!==e&&!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(i.nonceInfo&&s)i.sign(...s);else{let t=this._disableBlockhashCaching;for(;;){const e=await this._blockhashWithExpiryBlockHeight(t);if(i.lastValidBlockHeight=e.lastValidBlockHeight,i.recentBlockhash=e.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const r=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(r)&&!this._blockhashInfo.transactionSignatures.includes(r)){this._blockhashInfo.simulatedSignatures.push(r);break}t=!0}}const o=i._compile(),a=o.serialize(),c=i._serialize(a),u=c.toString("base64"),l={encoding:"base64",commitment:this.commitment};if(r){const t=(Array.isArray(r)?r:o.nonProgramIds()).map(t=>t.toBase58());l["accounts"]={encoding:"base64",addresses:t}}s&&(l.sigVerify=!0);const h=[u,l],d=await this._rpcRequest("simulateTransaction",h),g=Object(p["create"])(d,ve);if("error"in g){let t;if("data"in g.error&&(t=g.error.data.logs,t&&Array.isArray(t))){const e="\n    ";t.join(e)}throw new Vt("failed to simulate transaction: "+g.error.message,t)}return g.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const r=t.serialize();return await this.sendRawTransaction(r,e)}if(void 0===e||!Array.isArray(e))throw new Error("Invalid arguments");const n=e;if(t.nonceInfo)t.sign(...n);else{let e=this._disableBlockhashCaching;for(;;){const r=await this._blockhashWithExpiryBlockHeight(e);if(t.lastValidBlockHeight=r.lastValidBlockHeight,t.recentBlockhash=r.blockhash,t.sign(...n),!t.signature)throw new Error("!signature");const i=t.signature.toString("base64");if(!this._blockhashInfo.transactionSignatures.includes(i)){this._blockhashInfo.transactionSignatures.push(i);break}e=!0}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=E(t).toString("base64"),n=await this.sendEncodedTransaction(r,e);return n}async sendEncodedTransaction(t,e){const r={encoding:"base64"},n=e&&e.skipPreflight,i=e&&e.preflightCommitment||this.commitment;e&&null!=e.maxRetries&&(r.maxRetries=e.maxRetries),e&&null!=e.minContextSlot&&(r.minContextSlot=e.minContextSlot),n&&(r.skipPreflight=n),i&&(r.preflightCommitment=i);const s=[t,r],o=await this._rpcRequest("sendTransaction",s),a=Object(p["create"])(o,Kr);if("error"in a){let t;throw"data"in a.error&&(t=a.error.data.logs),new Vt("failed to send transaction: "+a.error.message,t)}return a.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1}_wsOnClose(t){this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==t?(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,e])=>{this._setSubscription(t,{...e,state:"pending"})})):this._updateSubscriptions()}_setSubscription(t,e){var r;const n=null===(r=this._subscriptionsByHash[t])||void 0===r?void 0:r.state;if(this._subscriptionsByHash[t]=e,n!==e.state){const r=this._subscriptionStateChangeCallbacksByHash[t];r&&r.forEach(t=>{try{t(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var r;const n=this._subscriptionHashByClientSubscriptionId[t];if(null==n)return()=>{};const i=(r=this._subscriptionStateChangeCallbacksByHash)[n]||(r[n]=new Set);return i.add(e),()=>{i.delete(e),0===i.size&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(0===Object.keys(this._subscriptionsByHash).length)return void(this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(t){Error}},500)));if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected)return void this._rpcWebSocket.connect();const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async t=>{const r=this._subscriptionsByHash[t];if(void 0!==r)switch(r.state){case"pending":case"unsubscribed":if(0===r.callbacks.size)return delete this._subscriptionsByHash[t],"unsubscribed"===r.state&&delete this._subscriptionCallbacksByServerSubscriptionId[r.serverSubscriptionId],void await this._updateSubscriptions();await(async()=>{const{args:n,method:i}=r;try{this._setSubscription(t,{...r,state:"subscribing"});const e=await this._rpcWebSocket.call(i,n);this._setSubscription(t,{...r,serverSubscriptionId:e,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[e]=r.callbacks,await this._updateSubscriptions()}catch(s){if(Error,!e())return;this._setSubscription(t,{...r,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":0===r.callbacks.size&&await(async()=>{const{serverSubscriptionId:n,unsubscribeMethod:i}=r;if(this._subscriptionsAutoDisposedByRpc.has(n))this._subscriptionsAutoDisposedByRpc.delete(n);else{this._setSubscription(t,{...r,state:"unsubscribing"}),this._setSubscription(t,{...r,state:"unsubscribing"});try{await this._rpcWebSocket.call(i,[n])}catch(s){if(Error,!e())return;return this._setSubscription(t,{...r,state:"subscribed"}),void await this._updateSubscriptions()}}this._setSubscription(t,{...r,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];void 0!==r&&r.forEach(t=>{try{t(...e)}catch(r){}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=Object(p["create"])(t,Ye);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,n=Ut([t.method,e],!0),i=this._subscriptionsByHash[n];return void 0===i?this._subscriptionsByHash[n]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=n,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const e=this._subscriptionsByHash[n];tt(void 0!==e,"Could not find a `Subscription` when tearing down client subscription #"+r),e.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const n=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64");return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},n)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=Object(p["create"])(t,Je);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,n){const i=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64",n?{filters:n}:void 0);return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},i)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const n=this._buildArgs(["object"===typeof t?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=Object(p["create"])(t,Zr);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=Object(p["create"])(t,$e);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=Object(p["create"])(t,er);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r&&await r()}_buildArgs(t,e,r,n){const i=e||this._commitment;if(i||r||n){let e={};r&&(e.encoding=r),i&&(e.commitment=i),n&&(e=Object.assign(e,n)),t.push(e)}return t}_buildArgsAtLeastConfirmed(t,e,r,n){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,n)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=Object(p["create"])(t,rr);"receivedSignature"!==e.value&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,"receivedSignature"===e.value?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const n=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(t,r)=>{if("status"===t.type){e(t.result,r);try{this.removeSignatureListener(i)}catch(n){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},n);return i}onSignatureWithOptions(t,e,r){const{commitment:n,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},s=this._buildArgs([t],n,void 0,i),o=this._makeSubscription({callback:(t,r)=>{e(t,r);try{this.removeSignatureListener(o)}catch(n){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return o}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=Object(p["create"])(t,nr);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class Yr{constructor(t){this._keypair=void 0,this._keypair=null!==t&&void 0!==t?t:v()}static generate(){return new Yr(v())}static fromSecretKey(t,e){if(64!==t.byteLength)throw new Error("bad secret key size");const r=t.slice(32,64);if(!e||!e.skipValidation){const e=t.slice(0,32),n=I(e);for(let t=0;t<32;t++)if(r[t]!==n[t])throw new Error("provided secretKey is invalid")}return new Yr({publicKey:r,secretKey:t})}static fromSeed(t){const e=I(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new Yr({publicKey:e,secretKey:r})}get publicKey(){return new R(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const Gr=Object.freeze({CreateLookupTable:{index:0,layout:h["struct"]([h["u32"]("instruction"),Ot("recentSlot"),h["u8"]("bumpSeed")])},FreezeLookupTable:{index:1,layout:h["struct"]([h["u32"]("instruction")])},ExtendLookupTable:{index:2,layout:h["struct"]([h["u32"]("instruction"),Ot(),h["seq"](K(),h["offset"](h["u32"](),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:h["struct"]([h["u32"]("instruction")])},CloseLookupTable:{index:4,layout:h["struct"]([h["u32"]("instruction")])}});class Jr{constructor(){}static createLookupTable(t){const[e,r]=R.findProgramAddressSync([t.authority.toBuffer(),Object(d["toBufferLE"])(BigInt(t.recentSlot),8)],this.programId),n=Gr.CreateLookupTable,i=St(n,{recentSlot:BigInt(t.recentSlot),bumpSeed:r}),s=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:jt.programId,isSigner:!1,isWritable:!1}];return[new at({programId:this.programId,keys:s,data:i}),e]}static freezeLookupTable(t){const e=Gr.FreezeLookupTable,r=St(e),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new at({programId:this.programId,keys:n,data:r})}static extendLookupTable(t){const e=Gr.ExtendLookupTable,r=St(e,{addresses:t.addresses.map(t=>t.toBytes())}),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&n.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:jt.programId,isSigner:!1,isWritable:!1}),new at({programId:this.programId,keys:n,data:r})}static deactivateLookupTable(t){const e=Gr.DeactivateLookupTable,r=St(e),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new at({programId:this.programId,keys:n,data:r})}static closeLookupTable(t){const e=Gr.CloseLookupTable,r=St(e),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new at({programId:this.programId,keys:n,data:r})}}Jr.programId=new R("AddressLookupTab1e1111111111111111111111111");const Xr=Object.freeze({RequestUnits:{index:0,layout:h["struct"]([h["u8"]("instruction"),h["u32"]("units"),h["u32"]("additionalFee")])},RequestHeapFrame:{index:1,layout:h["struct"]([h["u8"]("instruction"),h["u32"]("bytes")])},SetComputeUnitLimit:{index:2,layout:h["struct"]([h["u8"]("instruction"),h["u32"]("units")])},SetComputeUnitPrice:{index:3,layout:h["struct"]([h["u8"]("instruction"),Ot("microLamports")])}});class $r{constructor(){}static requestUnits(t){const e=Xr.RequestUnits,r=St(e,t);return new at({keys:[],programId:this.programId,data:r})}static requestHeapFrame(t){const e=Xr.RequestHeapFrame,r=St(e,t);return new at({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(t){const e=Xr.SetComputeUnitLimit,r=St(e,t);return new at({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(t){const e=Xr.SetComputeUnitPrice,r=St(e,{microLamports:BigInt(t.microLamports)});return new at({keys:[],programId:this.programId,data:r})}}$r.programId=new R("ComputeBudget111111111111111111111111111111");const tn=64,en=32,rn=64,nn=h["struct"]([h["u8"]("numSignatures"),h["u8"]("padding"),h["u16"]("signatureOffset"),h["u16"]("signatureInstructionIndex"),h["u16"]("publicKeyOffset"),h["u16"]("publicKeyInstructionIndex"),h["u16"]("messageDataOffset"),h["u16"]("messageDataSize"),h["u16"]("messageInstructionIndex")]);class sn{constructor(){}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:i,instructionIndex:s}=t;tt(e.length===en,`Public Key must be ${en} bytes but received ${e.length} bytes`),tt(i.length===rn,`Signature must be ${rn} bytes but received ${i.length} bytes`);const o=nn.span,a=o+e.length,c=a+i.length,u=1,l=n["Buffer"].alloc(c+r.length),h=null==s?65535:s;return nn.encode({numSignatures:u,padding:0,signatureOffset:a,signatureInstructionIndex:h,publicKeyOffset:o,publicKeyInstructionIndex:h,messageDataOffset:c,messageDataSize:r.length,messageInstructionIndex:h},l),l.fill(e,o),l.fill(i,a),l.fill(r,c),new at({keys:[],programId:sn.programId,data:l})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:n}=t;tt(e.length===tn,`Private key must be ${tn} bytes but received ${e.length} bytes`);try{const t=Yr.fromSecretKey(e),i=t.publicKey.toBytes(),s=_(r,t.secretKey);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:s,instructionIndex:n})}catch(i){throw new Error("Error creating instruction; "+i)}}}sn.programId=new R("Ed25519SigVerify111111111111111111111111111");const on=(t,e)=>{const r=S["secp256k1"].sign(t,e);return[r.toCompactRawBytes(),r.recovery]};S["secp256k1"].utils.isValidPrivateKey;const an=S["secp256k1"].getPublicKey,cn=32,un=20,ln=64,hn=11,dn=h["struct"]([h["u8"]("numSignatures"),h["u16"]("signatureOffset"),h["u8"]("signatureInstructionIndex"),h["u16"]("ethAddressOffset"),h["u8"]("ethAddressInstructionIndex"),h["u16"]("messageDataOffset"),h["u16"]("messageDataSize"),h["u8"]("messageInstructionIndex"),h["blob"](20,"ethAddress"),h["blob"](64,"signature"),h["u8"]("recoveryId")]);class pn{constructor(){}static publicKeyToEthAddress(t){tt(t.length===ln,`Public key must be ${ln} bytes but received ${t.length} bytes`);try{return n["Buffer"].from(Object(k["keccak_256"])(E(t))).slice(-un)}catch(e){throw new Error("Error constructing Ethereum address: "+e)}}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:n,recoveryId:i,instructionIndex:s}=t;return pn.createInstructionWithEthAddress({ethAddress:pn.publicKeyToEthAddress(e),message:r,signature:n,recoveryId:i,instructionIndex:s})}static createInstructionWithEthAddress(t){const{ethAddress:e,message:r,signature:i,recoveryId:s,instructionIndex:o=0}=t;let a;a="string"===typeof e?e.startsWith("0x")?n["Buffer"].from(e.substr(2),"hex"):n["Buffer"].from(e,"hex"):e,tt(a.length===un,`Address must be ${un} bytes but received ${a.length} bytes`);const c=1+hn,u=c,l=c+a.length,h=l+i.length+1,d=1,p=n["Buffer"].alloc(dn.span+r.length);return dn.encode({numSignatures:d,signatureOffset:l,signatureInstructionIndex:o,ethAddressOffset:u,ethAddressInstructionIndex:o,messageDataOffset:h,messageDataSize:r.length,messageInstructionIndex:o,signature:E(i),ethAddress:E(a),recoveryId:s},p),p.fill(E(r),dn.span),new at({keys:[],programId:pn.programId,data:p})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:i}=t;tt(e.length===cn,`Private key must be ${cn} bytes but received ${e.length} bytes`);try{const t=E(e),s=an(t,!1).slice(1),o=n["Buffer"].from(Object(k["keccak_256"])(E(r))),[a,c]=on(o,t);return this.createInstructionWithPublicKey({publicKey:s,message:r,signature:a,recoveryId:c,instructionIndex:i})}catch(s){throw new Error("Error creating instruction; "+s)}}}var gn;pn.programId=new R("KeccakSecp256k11111111111111111111111111111");const mn=new R("StakeConfig11111111111111111111111111111111");class bn{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}gn=bn,bn.default=new gn(0,0,R.default);const fn=Object.freeze({Initialize:{index:0,layout:h["struct"]([h["u32"]("instruction"),H(),q()])},Authorize:{index:1,layout:h["struct"]([h["u32"]("instruction"),K("newAuthorized"),h["u32"]("stakeAuthorizationType")])},Delegate:{index:2,layout:h["struct"]([h["u32"]("instruction")])},Split:{index:3,layout:h["struct"]([h["u32"]("instruction"),h["ns64"]("lamports")])},Withdraw:{index:4,layout:h["struct"]([h["u32"]("instruction"),h["ns64"]("lamports")])},Deactivate:{index:5,layout:h["struct"]([h["u32"]("instruction")])},Merge:{index:7,layout:h["struct"]([h["u32"]("instruction")])},AuthorizeWithSeed:{index:8,layout:h["struct"]([h["u32"]("instruction"),K("newAuthorized"),h["u32"]("stakeAuthorizationType"),Z("authoritySeed"),K("authorityOwner")])}});Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class yn{constructor(){}static initialize(t){const{stakePubkey:e,authorized:r,lockup:n}=t,i=n||bn.default,s=fn.Initialize,o=St(s,{authorized:{staker:E(r.staker.toBuffer()),withdrawer:E(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:E(i.custodian.toBuffer())}}),a={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ft,isSigner:!1,isWritable:!1}],programId:this.programId,data:o};return new at(a)}static createAccountWithSeed(t){const e=new ct;e.add(jt.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static createAccount(t){const e=new ct;e.add(jt.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static delegate(t){const{stakePubkey:e,authorizedPubkey:r,votePubkey:n}=t,i=fn.Delegate,s=St(i);return(new ct).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:mt,isSigner:!1,isWritable:!1},{pubkey:yt,isSigner:!1,isWritable:!1},{pubkey:mn,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static authorize(t){const{stakePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:n,stakeAuthorizationType:i,custodianPubkey:s}=t,o=fn.Authorize,a=St(o,{newAuthorized:E(n.toBuffer()),stakeAuthorizationType:i.index}),c=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:mt,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&c.push({pubkey:s,isSigner:!0,isWritable:!1}),(new ct).add({keys:c,programId:this.programId,data:a})}static authorizeWithSeed(t){const{stakePubkey:e,authorityBase:r,authoritySeed:n,authorityOwner:i,newAuthorizedPubkey:s,stakeAuthorizationType:o,custodianPubkey:a}=t,c=fn.AuthorizeWithSeed,u=St(c,{newAuthorized:E(s.toBuffer()),stakeAuthorizationType:o.index,authoritySeed:n,authorityOwner:E(i.toBuffer())}),l=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:mt,isSigner:!1,isWritable:!1}];return a&&l.push({pubkey:a,isSigner:!0,isWritable:!1}),(new ct).add({keys:l,programId:this.programId,data:u})}static splitInstruction(t){const{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:n,lamports:i}=t,s=fn.Split,o=St(s,{lamports:i});return new at({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static split(t,e){const r=new ct;return r.add(jt.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:e,space:this.space,programId:this.programId})),r.add(this.splitInstruction(t))}static splitWithSeed(t,e){const{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,basePubkey:s,seed:o,lamports:a}=t,c=new ct;return c.add(jt.allocate({accountPubkey:i,basePubkey:s,seed:o,space:this.space,programId:this.programId})),e&&e>0&&c.add(jt.transfer({fromPubkey:t.authorizedPubkey,toPubkey:i,lamports:e})),c.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:a}))}static merge(t){const{stakePubkey:e,sourceStakePubKey:r,authorizedPubkey:n}=t,i=fn.Merge,s=St(i);return(new ct).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:mt,isSigner:!1,isWritable:!1},{pubkey:yt,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static withdraw(t){const{stakePubkey:e,authorizedPubkey:r,toPubkey:n,lamports:i,custodianPubkey:s}=t,o=fn.Withdraw,a=St(o,{lamports:i}),c=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:mt,isSigner:!1,isWritable:!1},{pubkey:yt,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&c.push({pubkey:s,isSigner:!0,isWritable:!1}),(new ct).add({keys:c,programId:this.programId,data:a})}static deactivate(t){const{stakePubkey:e,authorizedPubkey:r}=t,n=fn.Deactivate,i=St(n);return(new ct).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:mt,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}yn.programId=new R("Stake11111111111111111111111111111111111111"),yn.space=200;const wn=Object.freeze({InitializeAccount:{index:0,layout:h["struct"]([h["u32"]("instruction"),Y()])},Authorize:{index:1,layout:h["struct"]([h["u32"]("instruction"),K("newAuthorized"),h["u32"]("voteAuthorizationType")])},Withdraw:{index:3,layout:h["struct"]([h["u32"]("instruction"),h["ns64"]("lamports")])},UpdateValidatorIdentity:{index:4,layout:h["struct"]([h["u32"]("instruction")])},AuthorizeWithSeed:{index:10,layout:h["struct"]([h["u32"]("instruction"),G()])}});Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class kn{constructor(){}static initializeAccount(t){const{votePubkey:e,nodePubkey:r,voteInit:n}=t,i=wn.InitializeAccount,s=St(i,{voteInit:{nodePubkey:E(n.nodePubkey.toBuffer()),authorizedVoter:E(n.authorizedVoter.toBuffer()),authorizedWithdrawer:E(n.authorizedWithdrawer.toBuffer()),commission:n.commission}}),o={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ft,isSigner:!1,isWritable:!1},{pubkey:mt,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s};return new at(o)}static createAccount(t){const e=new ct;return e.add(jt.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){const{votePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:n,voteAuthorizationType:i}=t,s=wn.Authorize,o=St(s,{newAuthorized:E(n.toBuffer()),voteAuthorizationType:i.index}),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:mt,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new ct).add({keys:a,programId:this.programId,data:o})}static authorizeWithSeed(t){const{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:i,voteAuthorizationType:s,votePubkey:o}=t,a=wn.AuthorizeWithSeed,c=St(a,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:E(r.toBuffer()),currentAuthorityDerivedKeySeed:n,newAuthorized:E(i.toBuffer()),voteAuthorizationType:s.index}}),u=[{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:mt,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return(new ct).add({keys:u,programId:this.programId,data:c})}static withdraw(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,lamports:n,toPubkey:i}=t,s=wn.Withdraw,o=St(s,{lamports:n}),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return(new ct).add({keys:a,programId:this.programId,data:o})}static safeWithdraw(t,e,r){if(t.lamports>e-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return kn.withdraw(t)}static updateValidatorIdentity(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,nodePubkey:n}=t,i=wn.UpdateValidatorIdentity,s=St(i),o=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new ct).add({keys:o,programId:this.programId,data:s})}}kn.programId=new R("Vote111111111111111111111111111111111111111"),kn.space=3762;new R("Va1idator1nfo111111111111111111111111111111"),Object(p["type"])({name:Object(p["string"])(),website:Object(p["optional"])(Object(p["string"])()),details:Object(p["optional"])(Object(p["string"])()),keybaseUsername:Object(p["optional"])(Object(p["string"])())});new R("Vote111111111111111111111111111111111111111"),h["struct"]([K("nodePubkey"),K("authorizedWithdrawer"),h["u8"]("commission"),h["nu64"](),h["seq"](h["struct"]([h["nu64"]("slot"),h["u32"]("confirmationCount")]),h["offset"](h["u32"](),-8),"votes"),h["u8"]("rootSlotValid"),h["nu64"]("rootSlot"),h["nu64"](),h["seq"](h["struct"]([h["nu64"]("epoch"),K("authorizedVoter")]),h["offset"](h["u32"](),-8),"authorizedVoters"),h["struct"]([h["seq"](h["struct"]([K("authorizedPubkey"),h["nu64"]("epochOfLastAuthorizedSwitch"),h["nu64"]("targetEpoch")]),32,"buf"),h["nu64"]("idx"),h["u8"]("isEmpty")],"priorVoters"),h["nu64"](),h["seq"](h["struct"]([h["nu64"]("epoch"),h["nu64"]("credits"),h["nu64"]("prevCredits")]),h["offset"](h["u32"](),-8),"epochCredits"),h["struct"]([h["nu64"]("slot"),h["nu64"]("timestamp")],"lastTimestamp")])},"6d7f":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WalletAdapterNetwork=void 0,function(t){t["Mainnet"]="mainnet-beta",t["Testnet"]="testnet",t["Devnet"]="devnet"}(e.WalletAdapterNetwork||(e.WalletAdapterNetwork={}))},"6f02":function(t,e,r){"use strict";function n(t){return"version"in t}r.d(e,"a",(function(){return n}))},"74a3":function(t,e,r){"use strict";r.r(e),r.d(e,"SolanaSignAndSendTransaction",(function(){return n["a"]})),r.d(e,"SolanaSignIn",(function(){return i})),r.d(e,"SolanaSignMessage",(function(){return s["a"]})),r.d(e,"SolanaSignTransaction",(function(){return o["a"]}));var n=r("7695");const i="solana:signIn";var s=r("e729"),o=r("1b1b")},"753b":function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return o})),r.d(e,"d",(function(){return a})),r.d(e,"i",(function(){return c})),r.d(e,"j",(function(){return u})),r.d(e,"g",(function(){return l})),r.d(e,"f",(function(){return h})),r.d(e,"e",(function(){return d})),r.d(e,"h",(function(){return p})),r.d(e,"l",(function(){return g})),r.d(e,"m",(function(){return m})),r.d(e,"k",(function(){return b}));r("d9e2");class n extends Error{constructor(t){super(t)}}class i extends n{constructor(){super(...arguments),this.name="TokenAccountNotFoundError"}}class s extends n{constructor(){super(...arguments),this.name="TokenInvalidAccountError"}}class o extends n{constructor(){super(...arguments),this.name="TokenInvalidAccountOwnerError"}}class a extends n{constructor(){super(...arguments),this.name="TokenInvalidAccountSizeError"}}class c extends n{constructor(){super(...arguments),this.name="TokenInvalidMintError"}}class u extends n{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}class l extends n{constructor(){super(...arguments),this.name="TokenInvalidInstructionProgramError"}}class h extends n{constructor(){super(...arguments),this.name="TokenInvalidInstructionKeysError"}}class d extends n{constructor(){super(...arguments),this.name="TokenInvalidInstructionDataError"}}class p extends n{constructor(){super(...arguments),this.name="TokenInvalidInstructionTypeError"}}class g extends n{constructor(){super(...arguments),this.name="TokenTransferHookAccountNotFound"}}class m extends n{constructor(){super(...arguments),this.name="TokenTransferHookInvalidSeed"}}class b extends n{constructor(){super(...arguments),this.name="TokenTransferHookAccountDataNotFound"}}},7635:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("3583"),i=r("5621"),s=r("ff6a"),o=r("290c"),a=r("47c4");e.KEY_LENGTH=32,e.NONCE_LENGTH=12,e.TAG_LENGTH=16;var c=new Uint8Array(16),u=function(){function t(t){if(this.nonceLength=e.NONCE_LENGTH,this.tagLength=e.TAG_LENGTH,t.length!==e.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(t)}return t.prototype.seal=function(t,e,r,i){if(t.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var o=new Uint8Array(16);o.set(t,o.length-t.length);var a=new Uint8Array(32);n.stream(this._key,o,a,4);var c,u=e.length+this.tagLength;if(i){if(i.length!==u)throw new Error("ChaCha20Poly1305: incorrect destination length");c=i}else c=new Uint8Array(u);return n.streamXOR(this._key,o,e,c,4),this._authenticate(c.subarray(c.length-this.tagLength,c.length),a,c.subarray(0,c.length-this.tagLength),r),s.wipe(o),c},t.prototype.open=function(t,e,r,i){if(t.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(e.length<this.tagLength)return null;var o=new Uint8Array(16);o.set(t,o.length-t.length);var c=new Uint8Array(32);n.stream(this._key,o,c,4);var u=new Uint8Array(this.tagLength);if(this._authenticate(u,c,e.subarray(0,e.length-this.tagLength),r),!a.equal(u,e.subarray(e.length-this.tagLength,e.length)))return null;var l,h=e.length-this.tagLength;if(i){if(i.length!==h)throw new Error("ChaCha20Poly1305: incorrect destination length");l=i}else l=new Uint8Array(h);return n.streamXOR(this._key,o,e.subarray(0,e.length-this.tagLength),l,4),s.wipe(o),l},t.prototype.clean=function(){return s.wipe(this._key),this},t.prototype._authenticate=function(t,e,r,n){var a=new i.Poly1305(e);n&&(a.update(n),n.length%16>0&&a.update(c.subarray(n.length%16))),a.update(r),r.length%16>0&&a.update(c.subarray(r.length%16));var u=new Uint8Array(8);n&&o.writeUint64LE(n.length,u),a.update(u),o.writeUint64LE(r.length,u),a.update(u);for(var l=a.digest(),h=0;h<l.length;h++)t[h]=l[h];a.clean(),s.wipe(l),s.wipe(u)},t}();e.ChaCha20Poly1305=u},7695:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));const n="solana:signAndSendTransaction"},"7b05":function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return f}));r("14d9"),r("907a"),r("986a"),r("1d02"),r("3c5d"),r("6ce5"),r("2834"),r("4ea1"),r("669d"),r("109c"),r("b2c1");var n=r("753b");const i=1,s=1,o=1,a=1,c=1,u=1,l=1,h=1;function d(e){if(e.length<1)throw new n["m"];const[r,...o]=e;if(o.length<r)throw new n["m"];return{data:t.from(o.slice(0,r)),packedLength:i+s+r}}function p(t,e){if(t.length<2)throw new n["m"];const[r,s]=t;if(e.length<s+r)throw new n["m"];return{data:e.subarray(r,r+s),packedLength:i+o+a}}function g(t,e){if(t.length<1)throw new n["m"];const[r]=t;if(e.length<=r)throw new n["m"];return{data:e[r].pubkey.toBuffer(),packedLength:i+c}}async function m(t,e,r){if(t.length<3)throw new n["m"];const[s,o,a]=t;if(e.length<=s)throw new n["m"];const c=await r.getAccountInfo(e[s].pubkey);if(null==c)throw new n["k"];if(c.data.length<o+a)throw new n["m"];return{data:c.data.subarray(o,o+a),packedLength:i+u+l+h}}async function b(t,e,r,i){const[s,...o]=t,a=new Uint8Array(o);switch(s){case 0:return null;case 1:return d(a);case 2:return p(a,r);case 3:return g(a,e);case 4:return m(a,e,i);default:throw new n["m"]}}async function f(t,e,r,n){const i=[];let s=0;while(s<32){const o=await b(t.slice(s),e,r,n);if(null==o)break;i.push(o.data),s+=o.packedLength}return i}}).call(this,r("1c35").Buffer)},"7dcf":function(t,e,r){"use strict";function n(t){return"undefined"!==typeof t.saveState&&"undefined"!==typeof t.restoreState&&"undefined"!==typeof t.cleanSavedState}Object.defineProperty(e,"__esModule",{value:!0}),e.isSerializableHash=n},"7ee5":function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));r("14d9");var n=r("b675"),i=r("52c3"),s=r("6f02");class o extends n["a"]{async sendTransaction(t,e,r={}){let n=!0;try{if(Object(s["a"])(t)){if(!this.supportedTransactionVersions)throw new i["k"]("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(t.version))throw new i["k"](`Sending transaction version ${t.version} isn't supported by this wallet`);try{t=await this.signTransaction(t);const n=t.serialize();return await e.sendRawTransaction(n,r)}catch(o){if(o instanceof i["m"])throw n=!1,o;throw new i["k"](null===o||void 0===o?void 0:o.message,o)}}else try{const{signers:n,...i}=r;t=await this.prepareTransaction(t,e,i),(null===n||void 0===n?void 0:n.length)&&t.partialSign(...n),t=await this.signTransaction(t);const s=t.serialize();return await e.sendRawTransaction(s,i)}catch(o){if(o instanceof i["m"])throw n=!1,o;throw new i["k"](null===o||void 0===o?void 0:o.message,o)}}catch(o){throw n&&this.emit("error",o),o}}async signAllTransactions(t){for(const r of t)if(Object(s["a"])(r)){if(!this.supportedTransactionVersions)throw new i["m"]("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(r.version))throw new i["m"](`Signing transaction version ${r.version} isn't supported by this wallet`)}const e=[];for(const r of t)e.push(await this.signTransaction(r));return e}}class a extends o{}},"7f6a":function(t,e,r){"use strict";r.d(e,"a",(function(){return U})),r.d(e,"d",(function(){return Z})),r.d(e,"b",(function(){return H})),r.d(e,"c",(function(){return q}));r("d9e2"),r("14d9"),r("13d5"),r("0643"),r("2382"),r("a573"),r("9d4a");var n=r("0f06"),i=r("b9be"),s=r("f7f2"),o=r("d99e"),a=r("8df2"),c=r("633a");const u=Object(a["struct"])([Object(c["a"])("lockCpi")]),l=u.span;const h=Object(a["struct"])([Object(a["u8"])("state")]),d=h.span;r("64b9");const p=Object(a["struct"])([Object(c["b"])("authority"),Object(c["b"])("memberAddress")]),g=p.span;const m=Object(a["struct"])([Object(c["b"])("authority"),Object(c["b"])("groupAddress")]),b=m.span;const f=Object(a["struct"])([]),y=f.span;const w=Object(a["struct"])([Object(c["b"])("rateAuthority"),Object(a["ns64"])("initializationTimestamp"),Object(a["s16"])("preUpdateAverageRate"),Object(a["ns64"])("lastUpdateTimestamp"),Object(a["s16"])("currentRate")]),k=w.span;const S=Object(a["struct"])([Object(c["a"])("requireIncomingTransferMemos")]),v=S.span;const I=Object(a["struct"])([Object(c["b"])("authority"),Object(c["b"])("metadataAddress")]),M=I.span;const _=Object(a["struct"])([Object(c["b"])("closeAuthority")]),A=_.span;const E=Object(a["struct"])([]),O=E.span,T=E.span;const j=Object(a["struct"])([Object(c["b"])("delegate")]),B=j.span;const N=1e4;BigInt(N);function x(t){return Object(a["struct"])([Object(c["c"])("epoch"),Object(c["c"])("maximumFee"),Object(a["u16"])("transferFeeBasisPoints")],t)}const L=Object(a["struct"])([Object(c["b"])("transferFeeConfigAuthority"),Object(c["b"])("withdrawWithheldAuthority"),Object(c["c"])("withheldAmount"),x("olderTransferFee"),x("newerTransferFee")]),P=L.span;const R=Object(a["struct"])([Object(c["c"])("withheldAmount")]),z=R.span;var U,W=r("17fd");r("d6e3");(function(t){t[t["Uninitialized"]=0]="Uninitialized",t[t["TransferFeeConfig"]=1]="TransferFeeConfig",t[t["TransferFeeAmount"]=2]="TransferFeeAmount",t[t["MintCloseAuthority"]=3]="MintCloseAuthority",t[t["ConfidentialTransferMint"]=4]="ConfidentialTransferMint",t[t["ConfidentialTransferAccount"]=5]="ConfidentialTransferAccount",t[t["DefaultAccountState"]=6]="DefaultAccountState",t[t["ImmutableOwner"]=7]="ImmutableOwner",t[t["MemoTransfer"]=8]="MemoTransfer",t[t["NonTransferable"]=9]="NonTransferable",t[t["InterestBearingConfig"]=10]="InterestBearingConfig",t[t["CpiGuard"]=11]="CpiGuard",t[t["PermanentDelegate"]=12]="PermanentDelegate",t[t["NonTransferableAccount"]=13]="NonTransferableAccount",t[t["TransferHook"]=14]="TransferHook",t[t["TransferHookAccount"]=15]="TransferHookAccount",t[t["MetadataPointer"]=18]="MetadataPointer",t[t["TokenMetadata"]=19]="TokenMetadata",t[t["GroupPointer"]=20]="GroupPointer",t[t["GroupMemberPointer"]=22]="GroupMemberPointer"})(U||(U={}));const C=2,D=2;function F(t){return t+C+D}function V(t){switch(t){case U.TokenMetadata:return!0;default:return!1}}function K(t){switch(t){case U.Uninitialized:return 0;case U.TransferFeeConfig:return P;case U.TransferFeeAmount:return z;case U.MintCloseAuthority:return A;case U.ConfidentialTransferMint:return 97;case U.ConfidentialTransferAccount:return 286;case U.CpiGuard:return l;case U.DefaultAccountState:return d;case U.ImmutableOwner:return y;case U.MemoTransfer:return v;case U.MetadataPointer:return M;case U.NonTransferable:return O;case U.InterestBearingConfig:return k;case U.PermanentDelegate:return B;case U.NonTransferableAccount:return T;case U.TransferHook:return W["b"];case U.TransferHookAccount:return W["a"];case U.GroupPointer:return b;case U.GroupMemberPointer:return g;case U.TokenMetadata:throw Error("Cannot get type length for variable extension type: "+t);default:throw Error("Unknown extension type: "+t)}}function Q(t,e,r={}){if(0===t.length&&0===Object.keys(r).length)return e;{const e=n["a"]+o["a"]+t.filter((e,r)=>r===t.indexOf(e)).map(t=>F(K(t))).reduce((t,e)=>t+e,0)+Object.entries(r).map(([t,e])=>{if(!V(Number(t)))throw Error(`Extension ${t} is not variable length`);return F(e)}).reduce((t,e)=>t+e,0);return e===s["a"]?e+C:e}}function Z(t,e={}){return Q(t,i["a"],e)}function H(t){return Q(t,n["a"])}function q(t,e){let r=0;while(F(r)<=e.length){const n=e.readUInt16LE(r),i=e.readUInt16LE(r+C),s=F(r);if(n==t)return e.slice(s,s+i);r=s+i}return null}},8217:function(t,e,r){"use strict";r("d9e2"),Object.defineProperty(e,"__esModule",{value:!0}),e.WalletWindowClosedError=e.WalletWindowBlockedError=e.WalletTimeoutError=e.WalletSignInError=e.WalletSignMessageError=e.WalletSignTransactionError=e.WalletSendTransactionError=e.WalletNotConnectedError=e.WalletKeypairError=e.WalletPublicKeyError=e.WalletAccountError=e.WalletDisconnectionError=e.WalletDisconnectedError=e.WalletConnectionError=e.WalletConfigError=e.WalletLoadError=e.WalletNotReadyError=e.WalletError=void 0;class n extends Error{constructor(t,e){super(t),this.error=e}}e.WalletError=n;class i extends n{constructor(){super(...arguments),this.name="WalletNotReadyError"}}e.WalletNotReadyError=i;class s extends n{constructor(){super(...arguments),this.name="WalletLoadError"}}e.WalletLoadError=s;class o extends n{constructor(){super(...arguments),this.name="WalletConfigError"}}e.WalletConfigError=o;class a extends n{constructor(){super(...arguments),this.name="WalletConnectionError"}}e.WalletConnectionError=a;class c extends n{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}e.WalletDisconnectedError=c;class u extends n{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}e.WalletDisconnectionError=u;class l extends n{constructor(){super(...arguments),this.name="WalletAccountError"}}e.WalletAccountError=l;class h extends n{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}e.WalletPublicKeyError=h;class d extends n{constructor(){super(...arguments),this.name="WalletKeypairError"}}e.WalletKeypairError=d;class p extends n{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}e.WalletNotConnectedError=p;class g extends n{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}e.WalletSendTransactionError=g;class m extends n{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}e.WalletSignTransactionError=m;class b extends n{constructor(){super(...arguments),this.name="WalletSignMessageError"}}e.WalletSignMessageError=b;class f extends n{constructor(){super(...arguments),this.name="WalletSignInError"}}e.WalletSignInError=f;class y extends n{constructor(){super(...arguments),this.name="WalletTimeoutError"}}e.WalletTimeoutError=y;class w extends n{constructor(){super(...arguments),this.name="WalletWindowBlockedError"}}e.WalletWindowBlockedError=w;class k extends n{constructor(){super(...arguments),this.name="WalletWindowClosedError"}}e.WalletWindowClosedError=k},"834f":function(t,e,r){"use strict";r("14d9");var n=this&&this.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function o(t){try{c(n.next(t))}catch(e){s(e)}}function a(t){try{c(n["throw"](t))}catch(e){s(e)}}function c(t){t.done?r(t.value):i(t.value).then(o,a)}c((n=n.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.isIosAndRedirectable=e.scopePollingDetectionStrategy=e.BaseWalletAdapter=e.WalletReadyState=e.EventEmitter=void 0;const s=i(r("ba10"));e.EventEmitter=s.default;const o=r("8217");(function(t){t["Installed"]="Installed",t["NotDetected"]="NotDetected",t["Loadable"]="Loadable",t["Unsupported"]="Unsupported"})(e.WalletReadyState||(e.WalletReadyState={}));class a extends s.default{get connected(){return!!this.publicKey}autoConnect(){return n(this,void 0,void 0,(function*(){yield this.connect()}))}prepareTransaction(t,e,r={}){return n(this,void 0,void 0,(function*(){const n=this.publicKey;if(!n)throw new o.WalletNotConnectedError;return t.feePayer=t.feePayer||n,t.recentBlockhash=t.recentBlockhash||(yield e.getLatestBlockhash({commitment:r.preflightCommitment,minContextSlot:r.minContextSlot})).blockhash,t}))}}function c(t){if("undefined"===typeof window||"undefined"===typeof document)return;const e=[];function r(){const r=t();if(r)for(const t of e)t()}const n=setInterval(r,1e3);e.push(()=>clearInterval(n)),"loading"===document.readyState&&(document.addEventListener("DOMContentLoaded",r,{once:!0}),e.push(()=>document.removeEventListener("DOMContentLoaded",r))),"complete"!==document.readyState&&(window.addEventListener("load",r,{once:!0}),e.push(()=>window.removeEventListener("load",r))),r()}function u(){if(!navigator)return!1;const t=navigator.userAgent.toLowerCase(),e=t.includes("iphone")||t.includes("ipad"),r=t.includes("safari");return e&&r}e.BaseWalletAdapter=a,e.scopePollingDetectionStrategy=c,e.isIosAndRedirectable=u},"843f":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BrowserRandomSource=void 0;const n=65536;class i{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const t="undefined"!==typeof self?self.crypto||self.msCrypto:null;t&&void 0!==t.getRandomValues&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const e=new Uint8Array(t);for(let r=0;r<e.length;r+=n)this._crypto.getRandomValues(e.subarray(r,r+Math.min(e.length-r,n)));return e}}e.BrowserRandomSource=i},"86b6":function(t,e,r){"use strict";r.d(e,"a",(function(){return C}));r("88e6"),r("70cc"),r("eb03"),r("22e5"),r("c01e"),r("fa76"),r("8306");var n=r("7ee5"),i=r("b675"),s=r("52c3"),o=r("6f02"),a=r("64b9"),c=r("253c9");r("d9e2"),r("14d9"),r("0643"),r("2382"),r("4e3e");const u="solana:mainnet",l="solana:devnet",h="solana:testnet";var d=r("7695"),p=r("1b1b"),g=r("e729"),m=r("e6a8"),b=r("7ce3"),f=r("e3a8");const y="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjMxIiB2aWV3Qm94PSIwIDAgMzEgMzEiIHdpZHRoPSIzMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjIwLjI1IiB4Mj0iMjYuNTcxIiB5MT0iMjcuMTczIiB5Mj0iMTkuODU4Ij48c3RvcCBvZmZzZXQ9Ii4wOCIgc3RvcC1jb2xvcj0iIzk5NDVmZiIvPjxzdG9wIG9mZnNldD0iLjMiIHN0b3AtY29sb3I9IiM4NzUyZjMiLz48c3RvcCBvZmZzZXQ9Ii41IiBzdG9wLWNvbG9yPSIjNTQ5N2Q1Ii8+PHN0b3Agb2Zmc2V0PSIuNiIgc3RvcC1jb2xvcj0iIzQzYjRjYSIvPjxzdG9wIG9mZnNldD0iLjcyIiBzdG9wLWNvbG9yPSIjMjhlMGI5Ii8+PHN0b3Agb2Zmc2V0PSIuOTciIHN0b3AtY29sb3I9IiMxOWZiOWIiLz48L2xpbmVhckdyYWRpZW50PjxnIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iLjA5NCI+PHBhdGggZD0ibTI2LjEwOSAzLjY0My05LjM2OSA2Ljk1OSAxLjczMy00LjEwNSA3LjYzNy0yLjg1M3oiIGZpbGw9IiNlMjc2MWIiIHN0cm9rZT0iI2UyNzYxYiIvPjxnIGZpbGw9IiNlNDc2MWIiIHN0cm9rZT0iI2U0NzYxYiI+PHBhdGggZD0ibTQuNDgxIDMuNjQzIDkuMjk0IDcuMDI0LTEuNjQ4LTQuMTcxem0xOC4yNTggMTYuMTMtMi40OTUgMy44MjMgNS4zMzkgMS40NjkgMS41MzUtNS4yMDctNC4zNzgtLjA4NXptLTE5LjI0Ny4wODUgMS41MjUgNS4yMDcgNS4zMzktMS40NjktMi40OTUtMy44MjN6Ii8+PHBhdGggZD0ibTEwLjA1NSAxMy4zMTMtMS40ODggMi4yNTEgNS4zMDEuMjM1LS4xODgtNS42OTd6bTEwLjQ4IDAtMy42NzItMy4yNzctLjEyMiA1Ljc2MyA1LjI5Mi0uMjM1LTEuNDk3LTIuMjUxem0tMTAuMTc4IDEwLjI4MyAzLjE4My0xLjU1NC0yLjc0OS0yLjE0Ny0uNDMzIDMuNzAxem02LjY5NS0xLjU1NCAzLjE5MiAxLjU1NC0uNDQzLTMuNzAxeiIvPjwvZz48cGF0aCBkPSJtMjAuMjQ0IDIzLjU5Ni0zLjE5Mi0xLjU1NC4yNTQgMi4wODEtLjAyOC44NzZ6bS05Ljg4NyAwIDIuOTY2IDEuNDAzLS4wMTktLjg3Ni4yMzUtMi4wODEtMy4xODMgMS41NTR6IiBmaWxsPSIjZDdjMWIzIiBzdHJva2U9IiNkN2MxYjMiLz48cGF0aCBkPSJtMTMuMzY5IDE4LjUyMS0yLjY1NS0uNzgxIDEuODc0LS44NTd6bTMuODUxIDAgLjc4MS0xLjYzOCAxLjg4My44NTctMi42NjUuNzgxeiIgZmlsbD0iIzIzMzQ0NyIgc3Ryb2tlPSIjMjMzNDQ3Ii8+PHBhdGggZD0ibTEwLjM1NyAyMy41OTYuNDUyLTMuODIzLTIuOTQ3LjA4NXptOS40MzUtMy44MjMuNDUyIDMuODIzIDIuNDk1LTMuNzM4em0yLjI0MS00LjIwOS01LjI5Mi4yMzUuNDkgMi43MjEuNzgyLTEuNjM4IDEuODgzLjg1N3ptLTExLjMxOCAyLjE3NSAxLjg4My0uODU3Ljc3MiAxLjYzOC40OTktMi43MjEtNS4zMDEtLjIzNXoiIGZpbGw9IiNjZDYxMTYiIHN0cm9rZT0iI2NkNjExNiIvPjxwYXRoIGQ9Im04LjU2NyAxNS41NjQgMi4yMjIgNC4zMzEtLjA3NS0yLjE1NnptMTEuMzI4IDIuMTc1LS4wOTQgMi4xNTYgMi4yMzItNC4zMzEtMi4xMzcgMi4xNzV6bS02LjAyNi0xLjk0LS40OTkgMi43MjEuNjIxIDMuMjExLjE0MS00LjIyOC0uMjY0LTEuNzA0em0yLjg3MiAwLS4yNTQgMS42OTUuMTEzIDQuMjM3LjYzMS0zLjIxMXoiIGZpbGw9IiNlNDc1MWYiIHN0cm9rZT0iI2U0NzUxZiIvPjxwYXRoIGQ9Im0xNy4yMyAxOC41Mi0uNjMxIDMuMjExLjQ1Mi4zMTEgMi43NS0yLjE0Ny4wOTQtMi4xNTZ6bS02LjUxNi0uNzgxLjA3NSAyLjE1NiAyLjc1IDIuMTQ3LjQ1Mi0uMzExLS42MjItMy4yMTF6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48cGF0aCBkPSJtMTcuMjc3IDI0Ljk5OS4wMjgtLjg3Ni0uMjM1LS4yMDdoLTMuNTVsLS4yMTcuMjA3LjAxOS44NzYtMi45NjYtMS40MDMgMS4wMzYuODQ4IDIuMSAxLjQ1OWgzLjYwNmwyLjEwOS0xLjQ1OSAxLjAzNi0uODQ4eiIgZmlsbD0iI2MwYWQ5ZSIgc3Ryb2tlPSIjYzBhZDllIi8+PHBhdGggZD0ibTE3LjA1MSAyMi4wNDItLjQ1Mi0uMzExaC0yLjYwOGwtLjQ1Mi4zMTEtLjIzNSAyLjA4MS4yMTctLjIwN2gzLjU1bC4yMzUuMjA3LS4yNTQtMi4wODF6IiBmaWxsPSIjMTYxNjE2IiBzdHJva2U9IiMxNjE2MTYiLz48cGF0aCBkPSJtMjYuNTA1IDExLjA1My44LTMuODQyLTEuMTk2LTMuNTY5LTkuMDU4IDYuNzIzIDMuNDg0IDIuOTQ3IDQuOTI1IDEuNDQxIDEuMDkyLTEuMjcxLS40NzEtLjMzOS43NTMtLjY4Ny0uNTg0LS40NTIuNzUzLS41NzQtLjQ5OS0uMzc3em0tMjMuMjExLTMuODQxLjggMy44NDItLjUwOC4zNzcuNzUzLjU3NC0uNTc0LjQ1Mi43NTMuNjg3LS40NzEuMzM5IDEuMDgzIDEuMjcxIDQuOTI1LTEuNDQxIDMuNDg0LTIuOTQ3LTkuMDU5LTYuNzIzeiIgZmlsbD0iIzc2M2QxNiIgc3Ryb2tlPSIjNzYzZDE2Ii8+PHBhdGggZD0ibTI1LjQ2IDE0Ljc1NC00LjkyNS0xLjQ0MSAxLjQ5NyAyLjI1MS0yLjIzMiA0LjMzMSAyLjkzOC0uMDM4aDQuMzc4bC0xLjY1Ny01LjEwNHptLTE1LjQwNS0xLjQ0MS00LjkyNSAxLjQ0MS0xLjYzOCA1LjEwNGg0LjM2OWwyLjkyOC4wMzgtMi4yMjItNC4zMzEgMS40ODgtMi4yNTF6bTYuNjg1IDIuNDg2LjMxMS01LjQzMyAxLjQzMS0zLjg3aC02LjM1NmwxLjQxMyAzLjg3LjMyOSA1LjQzMy4xMTMgMS43MTQuMDA5IDQuMjE5aDIuNjFsLjAxOS00LjIxOS4xMjItMS43MTR6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48L2c+PGNpcmNsZSBjeD0iMjMuNSIgY3k9IjIzLjUiIGZpbGw9IiMwMDAiIHI9IjYuNSIvPjxwYXRoIGQ9Im0yNy40NzMgMjUuNTQ1LTEuMzEgMS4zNjhjLS4wMjkuMDMtLjA2My4wNTMtLjEwMS4wN2EuMzEuMzEgMCAwIDEgLS4xMjEuMDI0aC02LjIwOWMtLjAzIDAtLjA1OS0uMDA4LS4wODMtLjAyNGEuMTUuMTUgMCAwIDEgLS4wNTYtLjA2NWMtLjAxMi0uMDI2LS4wMTUtLjA1Ni0uMDEtLjA4NHMuMDE4LS4wNTUuMDM5LS4wNzZsMS4zMTEtMS4zNjhjLjAyOC0uMDMuMDYzLS4wNTMuMTAxLS4wNjlhLjMxLjMxIDAgMCAxIC4xMjEtLjAyNWg2LjIwOGMuMDMgMCAuMDU5LjAwOC4wODMuMDI0YS4xNS4xNSAwIDAgMSAuMDU2LjA2NWMuMDEyLjAyNi4wMTUuMDU2LjAxLjA4NHMtLjAxOC4wNTUtLjAzOS4wNzZ6bS0xLjMxLTIuNzU2Yy0uMDI5LS4wMy0uMDYzLS4wNTMtLjEwMS0uMDdhLjMxLjMxIDAgMCAwIC0uMTIxLS4wMjRoLTYuMjA5Yy0uMDMgMC0uMDU5LjAwOC0uMDgzLjAyNHMtLjA0NC4wMzgtLjA1Ni4wNjUtLjAxNS4wNTYtLjAxLjA4NC4wMTguMDU1LjAzOS4wNzZsMS4zMTEgMS4zNjhjLjAyOC4wMy4wNjMuMDUzLjEwMS4wNjlhLjMxLjMxIDAgMCAwIC4xMjEuMDI1aDYuMjA4Yy4wMyAwIC4wNTktLjAwOC4wODMtLjAyNGEuMTUuMTUgMCAwIDAgLjA1Ni0uMDY1Yy4wMTItLjAyNi4wMTUtLjA1Ni4wMS0uMDg0cy0uMDE4LS4wNTUtLjAzOS0uMDc2em0tNi40MzEtLjk4M2g2LjIwOWEuMzEuMzEgMCAwIDAgLjEyMS0uMDI0Yy4wMzgtLjAxNi4wNzMtLjA0LjEwMS0uMDdsMS4zMS0xLjM2OGMuMDItLjAyMS4wMzQtLjA0Ny4wMzktLjA3NnMuMDAxLS4wNTgtLjAxLS4wODRhLjE1LjE1IDAgMCAwIC0uMDU2LS4wNjVjLS4wMjUtLjAxNi0uMDU0LS4wMjQtLjA4My0uMDI0aC02LjIwOGEuMzEuMzEgMCAwIDAgLS4xMjEuMDI1Yy0uMDM4LjAxNi0uMDcyLjA0LS4xMDEuMDY5bC0xLjMxIDEuMzY4Yy0uMDIuMDIxLS4wMzQuMDQ3LS4wMzkuMDc2cy0uMDAxLjA1OC4wMS4wODQuMDMxLjA0OS4wNTYuMDY1LjA1NC4wMjQuMDgzLjAyNHoiIGZpbGw9InVybCgjYSkiLz48L3N2Zz4=";var w,k,S,v,I,M,_,A,E,O,T,j,B,N,x=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)},L=function(t,e,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(t,r):i?i.value=r:e.set(t,r),r};class P{constructor(){w.add(this),k.set(this,{}),S.set(this,"1.0.0"),v.set(this,"MetaMask"),I.set(this,y),M.set(this,null),_.set(this,(t,e)=>{var r;return(null===(r=x(this,k,"f")[t])||void 0===r?void 0:r.push(e))||(x(this,k,"f")[t]=[e]),()=>x(this,w,"m",E).call(this,t,e)}),O.set(this,async()=>{if(!x(this,M,"f")){let e;try{e=(await r.e("chunk-9b2b69e2").then(r.bind(null,"99ab"))).default}catch(t){throw new Error("Unable to load Solflare MetaMask SDK")}L(this,M,new e,"f"),x(this,M,"f").on("standard_change",t=>x(this,w,"m",A).call(this,"change",t))}return this.accounts.length||await x(this,M,"f").connect(),{accounts:this.accounts}}),T.set(this,async()=>{x(this,M,"f")&&await x(this,M,"f").disconnect()}),j.set(this,async(...t)=>{if(!x(this,M,"f"))throw new s["h"];return await x(this,M,"f").standardSignAndSendTransaction(...t)}),B.set(this,async(...t)=>{if(!x(this,M,"f"))throw new s["h"];return await x(this,M,"f").standardSignTransaction(...t)}),N.set(this,async(...t)=>{if(!x(this,M,"f"))throw new s["h"];return await x(this,M,"f").standardSignMessage(...t)})}get version(){return x(this,S,"f")}get name(){return x(this,v,"f")}get icon(){return x(this,I,"f")}get chains(){return[u,l,h]}get features(){return{[m["b"]]:{version:"1.0.0",connect:x(this,O,"f")},[b["b"]]:{version:"1.0.0",disconnect:x(this,T,"f")},[f["b"]]:{version:"1.0.0",on:x(this,_,"f")},[d["a"]]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:x(this,j,"f")},[p["a"]]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:x(this,B,"f")},[g["a"]]:{version:"1.0.0",signMessage:x(this,N,"f")}}}get accounts(){return x(this,M,"f")?x(this,M,"f").standardAccounts:[]}}k=new WeakMap,S=new WeakMap,v=new WeakMap,I=new WeakMap,M=new WeakMap,_=new WeakMap,O=new WeakMap,T=new WeakMap,j=new WeakMap,B=new WeakMap,N=new WeakMap,w=new WeakSet,A=function(t,...e){var r;null===(r=x(this,k,"f")[t])||void 0===r||r.forEach(t=>t.apply(null,e))},E=function(t,e){var r;x(this,k,"f")[t]=null===(r=x(this,k,"f")[t])||void 0===r?void 0:r.filter(t=>e!==t)};let R=!1;function z(){R||(Object(c["a"])(new P),R=!0)}async function U(){const t="solflare-detect-metamask";function e(){window.postMessage({target:"metamask-contentscript",data:{name:"metamask-provider",data:{id:t,jsonrpc:"2.0",method:"wallet_getSnaps"}}},window.location.origin)}function r(n){var i;const s=n.data;var o;"metamask-inpage"===(null===s||void 0===s?void 0:s.target)&&"metamask-provider"===(null===(i=s.data)||void 0===i?void 0:i.name)&&((null===(o=s.data.data)||void 0===o?void 0:o.id)===t?(window.removeEventListener("message",r),s.data.data.error||z()):e())}window.addEventListener("message",r),window.setTimeout(()=>window.removeEventListener("message",r),5e3),e()}const W="Solflare";class C extends n["a"]{constructor(t={}){super(),this.name=W,this.url="https://solflare.com",this.icon="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjUwIiB2aWV3Qm94PSIwIDAgNTAgNTAiIHdpZHRoPSI1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNmZmMxMGIiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmYjNmMmUiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSI2LjQ3ODM1IiB4Mj0iMzQuOTEwNyIgeGxpbms6aHJlZj0iI2EiIHkxPSI3LjkyIiB5Mj0iMzMuNjU5MyIvPjxyYWRpYWxHcmFkaWVudCBpZD0iYyIgY3g9IjAiIGN5PSIwIiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDQuOTkyMTg4MzIgMTIuMDYzODc5NjMgLTEyLjE4MTEzNjU1IDUuMDQwNzEwNzQgMjIuNTIwMiAyMC42MTgzKSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHI9IjEiIHhsaW5rOmhyZWY9IiNhIi8+PHBhdGggZD0ibTI1LjE3MDggNDcuOTEwNGMuNTI1IDAgLjk1MDcuNDIxLjk1MDcuOTQwM3MtLjQyNTcuOTQwMi0uOTUwNy45NDAyLS45NTA3LS40MjA5LS45NTA3LS45NDAyLjQyNTctLjk0MDMuOTUwNy0uOTQwM3ptLTEuMDMyOC00NC45MTU2NWMuNDY0Ni4wMzgzNi44Mzk4LjM5MDQuOTAyNy44NDY4MWwxLjEzMDcgOC4yMTU3NGMuMzc5OCAyLjcxNDMgMy42NTM1IDMuODkwNCA1LjY3NDMgMi4wNDU5bDExLjMyOTEtMTAuMzExNThjLjI3MzMtLjI0ODczLjY5ODktLjIzMTQ5Ljk1MDcuMDM4NTEuMjMwOS4yNDc3Mi4yMzc5LjYyNjk3LjAxNjEuODgyNzdsLTkuODc5MSAxMS4zOTU4Yy0xLjgxODcgMi4wOTQyLS40NzY4IDUuMzY0MyAyLjI5NTYgNS41OTc4bDguNzE2OC44NDAzYy40MzQxLjA0MTguNzUxNy40MjM0LjcwOTMuODUyNC0uMDM0OS4zNTM3LS4zMDc0LjYzOTUtLjY2MjguNjk0OWwtOS4xNTk0IDEuNDMwMmMtMi42NTkzLjM2MjUtMy44NjM2IDMuNTExNy0yLjEzMzkgNS41NTc2bDMuMjIgMy43OTYxYy4yNTk0LjMwNTguMjE4OC43NjE1LS4wOTA4IDEuMDE3OC0uMjYyMi4yMTcyLS42NDE5LjIyNTYtLjkxMzguMDIwM2wtMy45Njk0LTIuOTk3OGMtMi4xNDIxLTEuNjEwOS01LjIyOTctLjI0MTctNS40NTYxIDIuNDI0M2wtLjg3NDcgMTAuMzk3NmMtLjAzNjIuNDI5NS0uNDE3OC43NDg3LS44NTI1LjcxMy0uMzY5LS4wMzAzLS42NjcxLS4zMDk3LS43MTcxLS42NzIxbC0xLjM4NzEtMTAuMDQzN2MtLjM3MTctMi43MTQ0LTMuNjQ1NC0zLjg5MDQtNS42NzQzLTIuMDQ1OWwtMTIuMDUxOTUgMTAuOTc0Yy0uMjQ5NDcuMjI3MS0uNjM4MDkuMjExNC0uODY4LS4wMzUtLjIxMDk0LS4yMjYyLS4yMTczNS0uNTcyNC0uMDE0OTMtLjgwNmwxMC41MTgxOC0xMi4xMzg1YzEuODE4Ny0yLjA5NDIuNDg0OS01LjM2NDQtMi4yODc2LTUuNTk3OGwtOC43MTg3Mi0uODQwNWMtLjQzNDEzLS4wNDE4LS43NTE3Mi0uNDIzNS0uNzA5MzYtLjg1MjQuMDM0OTMtLjM1MzcuMzA3MzktLjYzOTQuNjYyNy0uNjk1bDkuMTUzMzgtMS40Mjk5YzIuNjU5NC0uMzYyNSAzLjg3MTgtMy41MTE3IDIuMTQyMS01LjU1NzZsLTIuMTkyLTIuNTg0MWMtLjMyMTctLjM3OTItLjI3MTMtLjk0NDMuMTEyNi0xLjI2MjEuMzI1My0uMjY5NC43OTYzLS4yNzk3IDEuMTMzNC0uMDI0OWwyLjY5MTggMi4wMzQ3YzIuMTQyMSAxLjYxMDkgNS4yMjk3LjI0MTcgNS40NTYxLTIuNDI0M2wuNzI0MS04LjU1OTk4Yy4wNDU3LS41NDA4LjUyNjUtLjk0MjU3IDEuMDczOS0uODk3Mzd6bS0yMy4xODczMyAyMC40Mzk2NWMuNTI1MDQgMCAuOTUwNjcuNDIxLjk1MDY3Ljk0MDNzLS40MjU2My45NDAzLS45NTA2Ny45NDAzYy0uNTI1MDQxIDAtLjk1MDY3LS40MjEtLjk1MDY3LS45NDAzcy40MjU2MjktLjk0MDMuOTUwNjctLjk0MDN6bTQ3LjY3OTczLS45NTQ3Yy41MjUgMCAuOTUwNy40MjEuOTUwNy45NDAzcy0uNDI1Ny45NDAyLS45NTA3Ljk0MDItLjk1MDctLjQyMDktLjk1MDctLjk0MDIuNDI1Ny0uOTQwMy45NTA3LS45NDAzem0tMjQuNjI5Ni0yMi40Nzk3Yy41MjUgMCAuOTUwNi40MjA5NzMuOTUwNi45NDAyNyAwIC41MTkzLS40MjU2Ljk0MDI3LS45NTA2Ljk0MDI3LS41MjUxIDAtLjk1MDctLjQyMDk3LS45NTA3LS45NDAyNyAwLS41MTkyOTcuNDI1Ni0uOTQwMjcuOTUwNy0uOTQwMjd6IiBmaWxsPSJ1cmwoI2IpIi8+PHBhdGggZD0ibTI0LjU3MSAzMi43NzkyYzQuOTU5NiAwIDguOTgwMi0zLjk3NjUgOC45ODAyLTguODgxOSAwLTQuOTA1My00LjAyMDYtOC44ODE5LTguOTgwMi04Ljg4MTlzLTguOTgwMiAzLjk3NjYtOC45ODAyIDguODgxOWMwIDQuOTA1NCA0LjAyMDYgOC44ODE5IDguOTgwMiA4Ljg4MTl6IiBmaWxsPSJ1cmwoI2MpIi8+PC9zdmc+",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState="undefined"===typeof window||"undefined"===typeof document?i["b"].Unsupported:i["b"].Loadable,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new s["d"]),this.emit("disconnect"))},this._accountChanged=t=>{if(!t)return;const e=this._publicKey;if(e){try{t=new a["e"](t.toBytes())}catch(r){return void this.emit("error",new s["j"](null===r||void 0===r?void 0:r.message,r))}e.equals(t)||(this._publicKey=t,this.emit("connect",t))}},this._connecting=!1,this._publicKey=null,this._wallet=null,this._config=t,this._readyState!==i["b"].Unsupported&&(Object(i["d"])(()=>{var t;return!!(null!==(t=window.solflare)&&void 0!==t&&t.isSolflare||window.SolflareApp)&&(this._readyState=i["b"].Installed,this.emit("readyStateChange",this._readyState),!0)}),U())}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){var t;return!(null===(t=this._wallet)||void 0===t||!t.connected)}get readyState(){return this._readyState}async autoConnect(){this.readyState===i["b"].Loadable&&Object(i["c"])()||await this.connect()}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==i["b"].Loadable&&this._readyState!==i["b"].Installed)throw new s["i"];if(this.readyState===i["b"].Loadable&&Object(i["c"])()){const t=encodeURIComponent(window.location.href),e=encodeURIComponent(window.location.origin);return void(window.location.href=`https://solflare.com/ul/v1/browse/${t}?ref=${e}`)}let e,n,o;try{e=(await r.e("chunk-6cbceefd").then(r.bind(null,"f97b"))).default}catch(t){throw new s["g"](null===t||void 0===t?void 0:t.message,t)}try{n=new e({network:this._config.network})}catch(t){throw new s["b"](null===t||void 0===t?void 0:t.message,t)}if(this._connecting=!0,!n.connected)try{await n.connect()}catch(t){throw new s["c"](null===t||void 0===t?void 0:t.message,t)}if(!n.publicKey)throw new s["c"];try{o=new a["e"](n.publicKey.toBytes())}catch(t){throw new s["j"](null===t||void 0===t?void 0:t.message,t)}n.on("disconnect",this._disconnected),n.on("accountChanged",this._accountChanged),this._wallet=n,this._publicKey=o,this.emit("connect",o)}catch(t){throw this.emit("error",t),t}finally{this._connecting=!1}}async disconnect(){const t=this._wallet;if(t){t.off("disconnect",this._disconnected),t.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await t.disconnect()}catch(e){this.emit("error",new s["e"](null===e||void 0===e?void 0:e.message,e))}}this.emit("disconnect")}async sendTransaction(t,e,r={}){try{const i=this._wallet;if(!i)throw new s["h"];try{const{signers:n,...s}=r;return Object(o["a"])(t)?(null===n||void 0===n?void 0:n.length)&&t.sign(n):(t=await this.prepareTransaction(t,e,s),(null===n||void 0===n?void 0:n.length)&&t.partialSign(...n)),s.preflightCommitment=s.preflightCommitment||e.commitment,await i.signAndSendTransaction(t,s)}catch(n){if(n instanceof s["f"])throw n;throw new s["k"](null===n||void 0===n?void 0:n.message,n)}}catch(n){throw this.emit("error",n),n}}async signTransaction(t){try{const r=this._wallet;if(!r)throw new s["h"];try{return await r.signTransaction(t)||t}catch(e){throw new s["m"](null===e||void 0===e?void 0:e.message,e)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(t){try{const r=this._wallet;if(!r)throw new s["h"];try{return await r.signAllTransactions(t)||t}catch(e){throw new s["m"](null===e||void 0===e?void 0:e.message,e)}}catch(e){throw this.emit("error",e),e}}async signMessage(t){try{const r=this._wallet;if(!r)throw new s["h"];try{return await r.signMessage(t,"utf8")}catch(e){throw new s["l"](null===e||void 0===e?void 0:e.message,e)}}catch(e){throw this.emit("error",e),e}}}},8785:function(t,e,r){(function(t){r("d9e2"),r("0643"),r("cbc8"),function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function s(t,e,r){if(s.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var o;"object"===typeof t?t.exports=s:e.BN=s,s.BN=s,s.wordSize=26;try{o="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(18).Buffer}catch(j){}function a(t,e){var r=t.charCodeAt(e);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+t)}function c(t,e,r){var n=a(t,r);return r-1>=e&&(n|=a(t,r-1)<<4),n}function u(t,e,r,i){for(var s=0,o=0,a=Math.min(t.length,r),c=e;c<a;c++){var u=t.charCodeAt(c)-48;s*=i,o=u>=49?u-49+10:u>=17?u-17+10:u,n(u>=0&&o<i,"Invalid character"),s+=o}return s}function l(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(s.isBN=function(t){return t instanceof s||null!==t&&"object"===typeof t&&t.constructor.wordSize===s.wordSize&&Array.isArray(t.words)},s.max=function(t,e){return t.cmp(e)>0?t:e},s.min=function(t,e){return t.cmp(e)<0?t:e},s.prototype._init=function(t,e,r){if("number"===typeof t)return this._initNumber(t,e,r);if("object"===typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36),t=t.toString().replace(/\s+/g,"");var i=0;"-"===t[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},s.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},s.prototype._initArray=function(t,e,r){if(n("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,o,a=0;if("be"===r)for(i=t.length-1,s=0;i>=0;i-=3)o=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,a+=24,a>=26&&(a-=26,s++);else if("le"===r)for(i=0,s=0;i<t.length;i+=3)o=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,a+=24,a>=26&&(a-=26,s++);return this._strip()},s.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,s=0,o=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=c(t,e,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;else{var a=t.length-e;for(n=a%2===0?e+1:e;n<t.length;n+=2)i=c(t,e,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8}this._strip()},s.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var s=t.length-r,o=s%n,a=Math.min(s,s-o)+r,c=0,l=r;l<a;l+=n)c=u(t,l,l+n,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==o){var h=1;for(c=u(t,l,t.length,e),l=0;l<o;l++)h*=e;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},s.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},s.prototype._move=function(t){l(t,this)},s.prototype.clone=function(){var t=new s(null);return this.copy(t),t},s.prototype._expand=function(t){while(this.length<t)this.words[this.length++]=0;return this},s.prototype._strip=function(){while(this.length>1&&0===this.words[this.length-1])this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!==typeof Symbol&&"function"===typeof Symbol.for)try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(j){s.prototype.inspect=h}else s.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],g=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(t,e){var r;if(t=t||10,e=0|e||1,16===t||"hex"===t){r="";for(var i=0,s=0,o=0;o<this.length;o++){var a=this.words[o],c=(16777215&(a<<i|s)).toString(16);s=a>>>24-i&16777215,i+=2,i>=26&&(i-=26,o--),r=0!==s||o!==this.length-1?d[6-c.length]+c+r:c+r}0!==s&&(r=s.toString(16)+r);while(r.length%e!==0)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var u=p[t],l=g[t];r="";var h=this.clone();h.negative=0;while(!h.isZero()){var m=h.modrn(l).toString(t);h=h.idivn(l),r=h.isZero()?m+r:d[u-m.length]+m+r}this.isZero()&&(r="0"+r);while(r.length%e!==0)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(t,e){return this.toArrayLike(o,t,e)}),s.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)};var m=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)};function b(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=t.words[n]>>>i&1}return e}function f(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],s=0|e.words[0],o=i*s,a=67108863&o,c=o/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var l=c>>>26,h=67108863&c,d=Math.min(u,e.length-1),p=Math.max(0,u-t.length+1);p<=d;p++){var g=u-p|0;i=0|t.words[g],s=0|e.words[p],o=i*s+h,l+=o/67108864|0,h=67108863&o}r.words[u]=0|h,c=0|l}return 0!==c?r.words[u]=0|c:r.length--,r._strip()}s.prototype.toArrayLike=function(t,e,r){this._strip();var i=this.byteLength(),s=r||Math.max(1,i);n(i<=s,"byte array longer than desired length"),n(s>0,"Requested array length <= 0");var o=m(t,s),a="le"===e?"LE":"BE";return this["_toArrayLike"+a](o,i),o},s.prototype._toArrayLikeLE=function(t,e){for(var r=0,n=0,i=0,s=0;i<this.length;i++){var o=this.words[i]<<s|n;t[r++]=255&o,r<t.length&&(t[r++]=o>>8&255),r<t.length&&(t[r++]=o>>16&255),6===s?(r<t.length&&(t[r++]=o>>24&255),n=0,s=0):(n=o>>>24,s+=2)}if(r<t.length){t[r++]=n;while(r<t.length)t[r++]=0}},s.prototype._toArrayLikeBE=function(t,e){for(var r=t.length-1,n=0,i=0,s=0;i<this.length;i++){var o=this.words[i]<<s|n;t[r--]=255&o,r>=0&&(t[r--]=o>>8&255),r>=0&&(t[r--]=o>>16&255),6===s?(r>=0&&(t[r--]=o>>24&255),n=0,s=0):(n=o>>>24,s+=2)}if(r>=0){t[r--]=n;while(r>=0)t[r--]=0}},Math.clz32?s.prototype._countBits=function(t){return 32-Math.clz32(t)}:s.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},s.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0===(8191&e)&&(r+=13,e>>>=13),0===(127&e)&&(r+=7,e>>>=7),0===(15&e)&&(r+=4,e>>>=4),0===(3&e)&&(r+=2,e>>>=2),0===(1&e)&&r++,r},s.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},s.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(t){while(this.length<t.length)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},s.prototype.ior=function(t){return n(0===(this.negative|t.negative)),this.iuor(t)},s.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},s.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},s.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this._strip()},s.prototype.iand=function(t){return n(0===(this.negative|t.negative)),this.iuand(t)},s.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},s.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},s.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this._strip()},s.prototype.ixor=function(t){return n(0===(this.negative|t.negative)),this.iuxor(t)},s.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},s.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},s.prototype.inotn=function(t){n("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},s.prototype.notn=function(t){return this.clone().inotn(t)},s.prototype.setn=function(t,e){n("number"===typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this._strip()},s.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,s=0;s<n.length;s++)e=(0|r.words[s])+(0|n.words[s])+i,this.words[s]=67108863&e,i=e>>>26;for(;0!==i&&s<r.length;s++)e=(0|r.words[s])+i,this.words[s]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},s.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},s.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var s=0,o=0;o<n.length;o++)e=(0|r.words[o])-(0|n.words[o])+s,s=e>>26,this.words[o]=67108863&e;for(;0!==s&&o<r.length;o++)e=(0|r.words[o])+s,s=e>>26,this.words[o]=67108863&e;if(0===s&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(t){return this.clone().isub(t)};var y=function(t,e,r){var n,i,s,o=t.words,a=e.words,c=r.words,u=0,l=0|o[0],h=8191&l,d=l>>>13,p=0|o[1],g=8191&p,m=p>>>13,b=0|o[2],f=8191&b,y=b>>>13,w=0|o[3],k=8191&w,S=w>>>13,v=0|o[4],I=8191&v,M=v>>>13,_=0|o[5],A=8191&_,E=_>>>13,O=0|o[6],T=8191&O,j=O>>>13,B=0|o[7],N=8191&B,x=B>>>13,L=0|o[8],P=8191&L,R=L>>>13,z=0|o[9],U=8191&z,W=z>>>13,C=0|a[0],D=8191&C,F=C>>>13,V=0|a[1],K=8191&V,Q=V>>>13,Z=0|a[2],H=8191&Z,q=Z>>>13,Y=0|a[3],G=8191&Y,J=Y>>>13,X=0|a[4],$=8191&X,tt=X>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],st=8191&it,ot=it>>>13,at=0|a[7],ct=8191&at,ut=at>>>13,lt=0|a[8],ht=8191&lt,dt=lt>>>13,pt=0|a[9],gt=8191&pt,mt=pt>>>13;r.negative=t.negative^e.negative,r.length=19,n=Math.imul(h,D),i=Math.imul(h,F),i=i+Math.imul(d,D)|0,s=Math.imul(d,F);var bt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(g,D),i=Math.imul(g,F),i=i+Math.imul(m,D)|0,s=Math.imul(m,F),n=n+Math.imul(h,K)|0,i=i+Math.imul(h,Q)|0,i=i+Math.imul(d,K)|0,s=s+Math.imul(d,Q)|0;var ft=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(ft>>>26)|0,ft&=67108863,n=Math.imul(f,D),i=Math.imul(f,F),i=i+Math.imul(y,D)|0,s=Math.imul(y,F),n=n+Math.imul(g,K)|0,i=i+Math.imul(g,Q)|0,i=i+Math.imul(m,K)|0,s=s+Math.imul(m,Q)|0,n=n+Math.imul(h,H)|0,i=i+Math.imul(h,q)|0,i=i+Math.imul(d,H)|0,s=s+Math.imul(d,q)|0;var yt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(k,D),i=Math.imul(k,F),i=i+Math.imul(S,D)|0,s=Math.imul(S,F),n=n+Math.imul(f,K)|0,i=i+Math.imul(f,Q)|0,i=i+Math.imul(y,K)|0,s=s+Math.imul(y,Q)|0,n=n+Math.imul(g,H)|0,i=i+Math.imul(g,q)|0,i=i+Math.imul(m,H)|0,s=s+Math.imul(m,q)|0,n=n+Math.imul(h,G)|0,i=i+Math.imul(h,J)|0,i=i+Math.imul(d,G)|0,s=s+Math.imul(d,J)|0;var wt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,D),i=Math.imul(I,F),i=i+Math.imul(M,D)|0,s=Math.imul(M,F),n=n+Math.imul(k,K)|0,i=i+Math.imul(k,Q)|0,i=i+Math.imul(S,K)|0,s=s+Math.imul(S,Q)|0,n=n+Math.imul(f,H)|0,i=i+Math.imul(f,q)|0,i=i+Math.imul(y,H)|0,s=s+Math.imul(y,q)|0,n=n+Math.imul(g,G)|0,i=i+Math.imul(g,J)|0,i=i+Math.imul(m,G)|0,s=s+Math.imul(m,J)|0,n=n+Math.imul(h,$)|0,i=i+Math.imul(h,tt)|0,i=i+Math.imul(d,$)|0,s=s+Math.imul(d,tt)|0;var kt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(A,D),i=Math.imul(A,F),i=i+Math.imul(E,D)|0,s=Math.imul(E,F),n=n+Math.imul(I,K)|0,i=i+Math.imul(I,Q)|0,i=i+Math.imul(M,K)|0,s=s+Math.imul(M,Q)|0,n=n+Math.imul(k,H)|0,i=i+Math.imul(k,q)|0,i=i+Math.imul(S,H)|0,s=s+Math.imul(S,q)|0,n=n+Math.imul(f,G)|0,i=i+Math.imul(f,J)|0,i=i+Math.imul(y,G)|0,s=s+Math.imul(y,J)|0,n=n+Math.imul(g,$)|0,i=i+Math.imul(g,tt)|0,i=i+Math.imul(m,$)|0,s=s+Math.imul(m,tt)|0,n=n+Math.imul(h,rt)|0,i=i+Math.imul(h,nt)|0,i=i+Math.imul(d,rt)|0,s=s+Math.imul(d,nt)|0;var St=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(T,D),i=Math.imul(T,F),i=i+Math.imul(j,D)|0,s=Math.imul(j,F),n=n+Math.imul(A,K)|0,i=i+Math.imul(A,Q)|0,i=i+Math.imul(E,K)|0,s=s+Math.imul(E,Q)|0,n=n+Math.imul(I,H)|0,i=i+Math.imul(I,q)|0,i=i+Math.imul(M,H)|0,s=s+Math.imul(M,q)|0,n=n+Math.imul(k,G)|0,i=i+Math.imul(k,J)|0,i=i+Math.imul(S,G)|0,s=s+Math.imul(S,J)|0,n=n+Math.imul(f,$)|0,i=i+Math.imul(f,tt)|0,i=i+Math.imul(y,$)|0,s=s+Math.imul(y,tt)|0,n=n+Math.imul(g,rt)|0,i=i+Math.imul(g,nt)|0,i=i+Math.imul(m,rt)|0,s=s+Math.imul(m,nt)|0,n=n+Math.imul(h,st)|0,i=i+Math.imul(h,ot)|0,i=i+Math.imul(d,st)|0,s=s+Math.imul(d,ot)|0;var vt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(N,D),i=Math.imul(N,F),i=i+Math.imul(x,D)|0,s=Math.imul(x,F),n=n+Math.imul(T,K)|0,i=i+Math.imul(T,Q)|0,i=i+Math.imul(j,K)|0,s=s+Math.imul(j,Q)|0,n=n+Math.imul(A,H)|0,i=i+Math.imul(A,q)|0,i=i+Math.imul(E,H)|0,s=s+Math.imul(E,q)|0,n=n+Math.imul(I,G)|0,i=i+Math.imul(I,J)|0,i=i+Math.imul(M,G)|0,s=s+Math.imul(M,J)|0,n=n+Math.imul(k,$)|0,i=i+Math.imul(k,tt)|0,i=i+Math.imul(S,$)|0,s=s+Math.imul(S,tt)|0,n=n+Math.imul(f,rt)|0,i=i+Math.imul(f,nt)|0,i=i+Math.imul(y,rt)|0,s=s+Math.imul(y,nt)|0,n=n+Math.imul(g,st)|0,i=i+Math.imul(g,ot)|0,i=i+Math.imul(m,st)|0,s=s+Math.imul(m,ot)|0,n=n+Math.imul(h,ct)|0,i=i+Math.imul(h,ut)|0,i=i+Math.imul(d,ct)|0,s=s+Math.imul(d,ut)|0;var It=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(P,D),i=Math.imul(P,F),i=i+Math.imul(R,D)|0,s=Math.imul(R,F),n=n+Math.imul(N,K)|0,i=i+Math.imul(N,Q)|0,i=i+Math.imul(x,K)|0,s=s+Math.imul(x,Q)|0,n=n+Math.imul(T,H)|0,i=i+Math.imul(T,q)|0,i=i+Math.imul(j,H)|0,s=s+Math.imul(j,q)|0,n=n+Math.imul(A,G)|0,i=i+Math.imul(A,J)|0,i=i+Math.imul(E,G)|0,s=s+Math.imul(E,J)|0,n=n+Math.imul(I,$)|0,i=i+Math.imul(I,tt)|0,i=i+Math.imul(M,$)|0,s=s+Math.imul(M,tt)|0,n=n+Math.imul(k,rt)|0,i=i+Math.imul(k,nt)|0,i=i+Math.imul(S,rt)|0,s=s+Math.imul(S,nt)|0,n=n+Math.imul(f,st)|0,i=i+Math.imul(f,ot)|0,i=i+Math.imul(y,st)|0,s=s+Math.imul(y,ot)|0,n=n+Math.imul(g,ct)|0,i=i+Math.imul(g,ut)|0,i=i+Math.imul(m,ct)|0,s=s+Math.imul(m,ut)|0,n=n+Math.imul(h,ht)|0,i=i+Math.imul(h,dt)|0,i=i+Math.imul(d,ht)|0,s=s+Math.imul(d,dt)|0;var Mt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(U,D),i=Math.imul(U,F),i=i+Math.imul(W,D)|0,s=Math.imul(W,F),n=n+Math.imul(P,K)|0,i=i+Math.imul(P,Q)|0,i=i+Math.imul(R,K)|0,s=s+Math.imul(R,Q)|0,n=n+Math.imul(N,H)|0,i=i+Math.imul(N,q)|0,i=i+Math.imul(x,H)|0,s=s+Math.imul(x,q)|0,n=n+Math.imul(T,G)|0,i=i+Math.imul(T,J)|0,i=i+Math.imul(j,G)|0,s=s+Math.imul(j,J)|0,n=n+Math.imul(A,$)|0,i=i+Math.imul(A,tt)|0,i=i+Math.imul(E,$)|0,s=s+Math.imul(E,tt)|0,n=n+Math.imul(I,rt)|0,i=i+Math.imul(I,nt)|0,i=i+Math.imul(M,rt)|0,s=s+Math.imul(M,nt)|0,n=n+Math.imul(k,st)|0,i=i+Math.imul(k,ot)|0,i=i+Math.imul(S,st)|0,s=s+Math.imul(S,ot)|0,n=n+Math.imul(f,ct)|0,i=i+Math.imul(f,ut)|0,i=i+Math.imul(y,ct)|0,s=s+Math.imul(y,ut)|0,n=n+Math.imul(g,ht)|0,i=i+Math.imul(g,dt)|0,i=i+Math.imul(m,ht)|0,s=s+Math.imul(m,dt)|0,n=n+Math.imul(h,gt)|0,i=i+Math.imul(h,mt)|0,i=i+Math.imul(d,gt)|0,s=s+Math.imul(d,mt)|0;var _t=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(U,K),i=Math.imul(U,Q),i=i+Math.imul(W,K)|0,s=Math.imul(W,Q),n=n+Math.imul(P,H)|0,i=i+Math.imul(P,q)|0,i=i+Math.imul(R,H)|0,s=s+Math.imul(R,q)|0,n=n+Math.imul(N,G)|0,i=i+Math.imul(N,J)|0,i=i+Math.imul(x,G)|0,s=s+Math.imul(x,J)|0,n=n+Math.imul(T,$)|0,i=i+Math.imul(T,tt)|0,i=i+Math.imul(j,$)|0,s=s+Math.imul(j,tt)|0,n=n+Math.imul(A,rt)|0,i=i+Math.imul(A,nt)|0,i=i+Math.imul(E,rt)|0,s=s+Math.imul(E,nt)|0,n=n+Math.imul(I,st)|0,i=i+Math.imul(I,ot)|0,i=i+Math.imul(M,st)|0,s=s+Math.imul(M,ot)|0,n=n+Math.imul(k,ct)|0,i=i+Math.imul(k,ut)|0,i=i+Math.imul(S,ct)|0,s=s+Math.imul(S,ut)|0,n=n+Math.imul(f,ht)|0,i=i+Math.imul(f,dt)|0,i=i+Math.imul(y,ht)|0,s=s+Math.imul(y,dt)|0,n=n+Math.imul(g,gt)|0,i=i+Math.imul(g,mt)|0,i=i+Math.imul(m,gt)|0,s=s+Math.imul(m,mt)|0;var At=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(U,H),i=Math.imul(U,q),i=i+Math.imul(W,H)|0,s=Math.imul(W,q),n=n+Math.imul(P,G)|0,i=i+Math.imul(P,J)|0,i=i+Math.imul(R,G)|0,s=s+Math.imul(R,J)|0,n=n+Math.imul(N,$)|0,i=i+Math.imul(N,tt)|0,i=i+Math.imul(x,$)|0,s=s+Math.imul(x,tt)|0,n=n+Math.imul(T,rt)|0,i=i+Math.imul(T,nt)|0,i=i+Math.imul(j,rt)|0,s=s+Math.imul(j,nt)|0,n=n+Math.imul(A,st)|0,i=i+Math.imul(A,ot)|0,i=i+Math.imul(E,st)|0,s=s+Math.imul(E,ot)|0,n=n+Math.imul(I,ct)|0,i=i+Math.imul(I,ut)|0,i=i+Math.imul(M,ct)|0,s=s+Math.imul(M,ut)|0,n=n+Math.imul(k,ht)|0,i=i+Math.imul(k,dt)|0,i=i+Math.imul(S,ht)|0,s=s+Math.imul(S,dt)|0,n=n+Math.imul(f,gt)|0,i=i+Math.imul(f,mt)|0,i=i+Math.imul(y,gt)|0,s=s+Math.imul(y,mt)|0;var Et=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(U,G),i=Math.imul(U,J),i=i+Math.imul(W,G)|0,s=Math.imul(W,J),n=n+Math.imul(P,$)|0,i=i+Math.imul(P,tt)|0,i=i+Math.imul(R,$)|0,s=s+Math.imul(R,tt)|0,n=n+Math.imul(N,rt)|0,i=i+Math.imul(N,nt)|0,i=i+Math.imul(x,rt)|0,s=s+Math.imul(x,nt)|0,n=n+Math.imul(T,st)|0,i=i+Math.imul(T,ot)|0,i=i+Math.imul(j,st)|0,s=s+Math.imul(j,ot)|0,n=n+Math.imul(A,ct)|0,i=i+Math.imul(A,ut)|0,i=i+Math.imul(E,ct)|0,s=s+Math.imul(E,ut)|0,n=n+Math.imul(I,ht)|0,i=i+Math.imul(I,dt)|0,i=i+Math.imul(M,ht)|0,s=s+Math.imul(M,dt)|0,n=n+Math.imul(k,gt)|0,i=i+Math.imul(k,mt)|0,i=i+Math.imul(S,gt)|0,s=s+Math.imul(S,mt)|0;var Ot=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(U,$),i=Math.imul(U,tt),i=i+Math.imul(W,$)|0,s=Math.imul(W,tt),n=n+Math.imul(P,rt)|0,i=i+Math.imul(P,nt)|0,i=i+Math.imul(R,rt)|0,s=s+Math.imul(R,nt)|0,n=n+Math.imul(N,st)|0,i=i+Math.imul(N,ot)|0,i=i+Math.imul(x,st)|0,s=s+Math.imul(x,ot)|0,n=n+Math.imul(T,ct)|0,i=i+Math.imul(T,ut)|0,i=i+Math.imul(j,ct)|0,s=s+Math.imul(j,ut)|0,n=n+Math.imul(A,ht)|0,i=i+Math.imul(A,dt)|0,i=i+Math.imul(E,ht)|0,s=s+Math.imul(E,dt)|0,n=n+Math.imul(I,gt)|0,i=i+Math.imul(I,mt)|0,i=i+Math.imul(M,gt)|0,s=s+Math.imul(M,mt)|0;var Tt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(U,rt),i=Math.imul(U,nt),i=i+Math.imul(W,rt)|0,s=Math.imul(W,nt),n=n+Math.imul(P,st)|0,i=i+Math.imul(P,ot)|0,i=i+Math.imul(R,st)|0,s=s+Math.imul(R,ot)|0,n=n+Math.imul(N,ct)|0,i=i+Math.imul(N,ut)|0,i=i+Math.imul(x,ct)|0,s=s+Math.imul(x,ut)|0,n=n+Math.imul(T,ht)|0,i=i+Math.imul(T,dt)|0,i=i+Math.imul(j,ht)|0,s=s+Math.imul(j,dt)|0,n=n+Math.imul(A,gt)|0,i=i+Math.imul(A,mt)|0,i=i+Math.imul(E,gt)|0,s=s+Math.imul(E,mt)|0;var jt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(jt>>>26)|0,jt&=67108863,n=Math.imul(U,st),i=Math.imul(U,ot),i=i+Math.imul(W,st)|0,s=Math.imul(W,ot),n=n+Math.imul(P,ct)|0,i=i+Math.imul(P,ut)|0,i=i+Math.imul(R,ct)|0,s=s+Math.imul(R,ut)|0,n=n+Math.imul(N,ht)|0,i=i+Math.imul(N,dt)|0,i=i+Math.imul(x,ht)|0,s=s+Math.imul(x,dt)|0,n=n+Math.imul(T,gt)|0,i=i+Math.imul(T,mt)|0,i=i+Math.imul(j,gt)|0,s=s+Math.imul(j,mt)|0;var Bt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(U,ct),i=Math.imul(U,ut),i=i+Math.imul(W,ct)|0,s=Math.imul(W,ut),n=n+Math.imul(P,ht)|0,i=i+Math.imul(P,dt)|0,i=i+Math.imul(R,ht)|0,s=s+Math.imul(R,dt)|0,n=n+Math.imul(N,gt)|0,i=i+Math.imul(N,mt)|0,i=i+Math.imul(x,gt)|0,s=s+Math.imul(x,mt)|0;var Nt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,n=Math.imul(U,ht),i=Math.imul(U,dt),i=i+Math.imul(W,ht)|0,s=Math.imul(W,dt),n=n+Math.imul(P,gt)|0,i=i+Math.imul(P,mt)|0,i=i+Math.imul(R,gt)|0,s=s+Math.imul(R,mt)|0;var xt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(U,gt),i=Math.imul(U,mt),i=i+Math.imul(W,gt)|0,s=Math.imul(W,mt);var Lt=(u+n|0)+((8191&i)<<13)|0;return u=(s+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,c[0]=bt,c[1]=ft,c[2]=yt,c[3]=wt,c[4]=kt,c[5]=St,c[6]=vt,c[7]=It,c[8]=Mt,c[9]=_t,c[10]=At,c[11]=Et,c[12]=Ot,c[13]=Tt,c[14]=jt,c[15]=Bt,c[16]=Nt,c[17]=xt,c[18]=Lt,0!==u&&(c[19]=u,r.length++),r};function w(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,s=0;s<r.length-1;s++){var o=i;i=0;for(var a=67108863&n,c=Math.min(s,e.length-1),u=Math.max(0,s-t.length+1);u<=c;u++){var l=s-u,h=0|t.words[l],d=0|e.words[u],p=h*d,g=67108863&p;o=o+(p/67108864|0)|0,g=g+a|0,a=67108863&g,o=o+(g>>>26)|0,i+=o>>>26,o&=67108863}r.words[s]=a,n=o,o=i}return 0!==n?r.words[s]=n:r.length--,r._strip()}function k(t,e,r){return w(t,e,r)}function S(t,e){this.x=t,this.y=e}Math.imul||(y=f),s.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return r=10===this.length&&10===t.length?y(this,t,e):n<63?f(this,t,e):n<1024?w(this,t,e):k(this,t,e),r},S.prototype.makeRBT=function(t){for(var e=new Array(t),r=s.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},S.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},S.prototype.permute=function(t,e,r,n,i,s){for(var o=0;o<s;o++)n[o]=e[t[o]],i[o]=r[t[o]]},S.prototype.transform=function(t,e,r,n,i,s){this.permute(s,t,e,r,n,i);for(var o=1;o<i;o<<=1)for(var a=o<<1,c=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var h=c,d=u,p=0;p<o;p++){var g=r[l+p],m=n[l+p],b=r[l+p+o],f=n[l+p+o],y=h*b-d*f;f=h*f+d*b,b=y,r[l+p]=g+b,n[l+p]=m+f,r[l+p+o]=g-b,n[l+p+o]=m-f,p!==a&&(y=c*h-u*d,d=c*d+u*h,h=y)}},S.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},S.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},S.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},S.prototype.convert13b=function(t,e,r,i){for(var s=0,o=0;o<e;o++)s+=0|t[o],r[2*o]=8191&s,s>>>=13,r[2*o+1]=8191&s,s>>>=13;for(o=2*e;o<i;++o)r[o]=0;n(0===s),n(0===(-8192&s))},S.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},S.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),s=this.stub(n),o=new Array(n),a=new Array(n),c=new Array(n),u=new Array(n),l=new Array(n),h=new Array(n),d=r.words;d.length=n,this.convert13b(t.words,t.length,o,n),this.convert13b(e.words,e.length,u,n),this.transform(o,s,a,c,n,i),this.transform(u,s,l,h,n,i);for(var p=0;p<n;p++){var g=a[p]*l[p]-c[p]*h[p];c[p]=a[p]*h[p]+c[p]*l[p],a[p]=g}return this.conjugate(a,c,n),this.transform(a,c,d,s,n,i),this.conjugate(d,s,n),this.normalize13b(d,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r._strip()},s.prototype.mul=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},s.prototype.mulf=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),k(this,t,e)},s.prototype.imul=function(t){return this.clone().mulTo(t,this)},s.prototype.imuln=function(t){var e=t<0;e&&(t=-t),n("number"===typeof t),n(t<67108864);for(var r=0,i=0;i<this.length;i++){var s=(0|this.words[i])*t,o=(67108863&s)+(67108863&r);r>>=26,r+=s/67108864|0,r+=o>>>26,this.words[i]=67108863&o}return 0!==r&&(this.words[i]=r,this.length++),e?this.ineg():this},s.prototype.muln=function(t){return this.clone().imuln(t)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(t){var e=b(t);if(0===e.length)return new s(1);for(var r=this,n=0;n<e.length;n++,r=r.sqr())if(0!==e[n])break;if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},s.prototype.iushln=function(t){n("number"===typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,s=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(e=0;e<this.length;e++){var a=this.words[e]&s,c=(0|this.words[e])-a<<r;this.words[e]=c|o,o=a>>>26-r}o&&(this.words[e]=o,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this._strip()},s.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},s.prototype.iushrn=function(t,e,r){var i;n("number"===typeof t&&t>=0),i=e?(e-e%26)/26:0;var s=t%26,o=Math.min((t-s)/26,this.length),a=67108863^67108863>>>s<<s,c=r;if(i-=o,i=Math.max(0,i),c){for(var u=0;u<o;u++)c.words[u]=this.words[u];c.length=o}if(0===o);else if(this.length>o)for(this.length-=o,u=0;u<this.length;u++)this.words[u]=this.words[u+o];else this.words[0]=0,this.length=1;var l=0;for(u=this.length-1;u>=0&&(0!==l||u>=i);u--){var h=0|this.words[u];this.words[u]=l<<26-s|h>>>s,l=h&a}return c&&0!==l&&(c.words[c.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},s.prototype.shln=function(t){return this.clone().ishln(t)},s.prototype.ushln=function(t){return this.clone().iushln(t)},s.prototype.shrn=function(t){return this.clone().ishrn(t)},s.prototype.ushrn=function(t){return this.clone().iushrn(t)},s.prototype.testn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return!1;var s=this.words[r];return!!(s&i)},s.prototype.imaskn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this._strip()},s.prototype.maskn=function(t){return this.clone().imaskn(t)},s.prototype.iaddn=function(t){return n("number"===typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},s.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},s.prototype.isubn=function(t){if(n("number"===typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},s.prototype.addn=function(t){return this.clone().iaddn(t)},s.prototype.subn=function(t){return this.clone().isubn(t)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(t,e,r){var i,s,o=t.length+r;this._expand(o);var a=0;for(i=0;i<t.length;i++){s=(0|this.words[i+r])+a;var c=(0|t.words[i])*e;s-=67108863&c,a=(s>>26)-(c/67108864|0),this.words[i+r]=67108863&s}for(;i<this.length-r;i++)s=(0|this.words[i+r])+a,a=s>>26,this.words[i+r]=67108863&s;if(0===a)return this._strip();for(n(-1===a),a=0,i=0;i<this.length;i++)s=-(0|this.words[i])+a,a=s>>26,this.words[i]=67108863&s;return this.negative=1,this._strip()},s.prototype._wordDiv=function(t,e){var r=this.length-t.length,n=this.clone(),i=t,o=0|i.words[i.length-1],a=this._countBits(o);r=26-a,0!==r&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var c,u=n.length-i.length;if("mod"!==e){c=new s(null),c.length=u+1,c.words=new Array(c.length);for(var l=0;l<c.length;l++)c.words[l]=0}var h=n.clone()._ishlnsubmul(i,1,u);0===h.negative&&(n=h,c&&(c.words[u]=1));for(var d=u-1;d>=0;d--){var p=67108864*(0|n.words[i.length+d])+(0|n.words[i.length+d-1]);p=Math.min(p/o|0,67108863),n._ishlnsubmul(i,p,d);while(0!==n.negative)p--,n.negative=0,n._ishlnsubmul(i,1,d),n.isZero()||(n.negative^=1);c&&(c.words[d]=p)}return c&&c._strip(),n._strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:c||null,mod:n}},s.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(o=a.mod.neg(),r&&0!==o.negative&&o.iadd(t)),{div:i,mod:o}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(o=a.mod.neg(),r&&0!==o.negative&&o.isub(t)),{div:a.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new s(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new s(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new s(this.modrn(t.words[0]))}:this._wordDiv(t,e);var i,o,a},s.prototype.div=function(t){return this.divmod(t,"div",!1).div},s.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},s.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},s.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),s=r.cmp(n);return s<0||1===i&&0===s?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},s.prototype.modrn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=(1<<26)%t,i=0,s=this.length-1;s>=0;s--)i=(r*i+(0|this.words[s]))%t;return e?-i:i},s.prototype.modn=function(t){return this.modrn(t)},s.prototype.idivn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var s=(0|this.words[i])+67108864*r;this.words[i]=s/t|0,r=s%t}return this._strip(),e?this.ineg():this},s.prototype.divn=function(t){return this.clone().idivn(t)},s.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();var i=new s(1),o=new s(0),a=new s(0),c=new s(1),u=0;while(e.isEven()&&r.isEven())e.iushrn(1),r.iushrn(1),++u;var l=r.clone(),h=e.clone();while(!e.isZero()){for(var d=0,p=1;0===(e.words[0]&p)&&d<26;++d,p<<=1);if(d>0){e.iushrn(d);while(d-- >0)(i.isOdd()||o.isOdd())&&(i.iadd(l),o.isub(h)),i.iushrn(1),o.iushrn(1)}for(var g=0,m=1;0===(r.words[0]&m)&&g<26;++g,m<<=1);if(g>0){r.iushrn(g);while(g-- >0)(a.isOdd()||c.isOdd())&&(a.iadd(l),c.isub(h)),a.iushrn(1),c.iushrn(1)}e.cmp(r)>=0?(e.isub(r),i.isub(a),o.isub(c)):(r.isub(e),a.isub(i),c.isub(o))}return{a:a,b:c,gcd:r.iushln(u)}},s.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();var i,o=new s(1),a=new s(0),c=r.clone();while(e.cmpn(1)>0&&r.cmpn(1)>0){for(var u=0,l=1;0===(e.words[0]&l)&&u<26;++u,l<<=1);if(u>0){e.iushrn(u);while(u-- >0)o.isOdd()&&o.iadd(c),o.iushrn(1)}for(var h=0,d=1;0===(r.words[0]&d)&&h<26;++h,d<<=1);if(h>0){r.iushrn(h);while(h-- >0)a.isOdd()&&a.iadd(c),a.iushrn(1)}e.cmp(r)>=0?(e.isub(r),o.isub(a)):(r.isub(e),a.isub(o))}return i=0===e.cmpn(1)?o:a,i.cmpn(0)<0&&i.iadd(t),i},s.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);do{while(e.isEven())e.iushrn(1);while(r.isEven())r.iushrn(1);var i=e.cmp(r);if(i<0){var s=e;e=r,r=s}else if(0===i||0===r.cmpn(1))break;e.isub(r)}while(1);return r.iushln(n)},s.prototype.invm=function(t){return this.egcd(t).a.umod(t)},s.prototype.isEven=function(){return 0===(1&this.words[0])},s.prototype.isOdd=function(){return 1===(1&this.words[0])},s.prototype.andln=function(t){return this.words[0]&t},s.prototype.bincn=function(t){n("number"===typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var s=i,o=r;0!==s&&o<this.length;o++){var a=0|this.words[o];a+=s,s=a>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},s.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},s.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},s.prototype.gtn=function(t){return 1===this.cmpn(t)},s.prototype.gt=function(t){return 1===this.cmp(t)},s.prototype.gten=function(t){return this.cmpn(t)>=0},s.prototype.gte=function(t){return this.cmp(t)>=0},s.prototype.ltn=function(t){return-1===this.cmpn(t)},s.prototype.lt=function(t){return-1===this.cmp(t)},s.prototype.lten=function(t){return this.cmpn(t)<=0},s.prototype.lte=function(t){return this.cmp(t)<=0},s.prototype.eqn=function(t){return 0===this.cmpn(t)},s.prototype.eq=function(t){return 0===this.cmp(t)},s.red=function(t){return new O(t)},s.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(t){return this.red=t,this},s.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},s.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},s.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},s.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},s.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},s.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},s.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},s.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var v={k256:null,p224:null,p192:null,p25519:null};function I(t,e){this.name=t,this.p=new s(e,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function M(){I.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){I.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function A(){I.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function E(){I.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function O(t){if("string"===typeof t){var e=s._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function T(t){O.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}I.prototype._tmp=function(){var t=new s(null);return t.words=new Array(Math.ceil(this.n/13)),t},I.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),e=r.bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},I.prototype.split=function(t,e){t.iushrn(this.n,0,e)},I.prototype.imulK=function(t){return t.imul(this.k)},i(M,I),M.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(e.words[e.length++]=s&r,i=10;i<t.length;i++){var o=0|t.words[i];t.words[i-10]=(o&r)<<4|s>>>22,s=o}s>>>=22,t.words[i-10]=s,0===s&&t.length>10?t.length-=10:t.length-=9},M.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(_,I),i(A,I),i(E,I),E.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},s._prime=function(t){if(v[t])return v[t];var e;if("k256"===t)e=new M;else if("p224"===t)e=new _;else if("p192"===t)e=new A;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new E}return v[t]=e,e},O.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},O.prototype._verify2=function(t,e){n(0===(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},O.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(l(t,t.umod(this.m)._forceRed(this)),t)},O.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},O.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},O.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},O.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},O.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},O.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},O.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},O.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},O.prototype.isqr=function(t){return this.imul(t,t.clone())},O.prototype.sqr=function(t){return this.mul(t,t)},O.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2===1),3===e){var r=this.m.add(new s(1)).iushrn(2);return this.pow(t,r)}var i=this.m.subn(1),o=0;while(!i.isZero()&&0===i.andln(1))o++,i.iushrn(1);n(!i.isZero());var a=new s(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),l=this.m.bitLength();l=new s(2*l*l).toRed(this);while(0!==this.pow(l,u).cmp(c))l.redIAdd(c);var h=this.pow(l,i),d=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),g=o;while(0!==p.cmp(a)){for(var m=p,b=0;0!==m.cmp(a);b++)m=m.redSqr();n(b<g);var f=this.pow(h,new s(1).iushln(g-b-1));d=d.redMul(f),h=f.redSqr(),p=p.redMul(h),g=b}return d},O.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},O.prototype.pow=function(t,e){if(e.isZero())return new s(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=4,n=new Array(1<<r);n[0]=new s(1).toRed(this),n[1]=t;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],t);var o=n[0],a=0,c=0,u=e.bitLength()%26;for(0===u&&(u=26),i=e.length-1;i>=0;i--){for(var l=e.words[i],h=u-1;h>=0;h--){var d=l>>h&1;o!==n[0]&&(o=this.sqr(o)),0!==d||0!==a?(a<<=1,a|=d,c++,(c===r||0===i&&0===h)&&(o=this.mul(o,n[a]),c=0,a=0)):c=0}u=26}return o},O.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},O.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},s.mont=function(t){return new T(t)},i(T,O),T.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},T.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},T.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},T.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new s(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},T.prototype.invm=function(t){var e=this.imod(t._invmp(this.m).mul(this.r2));return e._forceRed(this)}}(t,this)}).call(this,r("62e4")(t))},"8ab6":function(t,e,r){var n=r("42a7"),i="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";t.exports=n(i)},"8bad":function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r("7ee5"),i=r("b675"),s=r("52c3"),o=r("64b9");const a="Torus";class c extends n["a"]{constructor({params:t={showTorusButton:!1}}={params:{showTorusButton:!1}}){super(),this.name=a,this.url="https://tor.us",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzMiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMyAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYuNSIgY3k9IjE2IiByPSIxNiIgZmlsbD0iIzAzNjRGRiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTExLjIxODYgOS40OTIxOUMxMC40NTM5IDkuNDkyMTkgOS44MzM5OCAxMC4xMTIxIDkuODMzOTggMTAuODc2OFYxMi40ODk4QzkuODMzOTggMTMuMjU0NSAxMC40NTM5IDEzLjg3NDQgMTEuMjE4NiAxMy44NzQ0SDEzLjY2ODRWMjIuODk3NkMxMy42Njg0IDIzLjY2MjMgMTQuMjg4MyAyNC4yODIyIDE1LjA1MyAyNC4yODIySDE2LjY2NkMxNy40MzA3IDI0LjI4MjIgMTguMDUwNiAyMy42NjIzIDE4LjA1MDYgMjIuODk3NlYxMi41MDE1QzE4LjA1MDYgMTIuNDk3NiAxOC4wNTA2IDEyLjQ5MzcgMTguMDUwNiAxMi40ODk4VjEwLjg3NjhDMTguMDUwNiAxMC4xMTIxIDE3LjQzMDcgOS40OTIxOSAxNi42NjYgOS40OTIxOUgxNS4wNTNIMTEuMjE4NloiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yMS4zMzc2IDEzLjg3NDRDMjIuNTQ3NyAxMy44NzQ0IDIzLjUyODcgMTIuODkzNCAyMy41Mjg3IDExLjY4MzNDMjMuNTI4NyAxMC40NzMyIDIyLjU0NzcgOS40OTIxOSAyMS4zMzc2IDkuNDkyMTlDMjAuMTI3NSA5LjQ5MjE5IDE5LjE0NjUgMTAuNDczMiAxOS4xNDY1IDExLjY4MzNDMTkuMTQ2NSAxMi44OTM0IDIwLjEyNzUgMTMuODc0NCAyMS4zMzc2IDEzLjg3NDRaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K",this.supportedTransactionVersions=null,this._readyState="undefined"===typeof window||"undefined"===typeof document?i["b"].Unsupported:i["b"].Loadable,this._connecting=!1,this._wallet=null,this._publicKey=null,this._params=t}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){var t;return!(null===(t=this._wallet)||void 0===t||!t.isLoggedIn)}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==i["b"].Loadable)throw new s["i"];let e,n,a,c;this._connecting=!0;try{e=(await r.e("chunk-edfaba38").then(r.bind(null,"b5dd"))).default}catch(t){throw new s["g"](null===t||void 0===t?void 0:t.message,t)}try{n=window.torus||new e}catch(t){throw new s["b"](null===t||void 0===t?void 0:t.message,t)}if(!n.isInitialized)try{await n.init(this._params)}catch(t){throw new s["c"](null===t||void 0===t?void 0:t.message,t)}try{a=await n.login()}catch(t){throw new s["a"](null===t||void 0===t?void 0:t.message,t)}try{c=new o["e"](a[0])}catch(t){throw new s["j"](null===t||void 0===t?void 0:t.message,t)}this._wallet=n,this._publicKey=c,this.emit("connect",c)}catch(t){throw this.emit("error",t),t}finally{this._connecting=!1}}async disconnect(){const t=this._wallet;if(t){this._wallet=null,this._publicKey=null;try{t.isLoggedIn&&await t.cleanUp()}catch(e){this.emit("error",new s["e"](null===e||void 0===e?void 0:e.message,e))}}this.emit("disconnect")}async sendTransaction(t,e,r={}){try{const i=this._wallet;if(!i)throw new s["h"];try{const{signers:n,...s}=r;t=await this.prepareTransaction(t,e,s),(null===n||void 0===n?void 0:n.length)&&t.partialSign(...n),s.preflightCommitment=s.preflightCommitment||e.commitment;const{signature:o}=await i.signAndSendTransaction(t,s);return o}catch(n){if(n instanceof s["f"])throw n;throw new s["k"](null===n||void 0===n?void 0:n.message,n)}}catch(n){throw this.emit("error",n),n}}async signTransaction(t){try{const r=this._wallet;if(!r)throw new s["h"];try{return await r.signTransaction(t)||t}catch(e){throw new s["m"](null===e||void 0===e?void 0:e.message,e)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(t){try{const r=this._wallet;if(!r)throw new s["h"];try{return await r.signAllTransactions(t)||t}catch(e){throw new s["m"](null===e||void 0===e?void 0:e.message,e)}}catch(e){throw this.emit("error",e),e}}async signMessage(t){try{const r=this._wallet;if(!r)throw new s["h"];try{return await r.signMessage(t)}catch(e){throw new s["l"](null===e||void 0===e?void 0:e.message,e)}}catch(e){throw this.emit("error",e),e}}}},"8df2":function(t,e,r){"use strict";
/**
 * Support for translating between Uint8Array instances and JavaScript
 * native types.
 *
 * {@link module:Layout~Layout|Layout} is the basis of a class
 * hierarchy that associates property names with sequences of encoded
 * bytes.
 *
 * Layouts are supported for these scalar (numeric) types:
 * * {@link module:Layout~UInt|Unsigned integers in little-endian
 *   format} with {@link module:Layout.u8|8-bit}, {@link
 *   module:Layout.u16|16-bit}, {@link module:Layout.u24|24-bit},
 *   {@link module:Layout.u32|32-bit}, {@link
 *   module:Layout.u40|40-bit}, and {@link module:Layout.u48|48-bit}
 *   representation ranges;
 * * {@link module:Layout~UIntBE|Unsigned integers in big-endian
 *   format} with {@link module:Layout.u16be|16-bit}, {@link
 *   module:Layout.u24be|24-bit}, {@link module:Layout.u32be|32-bit},
 *   {@link module:Layout.u40be|40-bit}, and {@link
 *   module:Layout.u48be|48-bit} representation ranges;
 * * {@link module:Layout~Int|Signed integers in little-endian
 *   format} with {@link module:Layout.s8|8-bit}, {@link
 *   module:Layout.s16|16-bit}, {@link module:Layout.s24|24-bit},
 *   {@link module:Layout.s32|32-bit}, {@link
 *   module:Layout.s40|40-bit}, and {@link module:Layout.s48|48-bit}
 *   representation ranges;
 * * {@link module:Layout~IntBE|Signed integers in big-endian format}
 *   with {@link module:Layout.s16be|16-bit}, {@link
 *   module:Layout.s24be|24-bit}, {@link module:Layout.s32be|32-bit},
 *   {@link module:Layout.s40be|40-bit}, and {@link
 *   module:Layout.s48be|48-bit} representation ranges;
 * * 64-bit integral values that decode to an exact (if magnitude is
 *   less than 2^53) or nearby integral Number in {@link
 *   module:Layout.nu64|unsigned little-endian}, {@link
 *   module:Layout.nu64be|unsigned big-endian}, {@link
 *   module:Layout.ns64|signed little-endian}, and {@link
 *   module:Layout.ns64be|unsigned big-endian} encodings;
 * * 32-bit floating point values with {@link
 *   module:Layout.f32|little-endian} and {@link
 *   module:Layout.f32be|big-endian} representations;
 * * 64-bit floating point values with {@link
 *   module:Layout.f64|little-endian} and {@link
 *   module:Layout.f64be|big-endian} representations;
 * * {@link module:Layout.const|Constants} that take no space in the
 *   encoded expression.
 *
 * and for these aggregate types:
 * * {@link module:Layout.seq|Sequence}s of instances of a {@link
 *   module:Layout~Layout|Layout}, with JavaScript representation as
 *   an Array and constant or data-dependent {@link
 *   module:Layout~Sequence#count|length};
 * * {@link module:Layout.struct|Structure}s that aggregate a
 *   heterogeneous sequence of {@link module:Layout~Layout|Layout}
 *   instances, with JavaScript representation as an Object;
 * * {@link module:Layout.union|Union}s that support multiple {@link
 *   module:Layout~VariantLayout|variant layouts} over a fixed
 *   (padded) or variable (not padded) span of bytes, using an
 *   unsigned integer at the start of the data or a separate {@link
 *   module:Layout.unionLayoutDiscriminator|layout element} to
 *   determine which layout to use when interpreting the buffer
 *   contents;
 * * {@link module:Layout.bits|BitStructure}s that contain a sequence
 *   of individual {@link
 *   module:Layout~BitStructure#addField|BitField}s packed into an 8,
 *   16, 24, or 32-bit unsigned integer starting at the least- or
 *   most-significant bit;
 * * {@link module:Layout.cstr|C strings} of varying length;
 * * {@link module:Layout.blob|Blobs} of fixed- or variable-{@link
 *   module:Layout~Blob#length|length} raw data.
 *
 * All {@link module:Layout~Layout|Layout} instances are immutable
 * after construction, to prevent internal state from becoming
 * inconsistent.
 *
 * @local Layout
 * @local ExternalLayout
 * @local GreedyCount
 * @local OffsetLayout
 * @local UInt
 * @local UIntBE
 * @local Int
 * @local IntBE
 * @local NearUInt64
 * @local NearUInt64BE
 * @local NearInt64
 * @local NearInt64BE
 * @local Float
 * @local FloatBE
 * @local Double
 * @local DoubleBE
 * @local Sequence
 * @local Structure
 * @local UnionDiscriminator
 * @local UnionLayoutDiscriminator
 * @local Union
 * @local VariantLayout
 * @local BitStructure
 * @local BitField
 * @local Boolean
 * @local Blob
 * @local CString
 * @local Constant
 * @local bindConstructorLayout
 * @module Layout
 * @license MIT
 * @author Peter A. Bigot
 * @see {@link https://github.com/pabigot/buffer-layout|buffer-layout on GitHub}
 */r("d9e2"),r("14d9"),r("13d5"),r("907a"),r("986a"),r("1d02"),r("3c5d"),r("6ce5"),r("2834"),r("4ea1"),r("669d"),r("109c"),r("b2c1"),r("0643"),r("9d4a"),Object.defineProperty(e,"__esModule",{value:!0}),e.s16=e.s8=e.nu64be=e.u48be=e.u40be=e.u32be=e.u24be=e.u16be=e.nu64=e.u48=e.u40=e.u32=e.u24=e.u16=e.u8=e.offset=e.greedy=e.Constant=e.UTF8=e.CString=e.Blob=e.Boolean=e.BitField=e.BitStructure=e.VariantLayout=e.Union=e.UnionLayoutDiscriminator=e.UnionDiscriminator=e.Structure=e.Sequence=e.DoubleBE=e.Double=e.FloatBE=e.Float=e.NearInt64BE=e.NearInt64=e.NearUInt64BE=e.NearUInt64=e.IntBE=e.Int=e.UIntBE=e.UInt=e.OffsetLayout=e.GreedyCount=e.ExternalLayout=e.bindConstructorLayout=e.nameWithProperty=e.Layout=e.uint8ArrayToBuffer=e.checkUint8Array=void 0,e.constant=e.utf8=e.cstr=e.blob=e.unionLayoutDiscriminator=e.union=e.seq=e.bits=e.struct=e.f64be=e.f64=e.f32be=e.f32=e.ns64be=e.s48be=e.s40be=e.s32be=e.s24be=e.s16be=e.ns64=e.s48=e.s40=e.s32=e.s24=void 0;const n=r("1c35");function i(t){if(!(t instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function s(t){return i(t),n.Buffer.from(t.buffer,t.byteOffset,t.length)}e.checkUint8Array=i,e.uint8ArrayToBuffer=s;class o{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}function a(t,e){return e.property?t+"["+e.property+"]":t}function c(t,e){if("function"!==typeof t)throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(t,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof o))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");t.layout_=e,e.boundConstructor_=t,e.makeDestinationObject=()=>new t,Object.defineProperty(t.prototype,"encode",{value(t,r){return e.encode(this,t,r)},writable:!0}),Object.defineProperty(t,"decode",{value(t,r){return e.decode(t,r)},writable:!0})}e.Layout=o,e.nameWithProperty=a,e.bindConstructorLayout=c;class u extends o{isCount(){throw new Error("ExternalLayout is abstract")}}e.ExternalLayout=u;class l extends u{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){i(t);const r=t.length-e;return Math.floor(r/this.elementSpan)}encode(t,e,r){return 0}}e.GreedyCount=l;class h extends u{constructor(t,e=0,r){if(!(t instanceof o))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof d||this.layout instanceof p}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,r=0){return this.layout.encode(t,e,r+this.offset)}}e.OffsetLayout=h;class d extends o{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return s(t).readUIntLE(e,this.span)}encode(t,e,r=0){return s(e).writeUIntLE(t,r,this.span),this.span}}e.UInt=d;class p extends o{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return s(t).readUIntBE(e,this.span)}encode(t,e,r=0){return s(e).writeUIntBE(t,r,this.span),this.span}}e.UIntBE=p;class g extends o{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return s(t).readIntLE(e,this.span)}encode(t,e,r=0){return s(e).writeIntLE(t,r,this.span),this.span}}e.Int=g;class m extends o{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return s(t).readIntBE(e,this.span)}encode(t,e,r=0){return s(e).writeIntBE(t,r,this.span),this.span}}e.IntBE=m;const b=Math.pow(2,32);function f(t){const e=Math.floor(t/b),r=t-e*b;return{hi32:e,lo32:r}}function y(t,e){return t*b+e}class w extends o{constructor(t){super(8,t)}decode(t,e=0){const r=s(t),n=r.readUInt32LE(e),i=r.readUInt32LE(e+4);return y(i,n)}encode(t,e,r=0){const n=f(t),i=s(e);return i.writeUInt32LE(n.lo32,r),i.writeUInt32LE(n.hi32,r+4),8}}e.NearUInt64=w;class k extends o{constructor(t){super(8,t)}decode(t,e=0){const r=s(t),n=r.readUInt32BE(e),i=r.readUInt32BE(e+4);return y(n,i)}encode(t,e,r=0){const n=f(t),i=s(e);return i.writeUInt32BE(n.hi32,r),i.writeUInt32BE(n.lo32,r+4),8}}e.NearUInt64BE=k;class S extends o{constructor(t){super(8,t)}decode(t,e=0){const r=s(t),n=r.readUInt32LE(e),i=r.readInt32LE(e+4);return y(i,n)}encode(t,e,r=0){const n=f(t),i=s(e);return i.writeUInt32LE(n.lo32,r),i.writeInt32LE(n.hi32,r+4),8}}e.NearInt64=S;class v extends o{constructor(t){super(8,t)}decode(t,e=0){const r=s(t),n=r.readInt32BE(e),i=r.readUInt32BE(e+4);return y(n,i)}encode(t,e,r=0){const n=f(t),i=s(e);return i.writeInt32BE(n.hi32,r),i.writeUInt32BE(n.lo32,r+4),8}}e.NearInt64BE=v;class I extends o{constructor(t){super(4,t)}decode(t,e=0){return s(t).readFloatLE(e)}encode(t,e,r=0){return s(e).writeFloatLE(t,r),4}}e.Float=I;class M extends o{constructor(t){super(4,t)}decode(t,e=0){return s(t).readFloatBE(e)}encode(t,e,r=0){return s(e).writeFloatBE(t,r),4}}e.FloatBE=M;class _ extends o{constructor(t){super(8,t)}decode(t,e=0){return s(t).readDoubleLE(e)}encode(t,e,r=0){return s(e).writeDoubleLE(t,r),8}}e.Double=_;class A extends o{constructor(t){super(8,t)}decode(t,e=0){return s(t).readDoubleBE(e)}encode(t,e,r=0){return s(e).writeDoubleBE(t,r),8}}e.DoubleBE=A;class E extends o{constructor(t,e,r){if(!(t instanceof o))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof u&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let n=-1;!(e instanceof u)&&0<t.span&&(n=e*t.span),super(n,r),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0,n=this.count;if(n instanceof u&&(n=n.decode(t,e)),0<this.elementLayout.span)r=n*this.elementLayout.span;else{let i=0;while(i<n)r+=this.elementLayout.getSpan(t,e+r),++i}return r}decode(t,e=0){const r=[];let n=0,i=this.count;i instanceof u&&(i=i.decode(t,e));while(n<i)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),n+=1;return r}encode(t,e,r=0){const n=this.elementLayout,i=t.reduce((t,i)=>t+n.encode(i,e,r+t),0);return this.count instanceof u&&this.count.encode(t.length,e,r),i}}e.Sequence=E;class O extends o{constructor(t,e,r){if(!Array.isArray(t)||!t.reduce((t,e)=>t&&e instanceof o,!0))throw new TypeError("fields must be array of Layout instances");"boolean"===typeof e&&void 0===r&&(r=e,e=void 0);for(const s of t)if(0>s.span&&void 0===s.property)throw new Error("fields cannot contain unnamed variable-length layout");let n=-1;try{n=t.reduce((t,e)=>t+e.getSpan(),0)}catch(i){}super(n,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((r,n)=>{const i=n.getSpan(t,e);return e+=i,r+i},0)}catch(n){throw new RangeError("indeterminate span")}return r}decode(t,e=0){i(t);const r=this.makeDestinationObject();for(const n of this.fields)if(void 0!==n.property&&(r[n.property]=n.decode(t,e)),e+=n.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r=0){const n=r;let i=0,s=0;for(const o of this.fields){let n=o.span;if(s=0<n?n:0,void 0!==o.property){const i=t[o.property];void 0!==i&&(s=o.encode(i,e,r),0>n&&(n=o.getSpan(e,r)))}i=r,r+=n}return i+s-n}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)void 0!==r.property&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if("string"!==typeof t)throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if("string"!==typeof t)throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}e.Structure=O;class T{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,r){throw new Error("UnionDiscriminator is abstract")}}e.UnionDiscriminator=T;class j extends T{constructor(t,e){if(!(t instanceof u&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}e.UnionLayoutDiscriminator=j;class B extends o{constructor(t,e,r){let n;if(t instanceof d||t instanceof p)n=new j(new h(t));else if(t instanceof u&&t.isCount())n=new j(t);else{if(!(t instanceof T))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");n=t}if(void 0===e&&(e=null),!(null===e||e instanceof o))throw new TypeError("defaultLayout must be null or a Layout");if(null!==e){if(0>e.span)throw new Error("defaultLayout must have constant span");void 0===e.property&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof d||t instanceof p)&&(i+=n.layout.span)),super(i,r),this.discriminator=n,this.usesPrefixDiscriminator=t instanceof d||t instanceof p,this.defaultLayout=e,this.registry={};let s=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(t){return s(t)},this.configGetSourceVariant=function(t){s=t.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(r.property&&Object.prototype.hasOwnProperty.call(t,r.property))return r}throw new Error("unable to infer src variant")}decode(t,e=0){let r;const n=this.discriminator,i=n.decode(t,e),s=this.registry[i];if(void 0===s){const s=this.defaultLayout;let o=0;this.usesPrefixDiscriminator&&(o=n.layout.span),r=this.makeDestinationObject(),r[n.property]=i,r[s.property]=s.decode(t,e+o)}else r=s.decode(t,e);return r}encode(t,e,r=0){const n=this.getSourceVariant(t);if(void 0===n){const n=this.discriminator,i=this.defaultLayout;let s=0;return this.usesPrefixDiscriminator&&(s=n.layout.span),n.encode(t[n.property],e,r),s+i.encode(t[i.property],e,r+s)}return n.encode(t,e,r)}addVariant(t,e,r){const n=new N(this,t,e,r);return this.registry[t]=n,n}getVariant(t,e=0){let r;return r=t instanceof Uint8Array?this.discriminator.decode(t,e):t,this.registry[r]}}e.Union=B;class N extends o{constructor(t,e,r,n){if(!(t instanceof B))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if("string"===typeof r&&void 0===n&&(n=r,r=null),r){if(!(r instanceof o))throw new TypeError("layout must be a Layout");if(null!==t.defaultLayout&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!==typeof n)throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=r?r.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,n),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let n=0;return this.layout&&(n=this.layout.getSpan(t,e+r)),r+n}decode(t,e=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+n):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r=0){let n=0;if(this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let i=n;if(this.layout&&(this.layout.encode(t[this.property],e,r+n),i+=this.layout.getSpan(e,r+n),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}function x(t){return 0>t&&(t+=4294967296),t}e.VariantLayout=N;class L extends o{constructor(t,e,r){if(!(t instanceof d||t instanceof p))throw new TypeError("word must be a UInt or UIntBE layout");if("string"===typeof e&&void 0===r&&(r=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let n=0;this._packedSetValue=function(t){return n=x(t),this},this._packedGetValue=function(){return n}}decode(t,e=0){const r=this.makeDestinationObject(),n=this.word.decode(t,e);this._packedSetValue(n);for(const i of this.fields)void 0!==i.property&&(r[i.property]=i.decode(t));return r}encode(t,e,r=0){const n=this.word.decode(e,r);this._packedSetValue(n);for(const i of this.fields)if(void 0!==i.property){const e=t[i.property];void 0!==e&&i.encode(e)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){const r=new P(this,t,e);return this.fields.push(r),r}addBoolean(t){const e=new R(this,t);return this.fields.push(e),e}fieldFor(t){if("string"!==typeof t)throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}e.BitStructure=L;class P{constructor(t,e,r){if(!(t instanceof L))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const n=8*t.span,i=t.fields.reduce((t,e)=>t+e.bits,0);if(e+i>n)throw new Error("bits too long for span remainder ("+(n-i)+" of "+n+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,32===e&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=n-i-e),this.wordMask=x(this.valueMask<<this.start),this.property=r}decode(t,e){const r=this.container._packedGetValue(),n=x(r&this.wordMask),i=n>>>this.start;return i}encode(t){if("number"!==typeof t||!Number.isInteger(t)||t!==x(t&this.valueMask))throw new TypeError(a("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),r=x(t<<this.start);this.container._packedSetValue(x(e&~this.wordMask)|r)}}e.BitField=P;class R extends P{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){"boolean"===typeof t&&(t=+t),super.encode(t)}}e.Boolean=R;class z extends o{constructor(t,e){if(!(t instanceof u&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof u||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e=0){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),s(t).slice(e,e+r)}encode(t,e,r){let n=this.length;if(this.length instanceof u&&(n=t.length),!(t instanceof Uint8Array&&n===t.length))throw new TypeError(a("Blob.encode",this)+" requires (length "+n+") Uint8Array as src");if(r+n>e.length)throw new RangeError("encoding overruns Uint8Array");const i=s(t);return s(e).write(i.toString("hex"),r,n,"hex"),this.length instanceof u&&this.length.encode(n,e,r),n}}e.Blob=z;class U extends o{constructor(t){super(-1,t)}getSpan(t,e=0){i(t);let r=e;while(r<t.length&&0!==t[r])r+=1;return 1+r-e}decode(t,e=0){const r=this.getSpan(t,e);return s(t).slice(e,e+r-1).toString("utf-8")}encode(t,e,r=0){"string"!==typeof t&&(t=String(t));const i=n.Buffer.from(t,"utf8"),o=i.length;if(r+o>e.length)throw new RangeError("encoding overruns Buffer");const a=s(e);return i.copy(a,r),a[r+o]=0,o+1}}e.CString=U;class W extends o{constructor(t,e){if("string"===typeof t&&void 0===e&&(e=t,t=void 0),void 0===t)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return i(t),t.length-e}decode(t,e=0){const r=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return s(t).slice(e,e+r).toString("utf-8")}encode(t,e,r=0){"string"!==typeof t&&(t=String(t));const i=n.Buffer.from(t,"utf8"),o=i.length;if(0<=this.maxSpan&&this.maxSpan<o)throw new RangeError("text length exceeds maxSpan");if(r+o>e.length)throw new RangeError("encoding overruns Buffer");return i.copy(s(e),r),o}}e.UTF8=W;class C extends o{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,r){return 0}}e.Constant=C,e.greedy=(t,e)=>new l(t,e),e.offset=(t,e,r)=>new h(t,e,r),e.u8=t=>new d(1,t),e.u16=t=>new d(2,t),e.u24=t=>new d(3,t),e.u32=t=>new d(4,t),e.u40=t=>new d(5,t),e.u48=t=>new d(6,t),e.nu64=t=>new w(t),e.u16be=t=>new p(2,t),e.u24be=t=>new p(3,t),e.u32be=t=>new p(4,t),e.u40be=t=>new p(5,t),e.u48be=t=>new p(6,t),e.nu64be=t=>new k(t),e.s8=t=>new g(1,t),e.s16=t=>new g(2,t),e.s24=t=>new g(3,t),e.s32=t=>new g(4,t),e.s40=t=>new g(5,t),e.s48=t=>new g(6,t),e.ns64=t=>new S(t),e.s16be=t=>new m(2,t),e.s24be=t=>new m(3,t),e.s32be=t=>new m(4,t),e.s40be=t=>new m(5,t),e.s48be=t=>new m(6,t),e.ns64be=t=>new v(t),e.f32=t=>new I(t),e.f32be=t=>new M(t),e.f64=t=>new _(t),e.f64be=t=>new A(t),e.struct=(t,e,r)=>new O(t,e,r),e.bits=(t,e,r)=>new L(t,e,r),e.seq=(t,e,r)=>new E(t,e,r),e.union=(t,e,r)=>new B(t,e,r),e.unionLayoutDiscriminator=(t,e)=>new j(t,e),e.blob=(t,e)=>new z(t,e),e.cstr=t=>new U(t),e.utf8=(t,e)=>new W(t,e),e.constant=(t,e)=>new C(t,e)},a5c0:function(t,e,r){"use strict";var n;r.d(e,"a",(function(){return n})),function(t){t["Mainnet"]="mainnet-beta",t["Testnet"]="testnet",t["Devnet"]="devnet"}(n||(n={}))},a81a:function(t,e,r){"use strict";(function(t){r.d(e,"b",(function(){return c})),r.d(e,"a",(function(){return u}));var n=r("8df2"),i=r("9ea2"),s=r("bbae");const o=e=>r=>{const o=Object(n["blob"])(e,r),{encode:a,decode:c}=Object(s["a"])(o),u=o;return u.decode=(e,r)=>{const n=c(e,r);return Object(i["toBigIntLE"])(t.from(n))},u.encode=(t,r,n)=>{const s=Object(i["toBufferLE"])(t,e);return a(s,r,n)},u},a=e=>r=>{const o=Object(n["blob"])(e,r),{encode:a,decode:c}=Object(s["a"])(o),u=o;return u.decode=(e,r)=>{const n=c(e,r);return Object(i["toBigIntBE"])(t.from(n))},u.encode=(t,r,n)=>{const s=Object(i["toBufferBE"])(t,e);return a(s,r,n)},u},c=o(8),u=(a(8),o(16));a(16),o(24),a(24),o(32),a(32)}).call(this,r("1c35").Buffer)},abed:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));r("14d9");var n=r("64b9");function i(t,e,r){if(r.length){t.push({pubkey:e,isSigner:!1,isWritable:!1});for(const e of r)t.push({pubkey:e instanceof n["e"]?e:e.publicKey,isSigner:!0,isWritable:!1})}else t.push({pubkey:e,isSigner:!0,isWritable:!1});return t}},abed2:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r("7ee5"),i=r("b675"),s=r("52c3"),o=r("64b9");const a="Trust";class c extends n["a"]{constructor(t={}){super(),this.name=a,this.url="https://trustwallet.com",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAyIiBoZWlnaHQ9IjQwMiIgdmlld0JveD0iMCAwIDQwMiA0MDIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgo8cmVjdCB3aWR0aD0iNDAyIiBoZWlnaHQ9IjQwMiIgZmlsbD0idXJsKCNwYXR0ZXJuMCkiLz4KPGRlZnM+CjxwYXR0ZXJuIGlkPSJwYXR0ZXJuMCIgcGF0dGVybkNvbnRlbnRVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIHdpZHRoPSIxIiBoZWlnaHQ9IjEiPgo8dXNlIHhsaW5rOmhyZWY9IiNpbWFnZTBfMTY5NF8xODk2NyIgdHJhbnNmb3JtPSJzY2FsZSgwLjAwMjQ4NzU2KSIvPgo8L3BhdHRlcm4+CjxpbWFnZSBpZD0iaW1hZ2UwXzE2OTRfMTg5NjciIHdpZHRoPSI0MDIiIGhlaWdodD0iNDAyIiB4bGluazpocmVmPSJkYXRhOmltYWdlL2pwZWc7YmFzZTY0LC85ai80QUFRU2taSlJnQUJBUUFBQVFBQkFBRC8yd0JEQUFjRkJRWUZCQWNHQmdZSUJ3Y0lDeElMQ3dvS0N4WVBFQTBTR2hZYkdoa1dHUmdjSUNnaUhCNG1IaGdaSXpBa0ppb3JMUzR0R3lJeU5URXNOU2dzTFN6LzJ3QkRBUWNJQ0FzSkN4VUxDeFVzSFJrZExDd3NMQ3dzTEN3c0xDd3NMQ3dzTEN3c0xDd3NMQ3dzTEN3c0xDd3NMQ3dzTEN3c0xDd3NMQ3dzTEN3c0xDd3NMQ3ovd2dBUkNBR1NBWklEQVNJQUFoRUJBeEVCLzhRQUd3QUJBQUlEQVFFQUFBQUFBQUFBQUFBQUFBRUdCQVVIQXdML3hBQVpBUUVBQXdFQkFBQUFBQUFBQUFBQUFBQUFBUU1FQlFMLzJnQU1Bd0VBQWhBREVBQUFBZWtBQUFFRXhJaEloSWhJaEloSWhJaEloSWhJaEloSWhJaEloSWhJaElJRWdBQUFBQVFrQUFBQUFBQUFBQUFBQUFBQUFBQWlVRWdBQUFRa0FBQUFBQUFBQUFBQUFBQUFBQUFBQWlVRWdBRUVnQUFBQUFBQUFBQUFBQUFBQUFBQUFBQWlZa0FJa0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBUk1FZ2lZa0FBQUFBQUFBQUFQT29XVjduWFZWdXg5TXllWTNYTG8zSXo2QUFBQUFBQUFBRVNENUV6RWdBQUFBQUFCR0xNWmJSNmUydTVWK3BlT25QazR4cXpCTUFicTE4NlVYOVZjNzNlVFRhV3J6NmJmVWVmUUFBQUFBQUdPSmozbUppUUFBQUFOTlVQckE2Zk95Zm53WFZ6Qk1BZ0EyOXFvdXJtNjNyRnI1cGk5U3JlbWlvc2pIMVpnbUFQdjF4MFRrN0RUUFBycUhyWGJGeStpSGoyQUFBQmppWTk1aVlrQUFBQURtMkhuWVBZNVFzTVRYbCt5cUx1YzdMb0UxV1ZiZTVpaTRLN0FBSTArNWV2TksxWFNtaWpsVHArSGJYenhlNlpkVmppMnE0V1d1V1BsZElLclFBQUFNY1RIdk1URWdBQUFBYzYxK3kxdlg1YTMxQzIxMldnY3pvQUFBQUFBQUFPYTlLNW5yeTR3MzRycFlkRHZ1VjB3cXNBQUFBeHhNZTh4TVNBQUFBQnovVmJuVGRibUxWVmJONTlXOGN2b2dBQUFBQUFBT1lkUDVac3lmSTNZNzF1OVB1T1Qwd3JzQUFBQXh4TWU4eE1TQUFBQUJSOUZZcTcxZWFzVmQzaGVSeXVrQUFBQUFBQUI4OHM2ZHpIZGpEWms2RnM4SE80L1ZEejZBQUFBeHhNZTh4TVNBQUFBQlVxdmNLZjArYzIycHo3UEhSaHlPb0FBQUFBQUFCaGMzNkJ6L29ZUTFaK201RVR4dXFFU0FBQUJqaVk5NWlZa0FBQUFEUlVmb1hQZWpnZTNpMDBkVmVYcnhlcUNRQUFBQUFBTkRTTFpVK2x6M3Y0Ykc2cm9nNC9WQUFBQUF4eE1lOHhNU0FBQUFCNDh3NnJ6TGJreHh0eDlDMmRic25KNllWMkFBQUFBQUFValE1bUgxK1czMmh0dmoxYUJ5K2tBQUFBQmppWTk1aVlrQUFBQUJSYjFYYjZhWU9uenQzZXVXZE53YmZZWk5RQUFBQUFERnlxdlpYVWgxdVk2QlErbjQ5WDBNTzBBQUFBREhFeDd6RXhJQUFBQUR3OXlPV2ZOaHIzWDVpeTFvZFZWeXg4cm9oNTlnQUFBRHhRNXZtNnZwWUEwVWIrN1lHZnl1a0ZWb0FBQUFHT0pqM21KaVFBQUFBQU1mbkhUOVhvbzU4Ky9qcFlHOTBUelBUTW5sdG13N0xZOC9UTG9CSUJyYWpkVFphZGpOK01MYWxrd2I3azFmUXdiUUFBQUFBTWNUSHZNVEVnQUFBQUFBYTZqZEs4NzZlWExQV3VoaCtSNzhlOXRwYXF6cXJudTZ4Yk4vVWRMNTZzNGFNNHpZbkNzTzgzR0xYOC9SajFnQUFBQUFBWTRtUGVZbUpBQUFBQUFBQVl1VW1LUm9lcTYzWGw1NDJXdDI1UW55UHBQemtiKzFaZEdoc01zT3NQUHNBQUFBQUFBUWZEMElpWWxJQUFBQUFBQUFBRVZ1eXZmamxuejB2QjJaYWxkczM2elhoVGNBQUFBQUFBQUFpWUpBaVlKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFSSUFCRW9KQUFBQUFBQUFBQUFBQUFBQUFBQUFBaVlKQUFBQkVvSkFBQUFBQUFBQUFBQUFBQUFBQUFRRWdBQUFBQkNRUUpSSUFBQUFBQUFBQUFBQUFJSlFKaVFBQUFBQUFBQUErUkhpSkFBQUFBQUFBQUFBQWVub1FCSUFBQUFILzhRQUx4QUFBQVVFQWdFQ0JBVUZBQUFBQUFBQUFBRUNBd1FGRVRBeEVFQVNJRFFURkNGQklpUXpOV0FqTWxCd2dQL2FBQWdCQVFBQkJRTEhZV0lXSVdJV0lXSVdJV0lXSVdJV0lXSVdJV0lXSVdJV0lXSVdJV0lXSVdJV0lXSVdJV0lXSVc1di9OTi81TGYrbC92L0FDVDcvd0FLazFOcGhTYTE5V0pEY2h2ckhvRjFsdUpiUk1xaW5PV1hsc09SS2kzSTY5d1d1bXBTVUprVmR0QWVrT3lGZW1OVTNXQXhPWWtkVTlsclBld1ZLWVFIS3RIU0hhdzZvT1BPUEhoWm55R1EzV2lDS2xGV0V1dHI2SjdMV09mUCtWSmN5UXMvbVh3YnpwZ3pNOEVXbHVQQitsTXVOdnhuWTZ2V1Mxa1BtSGg4eStJOVRmYVUyNGwxdkdleTFqbktOYzdDeFRYM2hHZ014dVZJU3RNaWpwTU94M1dEdzBaUm5HeG5zdFk1ZnZmU2xLbEczVHBMZ2FveEJtSXd4NnpJbEU5UzQ3Z2NvN3lRdUsrMTY2TCtqalBaYXh6ZmZjVTZFMUpiS2x4U0NZY2RBSWlJc3FtVzNBcW54VkE2VEZNU0VFMUk0bzN0OFo3TFdPZjcvaWkvcGRPWDd6aWplMHhuc3RZNmorNGNVWCszcHlQZGNVZjJXTTlsckhVLzNIaWlkUjM2dmNVbjJPTTlsckhWZmY4QUZGL1Y2YXZxcmlsL3QrTTlsckhWeS9POFVZL3pQU1VkazgwNHJVL0dleTFqckpmbWVLUWRwdlNmTzBmbUVWb09NOWxySFdpL0Z4VER0VU9sTk8wTG1PVm8yTTlsckhXaS9wY1FUOFozU3FSMnAvSkZaT005bHJIVnl2QzRhVjR2ZEtzS3RENFlUNVNNaDdMV09vcDhvSExTdk5ubzFwWDA0cDZmS2ZrUFpheHZKODJPYWN2emdkR3JyOHBuRklUZVprUFpheVNFZkRrOFVaeTdIUmxyK0pNNG9xUHdaRDJXc2xXYjhKdkZLZCtITTZFbDM0TWJtbXQvRGdaRDJXc2xZYThtT0VxTkMyWENlWnoxaC84QUR3MmczSEVwSktjaDdMV1I1c25tRkpOS3VLVEs4RlpublVzTlBPcWZlNHBEUG5KeW5zdFphdEg4SHVZRlNKd3NqcnFHVVRacXBhK1lVZjVhTmxQWmF5dnNwZlplYVV3N3pGcWJqSVprTnlFNFpWVGFZRDhoeVF2bWxSUE5lWTlsck5OaEpsTnJRcHRmS0ZxYlZHcTRRNGgxUHBrem1Zd2sxQjZSNllNRlVwYVVraE9ZOWxyUExoTnlreUl6a1pmb2FmY1lWRnF5SE9YcERjZEVtcU9PK3FIVEZPaEtTUW5PZXkxMEZvUzRpVlNESUtTYUZlaUxPZGpCK3NGNExjVTZ2MFI0ajBrNHRPYWo5STlscnBQeG1wQlNhVTYxaFpZY2ZWR3BLRUFpSWk2VnV0SmdzeVJKZ3V4dlNTVFVjV2tHWVEybHRQVCt3Ky9WTXJsTHBSS0NrcVFvUllUc280ME5xS25ybjJIb3pNZ0pwY1ZKa1JKTHJmZi9BSnd2M2I5Y3hjeGN4Y3hjeGN4Y3hjeGN4Y3hjeGN4Y3hjeGN4Y3hjeGN4Y3hjeGN4Y3hjeGN4Y3hjeGN3bkwvQVAvRUFDY1JBQUlCQWdVRkFBSURBQUFBQUFBQUFBRUNBd0FSQkJBd01USVNJQ0ZBUVJSd0lsRlMvOW9BQ0FFREFRRS9BZjBhN2hONk03VkhNRzhIMWIyb3lxS2FjbmF0ODFtWmFXZFRRWUhiMEpKQ1RWejJKQ3pVSWxBdFR3RWNhMnp2UVlpa1BVTDZyYjBxbGpZVitPMUREajdTeHF1M1lWQjNvNGRmbEhEbis2ZU1wdmxGd0dxL0kxRHowc1JzTW8rQTFYNUdvZVkwc1I4eWo0alZsNW1vK1kwc1I4eVhpTldiblNjaHBZamxrTlhFY3RPZm5TK1RyWWdiSEtNM1VhTG03RTFFTHVOYVlYWExEdDR0b08zU3Q4c09QTjlkbDZUYWxicE42Vmd3dU8rV1RxOERLSmVsZGVXUHE4akpXSzdVazRQTHNlVlZwNUMrVU1kLzVIMFpJZzlNaFhmSkpDbTFDZFNQTlBNVzJ5QXZ0U1FmVzlNaTlQQi9taUNOODBnSjNwVkM3ZXN5aHQ2T0hQeWtpQ2ZvL3dEL3hBQWtFUUFDQVFNRUFnTUJBUUFBQUFBQUFBQUJBZ01BQkJFUU1ERXlFaUVnUUVFaWNQL2FBQWdCQWdFQlB3SC9BQTFJeS9GQzNURlNRRmZZK3FBVFN3dWFTMkE3VUJqVjRGYW10M0hGRlNPZm9SUmhWckErRHpxdE5NNU9hUzRCN1VEblhBb29wNUZPdmkyTjFlQlRNRUdUUnVWbzNSL0JUU00zSitDc1Y0b1hMRG1oZEQ5RkpLSDQwbTduZFRxS242YlZyeWRKZTUzWStncWZvZHExL2RKTzUzWXVncVhvZHExL2RIN0hkZzZDbjZuYXR1dWgzYlkveHQyNC9pbU9CbmV0VHlOSlJoenN4akNnVk1jSWQ2QnNQcGNyNzh0aU5mSnNhWFRlZ043aWtieUdhZGZNWU5NaFE0UHpoaThCazZTdjV0bmZobDhEZzhhTW9iMGFlM0k2L0JJV2VraVZOSjVjZnlQb3h6RlBWSTRmalI0bGZtbXQyQndLamdDODZFZ2MxSmNmaWZUQnh4U1hQNDFBZyt4ckpjQWVscG5MYy9XVnluc1VMbGNlNmttTC93Q0gvd0QveEFBM0VBQUJBUVFHQndZR0FnTUFBQUFBQUFBQkFnQURFUklRSUNFaVFGRXhRVkpoY1hLQkV5TXdVR0toQkRJemtaS3hRb0tBa1BELzJnQUlBUUVBQmo4Qy93QkMwcVIyaXR6WG5ObTR0TTdNZkw1bHFDUXhRNXVvejFtbWQyWUZwVlhIbVdmbGtWRUFiMmc1RTV6MU5GNHFOYVZmZUkzNld1cmdySStUM255UHUxMlpmQU4zYVFqM2FMeFpWeDhLeGNSa3ExdTlkZFV0OVNYaTExYVZjRGpwVTJ2RDdORXZsOURCdnJQUHlhMTR2N3RhZkFtZTkyajNMQU8rN1VHZzhURGZxUGdXS0k2dDlWZjVOOVo1K1RYMWRvbmV3V2d4QnhMMG5haDRVU096VG1wb3dtWHRHbVZRQkJ6YUxoVXZwTFFlSUtmQ1duSldKZmN4clFTQ2VEZlRsNXJHNzE1MFMxeDJBYzY4Q0lockIyWjlMWEZKWDdOZmRLSFN1ODVzUzk1cVZLZVJzT3B2a2oxYXh5ajdOWUllTmZkcFZ4RGZSSFJ0Q2gxWjRoT2hKaFN2bXhMM2pTOTQ0Ujl6bWxmUGlYdEwzcGhIdk1hVHo0bDUwL1ZMN3BoRjh4cC9zY1NyZ0tYdkRDRTBvNjRrY3RLeDZjR1RVZGY5cnhLRDZhZUtjRzhQcE5SMXk0bHllTktOOGYxZzMzTFVkREpJeExzNzZYWE5nM25UOTFBTXNUSEpWS0ZaS0J3WUdhcVhhYzFERlBmdlVRck1Sd1RwUEUwdWh2amlscHpTUlVkN3JNRkxzcHBKMlU0dDRqSlZLMFpHT0NlcTMwdlY5TVhOdGlOTXVwWWhnVnZNaFVSNnJjV2w1c0drS0drV3NsNG5Rb1lCTGtjVFNsQTBxTUdDUm9GbUxXN1A4Z3hTZElwN0Jac1Y4dmpsNHMyQmxQRmFUU1hoMEkvZU43WWZLdlR4cUIwK01GNmpuNHBXdFVBMlRzYUJVU2orV2s0MVR0V2dzWGE5SXFCTHkrajNEVE8xUjhLVkhlTDltbWVLalU3ZFl1ajVjZms4R2dzVUxFQ0treUZGSjNNRS9FRCt3YVpDZ29icTBDWmxiSWFFWkVaQ3JFMk9ocExCS1JBRHlDMnhlcFRRZUo2MVpuYWlscFgxeFdlcW1aNHFEU3V1N1Q3MWd0OWRSbHJMQktSQUR5S1ZhUW9NVmZEMmpaTFFVQ0R2cXdqTWpaTGR5bThkclUweTFGUnEzRTJablEweHZyelBrMEhpWTcybWRkNG4zOEdWMmtxYVo4WnpscWFBRUI1VEVpQzlvTkVpS05vVllKRVMwM3hGbnBEU29TRWpkNVpBdFA4QUQzVHN0S29RSW91aUNkb3RkRVZiUjh3N3hFZDdSbEo0bG9KRUIvbkovOFFBS2hBQUFRSUVCQVlEQVFFQkFBQUFBQUFBQVFBUklURmhjUkF3UVZFZ1FJR1JvYkZRNGZEQjhkSC8yZ0FJQVFFQUFUOGh5Q1FFNTI3cGp1bUtnRlFDb0JVQXFBVkFLZ0ZRQ29CVUFxQVZBS2dGUUNvQlVBcUFWQUtnRlFDb0JVQXFBVkFLZ0ZRQ1ltcVZHNlpia0NXVVRPQ0FiNEpta24zaG11OHBib0J2aG9pb1U4cncrSmJVSUY4ancrTEkxRTBJOFJpVzcvR21CZnZ3a3NnR0h4d2hEZ203YjQ4K3NTV0NBWWZJQ0RqQXlmSW1Zd0V6ekI4WUdZSmdPcSsvbFFGV28xRitaSk9XTmhEcVZHWElQNk5pSE1ieW1kamNTczVjQUFGSjVRb0hjeVRCT0Zab2ZaUEg3Um9PbkVPRmlLQ3hUUUJFcG5sWmlrMjVBZ0RrZ0NxbDRwR1U3eE5nZVU1Z2Z1WWs4UjFaVE9Eam9FWkFncVA0SzBtV3drTHduQjVHYmRTYlpnQkRBcnhrRzY4UFFlRi9wRk5GYzBSY2h2a05EMngrR1FnV0xBemU2Y2MyQjREa2VGNUFHUStwZjZSQVFKcWlNOUNtbmpjWmsyNmsyek5FUXV5R1RNcHY3a095WmcvWmh0aVp6YkFFOHZuUjdxOFdhSHJsRkJLRjFHWk51cE5zeUg4VWVKMUYyQjFxME4wQk1YNkg5SzZqQkU5K001Q0pNRUozSnV5N0o2SW51VW9MZUlkK01JOUhyTW0zVW0yWURYV01ieTJITXAwZDVyMzJkN1RLRUd3R2Q0b2txYkJ1STlLUVdpdTFQUWZIOTlNeWJkU2JaZ05peWhVK3VVSi8weHhDSlY2R1pOdXBOc3dHdUQwTVRoMS9ybERjbS91eEJxcGVobVRicVRiTUJxdjhNU2lQN1BsRGQ3K3pFV0d1WVRicVRiTUZxM294S0J1SEtGVkRpTFZEN1prMjZrMnpHaWJpZkp4dlova2NuUVFQd05LaFBsbVRicVRiTXZKdms0d0hjSHJrNkhFOGNEUm9PWk51cE5zeThRSHJHMHdlWEp1YXNjRkRWNHpKdDFKdG1PN2N4NCtzWFRRTzhPVHZ4bmhpQTVZS2xCc3liZFNiWmpmc2o3R1A2NkR5ZEJNZURqUWdlYzJiZFNiWmpHMkE3RHdVWi9Ea3V2eWVNYUVlQVBtemJxVGJNL053T0J5Nmg0bHVTYWRnUDdqWDBQOEFNMmJkU2Jac0FHZUFzK01ZNCtkL25KYThnbUJZUXhZM0pBL3V1Yk51cE5zMXgwQi9qK1l0SkdLNjVqa2Q3b1Y5T0NNSnVQcjlObXpicVRiTmFlYkJzY1Rqc2NBYXJWMEZ1UWFMeFAxNHlDUUNsT0lETm0zVW0yYkxRWXNnSXNSaU1RbGFFY2pvZHM5bVFQdlJUd0Y3WXN5Z3d1L0hPbTNVbTJjY1lmU3hTSzBNUVdYM3pRRWg2bFFDL3dEdHppQVNXRVNuRW03dWROdXBOczZRaXoyTzZEWXhlOWVBYTZHaHFzZFJxTGpLY0dOZ0dDNVZqQU5CYmdza1IxTytmTnVwTnM5NUJoZnFLT2hoaUR3QW9CMUprVVJFZnR3aGtvNmx4T25kcjEyVHZHUDJUcndnSXlSY29FT2dFd0EwejV0MUp0eUdnOUkwVUdRYUJJOEwxWlNSVEdJZDUvNGdRUTRMZzROUmpvTlRaUDdubGY4QUZNOEo0TXpoK2pJZEFaZ0JweUUyNmsyNUUrTU13VTRyVWVqMEtMQlhNQXg0UzREOFNHeVp3ZGlKL0RvME9PcDRlcXJDQk05bklDdzVLYmZsQm5zdEpDT3FlYkNKZW1xSUlMR0J5SE96WFlKbm92Si8xQVFBSkFjbkhIZENaNVVTZTZqN1J1aXBIMXdpNWhwQUJ5VXdtWjF1cFF1QWRBNVF6S1FYdHl3Q0FCQjBLZjJOWFNiYkk3TG5nY0pCT2NqN1U0Uk9ZZVdPZ3drNWdaQ01Ta0k2cDBxV0NoOFFVZ0F3SExpSkhFUWg4ZVN3UURERTc3Zkh6TnVHUnA4YWRoTlNIRE5EWS9Ga3NnTy9HUTZCME0vaVNXUUdwbmtrT25hZmY0ZDlCTkFkOHhtbDJUN3crRGRsRTBVczl0aW5PbzdKbS9PczNUN0JNVE05a0EzS0FBSktvVlVLcUZWQ3FoVlFxb1ZVS3FGVkNxaFZRcW9WVUtxRlZDcWhWUXFvVlVLcUZWQ3FoVlFxb1ZVS2luSE4vOW9BREFNQkFBSUFBd0FBQUJEenp6UlR6enp6enp6enp6enp6enp6VHp6enp6eVJ6enp6enp6enp6enp6enp6enp3elR6enlUenp6enp6enp6enp6enp6enp6enp5anp5aHp6enp6enp6enp6enp6enp6enp6enp4end6enp6enp6enp6enp6enp6enp6enp6enl6enp6enp6enp6enp6OVBmenp6enp6enp6enpEenp6enp6enp6UW9NTU9EN0h6enp6enp6ekx6enp6enl1QUFNTTkrNHNNUE9MM3p6enp3THp6enp6eUVJV1kzenp3MjAwd1A4QTg4ODg4Qzg4ODg4OEtRODg4ODg4ODg4NkQwODg4ODhDODg4ODg4cUU4ODg4ODg4ODhyRGQ4ODg4OEM4ODg4ODhxRzg4ODg4ODg4OGdEVzg4ODg4Qzg4ODg4OGpTODg4ODg4ODg4SkdWODg4ODhDODg4ODg4cEEvODg4ODg4ODhDSDg4ODg4OEM4ODg4ODhNRDE4ODg4ODg4OEpIODg4ODg4Qzg4ODg4OG9EYjg4ODg4ODg1REQ4ODg4ODhDODg4ODg4L0NDLzhBUFBQUFB3UjkvUFBQUFBBdlBQUFBQUE9DQWZ0L1BPOEF5dlBQUFBQUEF2UFBQUFBQUERqUTQwcUF4VDNQUFBQUFBQQXZQUFBQUFBQUExmUUF3RGovQUR6enp6enp6elB6enp6enp6enp6eTJLL3dBODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODhFODhVODg4ODg4ODg4ODg4ODg4ODg4ODg4MGM4OHN3ODg4ODg4ODg4ODg4ODg4ODg4OHM4ODg4ODhjODg4ODg4ODg4ODg4ODg4ODhFODg4ODg4ODg4akJCQkJCQkJCQkJCQkIvOEFQUFBQUFAvRUFDWVJBUUFDQVFNRUFnSURBUUFBQUFBQUFBRUFFU0VRTURGQVFXRnhJS0ZSY0lHUnNmRC8yZ0FJQVFNQkFUOFEvUm8xd2xzYW5ZQjZWSEpuZjc5VEdHb3FyZGNRNUp5V0p5UytnYmw0SjV2aGtPQ1k0dVpUSWlLcDFFY01Xc1pTL251OHZ2U1FkeElMbE9BZkF1aGNaeXFkbkExNzZmWVp4ZFRKajdtZjhQVzF4L2xwOUxkRlFkYlE4ajNvYUR3YnBwUlVuazJuZ2VOQlFHNktMNGcwM0JzdlpWcnhCU2VlZ2l4YlB1amZoZjhBak9saS9IWXVORjYzcUNVeGxVY3g4OUNnV3k3MkRTbUhuZnI5d2lWaGlGcVlUQitvSTVOY0x5emx1UHhvNjdIUTVRd3h1aG9sbGlYREJtT3dORVZDVmY0empvZ0ZNRnovQUVqdEN0Y2ppZmNIbzdWYmg5Q1djc1ROY3Y2UC84UUFKaEVCQUFJQUJRUURBQU1CQUFBQUFBQUFBUUFSRUNFd01WRkJZWEdoSUVDeFlIQ0I4UC9hQUFnQkFnRUJQeEQralg2MmN3bEV1ZFpUNnV3RnpvdGVabVN1QUtESE16Sm5LcHM1UG9ER3JXZHI0WkdOc3BScVpabGZVQVdPS201Q2FoZGNkWDFpZE1VSHNNYjB2aTR0YnFiVUdkU1I5TmZ2V0p2L0FPZnVsNldIdmFydndrRi85ZGRJNXJ4Zzc4anF1L0ZEZmkwaGt2R0N0TzdxdS84QWI5aHN1enBITTk4RmF1cmNqaGlXVkVwclJvTHpMbmdmUUNtZDlIdzVyeXF1K1dGWUhYUXI4RkhKMWhWWkJNOVlLeXFEOGdWb25NRGhjamJwcjh3SU41a0hwdVovbVBjUkduSFBOam1iVHZ6Z1o2N3Y5SFAyWkJyZUJPVFBtYmtEbVp2bmNBYlZFdjhBMG0vMGtWcW1NZnJEYkxNZXJqNmpkdTlLOVJxMk95RzVrZXh4L09qV2ZuLy94QUFxRUFFQUFRSUNDUVVCQVFFQUFBQUFBQUFCRVFBaE1hRVFNRUZSWVhHQmtmRWdRTEhCOEZEUjRmL2FBQWdCQVFBQlB4RFVXUmI3akdwY0ljMVNZdm9SVzhsNXJYaXE4VlhpcThWWGlxOFZYaXE4VlhpcThWWGlxOFZYaXE4VlhpcThWWGlxOFZYaXE4VlhpcThWWGlxOFZYaXE4Vlc0STVNVk13NjE2azRoeVdva2hsYm4yQXFNWGNWR0lodVA5b0JZaitDZ2tKSlU4V09EY292Z1N5ZGJMZGZpMUJnUDRxQ1FralVZTTdqYVVJSkdUVXFCS3dGUTNOdHpmei9rcUhBZHB2b0JicWJ0UVhTNE1PUEgrV2srUlNCSjZ1U0g0ZnpjRndmeDlNUzJMWXF3ZnpyeTlsemw2QzVzV0gzL0FEemFURzRvUkJMam9tVXgyYzZnRGQvUXZibTV5MFhCdXY4QTBiRzMyZEZ6OVAzZjNDUERpWWU1dXZ5R2tTUU51ekE1SmZ1VUV2MkVJWGNObnQ4UjJsKzJqYTcxYy9iWTJvM2c1Y1hoUXEzWE5nNGJtZkxEU2tXeWRvTnliU2pIcXRKZTR2cHZ6OXVSTGNJcktudE1KS2lCMWFMZkd3YUw4NU9kVHFSd2VXTEhxa2dDeFlQNHN6MG9NQlByelk5RjlyTEQydFpWN0JxTllxZ281a1RFRHNGNkhFWmg4aEJ5bzVXNFd2dkJrMWNsTWtxSEl3T21xSi94d2k5em9sRkN2YkRaSHpRUkRPNXZXSXpvc3VtSDBqN0hPcXlyV1JXNkRxVGZ3T0hkS1V1eFE2UUsvYi9kRHdMeFgzVW9EdlUrc0ZZTHRQRmJjUkJjQndjWHRRVVlReU9YdDU0MHpPTEY5eFBveDFHelgzeDhWa3JIOTErMys2ZHgwblFtL0VubkpWMll6OVBFYmF6T3F5cldNVEtUd0xHUnFRUUFWYkFWZkNkZ2lPR042d2NhTWhyWVNqd1lmTGpwTGUwU2cxdkhHUlh5eEhXZVpVMkU0SW5rQ3ozMVN0ek80UUpPNVBYV1oxV1Zhd29IZjV2VURXOXBYWXBzUlBhRU9qZktuRmQrRWZqaFJBbE5sUDFYN2VzSW13TWljUnBGZWJWaTVyZG9wM1laRmw2TnM2ZVlWak4yRW5yNWtEV002ckt0WVFUZjU2UmZaQ2hSQTdxL08zNEpTUXlEQk5uV1ZGaVhBUVphNmF1TzFqTXFSbUg4S0tZZXJuM05PUXBKU3dPM1NTZmF3eTZ6T3F5cldRQ0l2ZTRhWnQwWDg2ZTBCWnVzK21MZkEvZlBXWjFXVmF5RzhidTJtYmQzN24rUGFZM1hkK2ZUTU41eWZyV1oxV1ZheTJON3B1YlJlMDdkWkdNN1dtVWJ4OEgxck02ckt0WktONitIMXBqM3Q5bC8zMmwwcGxjOU1vakhaejYxbWRWbFdzL1djSDFwZzN4N1A5dlo3S3ArdzlIR0R1ays5Wm5WWlZySWZISCsybWQ4bVgxN1B4ano5SEZydkwvZXN6cXNxMWtjVDZaWDNwanV4RHVmWHM3cVJQZEVmZm90NUdUSFdaMVdWYXkwKzJlY3RLNjhUK0p6OW54M0Y2L1JPbERDVllDakp3QWREV1oxV1ZhenlnNTltbTlrWERrSDJkeTd3WEFUNk5OaUp0dk1HdHpxc3Exa0tsek9nL0I2TGd6ZnQ4aCsvWlFCY1F1VUQ1ZE5ucGw3ajZhM09xeXJXUitTa2RVZWlWMlVyaElNZzlsRVRaZzRxL0JOTStscGJpcDhGMXVkVmxXdGUzQVRtUmxHa0c3RVRnSStWMzlrWmpJamZZWkJwbkV4NXlGZmhyYzZyS3RiQVJFejJTWGZCNjZUaHJnQ0grQ2RmWWhKUW5yMnpKU3F5M2RMUVVkOUxaTmF6cXNxMXJuWit6dmNPK25oWXJJTWxZSlFKdmJUb3lkUFlIYzFpTmdXSGVYb2FjMVlCWW9HNENOd0VHdHpxc3ExcmhRc3U5c2VqRDBwTGJ6c1JHRTAzOENCYmE5V3pqejE5eTFFYlZzSEZwRDlqVFlZQWNBZzAzVU1lMnlCMkpkdGRuVlpWcnRpMW9iRSt3bm1Pa1VFVVM0bEFaSFlYQVhaOHVldHhlejRpN2cydkNqb0VMbUw5bnhtNkFRS01BWFZvekppNXY0blFnNmE3T3F5clhCMWdBRjlrT0kxWkVwT3diQndmUWFka0ZiWEJjVGc5eW9LTkd3ZmRpR3FscU8yS2Z4WXlwUzVtSFk5dzJmUG9jcnZzTVA0SHp5MStkVmxXdkpZb0hCUGkrTzhwWU9HdWZ0L293UWdzUjJwelloQmM0N1RtZHF3c3VURGs3bmg2aDRaTFhPcGgxWDRVWTJCVFluYytIRDA3cUZybVptOTJVR2RRMEFOZm5WWlY3QzBrV0RTOENiVGgycVRSSGJ1Vy9XUHBCYlNSZEJNSHJTRFJzSE1tL1ZialFNQUpFWkUwVFlEaXZ1R0xVZmxrS052aS9BNzBxaXFyZFgwOEZCUVAweithZ3ppZUFld3pxc3E5amdxamNsU1EzbFlPRzA1TitMVFRsaFFPWStsMnhOMnNjMjFsd3JFZXdWbnVBeFpjNnhwaHZMeTRIRDB4RjRNWm9iWGdTMDRBSzVlT1J6dSt5MzNhcXdHNjNzNENjUUhaaS9UQ3BTSlhnc2NmbzdVaUJCaEVoSFVRd25FRWN4YkZObURmQWJqdHlIQ2piREFZQTRIc3drNTFXanVaOXJaUjFyZlZzSFB1VS9GTkYzMUdLNTkzMHNkdUZrY0FvcGw3aVhmQnlMOFNzRE9FUS82OGZhT0VNWXRRUUJnV3BzWGNqOW43WU1MUWhJbERHdVZHT2UydUdIS2xHWkE0UjBTT1pRYXpnYjNBNnhVTWpVRW5oRzQ0R2Z0cjNlTTl2eG9HSXhMME1rbUQ3Y1dERUJQSkMvU2pjSFpGUFlSUFdqTzNBd09BZTM0QUxIMys0YWJ6dTRjdjU5NEx1QnpxQU5KYkRITVVJZ2x4L25HUHNzT2ZwTUxhdzRPNythM0V1eU45QUFHQjZVQkRoU1IybXgzL3dBdUJoSzRHK29MdDFpK3NCR0c1M1VrNEh5L2toeExnYjZTY1JaYWtCRFV0K2ZsL3dDTzN3VGtLZ3VzcmJySjduaXcvd0NVR1lFdHp0L2hvc2NkMjJveGJOeGpRQWdJTmNna0pKVXpFT0RjcURhOFZXOWh6dDcxRmhFN3FtNHJ6dFc0QnUvMVFZQ1BhS1VBN3dwdmZOWG1xODFYbXE4MVhtcTgxWG1xODFYbXE4MVhtcTgxWG1xODFYbXE4MVhtcTgxWG1xODFYbXE4MVhtcTgxVjQrYWdHUjFYb0FJQURXZi9aIi8+CjwvZGVmcz4KPC9zdmc+Cg==",this.supportedTransactionVersions=null,this._readyState="undefined"===typeof window||"undefined"===typeof document?i["b"].Unsupported:i["b"].NotDetected,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new s["d"]),this.emit("disconnect"))},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==i["b"].Unsupported&&Object(i["d"])(()=>{var t;return!(null===(t=window.trustwallet)||void 0===t||null===(t=t.solana)||void 0===t||!t.isTrust)&&(this._readyState=i["b"].Installed,this.emit("readyStateChange",this._readyState),!0)})}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){var t;return!(null===(t=this._wallet)||void 0===t||!t.isConnected)}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==i["b"].Installed)throw new s["i"];this._connecting=!0;const e=window.trustwallet.solana;if(!e.isConnected)try{await e.connect()}catch(t){throw new s["c"](null===t||void 0===t?void 0:t.message,t)}if(!e.publicKey)throw new s["a"];let r;try{r=new o["e"](e.publicKey.toBytes())}catch(t){throw new s["j"](null===t||void 0===t?void 0:t.message,t)}e.on("disconnect",this._disconnected),this._wallet=e,this._publicKey=r,this.emit("connect",r)}catch(t){throw this.emit("error",t),t}finally{this._connecting=!1}}async disconnect(){const t=this._wallet;if(t){t.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null;try{await t.disconnect()}catch(e){this.emit("error",new s["e"](null===e||void 0===e?void 0:e.message,e))}}this.emit("disconnect")}async sendTransaction(t,e,r={}){try{const i=this._wallet;if(!i)throw new s["h"];try{const{signers:n,...s}=r;t=await this.prepareTransaction(t,e,s),(null===n||void 0===n?void 0:n.length)&&t.partialSign(...n),s.preflightCommitment=s.preflightCommitment||e.commitment;const{signature:o}=await i.signAndSendTransaction(t,s);return o}catch(n){if(n instanceof s["f"])throw n;throw new s["k"](null===n||void 0===n?void 0:n.message,n)}}catch(n){throw this.emit("error",n),n}}async signTransaction(t){try{const r=this._wallet;if(!r)throw new s["h"];try{return await r.signTransaction(t)||t}catch(e){throw new s["m"](null===e||void 0===e?void 0:e.message,e)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(t){try{const r=this._wallet;if(!r)throw new s["h"];try{return await r.signAllTransactions(t)||t}catch(e){throw new s["m"](null===e||void 0===e?void 0:e.message,e)}}catch(e){throw this.emit("error",e),e}}async signMessage(t){try{const r=this._wallet;if(!r)throw new s["h"];try{const{signature:e}=await r.signMessage(t);return e}catch(e){throw new s["l"](null===e||void 0===e?void 0:e.message,e)}}catch(e){throw this.emit("error",e),e}}}},b675:function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return a})),r.d(e,"d",(function(){return c})),r.d(e,"c",(function(){return u}));r("14d9");var n,i=r("ba10"),s=r.n(i),o=r("52c3");(function(t){t["Installed"]="Installed",t["NotDetected"]="NotDetected",t["Loadable"]="Loadable",t["Unsupported"]="Unsupported"})(n||(n={}));class a extends s.a{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(t,e,r={}){const n=this.publicKey;if(!n)throw new o["h"];return t.feePayer=t.feePayer||n,t.recentBlockhash=t.recentBlockhash||(await e.getLatestBlockhash({commitment:r.preflightCommitment,minContextSlot:r.minContextSlot})).blockhash,t}}function c(t){if("undefined"===typeof window||"undefined"===typeof document)return;const e=[];function r(){const r=t();if(r)for(const t of e)t()}const n=setInterval(r,1e3);e.push(()=>clearInterval(n)),"loading"===document.readyState&&(document.addEventListener("DOMContentLoaded",r,{once:!0}),e.push(()=>document.removeEventListener("DOMContentLoaded",r))),"complete"!==document.readyState&&(window.addEventListener("load",r,{once:!0}),e.push(()=>window.removeEventListener("load",r))),r()}function u(){if(!navigator)return!1;const t=navigator.userAgent.toLowerCase(),e=t.includes("iphone")||t.includes("ipad"),r=t.includes("safari");return e&&r}},b9be:function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return h})),r.d(e,"b",(function(){return d}));var n=r("8df2"),i=r("633a"),s=(r("64b9"),r("d6e3")),o=r("753b"),a=r("d99e"),c=(r("7f6a"),r("0f06")),u=r("f7f2");const l=Object(n["struct"])([Object(n["u32"])("mintAuthorityOption"),Object(i["b"])("mintAuthority"),Object(i["c"])("supply"),Object(n["u8"])("decimals"),Object(i["a"])("isInitialized"),Object(n["u32"])("freezeAuthorityOption"),Object(i["b"])("freezeAuthority")]),h=l.span;function d(e,r,n=s["c"]){if(!r)throw new o["a"];if(!r.owner.equals(n))throw new o["c"];if(r.data.length<h)throw new o["d"];const i=l.decode(r.data.slice(0,h));let d=t.alloc(0);if(r.data.length>h){if(r.data.length<=c["a"])throw new o["d"];if(r.data.length===u["a"])throw new o["d"];if(r.data[c["a"]]!=a["b"].Mint)throw new o["i"];d=r.data.slice(c["a"]+a["a"])}return{address:e,mintAuthority:i.mintAuthorityOption?i.mintAuthority:null,supply:i.supply,decimals:i.decimals,isInitialized:i.isInitialized,freezeAuthority:i.freezeAuthorityOption?i.freezeAuthority:null,tlvData:d}}}).call(this,r("1c35").Buffer)},ba93:function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return s}));var n=r("64b9"),i=r("d6e3");function s(e,r,n,s,a=i["c"],c=i["a"]){return o(e,r,n,s,t.alloc(0),a,c)}function o(t,e,r,s,o,a=i["c"],c=i["a"]){const u=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:n["h"].programId,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1}];return new n["j"]({keys:u,programId:c,data:o})}}).call(this,r("1c35").Buffer)},bbae:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));const n=t=>{const e=t.decode.bind(t),r=t.encode.bind(t);return{decode:e,encode:r}}},bfcb:function(t,e,r){"use strict";r.d(e,"a",(function(){return u}));r("88e6"),r("70cc"),r("eb03"),r("22e5"),r("c01e"),r("fa76"),r("8306");var n=r("7ee5"),i=r("b675"),s=r("52c3"),o=r("6f02"),a=r("64b9");const c="Phantom";class u extends n["a"]{constructor(t={}){super(),this.name=c,this.url="https://phantom.app",this.icon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiB2aWV3Qm94PSIwIDAgMTA4IDEwOCIgZmlsbD0ibm9uZSI+CjxyZWN0IHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiByeD0iMjYiIGZpbGw9IiNBQjlGRjIiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00Ni41MjY3IDY5LjkyMjlDNDIuMDA1NCA3Ni44NTA5IDM0LjQyOTIgODUuNjE4MiAyNC4zNDggODUuNjE4MkMxOS41ODI0IDg1LjYxODIgMTUgODMuNjU2MyAxNSA3NS4xMzQyQzE1IDUzLjQzMDUgNDQuNjMyNiAxOS44MzI3IDcyLjEyNjggMTkuODMyN0M4Ny43NjggMTkuODMyNyA5NCAzMC42ODQ2IDk0IDQzLjAwNzlDOTQgNTguODI1OCA4My43MzU1IDc2LjkxMjIgNzMuNTMyMSA3Ni45MTIyQzcwLjI5MzkgNzYuOTEyMiA2OC43MDUzIDc1LjEzNDIgNjguNzA1MyA3Mi4zMTRDNjguNzA1MyA3MS41NzgzIDY4LjgyNzUgNzAuNzgxMiA2OS4wNzE5IDY5LjkyMjlDNjUuNTg5MyA3NS44Njk5IDU4Ljg2ODUgODEuMzg3OCA1Mi41NzU0IDgxLjM4NzhDNDcuOTkzIDgxLjM4NzggNDUuNjcxMyA3OC41MDYzIDQ1LjY3MTMgNzQuNDU5OEM0NS42NzEzIDcyLjk4ODQgNDUuOTc2OCA3MS40NTU2IDQ2LjUyNjcgNjkuOTIyOVpNODMuNjc2MSA0Mi41Nzk0QzgzLjY3NjEgNDYuMTcwNCA4MS41NTc1IDQ3Ljk2NTggNzkuMTg3NSA0Ny45NjU4Qzc2Ljc4MTYgNDcuOTY1OCA3NC42OTg5IDQ2LjE3MDQgNzQuNjk4OSA0Mi41Nzk0Qzc0LjY5ODkgMzguOTg4NSA3Ni43ODE2IDM3LjE5MzEgNzkuMTg3NSAzNy4xOTMxQzgxLjU1NzUgMzcuMTkzMSA4My42NzYxIDM4Ljk4ODUgODMuNjc2MSA0Mi41Nzk0Wk03MC4yMTAzIDQyLjU3OTVDNzAuMjEwMyA0Ni4xNzA0IDY4LjA5MTYgNDcuOTY1OCA2NS43MjE2IDQ3Ljk2NThDNjMuMzE1NyA0Ny45NjU4IDYxLjIzMyA0Ni4xNzA0IDYxLjIzMyA0Mi41Nzk1QzYxLjIzMyAzOC45ODg1IDYzLjMxNTcgMzcuMTkzMSA2NS43MjE2IDM3LjE5MzFDNjguMDkxNiAzNy4xOTMxIDcwLjIxMDMgMzguOTg4NSA3MC4yMTAzIDQyLjU3OTVaIiBmaWxsPSIjRkZGREY4Ii8+Cjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState="undefined"===typeof window||"undefined"===typeof document?i["b"].Unsupported:i["b"].NotDetected,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),t.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null,this.emit("error",new s["d"]),this.emit("disconnect"))},this._accountChanged=t=>{const e=this._publicKey;if(e){try{t=new a["e"](t.toBytes())}catch(r){return void this.emit("error",new s["j"](null===r||void 0===r?void 0:r.message,r))}e.equals(t)||(this._publicKey=t,this.emit("connect",t))}},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==i["b"].Unsupported&&(Object(i["c"])()?(this._readyState=i["b"].Loadable,this.emit("readyStateChange",this._readyState)):Object(i["d"])(()=>{var t,e;return!!(null!==(t=window.phantom)&&void 0!==t&&null!==(t=t.solana)&&void 0!==t&&t.isPhantom||null!==(e=window.solana)&&void 0!==e&&e.isPhantom)&&(this._readyState=i["b"].Installed,this.emit("readyStateChange",this._readyState),!0)}))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async autoConnect(){this.readyState===i["b"].Installed&&await this.connect()}async connect(){try{var t;if(this.connected||this.connecting)return;if(this.readyState===i["b"].Loadable){const t=encodeURIComponent(window.location.href),e=encodeURIComponent(window.location.origin);return void(window.location.href=`https://phantom.app/ul/browse/${t}?ref=${e}`)}if(this.readyState!==i["b"].Installed)throw new s["i"];this._connecting=!0;const r=(null===(t=window.phantom)||void 0===t?void 0:t.solana)||window.solana;if(!r.isConnected)try{await r.connect()}catch(e){throw new s["c"](null===e||void 0===e?void 0:e.message,e)}if(!r.publicKey)throw new s["a"];let n;try{n=new a["e"](r.publicKey.toBytes())}catch(e){throw new s["j"](null===e||void 0===e?void 0:e.message,e)}r.on("disconnect",this._disconnected),r.on("accountChanged",this._accountChanged),this._wallet=r,this._publicKey=n,this.emit("connect",n)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const t=this._wallet;if(t){t.off("disconnect",this._disconnected),t.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await t.disconnect()}catch(e){this.emit("error",new s["e"](null===e||void 0===e?void 0:e.message,e))}}this.emit("disconnect")}async sendTransaction(t,e,r={}){try{const i=this._wallet;if(!i)throw new s["h"];try{const{signers:n,...s}=r;Object(o["a"])(t)?(null===n||void 0===n?void 0:n.length)&&t.sign(n):(t=await this.prepareTransaction(t,e,s),(null===n||void 0===n?void 0:n.length)&&t.partialSign(...n)),s.preflightCommitment=s.preflightCommitment||e.commitment;const{signature:a}=await i.signAndSendTransaction(t,s);return a}catch(n){if(n instanceof s["f"])throw n;throw new s["k"](null===n||void 0===n?void 0:n.message,n)}}catch(n){throw this.emit("error",n),n}}async signTransaction(t){try{const r=this._wallet;if(!r)throw new s["h"];try{return await r.signTransaction(t)||t}catch(e){throw new s["m"](null===e||void 0===e?void 0:e.message,e)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(t){try{const r=this._wallet;if(!r)throw new s["h"];try{return await r.signAllTransactions(t)||t}catch(e){throw new s["m"](null===e||void 0===e?void 0:e.message,e)}}catch(e){throw this.emit("error",e),e}}async signMessage(t){try{const r=this._wallet;if(!r)throw new s["h"];try{const{signature:e}=await r.signMessage(t);return e}catch(e){throw new s["l"](null===e||void 0===e?void 0:e.message,e)}}catch(e){throw this.emit("error",e),e}}}},c162:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("290c"),i=r("ff6a");e.DIGEST_LENGTH=64,e.BLOCK_SIZE=128;var s=function(){function t(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return t.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},t.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},t.prototype.clean=function(){i.wipe(this._buffer),i.wipe(this._tempHi),i.wipe(this._tempLo),this.reset()},t.prototype.update=function(t,r){if(void 0===r&&(r=t.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var n=0;if(this._bytesHashed+=r,this._bufferLength>0){while(this._bufferLength<e.BLOCK_SIZE&&r>0)this._buffer[this._bufferLength++]=t[n++],r--;this._bufferLength===this.blockSize&&(a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}r>=this.blockSize&&(n=a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,t,n,r),r%=this.blockSize);while(r>0)this._buffer[this._bufferLength++]=t[n++],r--;return this},t.prototype.finish=function(t){if(!this._finished){var e=this._bytesHashed,r=this._bufferLength,i=e/536870912|0,s=e<<3,o=e%128<112?128:256;this._buffer[r]=128;for(var c=r+1;c<o-8;c++)this._buffer[c]=0;n.writeUint32BE(i,this._buffer,o-8),n.writeUint32BE(s,this._buffer,o-4),a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,o),this._finished=!0}for(c=0;c<this.digestLength/8;c++)n.writeUint32BE(this._stateHi[c],t,8*c),n.writeUint32BE(this._stateLo[c],t,8*c+4);return this},t.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},t.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},t.prototype.restoreState=function(t){return this._stateHi.set(t.stateHi),this._stateLo.set(t.stateLo),this._bufferLength=t.bufferLength,t.buffer&&this._buffer.set(t.buffer),this._bytesHashed=t.bytesHashed,this._finished=!1,this},t.prototype.cleanSavedState=function(t){i.wipe(t.stateHi),i.wipe(t.stateLo),t.buffer&&i.wipe(t.buffer),t.bufferLength=0,t.bytesHashed=0},t}();e.SHA512=s;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function a(t,e,r,i,s,a,c){var u,l,h,d,p,g,m,b,f=r[0],y=r[1],w=r[2],k=r[3],S=r[4],v=r[5],I=r[6],M=r[7],_=i[0],A=i[1],E=i[2],O=i[3],T=i[4],j=i[5],B=i[6],N=i[7];while(c>=128){for(var x=0;x<16;x++){var L=8*x+a;t[x]=n.readUint32BE(s,L),e[x]=n.readUint32BE(s,L+4)}for(x=0;x<80;x++){var P=f,R=y,z=w,U=k,W=S,C=v,D=I,F=M,V=_,K=A,Q=E,Z=O,H=T,q=j,Y=B,G=N;if(u=M,l=N,p=65535&l,g=l>>>16,m=65535&u,b=u>>>16,u=(S>>>14|T<<18)^(S>>>18|T<<14)^(T>>>9|S<<23),l=(T>>>14|S<<18)^(T>>>18|S<<14)^(S>>>9|T<<23),p+=65535&l,g+=l>>>16,m+=65535&u,b+=u>>>16,u=S&v^~S&I,l=T&j^~T&B,p+=65535&l,g+=l>>>16,m+=65535&u,b+=u>>>16,u=o[2*x],l=o[2*x+1],p+=65535&l,g+=l>>>16,m+=65535&u,b+=u>>>16,u=t[x%16],l=e[x%16],p+=65535&l,g+=l>>>16,m+=65535&u,b+=u>>>16,g+=p>>>16,m+=g>>>16,b+=m>>>16,h=65535&m|b<<16,d=65535&p|g<<16,u=h,l=d,p=65535&l,g=l>>>16,m=65535&u,b=u>>>16,u=(f>>>28|_<<4)^(_>>>2|f<<30)^(_>>>7|f<<25),l=(_>>>28|f<<4)^(f>>>2|_<<30)^(f>>>7|_<<25),p+=65535&l,g+=l>>>16,m+=65535&u,b+=u>>>16,u=f&y^f&w^y&w,l=_&A^_&E^A&E,p+=65535&l,g+=l>>>16,m+=65535&u,b+=u>>>16,g+=p>>>16,m+=g>>>16,b+=m>>>16,F=65535&m|b<<16,G=65535&p|g<<16,u=U,l=Z,p=65535&l,g=l>>>16,m=65535&u,b=u>>>16,u=h,l=d,p+=65535&l,g+=l>>>16,m+=65535&u,b+=u>>>16,g+=p>>>16,m+=g>>>16,b+=m>>>16,U=65535&m|b<<16,Z=65535&p|g<<16,y=P,w=R,k=z,S=U,v=W,I=C,M=D,f=F,A=V,E=K,O=Q,T=Z,j=H,B=q,N=Y,_=G,x%16===15)for(L=0;L<16;L++)u=t[L],l=e[L],p=65535&l,g=l>>>16,m=65535&u,b=u>>>16,u=t[(L+9)%16],l=e[(L+9)%16],p+=65535&l,g+=l>>>16,m+=65535&u,b+=u>>>16,h=t[(L+1)%16],d=e[(L+1)%16],u=(h>>>1|d<<31)^(h>>>8|d<<24)^h>>>7,l=(d>>>1|h<<31)^(d>>>8|h<<24)^(d>>>7|h<<25),p+=65535&l,g+=l>>>16,m+=65535&u,b+=u>>>16,h=t[(L+14)%16],d=e[(L+14)%16],u=(h>>>19|d<<13)^(d>>>29|h<<3)^h>>>6,l=(d>>>19|h<<13)^(h>>>29|d<<3)^(d>>>6|h<<26),p+=65535&l,g+=l>>>16,m+=65535&u,b+=u>>>16,g+=p>>>16,m+=g>>>16,b+=m>>>16,t[L]=65535&m|b<<16,e[L]=65535&p|g<<16}u=f,l=_,p=65535&l,g=l>>>16,m=65535&u,b=u>>>16,u=r[0],l=i[0],p+=65535&l,g+=l>>>16,m+=65535&u,b+=u>>>16,g+=p>>>16,m+=g>>>16,b+=m>>>16,r[0]=f=65535&m|b<<16,i[0]=_=65535&p|g<<16,u=y,l=A,p=65535&l,g=l>>>16,m=65535&u,b=u>>>16,u=r[1],l=i[1],p+=65535&l,g+=l>>>16,m+=65535&u,b+=u>>>16,g+=p>>>16,m+=g>>>16,b+=m>>>16,r[1]=y=65535&m|b<<16,i[1]=A=65535&p|g<<16,u=w,l=E,p=65535&l,g=l>>>16,m=65535&u,b=u>>>16,u=r[2],l=i[2],p+=65535&l,g+=l>>>16,m+=65535&u,b+=u>>>16,g+=p>>>16,m+=g>>>16,b+=m>>>16,r[2]=w=65535&m|b<<16,i[2]=E=65535&p|g<<16,u=k,l=O,p=65535&l,g=l>>>16,m=65535&u,b=u>>>16,u=r[3],l=i[3],p+=65535&l,g+=l>>>16,m+=65535&u,b+=u>>>16,g+=p>>>16,m+=g>>>16,b+=m>>>16,r[3]=k=65535&m|b<<16,i[3]=O=65535&p|g<<16,u=S,l=T,p=65535&l,g=l>>>16,m=65535&u,b=u>>>16,u=r[4],l=i[4],p+=65535&l,g+=l>>>16,m+=65535&u,b+=u>>>16,g+=p>>>16,m+=g>>>16,b+=m>>>16,r[4]=S=65535&m|b<<16,i[4]=T=65535&p|g<<16,u=v,l=j,p=65535&l,g=l>>>16,m=65535&u,b=u>>>16,u=r[5],l=i[5],p+=65535&l,g+=l>>>16,m+=65535&u,b+=u>>>16,g+=p>>>16,m+=g>>>16,b+=m>>>16,r[5]=v=65535&m|b<<16,i[5]=j=65535&p|g<<16,u=I,l=B,p=65535&l,g=l>>>16,m=65535&u,b=u>>>16,u=r[6],l=i[6],p+=65535&l,g+=l>>>16,m+=65535&u,b+=u>>>16,g+=p>>>16,m+=g>>>16,b+=m>>>16,r[6]=I=65535&m|b<<16,i[6]=B=65535&p|g<<16,u=M,l=N,p=65535&l,g=l>>>16,m=65535&u,b=u>>>16,u=r[7],l=i[7],p+=65535&l,g+=l>>>16,m+=65535&u,b+=u>>>16,g+=p>>>16,m+=g>>>16,b+=m>>>16,r[7]=M=65535&m|b<<16,i[7]=N=65535&p|g<<16,a+=128,c-=128}return a}function c(t){var e=new s;e.update(t);var r=e.digest();return e.clean(),r}e.hash=c},ca74:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("290c"),i=r("ff6a");e.DIGEST_LENGTH=32,e.BLOCK_SIZE=64;var s=function(){function t(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return t.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},t.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},t.prototype.clean=function(){i.wipe(this._buffer),i.wipe(this._temp),this.reset()},t.prototype.update=function(t,e){if(void 0===e&&(e=t.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var r=0;if(this._bytesHashed+=e,this._bufferLength>0){while(this._bufferLength<this.blockSize&&e>0)this._buffer[this._bufferLength++]=t[r++],e--;this._bufferLength===this.blockSize&&(a(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}e>=this.blockSize&&(r=a(this._temp,this._state,t,r,e),e%=this.blockSize);while(e>0)this._buffer[this._bufferLength++]=t[r++],e--;return this},t.prototype.finish=function(t){if(!this._finished){var e=this._bytesHashed,r=this._bufferLength,i=e/536870912|0,s=e<<3,o=e%64<56?64:128;this._buffer[r]=128;for(var c=r+1;c<o-8;c++)this._buffer[c]=0;n.writeUint32BE(i,this._buffer,o-8),n.writeUint32BE(s,this._buffer,o-4),a(this._temp,this._state,this._buffer,0,o),this._finished=!0}for(c=0;c<this.digestLength/4;c++)n.writeUint32BE(this._state[c],t,4*c);return this},t.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},t.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},t.prototype.restoreState=function(t){return this._state.set(t.state),this._bufferLength=t.bufferLength,t.buffer&&this._buffer.set(t.buffer),this._bytesHashed=t.bytesHashed,this._finished=!1,this},t.prototype.cleanSavedState=function(t){i.wipe(t.state),t.buffer&&i.wipe(t.buffer),t.bufferLength=0,t.bytesHashed=0},t}();e.SHA256=s;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function a(t,e,r,i,s){while(s>=64){for(var a=e[0],c=e[1],u=e[2],l=e[3],h=e[4],d=e[5],p=e[6],g=e[7],m=0;m<16;m++){var b=i+4*m;t[m]=n.readUint32BE(r,b)}for(m=16;m<64;m++){var f=t[m-2],y=(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10;f=t[m-15];var w=(f>>>7|f<<25)^(f>>>18|f<<14)^f>>>3;t[m]=(y+t[m-7]|0)+(w+t[m-16]|0)}for(m=0;m<64;m++){y=(((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(h&d^~h&p)|0)+(g+(o[m]+t[m]|0)|0)|0,w=((a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+(a&c^a&u^c&u)|0;g=p,p=d,d=h,h=l+y|0,l=u,u=c,c=a,a=y+w|0}e[0]+=a,e[1]+=c,e[2]+=u,e[3]+=l,e[4]+=h,e[5]+=d,e[6]+=p,e[7]+=g,i+=64,s-=64}return i}function c(t){var e=new s;e.update(t);var r=e.digest();return e.clean(),r}e.hash=c},caeb:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isWalletAdapterCompatibleStandardWallet=void 0;const n=r("74a3"),i=r("10d7");function s(t){return i.StandardConnect in t.features&&i.StandardEvents in t.features&&(n.SolanaSignAndSendTransaction in t.features||n.SolanaSignTransaction in t.features)}e.isWalletAdapterCompatibleStandardWallet=s},d6e3:function(t,e,r){"use strict";r.d(e,"c",(function(){return i})),r.d(e,"b",(function(){return s})),r.d(e,"a",(function(){return o}));var n=r("64b9");const i=new n["e"]("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),s=new n["e"]("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb"),o=new n["e"]("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new n["e"]("So11111111111111111111111111111111111111112"),new n["e"]("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP")},d99e:function(t,e,r){"use strict";var n;r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return i})),function(t){t[t["Uninitialized"]=0]="Uninitialized",t[t["Mint"]=1]="Mint",t[t["Account"]=2]="Account"}(n||(n={}));const i=1},e060:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sharedKey=e.generateKeyPair=e.generateKeyPairFromSeed=e.scalarMultBase=e.scalarMult=e.SHARED_KEY_LENGTH=e.SECRET_KEY_LENGTH=e.PUBLIC_KEY_LENGTH=void 0;const n=r("e5f1"),i=r("ff6a");function s(t){const e=new Float64Array(16);if(t)for(let r=0;r<t.length;r++)e[r]=t[r];return e}e.PUBLIC_KEY_LENGTH=32,e.SECRET_KEY_LENGTH=32,e.SHARED_KEY_LENGTH=32;const o=new Uint8Array(32);o[0]=9;const a=s([56129,1]);function c(t){let e=1;for(let r=0;r<16;r++){let n=t[r]+e+65535;e=Math.floor(n/65536),t[r]=n-65536*e}t[0]+=e-1+37*(e-1)}function u(t,e,r){const n=~(r-1);for(let i=0;i<16;i++){const r=n&(t[i]^e[i]);t[i]^=r,e[i]^=r}}function l(t,e){const r=s(),n=s();for(let i=0;i<16;i++)n[i]=e[i];c(n),c(n),c(n);for(let i=0;i<2;i++){r[0]=n[0]-65517;for(let e=1;e<15;e++)r[e]=n[e]-65535-(r[e-1]>>16&1),r[e-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);const t=r[15]>>16&1;r[14]&=65535,u(n,r,1-t)}for(let i=0;i<16;i++)t[2*i]=255&n[i],t[2*i+1]=n[i]>>8}function h(t,e){for(let r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function d(t,e,r){for(let n=0;n<16;n++)t[n]=e[n]+r[n]}function p(t,e,r){for(let n=0;n<16;n++)t[n]=e[n]-r[n]}function g(t,e,r){let n,i,s=0,o=0,a=0,c=0,u=0,l=0,h=0,d=0,p=0,g=0,m=0,b=0,f=0,y=0,w=0,k=0,S=0,v=0,I=0,M=0,_=0,A=0,E=0,O=0,T=0,j=0,B=0,N=0,x=0,L=0,P=0,R=r[0],z=r[1],U=r[2],W=r[3],C=r[4],D=r[5],F=r[6],V=r[7],K=r[8],Q=r[9],Z=r[10],H=r[11],q=r[12],Y=r[13],G=r[14],J=r[15];n=e[0],s+=n*R,o+=n*z,a+=n*U,c+=n*W,u+=n*C,l+=n*D,h+=n*F,d+=n*V,p+=n*K,g+=n*Q,m+=n*Z,b+=n*H,f+=n*q,y+=n*Y,w+=n*G,k+=n*J,n=e[1],o+=n*R,a+=n*z,c+=n*U,u+=n*W,l+=n*C,h+=n*D,d+=n*F,p+=n*V,g+=n*K,m+=n*Q,b+=n*Z,f+=n*H,y+=n*q,w+=n*Y,k+=n*G,S+=n*J,n=e[2],a+=n*R,c+=n*z,u+=n*U,l+=n*W,h+=n*C,d+=n*D,p+=n*F,g+=n*V,m+=n*K,b+=n*Q,f+=n*Z,y+=n*H,w+=n*q,k+=n*Y,S+=n*G,v+=n*J,n=e[3],c+=n*R,u+=n*z,l+=n*U,h+=n*W,d+=n*C,p+=n*D,g+=n*F,m+=n*V,b+=n*K,f+=n*Q,y+=n*Z,w+=n*H,k+=n*q,S+=n*Y,v+=n*G,I+=n*J,n=e[4],u+=n*R,l+=n*z,h+=n*U,d+=n*W,p+=n*C,g+=n*D,m+=n*F,b+=n*V,f+=n*K,y+=n*Q,w+=n*Z,k+=n*H,S+=n*q,v+=n*Y,I+=n*G,M+=n*J,n=e[5],l+=n*R,h+=n*z,d+=n*U,p+=n*W,g+=n*C,m+=n*D,b+=n*F,f+=n*V,y+=n*K,w+=n*Q,k+=n*Z,S+=n*H,v+=n*q,I+=n*Y,M+=n*G,_+=n*J,n=e[6],h+=n*R,d+=n*z,p+=n*U,g+=n*W,m+=n*C,b+=n*D,f+=n*F,y+=n*V,w+=n*K,k+=n*Q,S+=n*Z,v+=n*H,I+=n*q,M+=n*Y,_+=n*G,A+=n*J,n=e[7],d+=n*R,p+=n*z,g+=n*U,m+=n*W,b+=n*C,f+=n*D,y+=n*F,w+=n*V,k+=n*K,S+=n*Q,v+=n*Z,I+=n*H,M+=n*q,_+=n*Y,A+=n*G,E+=n*J,n=e[8],p+=n*R,g+=n*z,m+=n*U,b+=n*W,f+=n*C,y+=n*D,w+=n*F,k+=n*V,S+=n*K,v+=n*Q,I+=n*Z,M+=n*H,_+=n*q,A+=n*Y,E+=n*G,O+=n*J,n=e[9],g+=n*R,m+=n*z,b+=n*U,f+=n*W,y+=n*C,w+=n*D,k+=n*F,S+=n*V,v+=n*K,I+=n*Q,M+=n*Z,_+=n*H,A+=n*q,E+=n*Y,O+=n*G,T+=n*J,n=e[10],m+=n*R,b+=n*z,f+=n*U,y+=n*W,w+=n*C,k+=n*D,S+=n*F,v+=n*V,I+=n*K,M+=n*Q,_+=n*Z,A+=n*H,E+=n*q,O+=n*Y,T+=n*G,j+=n*J,n=e[11],b+=n*R,f+=n*z,y+=n*U,w+=n*W,k+=n*C,S+=n*D,v+=n*F,I+=n*V,M+=n*K,_+=n*Q,A+=n*Z,E+=n*H,O+=n*q,T+=n*Y,j+=n*G,B+=n*J,n=e[12],f+=n*R,y+=n*z,w+=n*U,k+=n*W,S+=n*C,v+=n*D,I+=n*F,M+=n*V,_+=n*K,A+=n*Q,E+=n*Z,O+=n*H,T+=n*q,j+=n*Y,B+=n*G,N+=n*J,n=e[13],y+=n*R,w+=n*z,k+=n*U,S+=n*W,v+=n*C,I+=n*D,M+=n*F,_+=n*V,A+=n*K,E+=n*Q,O+=n*Z,T+=n*H,j+=n*q,B+=n*Y,N+=n*G,x+=n*J,n=e[14],w+=n*R,k+=n*z,S+=n*U,v+=n*W,I+=n*C,M+=n*D,_+=n*F,A+=n*V,E+=n*K,O+=n*Q,T+=n*Z,j+=n*H,B+=n*q,N+=n*Y,x+=n*G,L+=n*J,n=e[15],k+=n*R,S+=n*z,v+=n*U,I+=n*W,M+=n*C,_+=n*D,A+=n*F,E+=n*V,O+=n*K,T+=n*Q,j+=n*Z,B+=n*H,N+=n*q,x+=n*Y,L+=n*G,P+=n*J,s+=38*S,o+=38*v,a+=38*I,c+=38*M,u+=38*_,l+=38*A,h+=38*E,d+=38*O,p+=38*T,g+=38*j,m+=38*B,b+=38*N,f+=38*x,y+=38*L,w+=38*P,i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-65536*i,n=o+i+65535,i=Math.floor(n/65536),o=n-65536*i,n=a+i+65535,i=Math.floor(n/65536),a=n-65536*i,n=c+i+65535,i=Math.floor(n/65536),c=n-65536*i,n=u+i+65535,i=Math.floor(n/65536),u=n-65536*i,n=l+i+65535,i=Math.floor(n/65536),l=n-65536*i,n=h+i+65535,i=Math.floor(n/65536),h=n-65536*i,n=d+i+65535,i=Math.floor(n/65536),d=n-65536*i,n=p+i+65535,i=Math.floor(n/65536),p=n-65536*i,n=g+i+65535,i=Math.floor(n/65536),g=n-65536*i,n=m+i+65535,i=Math.floor(n/65536),m=n-65536*i,n=b+i+65535,i=Math.floor(n/65536),b=n-65536*i,n=f+i+65535,i=Math.floor(n/65536),f=n-65536*i,n=y+i+65535,i=Math.floor(n/65536),y=n-65536*i,n=w+i+65535,i=Math.floor(n/65536),w=n-65536*i,n=k+i+65535,i=Math.floor(n/65536),k=n-65536*i,s+=i-1+37*(i-1),i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-65536*i,n=o+i+65535,i=Math.floor(n/65536),o=n-65536*i,n=a+i+65535,i=Math.floor(n/65536),a=n-65536*i,n=c+i+65535,i=Math.floor(n/65536),c=n-65536*i,n=u+i+65535,i=Math.floor(n/65536),u=n-65536*i,n=l+i+65535,i=Math.floor(n/65536),l=n-65536*i,n=h+i+65535,i=Math.floor(n/65536),h=n-65536*i,n=d+i+65535,i=Math.floor(n/65536),d=n-65536*i,n=p+i+65535,i=Math.floor(n/65536),p=n-65536*i,n=g+i+65535,i=Math.floor(n/65536),g=n-65536*i,n=m+i+65535,i=Math.floor(n/65536),m=n-65536*i,n=b+i+65535,i=Math.floor(n/65536),b=n-65536*i,n=f+i+65535,i=Math.floor(n/65536),f=n-65536*i,n=y+i+65535,i=Math.floor(n/65536),y=n-65536*i,n=w+i+65535,i=Math.floor(n/65536),w=n-65536*i,n=k+i+65535,i=Math.floor(n/65536),k=n-65536*i,s+=i-1+37*(i-1),t[0]=s,t[1]=o,t[2]=a,t[3]=c,t[4]=u,t[5]=l,t[6]=h,t[7]=d,t[8]=p,t[9]=g,t[10]=m,t[11]=b,t[12]=f,t[13]=y,t[14]=w,t[15]=k}function m(t,e){g(t,e,e)}function b(t,e){const r=s();for(let n=0;n<16;n++)r[n]=e[n];for(let n=253;n>=0;n--)m(r,r),2!==n&&4!==n&&g(r,r,e);for(let n=0;n<16;n++)t[n]=r[n]}function f(t,e){const r=new Uint8Array(32),n=new Float64Array(80),i=s(),o=s(),c=s(),f=s(),y=s(),w=s();for(let s=0;s<31;s++)r[s]=t[s];r[31]=127&t[31]|64,r[0]&=248,h(n,e);for(let s=0;s<16;s++)o[s]=n[s];i[0]=f[0]=1;for(let s=254;s>=0;--s){const t=r[s>>>3]>>>(7&s)&1;u(i,o,t),u(c,f,t),d(y,i,c),p(i,i,c),d(c,o,f),p(o,o,f),m(f,y),m(w,i),g(i,c,i),g(c,o,y),d(y,i,c),p(i,i,c),m(o,i),p(c,f,w),g(i,c,a),d(i,i,f),g(c,c,i),g(i,f,w),g(f,o,n),m(o,y),u(i,o,t),u(c,f,t)}for(let s=0;s<16;s++)n[s+16]=i[s],n[s+32]=c[s],n[s+48]=o[s],n[s+64]=f[s];const k=n.subarray(32),S=n.subarray(16);b(k,k),g(S,S,k);const v=new Uint8Array(32);return l(v,S),v}function y(t){return f(t,o)}function w(t){if(t.length!==e.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${e.SECRET_KEY_LENGTH} bytes`);const r=new Uint8Array(t),n=y(r);return{publicKey:n,secretKey:r}}function k(t){const e=(0,n.randomBytes)(32,t),r=w(e);return(0,i.wipe)(e),r}function S(t,r,n=!1){if(t.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(r.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const i=f(t,r);if(n){let t=0;for(let e=0;e<i.length;e++)t|=i[e];if(0===t)throw new Error("X25519: invalid shared key")}return i}e.scalarMult=f,e.scalarMultBase=y,e.generateKeyPairFromSeed=w,e.generateKeyPair=k,e.sharedKey=S},e1c8:function(t,e,r){"use strict";function n(t){return"version"in t}Object.defineProperty(e,"__esModule",{value:!0}),e.isVersionedTransaction=void 0,e.isVersionedTransaction=n},e512:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NodeRandomSource=void 0;const n=r("ff6a");class i{constructor(){this.isAvailable=!1,this.isInstantiated=!1;{const t=r(25);t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let e=this._crypto.randomBytes(t);if(e.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");const r=new Uint8Array(t);for(let n=0;n<r.length;n++)r[n]=e[n];return(0,n.wipe)(e),r}}e.NodeRandomSource=i},e5f1:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomStringForEntropy=e.randomString=e.randomUint32=e.randomBytes=e.defaultRandomSource=void 0;const n=r("5cc4"),i=r("290c"),s=r("ff6a");function o(t,r=e.defaultRandomSource){return r.randomBytes(t)}function a(t=e.defaultRandomSource){const r=o(4,t),n=(0,i.readUint32LE)(r);return(0,s.wipe)(r),n}e.defaultRandomSource=new n.SystemRandomSource,e.randomBytes=o,e.randomUint32=a;const c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function u(t,r=c,n=e.defaultRandomSource){if(r.length<2)throw new Error("randomString charset is too short");if(r.length>256)throw new Error("randomString charset is too long");let i="";const a=r.length,u=256-256%a;while(t>0){const e=o(Math.ceil(256*t/u),n);for(let n=0;n<e.length&&t>0;n++){const s=e[n];s<u&&(i+=r.charAt(s%a),t--)}(0,s.wipe)(e)}return i}function l(t,r=c,n=e.defaultRandomSource){const i=Math.ceil(t/(Math.log(r.length)/Math.LN2));return u(i,r,n)}e.randomString=u,e.randomStringForEntropy=l},e729:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));const n="solana:signMessage"},ed96:function(t,e,r){"use strict";function n(t,e){var r=t>>>16&65535,n=65535&t,i=e>>>16&65535,s=65535&e;return n*s+(r*s+n*i<<16>>>0)|0}function i(t,e){return t+e|0}function s(t,e){return t-e|0}function o(t,e){return t<<e|t>>>32-e}function a(t,e){return t<<32-e|t>>>e}function c(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t}Object.defineProperty(e,"__esModule",{value:!0}),e.mul=Math.imul||n,e.add=i,e.sub=s,e.rotl=o,e.rotr=a,e.isInteger=Number.isInteger||c,e.MAX_SAFE_INTEGER=9007199254740991,e.isSafeInteger=function(t){return e.isInteger(t)&&t>=-e.MAX_SAFE_INTEGER&&t<=e.MAX_SAFE_INTEGER}},f4f9:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("477e"),i=r("ff6a"),s=function(){function t(t,e,r,i){void 0===r&&(r=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=t,this._info=i;var s=n.hmac(this._hash,r,e);this._hmac=new n.HMAC(t,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var t=this._counter[0];if(0===t)throw new Error("hkdf: cannot expand more");this._hmac.reset(),t>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(t){for(var e=new Uint8Array(t),r=0;r<e.length;r++)this._bufpos===this._buffer.length&&this._fillBuffer(),e[r]=this._buffer[this._bufpos++];return e},t.prototype.clean=function(){this._hmac.clean(),i.wipe(this._buffer),i.wipe(this._counter),this._bufpos=0},t}();e.HKDF=s},f7f2:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r("8df2"),i=r("633a");r("d6e3"),r("753b");const s=Object(n["struct"])([Object(n["u8"])("m"),Object(n["u8"])("n"),Object(i["a"])("isInitialized"),Object(i["b"])("signer1"),Object(i["b"])("signer2"),Object(i["b"])("signer3"),Object(i["b"])("signer4"),Object(i["b"])("signer5"),Object(i["b"])("signer6"),Object(i["b"])("signer7"),Object(i["b"])("signer8"),Object(i["b"])("signer9"),Object(i["b"])("signer10"),Object(i["b"])("signer11")]),o=s.span},fbe3:function(t,e,r){"use strict";var n;r.d(e,"a",(function(){return n})),function(t){t[t["InitializeMint"]=0]="InitializeMint",t[t["InitializeAccount"]=1]="InitializeAccount",t[t["InitializeMultisig"]=2]="InitializeMultisig",t[t["Transfer"]=3]="Transfer",t[t["Approve"]=4]="Approve",t[t["Revoke"]=5]="Revoke",t[t["SetAuthority"]=6]="SetAuthority",t[t["MintTo"]=7]="MintTo",t[t["Burn"]=8]="Burn",t[t["CloseAccount"]=9]="CloseAccount",t[t["FreezeAccount"]=10]="FreezeAccount",t[t["ThawAccount"]=11]="ThawAccount",t[t["TransferChecked"]=12]="TransferChecked",t[t["ApproveChecked"]=13]="ApproveChecked",t[t["MintToChecked"]=14]="MintToChecked",t[t["BurnChecked"]=15]="BurnChecked",t[t["InitializeAccount2"]=16]="InitializeAccount2",t[t["SyncNative"]=17]="SyncNative",t[t["InitializeAccount3"]=18]="InitializeAccount3",t[t["InitializeMultisig2"]=19]="InitializeMultisig2",t[t["InitializeMint2"]=20]="InitializeMint2",t[t["GetAccountDataSize"]=21]="GetAccountDataSize",t[t["InitializeImmutableOwner"]=22]="InitializeImmutableOwner",t[t["AmountToUiAmount"]=23]="AmountToUiAmount",t[t["UiAmountToAmount"]=24]="UiAmountToAmount",t[t["InitializeMintCloseAuthority"]=25]="InitializeMintCloseAuthority",t[t["TransferFeeExtension"]=26]="TransferFeeExtension",t[t["ConfidentialTransferExtension"]=27]="ConfidentialTransferExtension",t[t["DefaultAccountStateExtension"]=28]="DefaultAccountStateExtension",t[t["Reallocate"]=29]="Reallocate",t[t["MemoTransferExtension"]=30]="MemoTransferExtension",t[t["CreateNativeMint"]=31]="CreateNativeMint",t[t["InitializeNonTransferableMint"]=32]="InitializeNonTransferableMint",t[t["InterestBearingMintExtension"]=33]="InterestBearingMintExtension",t[t["CpiGuardExtension"]=34]="CpiGuardExtension",t[t["InitializePermanentDelegate"]=35]="InitializePermanentDelegate",t[t["TransferHookExtension"]=36]="TransferHookExtension",t[t["MetadataPointerExtension"]=39]="MetadataPointerExtension",t[t["GroupPointerExtension"]=40]="GroupPointerExtension",t[t["GroupMemberPointerExtension"]=41]="GroupMemberPointerExtension"}(n||(n={}))},ff6a:function(t,e,r){"use strict";function n(t){for(var e=0;e<t.length;e++)t[e]=0;return t}Object.defineProperty(e,"__esModule",{value:!0}),e.wipe=n}}]);