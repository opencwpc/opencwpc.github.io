(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Kline-21833f8f"],{"0563":function(e,t,i){"use strict";var s=i("7a23");const o={key:0,class:"count"},r={class:"block"},a={class:"block"},l={class:"block"},n={class:"block"},_={key:1,class:"risk"};function d(e,t,i,d,u,h){const c=Object(s["resolveComponent"])("count-down"),m=Object(s["resolveComponent"])("Warning"),v=Object(s["resolveComponent"])("el-icon");return this.$store.state.tokenPrice||this.tokenInfo.priceUSD?Object(s["createCommentVNode"])("",!0):(Object(s["openBlock"])(),Object(s["createElementBlock"])("div",o,[u.showTime&&h.time>0?(Object(s["openBlock"])(),Object(s["createBlock"])(c,{key:0,class:"count-down mt-8",time:h.time,format:"DD:HH:mm:ss",onFinish:h.finishTime},{default:Object(s["withCtx"])(i=>[Object(s["createElementVNode"])("span",r,[Object(s["createTextVNode"])(Object(s["toDisplayString"])(i.days<10?"0"+i.days:i.days)+" ",1),Object(s["createElementVNode"])("span",null,Object(s["toDisplayString"])(e.$t("DD")),1)]),t[0]||(t[0]=Object(s["createElementVNode"])("span",{class:"colon"},":",-1)),Object(s["createElementVNode"])("span",a,[Object(s["createTextVNode"])(Object(s["toDisplayString"])(i.hours<10?"0"+i.hours:i.hours)+" ",1),Object(s["createElementVNode"])("span",null,Object(s["toDisplayString"])(e.$t("HH")),1)]),t[1]||(t[1]=Object(s["createElementVNode"])("span",{class:"colon"},":",-1)),Object(s["createElementVNode"])("span",l,[Object(s["createTextVNode"])(Object(s["toDisplayString"])(i.minutes<10?"0"+i.minutes:i.minutes)+" ",1),Object(s["createElementVNode"])("span",null,Object(s["toDisplayString"])(e.$t("MM")),1)]),t[2]||(t[2]=Object(s["createElementVNode"])("span",{class:"colon"},":",-1)),Object(s["createElementVNode"])("span",n,[Object(s["createTextVNode"])(Object(s["toDisplayString"])(i.seconds<10?"0"+i.seconds:i.seconds)+" ",1),Object(s["createElementVNode"])("span",null,Object(s["toDisplayString"])(e.$t("SS")),1)])]),_:1},8,["time","onFinish"])):(Object(s["openBlock"])(),Object(s["createElementBlock"])("div",_,[Object(s["createVNode"])(v,{class:"no-inherit",style:{color:"rgb(248, 190, 70)"}},{default:Object(s["withCtx"])(()=>[Object(s["createVNode"])(m)]),_:1}),Object(s["createTextVNode"])(" "+Object(s["toDisplayString"])(e.$t("unknownRisk")),1)]))]))}var u=i("cdc2"),h={data(){return{visible1:!1,activeGroup:0,showTime:!0}},emits:["init"],components:{CountDown:u["a"]},computed:{tokenInfo(){return this.$store.state.tokenInfo},time(){return this.$store.state.tokenInfo.countDown}},methods:{finishTime(){this.showTime=!1,this.$store.dispatch("getToken"),this.$emit("init")}}},c=(i("1e23"),i("6b0d")),m=i.n(c);const v=m()(h,[["render",d],["__scopeId","data-v-29d28493"]]);t["a"]=v},"1e23":function(e,t,i){"use strict";i("c000")},"5a55":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_find_last_index_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("71b4"),core_js_modules_es_array_find_last_index_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_find_last_index_js__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("14d9"),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_reduce_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("13d5"),core_js_modules_es_array_reduce_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_reduce_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_object_has_own_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("0541"),core_js_modules_es_object_has_own_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_object_has_own_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_esnext_iterator_constructor_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("0643"),core_js_modules_esnext_iterator_constructor_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_esnext_iterator_constructor_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_esnext_iterator_every_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("76d6"),core_js_modules_esnext_iterator_every_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_esnext_iterator_every_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_esnext_iterator_filter_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("2382"),core_js_modules_esnext_iterator_filter_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_esnext_iterator_filter_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_esnext_iterator_find_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("fffc"),core_js_modules_esnext_iterator_find_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_esnext_iterator_find_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_esnext_iterator_for_each_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("4e3e"),core_js_modules_esnext_iterator_for_each_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_esnext_iterator_for_each_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_esnext_iterator_map_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("a573"),core_js_modules_esnext_iterator_map_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_esnext_iterator_map_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_esnext_iterator_reduce_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("9d4a"),core_js_modules_esnext_iterator_reduce_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_esnext_iterator_reduce_js__WEBPACK_IMPORTED_MODULE_10__),_utils_constants_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("c9d9"),_api_index_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("365c"),good_storage__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("335a"),_components_unknownRisk__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("0563"),_components_dialog_dialogRemind__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("75a0"),bignumber_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("901e"),bignumber_js__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(bignumber_js__WEBPACK_IMPORTED_MODULE_16__),lodash__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("2ef0"),lodash__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_17__);function switchResolution(e){var t,i;const s={"1D":"1440","1W":"10080"};let o=s[e]||e;var r,a;null!==(t=o)&&void 0!==t&&null!==(i=t.endsWith)&&void 0!==i&&i.call(t,"S")?o=null===(r=o)||void 0===r||null===(a=r.slice)||void 0===a?void 0:a.call(r,0,-1):o*=60;return o}const supportSecChains=["solana","bsc","eth","base","tron"],resolutionMap={"1D":"1440","1W":"10080","1S":"s1"};__webpack_exports__["a"]={name:"TradingView",components:{UnknownRisk:_components_unknownRisk__WEBPACK_IMPORTED_MODULE_14__["a"],DialogRemind:_components_dialog_dialogRemind__WEBPACK_IMPORTED_MODULE_15__["a"]},data(){return{dialogVisible_remind:!1,widget:null,symbolInfo:null,datafeed:{onReady:this.onReady,resolveSymbol:this.resolveSymbol,getBars:this.getBars,subscribeBars:this.subscribeBars,unsubscribeBars:this.unsubscribeBars,getMarks:this.getMarks},onRealtimeCallback:null,onResetCacheNeededCallback:null,resolution:localStorage.getItem("resolution")||"15",oldResolution:localStorage.getItem("resolution")||"15",chartData:[],initLoading:!1,loading:!0,loadingChange:!1,setMarks:null,showSwapKline:eval(localStorage.getItem("showSwapKline")||!0),showSwapKlineButton:null,showMarket:eval(localStorage.getItem("showMarket")||!1),bgColor:"#0A0B0D",kline_dot_show_obj:good_storage__WEBPACK_IMPORTED_MODULE_13__["a"].get("kline_dot_show_obj")||{trade:!0,16:!1,19:!1,25:!0,30:!1,31:!0},statisticsNumList:[],initChartData:[],kline_marks:good_storage__WEBPACK_IMPORTED_MODULE_13__["a"].get("kline_marks")||{},hlineId:"",isReady:!1,dataTime:0,lastKline:null,onHistoryCallback:null,isResetKline:!1,Timer:null}},computed:{arr_dot(){var e;let t=[];var i;(null===(e=this.statisticsNumList)||void 0===e?void 0:e.length)>0&&(null===(i=this.statisticsNumList)||void 0===i||i.forEach(e=>{(null===e||void 0===e?void 0:e.total_address)>0&&t.push({id:e.type,name:(null===e||void 0===e?void 0:e[this.$f.filterLanguage(this.$store.getters.language)])+`(${null===e||void 0===e?void 0:e.total_address})`})}));return t},klineParams(){return this.$store.state.wsKlineParams},myTxHistoryList(){return this.$store.state.myTxHistoryList},tokenAddress(){var e;return this.$store.state.id?null===(e=this.$f.getAddressAndChainFromId(_utils_constants_js__WEBPACK_IMPORTED_MODULE_11__["f"][this.$store.state.id]||this.$store.state.id))||void 0===e?void 0:e.address:""},tokenInfo(){return this.$store.state.tokenInfo},circulation(){var e,t,i,s;let o=new bignumber_js__WEBPACK_IMPORTED_MODULE_16___default.a(null===(e=this.tokenInfo)||void 0===e?void 0:e.total).minus(null===(t=this.tokenInfo)||void 0===t?void 0:t.lock_amount_dec).minus(null===(i=this.tokenInfo)||void 0===i?void 0:i.other_amount_dec).minus(null===(s=this.tokenInfo)||void 0===s?void 0:s.burn_amount_dec);return o.lt(0)?0:o},currentPrice(){return this.$store.state.tokenPrice||this.tokenInfo.priceUSD},circulationValue(){return this.circulation*Number(this.currentPrice||0)||0},marketCap(){var e,t,i;return(null===(e=this.tokenInfo)||void 0===e?void 0:e.lock_amount_dec)+(null===(t=this.tokenInfo)||void 0===t?void 0:t.other_amount_dec)+(null===(i=this.tokenInfo)||void 0===i?void 0:i.burn_amount_dec)>0?this.$f.formatNumber2(this.circulationValue||0,2,4,1e4):this.$f.formatNumber2(this.$store.state.marketCap||this.circulationValue||this.$store.getters.initMarketCap||0,2,4,1e4)},currentAccount(){return this.$store.state.currentAccount||this.$store.getters.botWallet||""}},watch:{"$store.state.id"(e){e&&this.getTotalholders()},"$store.state.ws.isConnected"(e){e&&this.subscribeKline()},"pair.value"(e){if(e&&"-"!==e&&!this.loading){var t,i,s,o;this.loadingChange=!0;let l=null===(t=this.$store.state)||void 0===t||null===(t=t.pair)||void 0===t?void 0:t.chain,n=l&&supportSecChains.includes(l);var r,a;if(!n&&"1S"===this.resolution)this.resolution="15",localStorage.setItem("resolution","15"),this.$router.replace({name:"Kline",params:{id:null===(r=this.$route.params)||void 0===r?void 0:r.id},query:{...null===(a=this.$route)||void 0===a?void 0:a.query,interval:this.resolution}});null===(i=this.onResetCacheNeededCallback)||void 0===i||i.call(this),null===(s=this.widget)||void 0===s||null===(o=s.setSymbol)||void 0===o||o.call(s,this.pair.symbol+"---"+e,this.resolution,()=>{this.loadingChange=!1,this.hlineId="",this.createPositionPriceLine()}),this.saveStudy()}},"$store.state.documentVisible"(e){e&&(this.renderKline(),this.resetKline())},"$store.state.ws.klineData"(e){var t,i;if(e.key!==(resolutionMap[this.resolution]||this.resolution)||this.loadingChange||this.$store.state.pair.address!==e.pairAddress)return;let s=e.value;s.change&&this.$store.commit("setTokenInfoPriceChange",s.change);const o={};s.volume_24h&&(o.volume_24=s.volume_24h),s.amount_24h&&(o.amount_24=s.amount_24h),s.count_24h&&(o.exchangeTime_24=s.count_24h),Object.keys(o).length>0&&this.$store.commit("setTokenInfo",{...this.$store.state.tokenInfo,...o}),s.high_24h&&this.$store.commit("setState",{name:"highestPrice24",value:s.high_24h}),s.low_24h&&this.$store.commit("setState",{name:"lowestPrice24",value:s.low_24h});let r={time:Number(1e3*s.time),open:Number(s.open),high:Number(s.high),low:Number(s.low),close:Number(s.close),volume:Number(s.volume)};var a,l,n,_;this.showMarket&&(r={time:Number(1e3*s.time),open:(null===(a=new bignumber_js__WEBPACK_IMPORTED_MODULE_16___default.a(s.open).times(this.circulation))||void 0===a?void 0:a.toString())/1e3,high:(null===(l=new bignumber_js__WEBPACK_IMPORTED_MODULE_16___default.a(s.high).times(this.circulation))||void 0===l?void 0:l.toString())/1e3,low:(null===(n=new bignumber_js__WEBPACK_IMPORTED_MODULE_16___default.a(s.low).times(this.circulation))||void 0===n?void 0:n.toString())/1e3,close:(null===(_=new bignumber_js__WEBPACK_IMPORTED_MODULE_16___default.a(s.close).times(this.circulation))||void 0===_?void 0:_.toString())/1e3,volume:Number(s.volume)});const d=this.chartData.length-1,u=this.chartData[d]||{};if(r=this.$f.formatKlineLast(r,u),this.$store.state.documentVisible&&(r.time>=((null===u||void 0===u?void 0:u.time)||0)&&(this.lastKline={...r}),this.renderKline()),r.time>((null===u||void 0===u?void 0:u.time)||0))this.chartData.push(r);else if((null===u||void 0===u?void 0:u.time)===r.time)this.chartData[d]=r;else{const e=this.chartData.findLastIndex(e=>e.time===r.time);-1!==e&&this.chartData[e].volume<=r.volume&&(this.chartData[e]=r)}let h=(null===(t=this.chartData)||void 0===t||null===(t=t[this.chartData.length-1])||void 0===t?void 0:t.close)||0;h>0&&s.close>0&&this.$store.state.pair.address===e.pairAddress&&(this.$store.commit("setTokenInfoPrice",s.close),s.close>this.$store.state.highestPrice24&&this.$store.commit("setState",{name:"highestPrice24",value:s.close}),s.close<this.$store.state.lowestPrice24&&this.$store.commit("setState",{name:"lowestPrice24",value:s.close})),(null===(i=this.chartData)||void 0===i?void 0:i.length)>900&&this.chartData.splice(0,this.chartData.length-900)},currentAccount:{handler:async function(e){if(e){if(this.kline_dot_show_obj["trade"]=!0,this.kline_dot_show_obj["trade"]){let e=await this.dealOtherMarkData(this.resolution,"trade",this.$t("mine"));this.kline_marks["trade"]=e,good_storage__WEBPACK_IMPORTED_MODULE_13__["a"].set("kline_marks",this.kline_marks),this.setMarks&&this.setMarksData(this.resolution,this.setMarks)}}else{var t,i,s,o,r;if(this.kline_dot_show_obj["trade"]=!1,good_storage__WEBPACK_IMPORTED_MODULE_13__["a"].set("kline_dot_show_obj",this.kline_dot_show_obj),this.kline_marks["trade"]&&delete this.kline_marks["trade"],good_storage__WEBPACK_IMPORTED_MODULE_13__["a"].set("kline_marks",this.kline_marks),null!==(t=this.widget)&&void 0!==t&&t.activeChart)null===(i=this.widget)||void 0===i||null===(s=i.activeChart)||void 0===s||null===(o=(r=s.call(i)).clearMarks)||void 0===o||o.call(r);this.setMarks&&this.setMarksData(this.resolution,this.setMarks)}},deep:!0},"$store.state.mode"(){"Token"!=this.$route.name&&"Brc"!=this.$route.name||(this.loading=!0,this.createWidget())},"$store.state.ws.tx":{handler:async function(e){var t,i,s;let o=null===(t=this.$store.state)||void 0===t||null===(t=t.bot)||void 0===t||null===(t=t.userInfo)||void 0===t||null===(t=t.addresses)||void 0===t||null===(i=t.find)||void 0===i||null===(i=i.call(t,t=>(null===t||void 0===t?void 0:t.chain)===(null===e||void 0===e?void 0:e.chain)))||void 0===i?void 0:i.address,r=this.$store.state.currentAccount||o,a=this.$store.state.tokenInfo.address,l=a===(null===e||void 0===e?void 0:e.from_address)||a===(null===e||void 0===e?void 0:e.to_address);if(e&&l&&(null===(s=e.wallet_address)||void 0===s?void 0:s.toLowerCase())===(null===r||void 0===r?void 0:r.toLowerCase())){let t=this.isBuy(e)?"buy":"sell",i={time:e.time};if(i[t]={volume:this.getAmountUSD(e),amount:this.getAmount(e),txns:1},this.kline_dot_show_obj["trade"]){let e=await this.dealOtherMarkData(this.resolution,"trade",this.$t("mine"),i);this.kline_marks["trade"]=e,good_storage__WEBPACK_IMPORTED_MODULE_13__["a"].set("kline_marks",this.kline_marks),this.setMarks&&this.setMarksData(this.resolution,this.setMarks)}}},deep:!0},"$store.state.ws.simple_tx":{handler:async function(e){var t,i,s;let o=null===(t=this.$store.state)||void 0===t||null===(t=t.bot)||void 0===t||null===(t=t.userInfo)||void 0===t||null===(t=t.addresses)||void 0===t||null===(i=t.find)||void 0===i||null===(i=i.call(t,t=>(null===t||void 0===t?void 0:t.chain)===(null===e||void 0===e?void 0:e.chain)))||void 0===i?void 0:i.address,r=this.$store.state.currentAccount||o,a=this.$store.state.tokenInfo.address,l=a===(null===e||void 0===e?void 0:e.target);if(e&&l&&(null===(s=e.maker)||void 0===s?void 0:s.toLowerCase())===(null===r||void 0===r?void 0:r.toLowerCase())){let t=this.isBuy(e)?"buy":"sell",i={time:e.time};if(i[t]={volume:this.getAmountUSD(e),amount:this.getAmount(e),txns:1},this.kline_dot_show_obj["trade"]){let e=await this.dealOtherMarkData(this.resolution,"trade",this.$t("mine"),i);this.kline_marks["trade"]=e,good_storage__WEBPACK_IMPORTED_MODULE_13__["a"].set("kline_marks",this.kline_marks),this.setMarks&&this.setMarksData(this.resolution,this.setMarks)}}},deep:!0},"$store.state.bot.allChainsBalances"(e){var t;(null===e||void 0===e?void 0:e.length)>0&&this.isReady&&this.widget&&null!==(t=this.widget)&&void 0!==t&&t.activeChart&&this.createPositionPriceLine()}},props:{pair:{type:Object}},created(){if(this.$route.query.interval){let e=["1S","1","5","15","30","60","120","240","1D","1W"];e.includes(this.$route.query.interval)?this.resolution=this.$route.query.interval:this.resolution="15"}this.init()},methods:{init(){this.loading=!0,this.Timer&&clearTimeout(this.Timer),this.Timer=setTimeout(()=>{this.pair.value&&"-"!==this.pair.value&&this.$store.state.pair.value==this.pair.value?this.getKlineHistory().then(async()=>{}).finally(()=>{this.createWidget()}):this.createWidget(),this.kline_marks={},localStorage.removeItem("kline_marks"),localStorage.removeItem("kline_marks_my"),this.getTotalholders()},500)},resetKline(){var e;this.isResetKline=!0,null===(e=this.onResetCacheNeededCallback)||void 0===e||e.call(this),this.widget.activeChart().resetData()},renderKline:Object(lodash__WEBPACK_IMPORTED_MODULE_17__["throttle"])((function(){this.chartData.forEach((e,t)=>{var i;if(e.time>=(null===(i=this.lastKline)||void 0===i?void 0:i.time)){var s;let i=null===(s=this.chartData)||void 0===s?void 0:s[t-1],o=i?this.$f.formatKlineLast(e,i):{...e};null!==i&&void 0!==i&&i.close&&(null===i||void 0===i?void 0:i.close)!==(null===o||void 0===o?void 0:o.open)&&(o.open=null===i||void 0===i?void 0:i.close),this.onRealtimeCallback&&!this.loadingChange&&this.onRealtimeCallback(o)}})}),500,{leading:!1,trailing:!0}),getTotalholders(){var e;let{chain:t}=this.$f.getAddressAndChainFromId(this.$route.params.id),i=null===(e=this.$store.state.ave_globalConfig)||void 0===e?void 0:e.chains_support_data_analysis_insider_sniper_V3,s=(null===i||void 0===i?void 0:i[t])||{};void 0!==s&&Object(_api_index_js__WEBPACK_IMPORTED_MODULE_12__["Nd"])({token_id:this.$store.state.id}).then(e=>{this.statisticsNumList=Array.isArray(e)?null===e||void 0===e?void 0:e.filter(e=>{var t;return null===(t=["16","19","25","30","31"])||void 0===t?void 0:t.includes(e.type)}):[],this.$store.state.statisticsNumList=Array.isArray(e)?e:[]}).catch(e=>{this.statisticsNumList=[],this.$store.state.statisticsNumList=[]}).finally(()=>{})},isBuy(e){if(e.from_address&&e.from_address===this.tokenAddress)return!1;if(e.to_address&&e.to_address===this.tokenAddress)return!0;let t=e.amount0In>0?e.token0Address:e.token1Address;return t!==this.tokenAddress},getPrice(e){if(e.from_address&&e.from_address===this.tokenAddress)return this.$f.formatNumber(e.from_price_usd);if(e.to_address&&e.to_address===this.tokenAddress)return this.$f.formatNumber(e.to_price_usd);let t=0;return t=this.tokenAddress===e.token0Address?e.token0PriceUSD||0:e.token1PriceUSD||0,this.$f.formatNumber(t)},getAmount(e){if("direction"in e&&"target"in e)return Number(e.target_amt||0);if(e.from_address&&e.from_address===this.tokenAddress)return this.$f.formatNumber(e.from_amount);if(e.to_address&&e.to_address===this.tokenAddress)return this.$f.formatNumber(e.to_amount);let t=0;return t=e.amount0In>0?this.tokenAddress===e.token0Address?e.amount0In:e.amount1Out:this.tokenAddress===e.token1Address?e.amount1In:e.amount0Out,this.$f.formatNumber(t)},getAmountUSD(e){return"direction"in e&&"target"in e?Number(e.target_amt||0)*e.price_u:e.from_address&&e.from_address===this.tokenAddress?this.$f.formatNumber(Number(e.from_amount)*Number(e.from_price_usd)):e.to_address&&e.to_address===this.tokenAddress?this.$f.formatNumber(Number(e.to_amount)*Number(e.to_price_usd)):this.$f.formatNumber(e.amountUSD)},async createWidget(){var e,t,i;const s="100%",o="100%",r="tv_chart_container",a=window.TradingView.widget;let l=null===(e=this.$store.state)||void 0===e||null===(e=e.pair)||void 0===e?void 0:e.chain,n=l&&supportSecChains.includes(l);if(localStorage["tradingview.IntervalWidget.quicks"]&&localStorage.tradingViewIntervalSet){let e=JSON.parse(localStorage["tradingview.IntervalWidget.quicks"]);var _,d;if(!n&&e.includes("1S")?(e=e.filter(e=>"1S"!==e),localStorage["tradingview.IntervalWidget.quicks"]=JSON.stringify(e)):n&&!e.includes("1S")&&(e.unshift("1S"),localStorage["tradingview.IntervalWidget.quicks"]=JSON.stringify(e)),!e.includes(this.resolution))this.resolution="15",localStorage.setItem("resolution","15"),this.$router.replace({name:"Kline",params:{id:null===(_=this.$route.params)||void 0===_?void 0:_.id},query:{...null===(d=this.$route)||void 0===d?void 0:d.query,interval:this.resolution}})}else{let e=n?["1S","15","5","1","30","60","120","240","1D","1W"]:["1","5","15","30","60","120","240","1D","1W"];localStorage["tradingview.IntervalWidget.quicks"]=JSON.stringify(e),localStorage.tradingViewIntervalSet="true"}if(this.widget=new a({symbol:(null===(t=this.pair)||void 0===t||null===(t=t.symbol)||void 0===t?void 0:t.replace("<","ï¼œ"))||" ",width:s,height:o,interval:this.resolution,theme:"light"===this.$store.state.mode?"Light":"Dark",container:r,datafeed:this.datafeed,library_path:this.$store.state.s3BaseUrl+"charting_library/",custom_css_url:"night-3.css",locale:this.formatLang(this.$store.getters.language),disabled_features:["header_symbol_search","header_fullscreen_button","header_screenshot","header_compare","volume_force_overlay","header_undo_redo","header_settings","header_saveload","timeframes_toolbar"],enabled_features:[...n?["seconds_resolution"]:[]],charts_storage_url:location.host,charts_storage_api_version:"2.0",timezone:this.$f.getTimezone(),time_frames:[],overrides:{volumePaneSize:"small","paneProperties.topMargin":"10","paneProperties.backgroundType":"solid","paneProperties.background":"light"===this.$store.state.mode?"#fff":this.bgColor,"paneProperties.vertGridProperties.style":2,"paneProperties.legendProperties.showLegend":!1,"paneProperties.legendProperties.showStudyArguments":!0,"paneProperties.legendProperties.showStudyTitles":!0,"paneProperties.legendProperties.showStudyValues":!0,"paneProperties.legendProperties.showSeriesTitle":!0,"paneProperties.legendProperties.showSeriesOHLC":!0,"mainSeriesProperties.candleStyle.drawWick":!0,"mainSeriesProperties.candleStyle.drawBorder":!0,"mainSeriesProperties.candleStyle.barColorsOnPrevClose":!1,"mainSeriesProperties.hollowCandleStyle.drawWick":!0,"mainSeriesProperties.hollowCandleStyle.drawBorder":!0,"mainSeriesProperties.haStyle.drawWick":!0,"mainSeriesProperties.haStyle.drawBorder":!0,"mainSeriesProperties.haStyle.barColorsOnPrevClose":!1,"mainSeriesProperties.barStyle.barColorsOnPrevClose":!1,"mainSeriesProperties.barStyle.dontDrawOpen":!1,"mainSeriesProperties.lineStyle.linewidth":2,"mainSeriesProperties.lineStyle.priceSource":"close","mainSeriesProperties.areaStyle.linewidth":2,"mainSeriesProperties.areaStyle.priceSource":"close"}}),localStorage["tradingview.chartproperties"]){let e=JSON.parse(localStorage["tradingview.chartproperties"]);e.paneProperties.background="light"===this.$store.state.mode?"#fff":this.bgColor,e.paneProperties.backgroundType="solid",localStorage["tradingview.chartproperties"]=JSON.stringify(e)}this.widget.onChartReady(()=>{var e,t;document.getElementById(r).childNodes[0].setAttribute("style",`visibility:visible;;width:${s};height:${o};`),this.saveStudy(),"light"===this.$store.state.mode&&this.widget.applyOverrides({"scalesProperties.textColor":"#333"}),this.loading=!1,null===(e=this.widget)||void 0===e||null===(t=e.activeChart)||void 0===t||null===(t=t.call(e))||void 0===t||t.onIntervalChanged().subscribe(null,e=>{var t,i,s;this.resolution!==e&&(this.oldResolution=this.resolution,this.resolution=e,localStorage.setItem("resolution",e),this.$router.replace({name:"Kline",params:{id:null===(t=this.$route.params)||void 0===t?void 0:t.id},query:{...null===(i=this.$route)||void 0===i?void 0:i.query,interval:this.resolution}}),null===(s=this.onResetCacheNeededCallback)||void 0===s||s.call(this))}),this.hlineId="",this.createStudy()}),null===(i=this.widget)||void 0===i||i.headerReady().then(()=>{var e,t,i;let s=null===(e=this.widget)||void 0===e?void 0:e.createButton();s&&(s.innerHTML=this.showMarket?'<span style="font-size: 12px;cursor: pointer;">Price / <span style="color:#286DFF">MCap</span></span>':'<span style="font-size: 12px;cursor: pointer;"><span style="color:#286DFF">Price</span> / MCap</span>',s.onclick=()=>{this.showMarket=!this.showMarket,localStorage.setItem("showMarket",this.showMarket),s.innerHTML=this.showMarket?'<span style="font-size: 12px;cursor: pointer;">Price / <span style="color:#286DFF">MCap</span></span>':'<span style="font-size: 12px;cursor: pointer;"><span style="color:#286DFF">Price</span> / MCap</span>',this.createWidget()});let o=null===(t=this.widget)||void 0===t?void 0:t.createButton();this.arr_dot.forEach(e=>{"trade"==e.id||o&&(o.innerHTML+=this.kline_dot_show_obj[e.id]?`<span id="dot-${e.id}" class="${e.id}" style="font-size: 12px;color:#286DFF; cursor: pointer;display: flex;align-items: center; margin-right: 10px" >${e.name}</span>`:`<span id="dot-${e.id}" class="${e.id}" style="font-size: 12px; cursor: pointer;display: flex;align-items: center; margin-right: 10px">${e.name}</span>`)}),o.onclick=async e=>{var t;let i=null===(t=e.target.classList)||void 0===t?void 0:t.value,s=e.target.innerHTML;if(1==this.kline_dot_show_obj[i])this.kline_dot_show_obj[i]=!1,this.kline_marks[i]&&delete this.kline_marks[i];else{this.kline_dot_show_obj[i]=!0;let e=await this.dealOtherMarkData(this.resolution,i,s);this.kline_marks[i]=e}good_storage__WEBPACK_IMPORTED_MODULE_13__["a"].set("kline_dot_show_obj",this.kline_dot_show_obj),good_storage__WEBPACK_IMPORTED_MODULE_13__["a"].set("kline_marks",this.kline_marks),1==this.kline_dot_show_obj[i]?e.target.style.color="#286DFF":e.target.style.color="#d1d4dc",this.setMarks&&this.setMarksData(this.resolution,this.setMarks)};let r=null===(i=this.widget)||void 0===i?void 0:i.createButton({align:"right"});r.innerHTML='<div style="display: flex;align-items: center;cursor:pointer;padding: 7px 5px 7px 0;border-radius: 6px;" onMouseOver="this.style.background=\'none\'"  onMouseLeave="this.style.background=\'none\'"><img width="18" height="18" src="https://ave.s3.ap-east-1.amazonaws.com/im/alert.png" /></div>',r.onclick=()=>{this.dialogVisible_remind=!0,this.$refs.remind.init()}})},onReady(e){var t;let i=null===(t=this.$store.state)||void 0===t||null===(t=t.pair)||void 0===t?void 0:t.chain,s=i&&supportSecChains.includes(i),o={supported_resolutions:["1S","1","5","15","30","60","120","240","1D","1W"],supports_marks:!0,supports_timescale_marks:!0,supports_time:!0};s||(o.supported_resolutions=["1","5","15","30","60","120","240","1D","1W"]),setTimeout(()=>e(o))},resolveSymbol(e,t,i){try{var s,o,r,a,l,n,_;let i=null===(s=this.$store.state)||void 0===s||null===(s=s.pair)||void 0===s?void 0:s.chain,d=i&&supportSecChains.includes(i),u={name:null===e||void 0===e||null===(o=e.toLocaleUpperCase)||void 0===o?void 0:o.call(e),ticker:null===e||void 0===e||null===(r=e.toLocaleUpperCase)||void 0===r?void 0:r.call(e),description:(null===e||void 0===e||null===(a=e.toLocaleUpperCase)||void 0===a||null===(a=a.call(e))||void 0===a||null===(l=a.split)||void 0===l||null===(l=l.call(a,"---"))||void 0===l?void 0:l[0])||"",exchange:"Ave.ai",timezone:this.$f.getTimezone(),format:10,minmov:1,minmov2:0,pricescale:(null===(n=this.pair)||void 0===n?void 0:n.price)>0?10**this.$f.formatDecimals(null===(_=this.pair)||void 0===_?void 0:_.price).precision:1e7,volume_precision:10,fractional:!1,session:"24x7",has_intraday:!0,intraday_multipliers:["1","5","15","30","60","120","240"],has_seconds:d,seconds_multipliers:["1"],has_daily:!0,has_weekly_and_monthly:!0,supported_resolutions:["1S","1","5","15","30","60","120","240","1D","1W"],data_status:"streaming",visible_plots_set:"ohlcv"};d||(u.supported_resolutions=["1","5","15","30","60","120","240","1D","1W"],u.seconds_multipliers=[]),setTimeout(()=>t(u),0)}catch(d){i(d)}},async getMarks(e,t,i,s,o){this.setMarksData(o,s),this.setMarks=s},async setMarksData(e,t){var i,s;let o=[];for(let n in this.kline_marks)Object.hasOwn(this.kline_marks,n)&&(o=o.concat(this.kline_marks[n]));var r,a,l;(o=null===(i=o)||void 0===i?void 0:i.map((e,t)=>({...e,id:t})),null!==(s=this.widget)&&void 0!==s&&s.activeChart)&&(null===(r=this.widget)||void 0===r||null===(a=r.activeChart)||void 0===a||null===(a=a.call(r))||void 0===a||null===(l=a.clearMarks)||void 0===l||l.call(a));t&&t(o)},dealMarkData(e,t,i,s){let o=switchResolution(t),r=e.map(e=>({...e})),a={},l=[];r.forEach(e=>{let t=parseInt(e.time/Number(o));void 0===a[t]&&(a[t]=l.length,l[a[t]]=[]),l[a[t]].push(e)});let n=[];l.forEach(e=>{let t=e.filter(e=>this.isBuy(e)),i=e.filter(e=>!this.isBuy(e));t.length>0&&n.push(t),i.length>0&&n.push(i)});let _=n.map(e=>{let t=e.length,r=e[0],a=e.reduce((e,t)=>Number(this.getAmountUSD(e))+Number(this.getAmountUSD(t)),0),l=1===t?this.$f.formatDate(r.time,"MM-DD HH:mm"):this.$f.formatDate(e[e.length-1].time,"MM-DD HH:mm")+" ~ "+this.$f.formatDate(r.time,"MM-DD HH:mm"),n=r.time-r.time%Number(o);return{id:r.time+"trade",time:n,type:"trade",color:this.isBuy(r)?{background:i}:{background:s},label:this.isBuy(r)?"B":"S",labelFontColor:"#fff",minSize:14,hoveredBorderWidth:0,position:this.isBuy(r)?"below":"above",borderWidth:0,text:`${this.isBuy(r)?this.$t("buy"):this.$t("sell")}  $${this.$f.formatNumber2(a)}  ${l}`}});return _},getKlineProfilingTags(e,t,i){var s;if(0===this.chartData.length)return Promise.resolve([]);let o=parseInt(((null===(s=this.initChartData[0])||void 0===s?void 0:s.time)||0)/1e3),r=parseInt(Date.now()/1e3);return new Promise((s,a)=>{Object(_api_index_js__WEBPACK_IMPORTED_MODULE_12__["nc"])(e,o,r,t,i).then(e=>{let t=Array.isArray(e)?e:[];s(t)}).catch(e=>{a([])})})},getKlineTxTags(e){var t;if(0===this.chartData.length||!this.$store.state.currentAccount&&!this.$store.getters.botWallet)return Promise.resolve([]);let i=parseInt(((null===(t=this.initChartData[0])||void 0===t?void 0:t.time)||0)/1e3),s=parseInt(Date.now()/1e3);return new Promise((t,o)=>{Object(_api_index_js__WEBPACK_IMPORTED_MODULE_12__["pc"])(e,i,s).then(e=>{let i=Array.isArray(e)?e:[];t(i)}).catch(e=>{o([])})})},async dealOtherMarkData(e,t,i,s){let o=switchResolution(e||this.resolution),r=[];"trade"==t?(s?(r=good_storage__WEBPACK_IMPORTED_MODULE_13__["a"].get("kline_marks_my"),r.push(s)):r=await this.getKlineTxTags(o),good_storage__WEBPACK_IMPORTED_MODULE_13__["a"].set("kline_marks_my",r)):(r=await this.getKlineProfilingTags(o,t,this.pair.value),r=r.map(e=>{var t,i,s;let o=null===(t=this.initChartData)||void 0===t?void 0:t.find(t=>t.time==1e3*e.time);var r,a;0==(null===(i=e.sell)||void 0===i?void 0:i.volume)&&o&&(e.sell.volume=((null===o||void 0===o?void 0:o.close)+(null===o||void 0===o?void 0:o.open))/2*(null===(r=e.sell)||void 0===r?void 0:r.amount));0==(null===(s=e.buy)||void 0===s?void 0:s.volume)&&o&&(e.buy.volume=((null===o||void 0===o?void 0:o.close)+(null===o||void 0===o?void 0:o.open))/2*(null===(a=e.buy)||void 0===a?void 0:a.amount));return e}),"30"==t&&(r=r.map(e=>{var t,i,s,o,r,a,l,n,_,d,u,h,c,m;if(e.sell&&e.buy)(null===(t=e.buy)||void 0===t?void 0:t.volume)>(null===(i=e.sell)||void 0===i?void 0:i.volume)?(e.buy={...e.buy,netflow:(null===(s=e.buy)||void 0===s?void 0:s.volume)-(null===(o=e.sell)||void 0===o?void 0:o.volume),inflow:null===(r=e.buy)||void 0===r?void 0:r.volume,txns_in:null===(a=e.buy)||void 0===a?void 0:a.txns,outflow:null===(l=e.sell)||void 0===l?void 0:l.volume,txns_out:null===(n=e.sell)||void 0===n?void 0:n.txns},delete e.sell):(e.sell={...e.sell,netflow:(null===(_=e.sell)||void 0===_?void 0:_.volume)-(null===(d=e.buy)||void 0===d?void 0:d.volume),inflow:null===(u=e.buy)||void 0===u?void 0:u.volume,txns_in:null===(h=e.buy)||void 0===h?void 0:h.txns,outflow:null===(c=e.sell)||void 0===c?void 0:c.volume,txns_out:null===(m=e.sell)||void 0===m?void 0:m.txns},delete e.buy);else if(e.buy){var v,p,g;e.buy={...e.buy,netflow:null===(v=e.buy)||void 0===v?void 0:v.volume,inflow:null===(p=e.buy)||void 0===p?void 0:p.volume,txns_in:null===(g=e.buy)||void 0===g?void 0:g.txns,outflow:0,txns_out:0}}else{var b,f,k;e.sell={...e.sell,netflow:null===(b=e.sell)||void 0===b?void 0:b.volume,inflow:0,txns_in:0,outflow:null===(f=e.sell)||void 0===f?void 0:f.volume,txns_out:null===(k=e.sell)||void 0===k?void 0:k.txns}}return e})));let a=r.map(e=>({...e})),l={},n=[];a.forEach(e=>{let t=parseInt(e.time/Number(o));void 0===l[t]&&(l[t]=n.length,n[l[t]]=[]),n[l[t]].push(e)});let _=[];null===n||void 0===n||n.forEach(e=>{let t=e.map(e=>({time:e.time,...e["buy"],add:e["add"],type:"buy"}));t=t.filter(e=>void 0!==e.volume);let i=e.map(e=>({time:e.time,...e["sell"],remove:e["remove"],type:"sell"}));i=i.filter(e=>void 0!==e.volume),t.length>0&&_.push(t),i.length>0&&_.push(i)});let d=_.map((e,s)=>{var r;let a=e.length,l=e[0],n=e.reduce((e,t)=>e+Number(t.amount),0),_=e.reduce((e,t)=>e+Number(t.volume),0),d=e.reduce((e,t)=>Number(e)+Number(t.txns),0),u=e.reduce((e,t)=>{var i;return e+Number(null===(i=t["add"])||void 0===i?void 0:i.amount)},0),h=e.reduce((e,t)=>{var i;return e+Number(null===(i=t["add"])||void 0===i?void 0:i.volume)},0),c=e.reduce((e,t)=>{var i;return e+Number(null===(i=t["add"])||void 0===i?void 0:i.txns)},0),m=e.reduce((e,t)=>{var i;return e+Number(null===(i=t["remove"])||void 0===i?void 0:i.amount)},0),v=e.reduce((e,t)=>{var i;return e+Number(null===(i=t["remove"])||void 0===i?void 0:i.volume)},0),p=e.reduce((e,t)=>{var i;return e+Number(null===(i=t["remove"])||void 0===i?void 0:i.txns)},0),g=1===a?this.$f.formatDate(l.time,"YYYY-MM-DD HH:mm"):this.$f.formatDate(e[e.length-1].time,"YYYY-MM-DD HH:mm")+" ~ "+this.$f.formatDate(l.time,"YYYY-MM-DD HH:mm"),b=l.time-l.time%Number(o),f="buy"==l.type?this.$t("bought"):this.$t("sold"),k=25==t&&c>0?`\n${25==t&&c>0?this.$t("dev_add_liq"):""}\n${25==t&&c>0?this.$t("amountU")+": "+this.$f.formatNumber2(h||0):""}\n${25==t&&c>0?this.$t("amountB")+": "+this.$f.formatNumber2(u||0):""}\n${25==t&&c>0?this.$t("Txs")+": "+this.$f.formatNumber2(c||0):""}`:"",D=25==t&&p>0?`\n${25==t&&p>0?this.$t("dev_remove_liq"):""}\n${25==t&&p>0?this.$t("amountU")+": "+this.$f.formatNumber2(v||0):""}\n${25==t&&p>0?this.$t("amountB")+": "+this.$f.formatNumber2(m||0):""}\n${25==t&&p>0?this.$t("Txs")+": "+this.$f.formatNumber2(p||0):""}`:"";i=null===(r=i)||void 0===r||null===(r=r.split("("))||void 0===r?void 0:r[0];let E=`${i} ${f}\n${this.$t("amountB")}: ${this.$f.formatNumber2(n)}\n${this.$t("amountU")}: $${this.$f.formatNumber2(_)}\n${this.$t("price")}: $${this.$f.formatNumber2(_/(n||1))}\n${this.$t("Txs")}: ${this.$f.formatNumber2(d)}\n`+k+D+g;if("30"==t){let t=e.reduce((e,t)=>Number(e)+Number(t.netflow),0),s=e.reduce((e,t)=>Number(e)+Number(t.inflow),0),o=e.reduce((e,t)=>Number(e)+Number(t.txns_in),0),r=e.reduce((e,t)=>Number(e)+Number(t.outflow),0),a=e.reduce((e,t)=>Number(e)+Number(t.txns_out),0);E=`${i}  ${"buy"==l.type?this.$t("netInflow"):this.$t("netOutflow")}\n${this.$t("inflow")}:  $${this.$f.formatNumber2(s)+"("+this.$f.formatNumber2(o)+")"}\n${this.$t("outflow")}:  $${this.$f.formatNumber2(r)+"("+this.$f.formatNumber2(a)+")"}\n${"buy"==l.type?this.$t("netInflow"):this.$t("netOutflow")}: $${this.$f.formatNumber2(t)}\n`+g}let w=localStorage.getItem("ave_globalConfig"),O="https://www.iconaves.com/";try{var P;if(w)O=null===(P=JSON.parse(w))||void 0===P?void 0:P.token_logo_url}catch($){}return{id:s,time:b,type:l.type,color:{background:"transparent",padding:"10",border:"transparent"},imageUrl:"buy"==l.type?`${O}signals/marks/mark-buy-${t}.png`:`${O}signals/marks/mark-sell-${t}.png`,labelFontColor:"#fff",minSize:14,hoveredBorderWidth:0,borderWidth:0,text:E}});return d},async getBars(e,t,i,s,o){const{from:r,to:a,firstDataRequest:l}=i;this.onHistoryCallback=s;try{if(!this.initLoading)return this.initLoading=!0,s([],{noData:!0}),void this.chartData.forEach(e=>{this.onRealtimeCallback(e)});var n,_;if(this.resolution!==t)this.resolution=t,localStorage.setItem("resolution",t),this.$router.replace({name:"Kline",params:{id:null===(n=this.$route.params)||void 0===n?void 0:n.id},query:{...null===(_=this.$route)||void 0===_?void 0:_.query,interval:this.resolution}});l&&(this.loadingChange=!0,this.getKlineHistory(t,()=>{0===this.chartData.length&&this.isResetKline||(s([],{noData:!0}),this.chartData.forEach(e=>{this.onRealtimeCallback(e)})),this.loadingChange=!1,this.isResetKline=!1}))}catch(d){o(d)}},subscribeBars(e,t,i,s,o){this.setData(),t===this.resolution&&(this.onRealtimeCallback=i,this.onResetCacheNeededCallback=o)},unsubscribeBars(e){},getKlineHistory(e=this.resolution,t=null){var i;let s=null===(i=this.$store.state)||void 0===i||null===(i=i.pair)||void 0===i?void 0:i.chain,o=s&&supportSecChains.includes(s);o||"1S"!==e||(e="15");let r=switchResolution(e);return new Promise(i=>{if(this.$route.params.id&&this.$store.state.pair.value==this.pair.value){let s=["kline",this.$store.state.pair.address,e,this.$store.state.pair.chain],o=this.$store.state.wsKlineParams,a=null===s||void 0===s?void 0:s.every((e,t)=>e===o[t]);a||this.unsubscribeKline(),Object(_api_index_js__WEBPACK_IMPORTED_MODULE_12__["lc"])(r,this.pair.value).then(async e=>{var s;let o=Array.isArray(e)?e:[];this.showMarket?this.initChartData=null===o||void 0===o?void 0:o.map(e=>{var t,i,s,o;return{...e,open:(null===(t=new bignumber_js__WEBPACK_IMPORTED_MODULE_16___default.a(e.open).times(this.circulation))||void 0===t?void 0:t.toString())/1e3,high:(null===(i=new bignumber_js__WEBPACK_IMPORTED_MODULE_16___default.a(e.high).times(this.circulation))||void 0===i?void 0:i.toString())/1e3,low:(null===(s=new bignumber_js__WEBPACK_IMPORTED_MODULE_16___default.a(e.low).times(this.circulation))||void 0===s?void 0:s.toString())/1e3,close:(null===(o=new bignumber_js__WEBPACK_IMPORTED_MODULE_16___default.a(e.close).times(this.circulation))||void 0===o?void 0:o.toString())/1e3}}):this.initChartData=null===o||void 0===o?void 0:o.map(e=>({...e})),this.chartData=null===(s=this.initChartData)||void 0===s?void 0:s.map(e=>({...e}));for(let t=0;t<this.arr_dot.length;t++){let e=this.arr_dot[t];if(this.kline_dot_show_obj[e.id]){let t=await this.dealOtherMarkData(this.resolution,e.id,e.name);this.kline_marks[e.id]=t}}good_storage__WEBPACK_IMPORTED_MODULE_13__["a"].set("kline_marks",this.kline_marks),t&&t(),i(e),a||this.subscribeKline()}).catch(e=>{i([])}).finally(()=>{})}else i([])})},setData(e=this.chartData){Array.isArray(e)},subscribeKline(){if(this.$store.state.ws.socket&&this.$store.state.ws.isConnected&&this.resolution&&this.$store.state.pair.address){var e,t;const o={"1D":"1440","1W":"10080"};let r=o[this.resolution]||this.resolution;var i,s;if(null!==(e=r)&&void 0!==e&&null!==(t=e.endsWith)&&void 0!==t&&t.call(e,"S"))r="s"+(null===(i=r)||void 0===i||null===(s=i.slice)||void 0===s?void 0:s.call(i,0,-1));else r="k"+r;let a={jsonrpc:"2.0",method:"subscribe",params:["kline",this.$store.state.pair.address,r,this.$store.state.pair.chain],id:1};this.$store.commit("setState",{name:"wsKlineParams",value:a.params}),this.$store.commit("wsSend",a)}},unsubscribeKline(){if(this.$store.state.ws.socket&&this.$store.state.ws.isConnected&&this.klineParams&&Array.isArray(this.klineParams)&&4===this.klineParams.length&&this.klineParams[1]){let e={jsonrpc:"2.0",method:"unsubscribe",params:this.klineParams,id:1};this.$store.commit("wsSend",e)}},formatLang(e){let t={en:"en","zh-cn":"zh","zh-tw":"zh_TW"};return t[e]||"en"},saveStudy(){var e;if(null!==(e=this.widget)&&void 0!==e&&e.activeChart){var t,i;let e=null===(t=this.widget)||void 0===t||null===(i=t.activeChart)||void 0===i?void 0:i.call(t).getAllStudies();good_storage__WEBPACK_IMPORTED_MODULE_13__["a"].set("tradingViewStudies",e.filter(e=>"Volume"!==e.name))}},createStudy(){var e;if(null!==(e=this.widget)&&void 0!==e&&e.activeChart){let e=good_storage__WEBPACK_IMPORTED_MODULE_13__["a"].get("tradingViewStudies");if(e.forEach(e=>{var t,i;null===(t=this.widget)||void 0===t||null===(i=t.activeChart)||void 0===i||i.call(t).createStudy(e.name,!1,!1)}),localStorage["tradingview.chart.favoriteLibraryIndicators"]){let e=JSON.parse(localStorage["tradingview.chart.favoriteLibraryIndicators"]);e.forEach(e=>{var t,i;null===(t=this.widget)||void 0===t||null===(i=t.activeChart)||void 0===i||i.call(t).createStudy(e,!1,!1)})}this.createPositionPriceLine()}},createPositionPriceLine(){var e,t,i,s,o,r,a;if(this.isReady=!0,!this.widget||null===(e=this.widget)||void 0===e||!e.activeChart)return;let l=this.$store.state.bot.allChainsBalances||[];const n=null===(t=this.widget)||void 0===t||null===(i=t.activeChart)||void 0===i?void 0:i.call(t);let _=null===l||void 0===l||null===(s=l.find)||void 0===s?void 0:s.call(l,e=>{var t,i,s,o;return(null===e||void 0===e||null===(t=e.token)||void 0===t||null===(i=t.toLowerCase)||void 0===i?void 0:i.call(t))===(null===(s=this.$store.state.tokenInfo)||void 0===s||null===(s=s.address)||void 0===s||null===(o=s.toLowerCase)||void 0===o?void 0:o.call(s))}),d=this.hlineId;if(!n||!_&&!d)return;let u=Number(null===_||void 0===_?void 0:_.avgPrice)||0;var h;this.showMarket&&(u=(null===(h=new bignumber_js__WEBPACK_IMPORTED_MODULE_16___default.a(u).times(this.circulation))||void 0===h?void 0:h.toString())/1e3);if(d){var c;let e=null===n||void 0===n||null===(c=n.getShapeById)||void 0===c?void 0:c.call(n,d);var m;if(!_&&e)return null===n||void 0===n||null===(m=n.removeEntity)||void 0===m||m.call(n,d),void(this.hlineId="");if(e)return void e.setPoints([{price:u}])}d=null===n||void 0===n||null===(o=n.createShape)||void 0===o?void 0:o.call(n,{price:u},{shape:"horizontal_line",lock:!0,disableSelection:!0,disableSave:!0,text:this.$t("averagePositionPrice"),overrides:{linecolor:"#999999",linewidth:1,linestyle:2}}),this.hlineId=d,null===n||void 0===n||null===(r=n.getShapeById)||void 0===r||null===(r=r.call(n,d))||void 0===r||null===(a=r.setProperties)||void 0===a||a.call(r,{textcolor:"#999999",showLabel:!0,horzLabelsAlign:"right",vertLabelsAlign:"middle",bold:!0,fontSize:14})}}}},6720:function(e,t,i){"use strict";i("fbf7")},c000:function(e,t,i){},ec9a:function(e,t,i){"use strict";i.r(t);var s=i("7a23");const o={class:"k-line-chart-container",id:"k-line-chart-container"};function r(e,t,i,r,a,l){var n,_,d;const u=Object(s["resolveComponent"])("TradingView");return Object(s["openBlock"])(),Object(s["createElementBlock"])("div",{class:Object(s["normalizeClass"])(["main-container watermark",e.$store.state.mode])},[Object(s["createElementVNode"])("div",o,[null!==(n=e.$store.state.pair)&&void 0!==n&&n.value&&"-"!==(null===(_=e.$store.state.pair)||void 0===_?void 0:_.value)?(Object(s["openBlock"])(),Object(s["createBlock"])(u,{ref:"tradingView",pair:e.$store.state.pair,key:null===(d=e.$store.state.pair)||void 0===d?void 0:d.value},null,8,["pair"])):Object(s["createCommentVNode"])("",!0)])],2)}function a(e,t,i,o,r,a){const l=Object(s["resolveComponent"])("loading"),n=Object(s["resolveComponent"])("unknown-risk"),_=Object(s["resolveComponent"])("dialog-remind");return Object(s["openBlock"])(),Object(s["createElementBlock"])(s["Fragment"],null,[Object(s["createVNode"])(l,{style:{"z-index":"1"},active:r.loading,"onUpdate:active":t[0]||(t[0]=e=>r.loading=e),"can-cancel":!1,loader:"dots",opacity:1,backgroundColor:"light"===e.$store.state.mode?"#fff":"#0A0B0D",color:"#3F80F7","is-full-page":!1},null,8,["active","backgroundColor"]),t[2]||(t[2]=Object(s["createElementVNode"])("div",{id:"tv_chart_container",style:{height:"100%",width:"100%"}},null,-1)),Object(s["createVNode"])(n,{onInit:a.getKlineHistory},null,8,["onInit"]),Object(s["createVNode"])(_,{ref:"remind",modelValue:r.dialogVisible_remind,"onUpdate:modelValue":t[1]||(t[1]=e=>r.dialogVisible_remind=e)},null,8,["modelValue"])],64)}var l=i("5a55"),n=i("6b0d"),_=i.n(n);const d=_()(l["a"],[["render",a]]);var u=d,h=i("335a"),c=i("4360"),m=i("9923"),v={name:"Kline",data(){return{show:!0,i18n:m["a"]}},computed:{language(){return this.$store.getters.language}},beforeRouteEnter(e,t,i){e.query.theme&&("light"==e.query.theme?(c["a"].state.mode="light",h["a"].set("mode","light")):(c["a"].state.mode="dark",h["a"].set("mode","dark"))),e.query.lang&&c["a"].commit("setLanguage",e.query.lang),e.params.id&&c["a"].commit("setId",e.params.id),i()},mounted(){this.$store.state.id&&(this.$store.state.ws.isConnected||this.$store.dispatch("initWs")),this.$store.dispatch("getGlobalConfig"),this.getToken(),this.$i18n.locale=this.$store.getters.language},components:{TradingView:u},methods:{async getToken(){this.$store.dispatch("getToken").then(e=>{this.$route.query.pair&&this.$store.commit("setInitToken",this.$route.query.pair)})}}};i("6720");const p=_()(v,[["render",r],["__scopeId","data-v-7e09213f"]]);t["default"]=p},fbf7:function(e,t,i){}}]);